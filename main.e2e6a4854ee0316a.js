"use strict";(self.webpackChunkpokeweb=self.webpackChunkpokeweb||[]).push([[792],{76:(Ln,At,ye)=>{ye.d(At,{Am:()=>uo,Bd:()=>q,FA:()=>De,Fy:()=>Pn,I9:()=>ba,Im:()=>Qr,Ku:()=>Gs,Ll:()=>Fe,T9:()=>Yt,Uj:()=>mt,XA:()=>Je,ZQ:()=>pt,bD:()=>ns,cY:()=>Ot,eX:()=>we,g:()=>ze,gR:()=>or,hp:()=>Cr,jZ:()=>Jt,lT:()=>yi,lV:()=>fn,nr:()=>Ca,sr:()=>tt,tD:()=>Bt,u:()=>ae,zW:()=>_e,zw:()=>Ne});const ne=function(Q){const $=[];let ee=0;for(let Ve=0;Ve<Q.length;Ve++){let fe=Q.charCodeAt(Ve);fe<128?$[ee++]=fe:fe<2048?($[ee++]=fe>>6|192,$[ee++]=63&fe|128):55296==(64512&fe)&&Ve+1<Q.length&&56320==(64512&Q.charCodeAt(Ve+1))?(fe=65536+((1023&fe)<<10)+(1023&Q.charCodeAt(++Ve)),$[ee++]=fe>>18|240,$[ee++]=fe>>12&63|128,$[ee++]=fe>>6&63|128,$[ee++]=63&fe|128):($[ee++]=fe>>12|224,$[ee++]=fe>>6&63|128,$[ee++]=63&fe|128)}return $},Tt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,$){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ve=[];for(let fe=0;fe<Q.length;fe+=3){const dt=Q[fe],Pt=fe+1<Q.length,nn=Pt?Q[fe+1]:0,Tn=fe+2<Q.length,li=Tn?Q[fe+2]:0;let ht=(15&nn)<<2|li>>6,co=63&li;Tn||(co=64,Pt||(ht=64)),Ve.push(ee[dt>>2],ee[(3&dt)<<4|nn>>4],ee[ht],ee[co])}return Ve.join("")},encodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Q):this.encodeByteArray(ne(Q),$)},decodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Q):function(Q){const $=[];let ee=0,Ve=0;for(;ee<Q.length;){const fe=Q[ee++];if(fe<128)$[Ve++]=String.fromCharCode(fe);else if(fe>191&&fe<224){const dt=Q[ee++];$[Ve++]=String.fromCharCode((31&fe)<<6|63&dt)}else if(fe>239&&fe<365){const Tn=((7&fe)<<18|(63&Q[ee++])<<12|(63&Q[ee++])<<6|63&Q[ee++])-65536;$[Ve++]=String.fromCharCode(55296+(Tn>>10)),$[Ve++]=String.fromCharCode(56320+(1023&Tn))}else{const dt=Q[ee++],Pt=Q[ee++];$[Ve++]=String.fromCharCode((15&fe)<<12|(63&dt)<<6|63&Pt)}}return $.join("")}(this.decodeStringToByteArray(Q,$))},decodeStringToByteArray(Q,$){this.init_();const ee=$?this.charToByteMapWebSafe_:this.charToByteMap_,Ve=[];for(let fe=0;fe<Q.length;){const dt=ee[Q.charAt(fe++)],nn=fe<Q.length?ee[Q.charAt(fe)]:0;++fe;const li=fe<Q.length?ee[Q.charAt(fe)]:64;++fe;const kt=fe<Q.length?ee[Q.charAt(fe)]:64;if(++fe,null==dt||null==nn||null==li||null==kt)throw new Be;Ve.push(dt<<2|nn>>4),64!==li&&(Ve.push(nn<<4&240|li>>2),64!==kt&&Ve.push(li<<6&192|kt))}return Ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}};class Be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mt=function(Q){return function(Q){const $=ne(Q);return Tt.encodeByteArray($,!0)}(Q).replace(/\./g,"")},ae=function(Q){try{return Tt.decodeString(Q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function Ne(Q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return $}for(const ee in $)!$.hasOwnProperty(ee)||!_t(ee)||(Q[ee]=Ne(Q[ee],$[ee]));return Q}function _t(Q){return"__proto__"!==Q}const Rt=()=>{try{return function Ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Q=process.env.__FIREBASE_DEFAULTS__;return Q?JSON.parse(Q):void 0})()||(()=>{if(typeof document>"u")return;let Q;try{Q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=Q&&ae(Q[1]);return $&&JSON.parse($)})()}catch(Q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Q}`)}},Yt=()=>{var Q;return null===(Q=Rt())||void 0===Q?void 0:Q.config},Je=Q=>{var $;return null===($=Rt())||void 0===$?void 0:$[`_${Q}`]};class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,ee)=>{this.resolve=$,this.reject=ee})}wrapCallback($){return(ee,Ve)=>{ee?this.reject(ee):this.resolve(Ve),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(ee):$(ee,Ve))}}}function Pn(Q,$){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ve=$||"demo-project",fe=Q.iat||0,dt=Q.sub||Q.user_id;if(!dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pt=Object.assign({iss:`https://securetoken.google.com/${Ve}`,aud:Ve,iat:fe,exp:fe+3600,auth_time:fe,sub:dt,user_id:dt,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[mt(JSON.stringify({alg:"none",type:"JWT"})),mt(JSON.stringify(Pt)),""].join(".")}function pt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Jt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function Fe(){var Q;const $=null===(Q=Rt())||void 0===Q?void 0:Q.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function q(){return"object"==typeof self&&self.self===self}function tt(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function fn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yi(){const Q=pt();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Ca(){return!Fe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){try{return"object"==typeof indexedDB}catch{return!1}}function we(){return new Promise((Q,$)=>{try{let ee=!0;const Ve="validate-browser-context-for-indexeddb-analytics-module",fe=self.indexedDB.open(Ve);fe.onsuccess=()=>{fe.result.close(),ee||self.indexedDB.deleteDatabase(Ve),Q(!0)},fe.onupgradeneeded=()=>{ee=!1},fe.onerror=()=>{var dt;$((null===(dt=fe.error)||void 0===dt?void 0:dt.message)||"")}}catch(ee){$(ee)}})}class ze extends Error{constructor($,ee,Ve){super(ee),this.code=$,this.customData=Ve,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}}class De{constructor($,ee,Ve){this.service=$,this.serviceName=ee,this.errors=Ve}create($,...ee){const Ve=ee[0]||{},fe=`${this.service}/${$}`,dt=this.errors[$],Pt=dt?function nt(Q,$){return Q.replace(mn,(ee,Ve)=>{const fe=$[Ve];return null!=fe?String(fe):`<${Ve}?>`})}(dt,Ve):"Error";return new ze(fe,`${this.serviceName}: ${Pt} (${fe}).`,Ve)}}const mn=/\{\$([^}]+)}/g;function or(Q,$){return Object.prototype.hasOwnProperty.call(Q,$)}function Qr(Q){for(const $ in Q)if(Object.prototype.hasOwnProperty.call(Q,$))return!1;return!0}function ns(Q,$){if(Q===$)return!0;const ee=Object.keys(Q),Ve=Object.keys($);for(const fe of ee){if(!Ve.includes(fe))return!1;const dt=Q[fe],Pt=$[fe];if(Gi(dt)&&Gi(Pt)){if(!ns(dt,Pt))return!1}else if(dt!==Pt)return!1}for(const fe of Ve)if(!ee.includes(fe))return!1;return!0}function Gi(Q){return null!==Q&&"object"==typeof Q}function uo(Q){const $=[];for(const[ee,Ve]of Object.entries(Q))Array.isArray(Ve)?Ve.forEach(fe=>{$.push(encodeURIComponent(ee)+"="+encodeURIComponent(fe))}):$.push(encodeURIComponent(ee)+"="+encodeURIComponent(Ve));return $.length?"&"+$.join("&"):""}function ba(Q){const $={};return Q.replace(/^\?/,"").split("&").forEach(Ve=>{if(Ve){const[fe,dt]=Ve.split("=");$[decodeURIComponent(fe)]=decodeURIComponent(dt)}}),$}function Cr(Q){const $=Q.indexOf("?");if(!$)return"";const ee=Q.indexOf("#",$);return Q.substring($,ee>0?ee:void 0)}function Bt(Q,$){const ee=new ui(Q,$);return ee.subscribe.bind(ee)}class ui{constructor($,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{$(this)}).catch(Ve=>{this.error(Ve)})}next($){this.forEachObserver(ee=>{ee.next($)})}error($){this.forEachObserver(ee=>{ee.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,ee,Ve){let fe;if(void 0===$&&void 0===ee&&void 0===Ve)throw new Error("Missing Observer.");fe=function Sr(Q,$){if("object"!=typeof Q||null===Q)return!1;for(const ee of $)if(ee in Q&&"function"==typeof Q[ee])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:ee,complete:Ve},void 0===fe.next&&(fe.next=zi),void 0===fe.error&&(fe.error=zi),void 0===fe.complete&&(fe.complete=zi);const dt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?fe.error(this.finalError):fe.complete()}catch{}}),this.observers.push(fe),dt}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,$)}sendOne($,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{ee(this.observers[$])}catch(Ve){typeof console<"u"&&console.error&&console.error(Ve)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zi(){}function Gs(Q){return Q&&Q._delegate?Q._delegate:Q}},453:(Ln,At,ye)=>{var d=ye(438);let Ce=null;function Pe(){return Ce}class et{}const Be=new d.nKC("");let an=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:()=>(0,d.WQX)(ae),providedIn:"platform"})}return n})();const mt=new d.nKC("");let ae=(()=>{class n extends an{constructor(){super(),this._doc=(0,d.WQX)(Be),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pe().getBaseHref(this._doc)}onPopState(t){const i=Pe().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Pe().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,a){this._history.pushState(t,i,a)}replaceState(t,i,a){this._history.replaceState(t,i,a)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function _t(n){return n&&"?"!==n[0]?"?"+n:n}let Ye=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:()=>(0,d.WQX)(un),providedIn:"root"})}return n})();const Zt=new d.nKC("");let un=(()=>{class n extends Ye{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,d.WQX)(Be).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return re(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+_t(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${i}${a}`:i}pushState(t,i,a,l){const h=this.prepareExternalUrl(a+_t(l));this._platformLocation.pushState(t,i,h)}replaceState(t,i,a,l){const h=this.prepareExternalUrl(a+_t(l));this._platformLocation.replaceState(t,i,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(an),d.KVO(Zt,8))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wt=(()=>{class n extends Ye{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=re(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,a,l){let h=this.prepareExternalUrl(a+_t(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,i,h)}replaceState(t,i,a,l){let h=this.prepareExternalUrl(a+_t(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(an),d.KVO(Zt,8))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})(),Rt=(()=>{class n{constructor(t){this._subject=new d.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Je(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ne(Yt(i))),this._locationStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+_t(i))}normalize(t){return n.stripTrailingSlash(function ir(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Yt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",a=null){this._locationStrategy.pushState(a,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_t(i)),a)}replaceState(t,i="",a=null){this._locationStrategy.replaceState(a,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_t(i)),a)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(a=>a(t,i))}subscribe(t,i,a){return this._subject.subscribe({next:t,error:i,complete:a})}static#e=this.normalizeQueryParams=_t;static#t=this.joinWithSlash=re;static#n=this.stripTrailingSlash=Ne;static#r=this.\u0275fac=function(i){return new(i||n)(d.KVO(Ye))};static#i=this.\u0275prov=d.jDH({token:n,factory:()=>function Fn(){return new Rt((0,d.KVO)(Ye))}(),providedIn:"root"})}return n})();function Yt(n){return n.replace(/\/index.html$/,"")}class tl{constructor(e,t,i,a){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,a){this._viewContainer=t,this._template=i,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((a,l,h)=>{if(null==a.previousIndex)i.createEmbeddedView(this._template,new tl(a.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)i.remove(null===l?void 0:l);else if(null!==l){const y=i.get(l);i.move(y,h),su(y,a)}});for(let a=0,l=i.length;a<l;a++){const y=i.get(a).context;y.index=a,y.count=l,y.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{su(i.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(d.c1b),d.rXU(d.C4Q),d.rXU(d._q3))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function su(n,e){n.context.$implicit=e.item}let po=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new th,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fp("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fp("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(d.c1b),d.rXU(d.C4Q))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class th{constructor(){this.$implicit=null,this.ngIf=null}}function fp(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.Tbb)(e)}'.`)}const zo=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let ci=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function qi(n,e){return new d.wOt(2100,!1)}();return t.replace(zo,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=d.EJ8({name:"titlecase",type:n,pure:!0,standalone:!0})}return n})(),fu=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=d.$C({type:n});static#n=this.\u0275inj=d.G2t({})}return n})();const rl="browser";function qo(n){return"server"===n}let pc=(()=>{class n{static#e=this.\u0275prov=(0,d.jDH)({token:n,providedIn:"root",factory:()=>function Wi(n){return n===rl}((0,d.WQX)(d.Agw))?new Ii((0,d.WQX)(Be),window):new gc})}return n})();class Ii{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function mo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=i.currentNode;for(;a;){const l=a.shadowRoot;if(l){const h=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(h)return h}a=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(i-l[0],a-l[1])}}class gc{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class Ws extends et{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ph extends Ws{static makeCurrent(){!function ne(n){Ce??=n}(new ph)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ei(){return Ic=Ic||document.querySelector("base"),Ic?Ic.getAttribute("href"):null}();return null==t?null:function a_(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Ic=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Gt(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[a,l]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Ic=null,wc=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})();const u_=new d.nKC("");let DE=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(a=>{a.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,a){return this._findPluginFor(i).addEventListener(t,i,a)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(l=>l.supports(t)),!i)throw new d.wOt(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(u_),d.KVO(d.SKi))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})();class CE{constructor(e){this._doc=e}}const Tc="ng-app-id";let l_=(()=>{class n{constructor(t,i,a,l={}){this.doc=t,this.appId=i,this.nonce=a,this.platformId=l,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=qo(l),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(a=>a.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Tc}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(a=>{null!=a.textContent&&i.set(a.textContent,a)}),i}return null}changeUsageCount(t,i){const a=this.styleRef;if(a.has(t)){const l=a.get(t);return l.usage+=i,l.usage}return a.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const a=this.styleNodesInDOM,l=a?.get(i);if(l?.parentNode===t)return a.delete(i),l.removeAttribute(Tc),l;{const h=this.doc.createElement("style");return this.nonce&&h.setAttribute("nonce",this.nonce),h.textContent=i,this.platformIsServer&&h.setAttribute(Tc,this.appId),t.appendChild(h),h}}addStyleToHost(t,i){const a=this.getStyleElement(t,i),l=this.styleRef,h=l.get(i)?.elements;h?h.push(a):l.set(i,{elements:[a],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(Be),d.KVO(d.sZ2),d.KVO(d.BIS,8),d.KVO(d.Agw))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})();const yp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gh=/%COMP%/g,Ur=new d.nKC("",{providedIn:"root",factory:()=>!0});function Ni(n,e){return e.map(t=>t.replace(gh,n))}let na=(()=>{class n{constructor(t,i,a,l,h,y,w,C=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=a,this.removeStylesOnCompDestroy=l,this.doc=h,this.platformId=y,this.ngZone=w,this.nonce=C,this.rendererByCompId=new Map,this.platformIsServer=qo(y),this.defaultRenderer=new Gn(t,h,w,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===d.gXe.ShadowDom&&(i={...i,encapsulation:d.gXe.Emulated});const a=this.getOrCreateRenderer(t,i);return a instanceof ia?a.applyToHost(t):a instanceof al&&a.applyStyles(),a}getOrCreateRenderer(t,i){const a=this.rendererByCompId;let l=a.get(i.id);if(!l){const h=this.doc,y=this.ngZone,w=this.eventManager,C=this.sharedStylesHost,M=this.removeStylesOnCompDestroy,O=this.platformIsServer;switch(i.encapsulation){case d.gXe.Emulated:l=new ia(w,C,i,this.appId,M,h,y,O);break;case d.gXe.ShadowDom:return new Ac(w,C,t,i,h,y,this.nonce,O);default:l=new al(w,C,i,M,h,y,O)}a.set(i.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(DE),d.KVO(l_),d.KVO(d.sZ2),d.KVO(Ur),d.KVO(Be),d.KVO(d.Agw),d.KVO(d.SKi),d.KVO(d.BIS))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})();class Gn{constructor(e,t,i,a){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=a,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(yp[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Wt(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Wt(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new d.wOt(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,a){if(a){t=a+":"+t;const l=yp[a];l?e.setAttributeNS(l,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const a=yp[i];a?e.removeAttributeNS(a,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,a){a&(d.czy.DashCase|d.czy.Important)?e.style.setProperty(t,i,a&d.czy.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&d.czy.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Pe().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Wt(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ac extends Gn{constructor(e,t,i,a,l,h,y,w){super(e,l,h,w),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const C=Ni(a.id,a.styles);for(const M of C){const O=document.createElement("style");y&&O.setAttribute("nonce",y),O.textContent=M,this.shadowRoot.appendChild(O)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class al extends Gn{constructor(e,t,i,a,l,h,y,w){super(e,l,h,y),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=a,this.styles=w?Ni(w,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class ia extends al{constructor(e,t,i,a,l,h,y,w){const C=a+"-"+i.id;super(e,t,i,l,h,y,w,C),this.contentAttr=function Es(n){return"_ngcontent-%COMP%".replace(gh,n)}(C),this.hostAttr=function Pr(n){return"_nghost-%COMP%".replace(gh,n)}(C)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let _r=(()=>{class n extends CE{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,a){return t.addEventListener(i,a,!1),()=>this.removeEventListener(t,i,a)}removeEventListener(t,i,a){return t.removeEventListener(i,a)}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(Be))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})();const sa=["alt","control","meta","shift"],mu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Dc=(()=>{class n extends CE{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,a){const l=n.parseEventName(i),h=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pe().onAndCancel(t,l.domEventName,h))}static parseEventName(t){const i=t.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(i.pop());let h="",y=i.indexOf("code");if(y>-1&&(i.splice(y,1),h="code."),sa.forEach(C=>{const M=i.indexOf(C);M>-1&&(i.splice(M,1),h+=C+".")}),h+=l,0!=i.length||0===l.length)return null;const w={};return w.domEventName=a,w.fullKey=h,w}static matchEventFullKeyCode(t,i){let a=mu[t.key]||t.key,l="";return i.indexOf("code.")>-1&&(a=t.code,l="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),sa.forEach(h=>{h!==a&&(0,oa[h])(t)&&(l+=h+".")}),l+=a,l===i)}static eventCallback(t,i,a){return l=>{n.matchEventFullKeyCode(l,t)&&a.runGuarded(()=>i(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(Be))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})();const _h=(0,d.oH4)(d.fpN,"browser",[{provide:d.Agw,useValue:rl},{provide:d.PLl,useValue:function jt(){ph.makeCurrent()},multi:!0},{provide:Be,useFactory:function bc(){return(0,d.TL$)(document),document},deps:[]}]),ar=new d.nKC(""),Mr=[{provide:d.e01,useClass:class AE{addToWindow(e){d.JZv.getAngularTestability=(i,a=!0)=>{const l=e.findTestabilityInTree(i,a);if(null==l)throw new d.wOt(5103,!1);return l},d.JZv.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.JZv.getAllAngularRootElements=()=>e.getAllRootElements(),d.JZv.frameworkStabilizers||(d.JZv.frameworkStabilizers=[]),d.JZv.frameworkStabilizers.push(i=>{const a=d.JZv.getAllAngularTestabilities();let l=a.length;const h=function(){l--,0==l&&i()};a.forEach(y=>{y.whenStable(h)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Pe().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.WHO,useClass:d.NYb,deps:[d.SKi,d.giA,d.e01]},{provide:d.NYb,useClass:d.NYb,deps:[d.SKi,d.giA,d.e01]}],ll=[{provide:d.H8p,useValue:"root"},{provide:d.zcH,useFactory:function vp(){return new d.zcH},deps:[]},{provide:u_,useClass:_r,multi:!0,deps:[Be,d.SKi,d.Agw]},{provide:u_,useClass:Dc,multi:!0,deps:[Be]},na,l_,DE,{provide:d._9s,useExisting:na},{provide:class _o{},useClass:wc,deps:[]},[]];let Ti=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.sZ2,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(ar,12))};static#t=this.\u0275mod=d.$C({type:n});static#n=this.\u0275inj=d.G2t({providers:[...ll,...Mr],imports:[fu,d.Hbi]})}return n})(),_u=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(Be))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ME=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:function(i){let a=null;return a=i?new(i||n):d.KVO(pR),a},providedIn:"root"})}return n})(),pR=(()=>{class n extends ME{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case d.WPN.NONE:return i;case d.WPN.HTML:return(0,d.ZF7)(i,"HTML")?(0,d.rcV)(i):(0,d.h9k)(this._doc,String(i)).toString();case d.WPN.STYLE:return(0,d.ZF7)(i,"Style")?(0,d.rcV)(i):i;case d.WPN.SCRIPT:if((0,d.ZF7)(i,"Script"))return(0,d.rcV)(i);throw new d.wOt(5200,!1);case d.WPN.URL:return(0,d.ZF7)(i,"URL")?(0,d.rcV)(i):(0,d.$MX)(String(i));case d.WPN.RESOURCE_URL:if((0,d.ZF7)(i,"ResourceURL"))return(0,d.rcV)(i);throw new d.wOt(5201,!1);default:throw new d.wOt(5202,!1)}}bypassSecurityTrustHtml(t){return(0,d.Kcf)(t)}bypassSecurityTrustStyle(t){return(0,d.cWb)(t)}bypassSecurityTrustScript(t){return(0,d.UyX)(t)}bypassSecurityTrustUrl(t){return(0,d.osQ)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.e5t)(t)}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(Be))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ve=ye(467),jr=ye(985),xi=ye(71),Ba=ye(635);const Tp=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ap(n){return(0,xi.T)(n?.then)}var h_=ye(494);function Dp(n){return(0,xi.T)(n[h_.s])}function Cp(n){return Symbol.asyncIterator&&(0,xi.T)(n?.[Symbol.asyncIterator])}function Eh(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ih=function bp(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Qs(n){return(0,xi.T)(n?.[Ih])}function Rc(n){return(0,Ba.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:a}=yield(0,Ba.N3)(t.read());if(a)return yield(0,Ba.N3)(void 0);yield yield(0,Ba.N3)(i)}}finally{t.releaseLock()}})}function Sp(n){return(0,xi.T)(n?.getReader)}var wh=ye(334);function Qi(n){if(n instanceof jr.c)return n;if(null!=n){if(Dp(n))return function f_(n){return new jr.c(e=>{const t=n[h_.s]();if((0,xi.T)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Tp(n))return function zn(n){return new jr.c(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ap(n))return function Pc(n){return new jr.c(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,wh.m)})}(n);if(Cp(n))return Nr(n);if(Qs(n))return function ua(n){return new jr.c(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Sp(n))return function Rp(n){return Nr(Rc(n))}(n)}throw Eh(n)}function Nr(n){return new jr.c(e=>{(function Mc(n,e){var t,i,a,l;return(0,Ba.sH)(this,void 0,void 0,function*(){try{for(t=(0,Ba.xN)(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(h){a={error:h}}finally{try{i&&!i.done&&(l=t.return)&&(yield l.call(t))}finally{if(a)throw a.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ss(n,e,t,i=0,a=!1){const l=e.schedule(function(){t(),a?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(l),!a)return l}var Nn=ye(974),xr=ye(360);function Io(n,e=0){return(0,Nn.N)((t,i)=>{t.subscribe((0,xr._)(i,a=>ss(i,n,()=>i.next(a),e),()=>ss(i,n,()=>i.complete(),e),a=>ss(i,n,()=>i.error(a),e)))})}function hl(n,e=0){return(0,Nn.N)((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Dh(n,e){if(!n)throw new Error("Iterable cannot be null");return new jr.c(t=>{ss(t,e,()=>{const i=n[Symbol.asyncIterator]();ss(t,e,()=>{i.next().then(a=>{a.done?t.complete():t.next(a.value)})},0,!0)})})}function qn(n,e){return e?function yu(n,e){if(null!=n){if(Dp(n))return function wo(n,e){return Qi(n).pipe(hl(e),Io(e))}(n,e);if(Tp(n))return function OE(n,e){return new jr.c(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Ap(n))return function Th(n,e){return Qi(n).pipe(hl(e),Io(e))}(n,e);if(Cp(n))return Dh(n,e);if(Qs(n))return function Ah(n,e){return new jr.c(t=>{let i;return ss(t,e,()=>{i=n[Ih](),ss(t,e,()=>{let a,l;try{({value:a,done:l}=i.next())}catch(h){return void t.error(h)}l?t.complete():t.next(a)},0,!0)}),()=>(0,xi.T)(i?.return)&&i.return()})}(n,e);if(Sp(n))return function Nc(n,e){return Dh(Rc(n),e)}(n,e)}throw Eh(n)}(n,e):Qi(n)}function la(n){return n[n.length-1]}function Kt(n){return(0,xi.T)(la(n))?n.pop():void 0}function ja(n){return function vu(n){return n&&(0,xi.T)(n.schedule)}(la(n))?n.pop():void 0}function Ft(...n){return qn(n,ja(n))}var Ss=ye(412);const{isArray:Pp}=Array,{getPrototypeOf:Mp,prototype:Eu,keys:kE}=Object;function g_(n){if(1===n.length){const e=n[0];if(Pp(e))return{args:e,keys:null};if(function Np(n){return n&&"object"==typeof n&&Mp(n)===Eu}(e)){const t=kE(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var Iu=ye(669),cn=ye(354);const{isArray:Se}=Array;function xp(n){return(0,cn.T)(e=>function En(n,e){return Se(e)?n(...e):n(e)}(n,e))}function xc(n,e){return n.reduce((t,i,a)=>(t[i]=e[a],t),{})}function kn(...n){const e=ja(n),t=Kt(n),{args:i,keys:a}=g_(n);if(0===i.length)return qn([],e);const l=new jr.c(function Ch(n,e,t=Iu.D){return i=>{ca(e,()=>{const{length:a}=n,l=new Array(a);let h=a,y=a;for(let w=0;w<a;w++)ca(e,()=>{const C=qn(n[w],e);let M=!1;C.subscribe((0,xr._)(i,O=>{l[w]=O,M||(M=!0,y--),y||i.next(t(l.slice()))},()=>{--h||i.complete()}))},i)},i)}}(i,e,a?h=>xc(a,h):Iu.D));return t?l.pipe(xp(t)):l}function ca(n,e,t){n?ss(t,n,e):e()}const wu=(0,ye(853).L)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Oi(n,e,t=1/0){return(0,xi.T)(e)?Oi((i,a)=>(0,cn.T)((l,h)=>e(i,l,a,h))(Qi(n(i,a))),t):("number"==typeof e&&(t=e),(0,Nn.N)((i,a)=>function Oc(n,e,t,i,a,l,h,y){const w=[];let C=0,M=0,O=!1;const j=()=>{O&&!w.length&&!C&&e.complete()},Y=Me=>C<i?me(Me):w.push(Me),me=Me=>{l&&e.next(Me),C++;let Ie=!1;Qi(t(Me,M++)).subscribe((0,xr._)(e,Ge=>{a?.(Ge),l?Y(Ge):e.next(Ge)},()=>{Ie=!0},void 0,()=>{if(Ie)try{for(C--;w.length&&C<i;){const Ge=w.shift();h?ss(e,h,()=>me(Ge)):me(Ge)}j()}catch(Ge){e.error(Ge)}}))};return n.subscribe((0,xr._)(e,Y,()=>{O=!0,j()})),()=>{y?.()}}(i,a,n,t)))}function fl(n=1/0){return Oi(Iu.D,n)}function fi(...n){return function Op(){return fl(1)}()(qn(n,ja(n)))}function To(n){return new jr.c(e=>{Qi(n()).subscribe(e)})}var kp=ye(203);function ki(n,e){const t=(0,xi.T)(n)?n:()=>n,i=a=>a.error(t());return new jr.c(e?a=>e.schedule(i,0,a):i)}const ti=new jr.c(n=>n.complete());var pl=ye(359);function Fp(){return(0,Nn.N)((n,e)=>{let t=null;n._refCount++;const i=(0,xr._)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const a=n._connection,l=t;t=null,a&&(!l||a===l)&&a.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class bh extends jr.c{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nn.S)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pl.yU;const t=this.getSubject();e.add(this.source.subscribe((0,xr._)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pl.yU.EMPTY)}return e}refCount(){return Fp()(this)}}var $r=ye(413);function Hr(n,e){return(0,Nn.N)((t,i)=>{let a=null,l=0,h=!1;const y=()=>h&&!a&&i.complete();t.subscribe((0,xr._)(i,w=>{a?.unsubscribe();let C=0;const M=l++;Qi(n(w,M)).subscribe(a=(0,xr._)(i,O=>i.next(e?e(w,O,M,C++):O),()=>{a=null,y()}))},()=>{h=!0,y()}))})}function Ps(n){return n<=0?()=>ti:(0,Nn.N)((e,t)=>{let i=0;e.subscribe((0,xr._)(t,a=>{++i<=n&&(t.next(a),n<=i&&t.complete())}))})}function Sh(...n){const e=ja(n);return(0,Nn.N)((t,i)=>{(e?fi(n,t,e):fi(n,t)).subscribe(i)})}function Ms(n,e){return(0,Nn.N)((t,i)=>{let a=0;t.subscribe((0,xr._)(i,l=>n.call(e,l,a++)&&i.next(l)))})}function gl(n){return(0,Nn.N)((e,t)=>{let i=!1;e.subscribe((0,xr._)(t,a=>{i=!0,t.next(a)},()=>{i||t.next(n),t.complete()}))})}function Vp(n=__){return(0,Nn.N)((e,t)=>{let i=!1;e.subscribe((0,xr._)(t,a=>{i=!0,t.next(a)},()=>i?t.complete():t.error(n())))})}function __(){return new wu}function da(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ms((a,l)=>n(a,l,i)):Iu.D,Ps(1),t?gl(e):Vp(()=>new wu))}function ml(n,e){return(0,xi.T)(e)?Oi(n,e,1):Oi(n,1)}function pi(n,e,t){const i=(0,xi.T)(n)||e||t?{next:n,error:e,complete:t}:n;return i?(0,Nn.N)((a,l)=>{var h;null===(h=i.subscribe)||void 0===h||h.call(i);let y=!0;a.subscribe((0,xr._)(l,w=>{var C;null===(C=i.next)||void 0===C||C.call(i,w),l.next(w)},()=>{var w;y=!1,null===(w=i.complete)||void 0===w||w.call(i),l.complete()},w=>{var C;y=!1,null===(C=i.error)||void 0===C||C.call(i,w),l.error(w)},()=>{var w,C;y&&(null===(w=i.unsubscribe)||void 0===w||w.call(i)),null===(C=i.finalize)||void 0===C||C.call(i)}))}):Iu.D}function $a(n){return(0,Nn.N)((e,t)=>{let l,i=null,a=!1;i=e.subscribe((0,xr._)(t,void 0,void 0,h=>{l=Qi(n(h,$a(n)(e))),i?(i.unsubscribe(),i=null,l.subscribe(t)):a=!0})),a&&(i.unsubscribe(),i=null,l.subscribe(t))})}function Ao(n,e){return(0,Nn.N)(function Fi(n,e,t,i,a){return(l,h)=>{let y=t,w=e,C=0;l.subscribe((0,xr._)(h,M=>{const O=C++;w=y?n(w,M,O):(y=!0,M),i&&h.next(w)},a&&(()=>{y&&h.next(w),h.complete()})))}}(n,e,arguments.length>=2,!0))}function Wn(n){return n<=0?()=>ti:(0,Nn.N)((e,t)=>{let i=[];e.subscribe((0,xr._)(t,a=>{i.push(a),n<i.length&&i.shift()},()=>{for(const a of i)t.next(a);t.complete()},void 0,()=>{i=null}))})}function Rh(n){return(0,Nn.N)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var LE=ye(343);const dn="primary",ha=Symbol("RouteTitle");class Do{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ha(n){return new Do(n)}function _l(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const a={};for(let l=0;l<i.length;l++){const h=i[l],y=n[l];if(h.startsWith(":"))a[h.substring(1)]=y;else if(h!==y.path)return null}return{consumed:n.slice(0,i.length),posParams:a}}function Xi(n,e){const t=n?kc(n):void 0,i=e?kc(e):void 0;if(!t||!i||t.length!=i.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!Mh(n[a],e[a]))return!1;return!0}function kc(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Mh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((a,l)=>i[l]===a)}return n===e}function Nh(n){return n.length>0?n[n.length-1]:null}function Co(n){return function d_(n){return!!n&&(n instanceof jr.c||(0,xi.T)(n.lift)&&(0,xi.T)(n.subscribe))}(n)?n:(0,d.jNT)(n)?qn(Promise.resolve(n)):Ft(n)}const yl={exact:function Vc(n,e,t){if(!fa(n.segments,e.segments)||!Up(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!Vc(n.children[i],e.children[i],t))return!1;return!0},subset:Lp},Fc={exact:function Oh(n,e){return Xi(n,e)},subset:function v_(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Mh(n[t],e[t]))},ignored:()=>!0};function xh(n,e,t){return yl[t.paths](n.root,e.root,t.matrixParams)&&Fc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Lp(n,e,t){return UE(n,e,e.segments,t)}function UE(n,e,t,i){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!fa(a,t)||e.hasChildren()||!Up(a,t,i))}if(n.segments.length===t.length){if(!fa(n.segments,t)||!Up(n.segments,t,i))return!1;for(const a in e.children)if(!n.children[a]||!Lp(n.children[a],e.children[a],i))return!1;return!0}{const a=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(fa(n.segments,a)&&Up(n.segments,a,i)&&n.children[dn])&&UE(n.children[dn],e,l,i)}}function Up(n,e,t){return e.every((i,a)=>Fc[t](n[a].parameters,i.parameters))}class Ga{constructor(e=new xn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ha(this.queryParams),this._queryParamMap}toString(){return E_.serialize(this)}}class xn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kh(this)}}class Lc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ha(this.parameters),this._parameterMap}toString(){return w_(this)}}function fa(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Uc=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:()=>new bo,providedIn:"root"})}return n})();class bo{parse(e){const t=new qa(e);return new Ga(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vi(e.root,!0)}`,i=function T_(n){const e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(a=>`${pa(t)}=${pa(a)}`).join("&"):`${pa(t)}=${pa(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function jp(n){return encodeURI(n)}(e.fragment)}`:""}`}}const E_=new bo;function kh(n){return n.segments.map(e=>w_(e)).join("/")}function Vi(n,e){if(!n.hasChildren())return kh(n);if(e){const t=n.children[dn]?Vi(n.children[dn],!1):"",i=[];return Object.entries(n.children).forEach(([a,l])=>{a!==dn&&i.push(`${a}:${Vi(l,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Bp(n,e){let t=[];return Object.entries(n.children).forEach(([i,a])=>{i===dn&&(t=t.concat(e(a,i)))}),Object.entries(n.children).forEach(([i,a])=>{i!==dn&&(t=t.concat(e(a,i)))}),t}(n,(i,a)=>a===dn?[Vi(n.children[dn],!1)]:[`${a}:${Vi(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dn]?`${kh(n)}/${t[0]}`:`${kh(n)}/(${t.join("//")})`}}function I_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pa(n){return I_(n).replace(/%3B/gi,";")}function Fh(n){return I_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ga(n){return decodeURIComponent(n)}function Vh(n){return ga(n.replace(/\+/g,"%20"))}function w_(n){return`${Fh(n.path)}${function Lh(n){return Object.entries(n).map(([e,t])=>`;${Fh(e)}=${Fh(t)}`).join("")}(n.parameters)}`}const A_=/^[^\/()?;#]+/;function Uh(n){const e=n.match(A_);return e?e[0]:""}const BE=/^[^\/()?;=#]+/,za=/^[^=?&#]+/,D_=/^[^&#]+/;class qa{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[dn]=new xn(e,t)),i}parseSegment(){const e=Uh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.wOt(4009,!1);return this.capture(e),new Lc(ga(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Bh(n){const e=n.match(BE);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const a=Uh(this.remaining);a&&(i=a,this.capture(i))}e[ga(t)]=ga(i)}parseQueryParam(e){const t=function $p(n){const e=n.match(za);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const h=function C_(n){const e=n.match(D_);return e?e[0]:""}(this.remaining);h&&(i=h,this.capture(i))}const a=Vh(t),l=Vh(i);if(e.hasOwnProperty(a)){let h=e[a];Array.isArray(h)||(h=[h],e[a]=h),h.push(l)}else e[a]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Uh(this.remaining),a=this.remaining[i.length];if("/"!==a&&")"!==a&&";"!==a)throw new d.wOt(4010,!1);let l;i.indexOf(":")>-1?(l=i.slice(0,i.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=dn);const h=this.parseChildren();t[l]=1===Object.keys(h).length?h[dn]:new xn([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.wOt(4011,!1)}}function ma(n){return n.segments.length>0?new xn([],{[dn]:n}):n}function Gr(n){const e={};for(const[i,a]of Object.entries(n.children)){const l=Gr(a);if(i===dn&&0===l.segments.length&&l.hasChildren())for(const[h,y]of Object.entries(l.children))e[h]=y;else(l.segments.length>0||l.hasChildren())&&(e[i]=l)}return function jE(n){if(1===n.numberOfChildren&&n.children[dn]){const e=n.children[dn];return new xn(n.segments.concat(e.segments),e.children)}return n}(new xn(n.segments,e))}function So(n){return n instanceof Ga}function b_(n){let e;const a=ma(function t(l){const h={};for(const w of l.children){const C=t(w);h[w.outlet]=C}const y=new xn(l.url,h);return l===n&&(e=y),y}(n.root));return e??a}function Gp(n,e,t,i){let a=n;for(;a.parent;)a=a.parent;if(0===e.length)return jh(a,a,a,t,i);const l=function El(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new jc(!0,0,n);let e=0,t=!1;const i=n.reduce((a,l,h)=>{if("object"==typeof l&&null!=l){if(l.outlets){const y={};return Object.entries(l.outlets).forEach(([w,C])=>{y[w]="string"==typeof C?C.split("/"):C}),[...a,{outlets:y}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===h?(l.split("/").forEach((y,w)=>{0==w&&"."===y||(0==w&&""===y?t=!0:".."===y?e++:""!=y&&a.push(y))}),a):[...a,l]},[]);return new jc(t,e,i)}(e);if(l.toRoot())return jh(a,a,new xn([],{}),t,i);const h=function S_(n,e,t){if(n.isAbsolute)return new Hh(e,!0,0);if(!t)return new Hh(e,!1,NaN);if(null===t.parent)return new Hh(t,!0,0);const i=Wa(n.commands[0])?0:1;return function $E(n,e,t){let i=n,a=e,l=t;for(;l>a;){if(l-=a,i=i.parent,!i)throw new d.wOt(4005,!1);a=i.segments.length}return new Hh(i,!1,a-l)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(l,a,n),y=h.processChildren?Il(h.segmentGroup,h.index,l.commands):P_(h.segmentGroup,h.index,l.commands);return jh(a,h.segmentGroup,y,t,i)}function Wa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bc(n){return"object"==typeof n&&null!=n&&n.outlets}function jh(n,e,t,i,a){let h,l={};i&&Object.entries(i).forEach(([w,C])=>{l[w]=Array.isArray(C)?C.map(M=>`${M}`):`${C}`}),h=n===e?t:$h(n,e,t);const y=ma(Gr(h));return new Ga(y,l,a)}function $h(n,e,t){const i={};return Object.entries(n.children).forEach(([a,l])=>{i[a]=l===e?t:$h(l,e,t)}),new xn(n.segments,i)}class jc{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Wa(i[0]))throw new d.wOt(4003,!1);const a=i.find(Bc);if(a&&a!==Nh(i))throw new d.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hh{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function P_(n,e,t){if(n??=new xn([],{}),0===n.segments.length&&n.hasChildren())return Il(n,e,t);const i=function M_(n,e,t){let i=0,a=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(i>=t.length)return l;const h=n.segments[a],y=t[i];if(Bc(y))break;const w=`${y}`,C=i<t.length-1?t[i+1]:null;if(a>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!zp(w,C,h))return l;i+=2}else{if(!zp(w,{},h))return l;i++}a++}return{match:!0,pathIndex:a,commandIndex:i}}(n,e,t),a=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const l=new xn(n.segments.slice(0,i.pathIndex),{});return l.children[dn]=new xn(n.segments.slice(i.pathIndex),n.children),Il(l,0,a)}return i.match&&0===a.length?new xn(n.segments,{}):i.match&&!n.hasChildren()?$c(n,e,t):i.match?Il(n,0,a):$c(n,e,t)}function Il(n,e,t){if(0===t.length)return new xn(n.segments,{});{const i=function R_(n){return Bc(n[0])?n[0].outlets:{[dn]:n}}(t),a={};if(Object.keys(i).some(l=>l!==dn)&&n.children[dn]&&1===n.numberOfChildren&&0===n.children[dn].segments.length){const l=Il(n.children[dn],e,t);return new xn(n.segments,l.children)}return Object.entries(i).forEach(([l,h])=>{"string"==typeof h&&(h=[h]),null!==h&&(a[l]=P_(n.children[l],e,h))}),Object.entries(n.children).forEach(([l,h])=>{void 0===i[l]&&(a[l]=h)}),new xn(n.segments,a)}}function $c(n,e,t){const i=n.segments.slice(0,e);let a=0;for(;a<t.length;){const l=t[a];if(Bc(l)){const w=N_(l.outlets);return new xn(i,w)}if(0===a&&Wa(t[0])){i.push(new Lc(n.segments[e].path,Gh(t[0]))),a++;continue}const h=Bc(l)?l.outlets[dn]:`${l}`,y=a<t.length-1?t[a+1]:null;h&&y&&Wa(y)?(i.push(new Lc(h,Gh(y))),a+=2):(i.push(new Lc(h,{})),a++)}return new xn(i,{})}function N_(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=$c(new xn([],{}),0,i))}),e}function Gh(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function zp(n,e,t){return n==t.path&&Xi(e,t.parameters)}const ni="imperative";var Dn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Dn||{});class yr{constructor(e,t){this.id=e,this.url=t}}class Tu extends yr{constructor(e,t,i="imperative",a=null){super(e,t),this.type=Dn.NavigationStart,this.navigationTrigger=i,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ns extends yr{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Dn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Vr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Vr||{}),Au=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Au||{});class Is extends yr{constructor(e,t,i,a){super(e,t),this.reason=i,this.code=a,this.type=Dn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wl extends yr{constructor(e,t,i,a){super(e,t),this.reason=i,this.code=a,this.type=Dn.NavigationSkipped}}class Hc extends yr{constructor(e,t,i,a){super(e,t),this.error=i,this.target=a,this.type=Dn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qp extends yr{constructor(e,t,i,a){super(e,t),this.urlAfterRedirects=i,this.state=a,this.type=Dn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Du extends yr{constructor(e,t,i,a){super(e,t),this.urlAfterRedirects=i,this.state=a,this.type=Dn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HE extends yr{constructor(e,t,i,a,l){super(e,t),this.urlAfterRedirects=i,this.state=a,this.shouldActivate=l,this.type=Dn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rD extends yr{constructor(e,t,i,a){super(e,t),this.urlAfterRedirects=i,this.state=a,this.type=Dn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iD extends yr{constructor(e,t,i,a){super(e,t),this.urlAfterRedirects=i,this.state=a,this.type=Dn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sD{constructor(e){this.route=e,this.type=Dn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class x_{constructor(e){this.route=e,this.type=Dn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ri{constructor(e){this.snapshot=e,this.type=Dn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cu{constructor(e){this.snapshot=e,this.type=Dn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zh{constructor(e){this.snapshot=e,this.type=Dn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GE{constructor(e){this.snapshot=e,this.type=Dn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=Dn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Li{}class qh{constructor(e){this.url=e}}class Gc{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bu,this.attachRef=null}}let bu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const a=this.getOrCreateContext(t);a.outlet=i,this.contexts.set(t,a)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Gc,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Kp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Wh(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Wh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Tl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return Tl(e,this._root).map(t=>t.value)}}function Wh(n,e){if(n===e.value)return e;for(const t of e.children){const i=Wh(n,t);if(i)return i}return null}function Tl(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Tl(n,t);if(i.length)return i.unshift(e),i}return[]}class os{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function v(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class p extends Kp{constructor(e,t){super(e),this.snapshot=t,Re(this,e)}toString(){return this.snapshot.toString()}}function g(n){const e=function I(n){const l=new H([],{},{},"",{},dn,n,null,{});return new te("",new os(l,[]))}(n),t=new Ss.t([new Lc("",{})]),i=new Ss.t({}),a=new Ss.t({}),l=new Ss.t({}),h=new Ss.t(""),y=new S(t,i,l,h,a,dn,n,e.root);return y.snapshot=e.root,new p(new os(y,[]),e)}class S{constructor(e,t,i,a,l,h,y,w){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=a,this.dataSubject=l,this.outlet=h,this.component=y,this._futureSnapshot=w,this.title=this.dataSubject?.pipe((0,cn.T)(C=>C[ha]))??Ft(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=a,this.data=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,cn.T)(e=>Ha(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,cn.T)(e=>Ha(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function F(n,e,t="emptyOnly"){let i;const{routeConfig:a}=n;return i=null===e||"always"!==t&&""!==a?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...a?.data,...n._resolvedData}},a&&Kn(a)&&(i.resolve[ha]=a.title),i}class H{get title(){return this.data?.[ha]}constructor(e,t,i,a,l,h,y,w,C){this.url=e,this.params=t,this.queryParams=i,this.fragment=a,this.data=l,this.outlet=h,this.component=y,this.routeConfig=w,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ha(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ha(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class te extends Kp{constructor(e,t){super(t),this.url=e,Re(this,t)}toString(){return Xe(this._root)}}function Re(n,e){e.value._routerState=n,e.children.forEach(t=>Re(n,t))}function Xe(n){const e=n.children.length>0?` { ${n.children.map(Xe).join(", ")} } `:"";return`${n.value}${e}`}function ct(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Xi(e.params,t.params)||n.paramsSubject.next(t.params),function Ph(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Xi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ke(n,e){const t=Xi(n.params,e.params)&&function vl(n,e){return fa(n,e)&&n.every((t,i)=>Xi(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ke(n.parent,e.parent))}function Kn(n){return"string"==typeof n.title||null===n.title}let as=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=dn,this.activateEvents=new d.bkB,this.deactivateEvents=new d.bkB,this.attachEvents=new d.bkB,this.detachEvents=new d.bkB,this.parentContexts=(0,d.WQX)(bu),this.location=(0,d.WQX)(d.c1b),this.changeDetector=(0,d.WQX)(d.gRc),this.environmentInjector=(0,d.WQX)(d.uvJ),this.inputBinder=(0,d.WQX)(zc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:a}=t.name;if(i)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.wOt(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new d.wOt(4013,!1);this._activatedRoute=t;const a=this.location,h=t.snapshot.component,y=this.parentContexts.getOrCreateContext(this.name).children,w=new Su(t,y,a.injector);this.activated=a.createComponent(h,{index:a.length,injector:w,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.OA$]})}return n})();class Su{__ngOutletInjector(e){return new Su(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===S?this.route:e===bu?this.childContexts:this.parent.get(e,t)}}const zc=new d.nKC("");let qc=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,a=kn([i.queryParams,i.params,i.data]).pipe(Hr(([l,h,y],w)=>(y={...l,...h,...y},0===w?Ft(y):Promise.resolve(y)))).subscribe(l=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const h=(0,d.HJs)(i.component);if(h)for(const{templateName:y}of h.inputs)t.activatedComponentRef.setInput(y,l[y]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,a)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})();function Ru(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const a=function Qp(n,e,t){return e.children.map(i=>{for(const a of t.children)if(n.shouldReuseRoute(i.value,a.value.snapshot))return Ru(n,i,a);return Ru(n,i)})}(n,e,t);return new os(i,a)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const h=l.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(y=>Ru(n,y)),h}}const i=function Xp(n){return new S(new Ss.t(n.url),new Ss.t(n.params),new Ss.t(n.queryParams),new Ss.t(n.fragment),new Ss.t(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(l=>Ru(n,l));return new os(i,a)}}const Yp="ngNavigationCancelingError";function Kh(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=So(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,a=Jp(!1,Vr.Redirect);return a.url=t,a.navigationBehaviorOptions=i,a}function Jp(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[Yp]=!0,t.cancellationCode=e,t}function Wc(n){return!!n&&n[Yp]}let Zp=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=d.VBU({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.aNF],decls:1,vars:0,template:function(i,a){1&i&&d.nrm(0,"router-outlet")},dependencies:[as],encapsulation:2})}return n})();function WE(n){const e=n.children&&n.children.map(WE),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dn&&(t.component=Zp),t}function _a(n){return n.outlet||dn}function Qh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Fx{constructor(e,t,i,a,l){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=a,this.inputBindingEnabled=l}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),ct(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const a=v(t);e.children.forEach(l=>{const h=l.value.outlet;this.deactivateRoutes(l,a[h],i),delete a[h]}),Object.values(a).forEach(l=>{this.deactivateRouteAndItsChildren(l,i)})}deactivateRoutes(e,t,i){const a=e.value,l=t?t.value:null;if(a===l)if(a.component){const h=i.getContext(a.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,i);else l&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),a=i&&e.value.component?i.children:t,l=v(e);for(const h of Object.values(l))this.deactivateRouteAndItsChildren(h,a);if(i&&i.outlet){const h=i.outlet.detach(),y=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:y})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),a=i&&e.value.component?i.children:t,l=v(e);for(const h of Object.values(l))this.deactivateRouteAndItsChildren(h,a);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const a=v(t);e.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],i),this.forwardEvent(new GE(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Cu(e.value.snapshot))}activateRoutes(e,t,i){const a=e.value,l=t?t.value:null;if(ct(a),a===l)if(a.component){const h=i.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,i);else if(a.component){const h=i.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const y=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(y.contexts),h.attachRef=y.componentRef,h.route=y.route.value,h.outlet&&h.outlet.attach(y.componentRef,y.route.value),ct(y.route.value),this.activateChildRoutes(e,null,h.children)}else{const y=Qh(a.snapshot);h.attachRef=null,h.route=a,h.injector=y,h.outlet&&h.outlet.activateWith(a,h.injector),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,i)}}class uD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class eg{constructor(e,t){this.component=e,this.route=t}}function KE(n,e,t){const i=n._root;return Xh(i,e?e._root:null,t,[i.value])}function Xs(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||(0,d.LfX)(n)?e.get(n):n:i}function Xh(n,e,t,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=v(e);return n.children.forEach(h=>{(function bR(n,e,t,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,h=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){const w=function lD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!fa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fa(n.url,e.url)||!Xi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ke(n,e)||!Xi(n.queryParams,e.queryParams);default:return!Ke(n,e)}}(h,l,l.routeConfig.runGuardsAndResolvers);w?a.canActivateChecks.push(new uD(i)):(l.data=h.data,l._resolvedData=h._resolvedData),Xh(n,e,l.component?y?y.children:null:t,i,a),w&&y&&y.outlet&&y.outlet.isActivated&&a.canDeactivateChecks.push(new eg(y.outlet.component,h))}else h&&Kc(e,y,a),a.canActivateChecks.push(new uD(i)),Xh(n,null,l.component?y?y.children:null:t,i,a)})(h,l[h.value.outlet],t,i.concat([h.value]),a),delete l[h.value.outlet]}),Object.entries(l).forEach(([h,y])=>Kc(y,t.getContext(h),a)),a}function Kc(n,e,t){const i=v(n),a=n.value;Object.entries(i).forEach(([l,h])=>{Kc(h,a.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new eg(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}function k_(n){return"function"==typeof n}function tg(n){return n instanceof wu||"EmptyError"===n?.name}const F_=Symbol("INITIAL_VALUE");function Al(){return Hr(n=>kn(n.map(e=>e.pipe(Ps(1),Sh(F_)))).pipe((0,cn.T)(e=>{for(const t of e)if(!0!==t){if(t===F_)return F_;if(!1===t||t instanceof Ga)return t}return!0}),Ms(e=>e!==F_),Ps(1)))}function rg(n){return(0,kp.F)(pi(e=>{if(So(e))throw Kh(0,e)}),(0,cn.T)(e=>!0===e))}class ig{constructor(e){this.segmentGroup=e||null}}class Qc extends Error{constructor(e){super(),this.urlTree=e}}function Zh(n){return ki(new ig(n))}class eI{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],a=t.root;for(;;){if(i=i.concat(a.segments),0===a.numberOfChildren)return Ft(i);if(a.numberOfChildren>1||!a.children[dn])return ki(new d.wOt(4e3,!1));a=a.children[dn]}}applyRedirectCommands(e,t,i){const a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new Qc(a);return a}applyRedirectCreateUrlTree(e,t,i,a){const l=this.createSegmentGroup(e,t.root,i,a);return new Ga(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([a,l])=>{if("string"==typeof l&&l.startsWith(":")){const y=l.substring(1);i[a]=t[y]}else i[a]=l}),i}createSegmentGroup(e,t,i,a){const l=this.createSegments(e,t.segments,i,a);let h={};return Object.entries(t.children).forEach(([y,w])=>{h[y]=this.createSegmentGroup(e,w,i,a)}),new xn(l,h)}createSegments(e,t,i,a){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,a):this.findOrReturn(l,i))}findPosParam(e,t,i){const a=i[t.path.substring(1)];if(!a)throw new d.wOt(4001,!1);return a}findOrReturn(e,t){let i=0;for(const a of t){if(a.path===e.path)return t.splice(i),a;i++}return e}}const L_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kR(n,e,t,i,a){const l=tI(n,e,t);return l.matched?(i=function oD(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.Ol2)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function Ux(n,e,t,i){const a=e.canMatch;return a&&0!==a.length?Ft(a.map(h=>{const y=Xs(h,n);return Co(function Lx(n){return n&&k_(n.canMatch)}(y)?y.canMatch(e,t):(0,d.N4e)(n,()=>y(e,t)))})).pipe(Al(),rg()):Ft(!0)}(i,e,t).pipe((0,cn.T)(h=>!0===h?l:{...L_}))):Ft(l)}function tI(n,e,t){if("**"===e.path)return function sg(n){return{matched:!0,parameters:n.length>0?Nh(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...L_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||_l)(t,n,e);if(!a)return{...L_};const l={};Object.entries(a.posParams??{}).forEach(([y,w])=>{l[y]=w.path});const h=a.consumed.length>0?{...l,...a.consumed[a.consumed.length-1].parameters}:l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:a.posParams??{}}}function nI(n,e,t,i){return t.length>0&&function Bx(n,e,t){return t.some(i=>Dl(n,e,i)&&_a(i)!==dn)}(n,t,i)?{segmentGroup:new xn(e,FR(i,new xn(t,n.children))),slicedSegments:[]}:0===t.length&&function jx(n,e,t){return t.some(i=>Dl(n,e,i))}(n,t,i)?{segmentGroup:new xn(n.segments,rI(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new xn(n.segments,n.children),slicedSegments:t}}function rI(n,e,t,i){const a={};for(const l of t)if(Dl(n,e,l)&&!i[_a(l)]){const h=new xn([],{});a[_a(l)]=h}return{...i,...a}}function FR(n,e){const t={};t[dn]=e;for(const i of n)if(""===i.path&&_a(i)!==dn){const a=new xn([],{});t[_a(i)]=a}return t}function Dl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class iI{}class sI{constructor(e,t,i,a,l,h,y){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=a,this.urlTree=l,this.paramsInheritanceStrategy=h,this.urlSerializer=y,this.applyRedirects=new eI(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new d.wOt(4002,`'${e.segmentGroup}'`)}recognize(){const e=nI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe((0,cn.T)(t=>{const i=new H([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dn,this.rootComponentType,null,{}),a=new os(i,t),l=new te("",a),h=function Hp(n,e,t=null,i=null){return Gp(b_(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return h.queryParams=this.urlTree.queryParams,l.url=this.urlSerializer.serialize(h),this.inheritParamsAndData(l._root,null),{state:l,tree:h}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,dn).pipe($a(i=>{if(i instanceof Qc)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ig?this.noMatchError(i):i}))}inheritParamsAndData(e,t){const i=e.value,a=F(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(a.params),i.data=Object.freeze(a.data),e.children.forEach(l=>this.inheritParamsAndData(l,i))}processSegmentGroup(e,t,i,a){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,a,!0).pipe((0,cn.T)(l=>l instanceof os?[l]:[]))}processChildren(e,t,i){const a=[];for(const l of Object.keys(i.children))"primary"===l?a.unshift(l):a.push(l);return qn(a).pipe(ml(l=>{const h=i.children[l],y=function Ox(n,e){const t=n.filter(i=>_a(i)===e);return t.push(...n.filter(i=>_a(i)!==e)),t}(t,l);return this.processSegmentGroup(e,y,h,l)}),Ao((l,h)=>(l.push(...h),l)),gl(null),function FE(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ms((a,l)=>n(a,l,i)):Iu.D,Wn(1),t?gl(e):Vp(()=>new wu))}(),Oi(l=>{if(null===l)return Zh(i);const h=oI(l);return function B_(n){n.sort((e,t)=>e.value.outlet===dn?-1:t.value.outlet===dn?1:e.value.outlet.localeCompare(t.value.outlet))}(h),Ft(h)}))}processSegment(e,t,i,a,l,h){return qn(t).pipe(ml(y=>this.processSegmentAgainstRoute(y._injector??e,t,y,i,a,l,h).pipe($a(w=>{if(w instanceof ig)return Ft(null);throw w}))),da(y=>!!y),$a(y=>{if(tg(y))return function U_(n,e,t){return 0===e.length&&!n.children[t]}(i,a,l)?Ft(new iI):Zh(i);throw y}))}processSegmentAgainstRoute(e,t,i,a,l,h,y){return function VR(n,e,t,i){return!!(_a(n)===i||i!==dn&&Dl(e,t,n))&&tI(e,n,t).matched}(i,a,l,h)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,a,i,l,h):this.allowRedirects&&y?this.expandSegmentAgainstRouteUsingRedirect(e,a,t,i,l,h):Zh(a):Zh(a)}expandSegmentAgainstRouteUsingRedirect(e,t,i,a,l,h){const{matched:y,consumedSegments:w,positionalParamSegments:C,remainingSegments:M}=tI(t,a,l);if(!y)return Zh(t);a.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const O=this.applyRedirects.applyRedirectCommands(w,a.redirectTo,C);return this.applyRedirects.lineralizeSegments(a,O).pipe(Oi(j=>this.processSegment(e,i,t,j.concat(M),h,!1)))}matchSegmentAgainstRoute(e,t,i,a,l){const h=kR(t,i,a,e);return"**"===i.path&&(t.children={}),h.pipe(Hr(y=>y.matched?this.getChildConfig(e=i._injector??e,i,a).pipe(Hr(({routes:w})=>{const C=i._loadedInjector??e,{consumedSegments:M,remainingSegments:O,parameters:j}=y,Y=new H(M,j,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function dD(n){return n.data||{}}(i),_a(i),i.component??i._loadedComponent??null,i,function $_(n){return n.resolve||{}}(i)),{segmentGroup:me,slicedSegments:Me}=nI(t,M,O,w);if(0===Me.length&&me.hasChildren())return this.processChildren(C,w,me).pipe((0,cn.T)(Ge=>null===Ge?null:new os(Y,Ge)));if(0===w.length&&0===Me.length)return Ft(new os(Y,[]));const Ie=_a(i)===l;return this.processSegment(C,w,me,Me,Ie?dn:l,!0).pipe((0,cn.T)(Ge=>new os(Y,Ge instanceof os?[Ge]:[])))})):Zh(t)))}getChildConfig(e,t,i){return t.children?Ft({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ft({routes:t._loadedRoutes,injector:t._loadedInjector}):function ZE(n,e,t,i){const a=e.canLoad;return void 0===a||0===a.length?Ft(!0):Ft(a.map(h=>{const y=Xs(h,n);return Co(function RR(n){return n&&k_(n.canLoad)}(y)?y.canLoad(e,t):(0,d.N4e)(n,()=>y(e,t)))})).pipe(Al(),rg())}(e,t,i).pipe(Oi(a=>a?this.configLoader.loadChildren(e,t).pipe(pi(l=>{t._loadedRoutes=l.routes,t._loadedInjector=l.injector})):function OR(n){return ki(Jp(!1,Vr.GuardRejected))}())):Ft({routes:[],injector:e})}}function j_(n){const e=n.value.routeConfig;return e&&""===e.path}function oI(n){const e=[],t=new Set;for(const i of n){if(!j_(i)){e.push(i);continue}const a=e.find(l=>i.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...i.children),t.add(a)):e.push(i)}for(const i of t){const a=oI(i.children);e.push(new os(i.value,a))}return e.filter(i=>!t.has(i))}function hD(n){const e=n.children.map(t=>hD(t)).flat();return[n,...e]}function og(n){return Hr(e=>{const t=n(e);return t?qn(t).pipe((0,cn.T)(()=>e)):Ft(e)})}let uI=(()=>{class n{buildTitle(t){let i,a=t.root;for(;void 0!==a;)i=this.getResolvedTitleForRoute(a)??i,a=a.children.find(l=>l.outlet===dn);return i}getResolvedTitleForRoute(t){return t.data[ha]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:()=>(0,d.WQX)(fD),providedIn:"root"})}return n})(),fD=(()=>{class n extends uI{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(_u))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Xc=new d.nKC("",{providedIn:"root",factory:()=>({})}),Ro=new d.nKC("");let lI=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.WQX)(d.Ql9)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ft(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Co(t.loadComponent()).pipe((0,cn.T)(pD),pi(l=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=l}),Rh(()=>{this.componentLoaders.delete(t)})),a=new bh(i,()=>new $r.B).pipe(Fp());return this.componentLoaders.set(t,a),a}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ft({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const l=function jR(n,e,t,i){return Co(n.loadChildren()).pipe((0,cn.T)(pD),Oi(a=>a instanceof d.Co$||Array.isArray(a)?Ft(a):qn(e.compileModuleAsync(a))),(0,cn.T)(a=>{i&&i(n);let l,h,y=!1;return Array.isArray(a)?(h=a,!0):(l=a.create(t).injector,h=l.get(Ro,[],{optional:!0,self:!0}).flat()),{routes:h.map(WE),injector:l}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(Rh(()=>{this.childrenLoaders.delete(i)})),h=new bh(l,()=>new $r.B).pipe(Fp());return this.childrenLoaders.set(i,h),h}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pD(n){return function $R(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let cI=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:()=>(0,d.WQX)(Pu),providedIn:"root"})}return n})(),Pu=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Yc=new d.nKC(""),gD=new d.nKC("");function HR(n,e,t){const i=n.get(gD),a=n.get(Be);return n.get(d.SKi).runOutsideAngular(()=>{if(!a.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(C=>setTimeout(C));let l;const h=new Promise(C=>{l=C}),y=a.startViewTransition(()=>(l(),function GR(n){return new Promise(e=>{(0,d.mal)(e,{injector:n})})}(n))),{onViewTransitionCreated:w}=i;return w&&(0,d.N4e)(n,()=>w({transition:y,from:e,to:t})),h})}let G_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $r.B,this.transitionAbortSubject=new $r.B,this.configLoader=(0,d.WQX)(lI),this.environmentInjector=(0,d.WQX)(d.uvJ),this.urlSerializer=(0,d.WQX)(Uc),this.rootContexts=(0,d.WQX)(bu),this.location=(0,d.WQX)(Rt),this.inputBindingEnabled=null!==(0,d.WQX)(zc,{optional:!0}),this.titleStrategy=(0,d.WQX)(uI),this.options=(0,d.WQX)(Xc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,d.WQX)(cI),this.createViewTransition=(0,d.WQX)(Yc,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ft(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=a=>this.events.next(new x_(a)),this.configLoader.onLoadStartListener=a=>this.events.next(new sD(a))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,a){return this.transitions=new Ss.t({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ni,restoredState:null,currentSnapshot:a.snapshot,targetSnapshot:null,currentRouterState:a,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ms(l=>0!==l.id),(0,cn.T)(l=>({...l,extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),Hr(l=>{let h=!1,y=!1;return Ft(l).pipe(Hr(w=>{if(this.navigationId>l.id)return this.cancelNavigationTransition(l,"",Vr.SupersededByNewNavigation),ti;this.currentTransition=l,this.currentNavigation={id:w.id,initialUrl:w.rawUrl,extractedUrl:w.extractedUrl,trigger:w.source,extras:w.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const C=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!C&&"reload"!==(w.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const O="";return this.events.next(new wl(w.id,this.urlSerializer.serialize(w.rawUrl),O,Au.IgnoredSameUrlNavigation)),w.resolve(null),ti}if(this.urlHandlingStrategy.shouldProcessUrl(w.rawUrl))return Ft(w).pipe(Hr(O=>{const j=this.transitions?.getValue();return this.events.next(new Tu(O.id,this.urlSerializer.serialize(O.extractedUrl),O.source,O.restoredState)),j!==this.transitions?.getValue()?ti:Promise.resolve(O)}),function aI(n,e,t,i,a,l){return Oi(h=>function LR(n,e,t,i,a,l,h="emptyOnly"){return new sI(n,e,t,i,a,h,l).recognize()}(n,e,t,i,h.extractedUrl,a,l).pipe((0,cn.T)(({state:y,tree:w})=>({...h,targetSnapshot:y,urlAfterRedirects:w}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),pi(O=>{l.targetSnapshot=O.targetSnapshot,l.urlAfterRedirects=O.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:O.urlAfterRedirects};const j=new qp(O.id,this.urlSerializer.serialize(O.extractedUrl),this.urlSerializer.serialize(O.urlAfterRedirects),O.targetSnapshot);this.events.next(j)}));if(C&&this.urlHandlingStrategy.shouldProcessUrl(w.currentRawUrl)){const{id:O,extractedUrl:j,source:Y,restoredState:me,extras:Me}=w,Ie=new Tu(O,this.urlSerializer.serialize(j),Y,me);this.events.next(Ie);const Ge=g(this.rootComponentType).snapshot;return this.currentTransition=l={...w,targetSnapshot:Ge,urlAfterRedirects:j,extras:{...Me,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=j,Ft(l)}{const O="";return this.events.next(new wl(w.id,this.urlSerializer.serialize(w.extractedUrl),O,Au.IgnoredByUrlHandlingStrategy)),w.resolve(null),ti}}),pi(w=>{const C=new Du(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(C)}),(0,cn.T)(w=>(this.currentTransition=l={...w,guards:KE(w.targetSnapshot,w.currentSnapshot,this.rootContexts)},l)),function QE(n,e){return Oi(t=>{const{targetSnapshot:i,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:h}}=t;return 0===h.length&&0===l.length?Ft({...t,guardsResult:!0}):function Yh(n,e,t,i){return qn(n).pipe(Oi(a=>function JE(n,e,t,i,a){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?Ft(l.map(y=>{const w=Qh(e)??a,C=Xs(y,w);return Co(function Vx(n){return n&&k_(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,i):(0,d.N4e)(w,()=>C(n,e,t,i))).pipe(da())})).pipe(Al()):Ft(!0)}(a.component,a.route,t,e,i)),da(a=>!0!==a,!0))}(h,i,a,n).pipe(Oi(y=>y&&function SR(n){return"boolean"==typeof n}(y)?function XE(n,e,t,i){return qn(e).pipe(ml(a=>fi(function ng(n,e){return null!==n&&e&&e(new ri(n)),Ft(!0)}(a.route.parent,i),function YE(n,e){return null!==n&&e&&e(new zh(n)),Ft(!0)}(a.route,i),function Jh(n,e,t){const i=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(h=>function CR(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>To(()=>Ft(h.guards.map(w=>{const C=Qh(h.node)??t,M=Xs(w,C);return Co(function MR(n){return n&&k_(n.canActivateChild)}(M)?M.canActivateChild(i,n):(0,d.N4e)(C,()=>M(i,n))).pipe(da())})).pipe(Al())));return Ft(l).pipe(Al())}(n,a.path,t),function V_(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ft(!0);const a=i.map(l=>To(()=>{const h=Qh(e)??t,y=Xs(l,h);return Co(function PR(n){return n&&k_(n.canActivate)}(y)?y.canActivate(e,n):(0,d.N4e)(h,()=>y(e,n))).pipe(da())}));return Ft(a).pipe(Al())}(n,a.route,t))),da(a=>!0!==a,!0))}(i,l,n,e):Ft(y)),(0,cn.T)(y=>({...t,guardsResult:y})))})}(this.environmentInjector,w=>this.events.next(w)),pi(w=>{if(l.guardsResult=w.guardsResult,So(w.guardsResult))throw Kh(0,w.guardsResult);const C=new HE(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot,!!w.guardsResult);this.events.next(C)}),Ms(w=>!!w.guardsResult||(this.cancelNavigationTransition(w,"",Vr.GuardRejected),!1)),og(w=>{if(w.guards.canActivateChecks.length)return Ft(w).pipe(pi(C=>{const M=new rD(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(M)}),Hr(C=>{let M=!1;return Ft(C).pipe(function ef(n,e){return Oi(t=>{const{targetSnapshot:i,guards:{canActivateChecks:a}}=t;if(!a.length)return Ft(t);const l=new Set(a.map(w=>w.route)),h=new Set;for(const w of l)if(!h.has(w))for(const C of hD(w))h.add(C);let y=0;return qn(h).pipe(ml(w=>l.has(w)?function BR(n,e,t,i){const a=n.routeConfig,l=n._resolve;return void 0!==a?.title&&!Kn(a)&&(l[ha]=a.title),function $x(n,e,t,i){const a=kc(n);if(0===a.length)return Ft({});const l={};return qn(a).pipe(Oi(h=>function H_(n,e,t,i){const a=Qh(e)??i,l=Xs(n,a);return Co(l.resolve?l.resolve(e,t):(0,d.N4e)(a,()=>l(e,t)))}(n[h],e,t,i).pipe(da(),pi(y=>{l[h]=y}))),Wn(1),function VE(n){return(0,cn.T)(()=>n)}(l),$a(h=>tg(h)?ti:ki(h)))}(l,n,e,i).pipe((0,cn.T)(h=>(n._resolvedData=h,n.data=F(n,n.parent,t).resolve,null)))}(w,i,n,e):(w.data=F(w,w.parent,n).resolve,Ft(void 0))),pi(()=>y++),Wn(1),Oi(w=>y===h.size?Ft(t):ti))})}(this.paramsInheritanceStrategy,this.environmentInjector),pi({next:()=>M=!0,complete:()=>{M||this.cancelNavigationTransition(C,"",Vr.NoDataFromResolver)}}))}),pi(C=>{const M=new iD(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(M)}))}),og(w=>{const C=M=>{const O=[];M.routeConfig?.loadComponent&&!M.routeConfig._loadedComponent&&O.push(this.configLoader.loadComponent(M.routeConfig).pipe(pi(j=>{M.component=j}),(0,cn.T)(()=>{})));for(const j of M.children)O.push(...C(j));return O};return kn(C(w.targetSnapshot.root)).pipe(gl(null),Ps(1))}),og(()=>this.afterPreactivation()),Hr(()=>{const{currentSnapshot:w,targetSnapshot:C}=l,M=this.createViewTransition?.(this.environmentInjector,w.root,C.root);return M?qn(M).pipe((0,cn.T)(()=>l)):Ft(l)}),(0,cn.T)(w=>{const C=function O_(n,e,t){const i=Ru(n,e._root,t?t._root:void 0);return new p(i,e)}(t.routeReuseStrategy,w.targetSnapshot,w.currentRouterState);return this.currentTransition=l={...w,targetRouterState:C},this.currentNavigation.targetRouterState=C,l}),pi(()=>{this.events.next(new Li)}),((n,e,t,i)=>(0,cn.T)(a=>(new Fx(e,a.targetRouterState,a.currentRouterState,t,i).activate(n),a)))(this.rootContexts,t.routeReuseStrategy,w=>this.events.next(w),this.inputBindingEnabled),Ps(1),pi({next:w=>{h=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ns(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects))),this.titleStrategy?.updateTitle(w.targetRouterState.snapshot),w.resolve(!0)},complete:()=>{h=!0}}),function y_(n){return(0,Nn.N)((e,t)=>{Qi(n).subscribe((0,xr._)(t,()=>t.complete(),LE.l)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(pi(w=>{throw w}))),Rh(()=>{!h&&!y&&this.cancelNavigationTransition(l,"",Vr.SupersededByNewNavigation),this.currentTransition?.id===l.id&&(this.currentNavigation=null,this.currentTransition=null)}),$a(w=>{if(y=!0,Wc(w))this.events.next(new Is(l.id,this.urlSerializer.serialize(l.extractedUrl),w.message,w.cancellationCode)),function zE(n){return Wc(n)&&So(n.url)}(w)?this.events.next(new qh(w.url)):l.resolve(!1);else{this.events.next(new Hc(l.id,this.urlSerializer.serialize(l.extractedUrl),w,l.targetSnapshot??void 0));try{l.resolve(t.errorHandler(w))}catch(C){this.options.resolveNavigationPromiseOnError?l.resolve(!1):l.reject(C)}}return ti}))}))}cancelNavigationTransition(t,i,a){const l=new Is(t.id,this.urlSerializer.serialize(t.extractedUrl),i,a);this.events.next(l),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zR(n){return n!==ni}let qR=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:()=>(0,d.WQX)(WR),providedIn:"root"})}return n})();class mD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let WR=(()=>{class n extends mD{static#e=this.\u0275fac=(()=>{let t;return function(a){return(t||(t=d.xGo(n)))(a||n)}})();static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_D=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:()=>(0,d.WQX)(KR),providedIn:"root"})}return n})(),KR=(()=>{class n extends _D{constructor(){super(...arguments),this.location=(0,d.WQX)(Rt),this.urlSerializer=(0,d.WQX)(Uc),this.options=(0,d.WQX)(Xc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,d.WQX)(cI),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ga,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=g(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{"popstate"===i.type&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Tu)this.stateMemento=this.createStateMemento();else if(t instanceof wl)this.rawUrlTree=i.initialUrl;else if(t instanceof qp){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(a,i)}}else t instanceof Li?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):t instanceof Is&&(t.code===Vr.GuardRejected||t.code===Vr.NoDataFromResolver)?this.restoreHistory(i):t instanceof Hc?this.restoreHistory(i,!0):t instanceof Ns&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){const a=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(a)||i.extras.replaceUrl){const h={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(a,"",h)}else{const l={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(a,"",l)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-this.browserPageId;0!==l?this.location.historyGo(l):this.currentUrlTree===t.finalUrl&&0===l&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(a){return(t||(t=d.xGo(n)))(a||n)}})();static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ag=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ag||{});function ug(n,e){n.events.pipe(Ms(t=>t instanceof Ns||t instanceof Is||t instanceof Hc||t instanceof wl),(0,cn.T)(t=>t instanceof Ns||t instanceof wl?ag.COMPLETE:t instanceof Is&&(t.code===Vr.Redirect||t.code===Vr.SupersededByNewNavigation)?ag.REDIRECTING:ag.FAILED),Ms(t=>t!==ag.REDIRECTING),Ps(1)).subscribe(()=>{e()})}function Mu(n){throw n}const lg={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Po=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,d.WQX)(d.H3F),this.stateManager=(0,d.WQX)(_D),this.options=(0,d.WQX)(Xc,{optional:!0})||{},this.pendingTasks=(0,d.WQX)(d.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,d.WQX)(G_),this.urlSerializer=(0,d.WQX)(Uc),this.location=(0,d.WQX)(Rt),this.urlHandlingStrategy=(0,d.WQX)(cI),this._events=new $r.B,this.errorHandler=this.options.errorHandler||Mu,this.navigated=!1,this.routeReuseStrategy=(0,d.WQX)(qR),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,d.WQX)(Ro,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,d.WQX)(zc,{optional:!0}),this.eventsSubscription=new pl.yU,this.isNgZoneEnabled=(0,d.WQX)(d.SKi)instanceof d.SKi&&d.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const a=this.navigationTransitions.currentTransition,l=this.navigationTransitions.currentNavigation;if(null!==a&&null!==l)if(this.stateManager.handleRouterEvent(i,l),i instanceof Is&&i.code!==Vr.Redirect&&i.code!==Vr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ns)this.navigated=!0;else if(i instanceof qh){const h=this.urlHandlingStrategy.merge(i.url,a.currentRawUrl),y={info:a.extras.info,skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zR(a.source)};this.scheduleNavigation(h,ni,null,y,{resolve:a.resolve,reject:a.reject,promise:a.promise})}(function Hx(n){return!(n instanceof Li||n instanceof qh)})(i)&&this._events.next(i)}catch(a){this.navigationTransitions.transitionAbortSubject.next(a)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ni,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,a){const l={replaceUrl:!0},h=a?.navigationId?a:null;if(a){const w={...a};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(l.state=w)}const y=this.parseUrl(t);this.scheduleNavigation(y,i,h,l)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(WE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:a,queryParams:l,fragment:h,queryParamsHandling:y,preserveFragment:w}=i,C=w?this.currentUrlTree.fragment:h;let O,M=null;switch(y){case"merge":M={...this.currentUrlTree.queryParams,...l};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=l||null}null!==M&&(M=this.removeEmptyProps(M));try{O=b_(a?a.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),O=this.currentUrlTree.root}return Gp(O,t,M,C??null)}navigateByUrl(t,i={skipLocationChange:!1}){const a=So(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,ni,null,i)}navigate(t,i={skipLocationChange:!1}){return function vD(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.wOt(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let a;if(a=!0===i?{...lg}:!1===i?{...yD}:i,So(t))return xh(this.currentUrlTree,t,a);const l=this.parseUrl(t);return xh(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.entries(t).reduce((i,[a,l])=>(null!=l&&(i[a]=l),i),{})}scheduleNavigation(t,i,a,l,h){if(this.disposed)return Promise.resolve(!1);let y,w,C;h?(y=h.resolve,w=h.reject,C=h.promise):C=new Promise((O,j)=>{y=O,w=j});const M=this.pendingTasks.add();return ug(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(M))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:l,resolve:y,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(O=>Promise.reject(O))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dI=(()=>{class n{constructor(t,i,a,l,h,y){this.router=t,this.route=i,this.tabIndexAttribute=a,this.renderer=l,this.el=h,this.locationStrategy=y,this.href=null,this.commands=null,this.onChanges=new $r.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const w=h.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===w||"area"===w,this.isAnchorElement?this.subscription=t.events.subscribe(C=>{C instanceof Ns&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,a,l,h){const y=this.urlTree;return!!(null===y||this.isAnchorElement&&(0!==t||i||a||l||h||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(y,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const i=null===this.href?null:(0,d.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){const a=this.renderer,l=this.el.nativeElement;null!==i?a.setAttribute(l,t,i):a.removeAttribute(l,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(Po),d.rXU(S),d.kS0("tabindex"),d.rXU(d.sFG),d.rXU(d.aKT),d.rXU(Ye))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,a){1&i&&d.bIt("click",function(h){return a.onClick(h.button,h.ctrlKey,h.shiftKey,h.altKey,h.metaKey)}),2&i&&d.BMQ("target",a.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[d.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",d.L39],skipLocationChange:[d.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",d.L39],replaceUrl:[d.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",d.L39],routerLink:"routerLink"},standalone:!0,features:[d.GFd,d.OA$]})}return n})(),QR=(()=>{class n{get isActive(){return this._isActive}constructor(t,i,a,l,h){this.router=t,this.element=i,this.renderer=a,this.cdr=l,this.link=h,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.bkB,this.routerEventsSubscription=t.events.subscribe(y=>{y instanceof Ns&&this.update()})}ngAfterContentInit(){Ft(this.links.changes,Ft(null)).pipe(fl()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=qn(t).pipe(fl()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(a=>!!a)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function hI(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return a=>{const l=a.urlTree;return!!l&&t.isActive(l,i)}}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(Po),d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(d.gRc),d.rXU(dI,8))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,a,l){if(1&i&&d.wni(l,dI,5),2&i){let h;d.mGM(h=d.lsd())&&(a.links=h)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.OA$]})}return n})();class z_{}let ED=(()=>{class n{constructor(t,i,a,l,h){this.router=t,this.injector=a,this.preloadingStrategy=l,this.loader=h}setUpPreloading(){this.subscription=this.router.events.pipe(Ms(t=>t instanceof Ns),ml(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const a=[];for(const l of i){l.providers&&!l._injector&&(l._injector=(0,d.Ol2)(l.providers,t,`Route: ${l.path}`));const h=l._injector??t,y=l._loadedInjector??h;(l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent)&&a.push(this.preloadConfig(h,l)),(l.children||l._loadedRoutes)&&a.push(this.processRoutes(y,l.children??l._loadedRoutes))}return qn(a).pipe(fl())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let a;a=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Ft(null);const l=a.pipe(Oi(h=>null===h?Ft(void 0):(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,this.processRoutes(h.injector??t,h.routes))));return i.loadComponent&&!i._loadedComponent?qn([l,this.loader.loadComponent(i)]).pipe(fl()):l})}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(Po),d.KVO(d.Ql9),d.KVO(d.uvJ),d.KVO(z_),d.KVO(lI))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fI=new d.nKC("");let ID=(()=>{class n{constructor(t,i,a,l,h={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=a,this.zone=l,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,d.WQX)(d.uvJ),h.scrollPositionRestoration||="disabled",h.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Tu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ns?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof wl&&t.code===Au.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){var a=this;this.zone.runOutsideAngular((0,ve.A)(function*(){yield new Promise(l=>{setTimeout(()=>{l()}),(0,d.mal)(()=>{l()},{injector:a.environmentInjector})}),a.zone.run(()=>{a.transitions.events.next(new xs(t,"popstate"===a.lastSource?a.store[a.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){d.QTQ()};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})();function Ka(n,e){return{\u0275kind:n,\u0275providers:e}}function pI(){const n=(0,d.WQX)(d.zZn);return e=>{const t=n.get(d.o8S);if(e!==t.components[0])return;const i=n.get(Po),a=n.get(cg);1===n.get(q_)&&i.initialNavigation(),n.get(mI,null,d.$GK.Optional)?.setUpPreloading(),n.get(fI,null,d.$GK.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),a.closed||(a.next(),a.complete(),a.unsubscribe())}}const cg=new d.nKC("",{factory:()=>new $r.B}),q_=new d.nKC("",{providedIn:"root",factory:()=>1}),mI=new d.nKC("");function JR(n){return Ka(0,[{provide:mI,useExisting:ED},{provide:z_,useExisting:n}])}function tP(n){return Ka(9,[{provide:Yc,useValue:HR},{provide:gD,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const _I=new d.nKC("ROUTER_FORROOT_GUARD"),Qx=[Rt,{provide:Uc,useClass:bo},Po,bu,{provide:S,useFactory:function wD(n){return n.routerState.root},deps:[Po]},lI,[]];let DD=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[Qx,[],{provide:Ro,multi:!0,useValue:t},{provide:_I,useFactory:iP,deps:[[Po,new d.Xx1,new d.kdw]]},{provide:Xc,useValue:i||{}},i?.useHash?{provide:Ye,useClass:wt}:{provide:Ye,useClass:un},{provide:fI,useFactory:()=>{const n=(0,d.WQX)(pc),e=(0,d.WQX)(d.SKi),t=(0,d.WQX)(Xc),i=(0,d.WQX)(G_),a=(0,d.WQX)(Uc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ID(a,i,n,e,t)}},i?.preloadingStrategy?JR(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?CD(i):[],i?.bindToComponentInputs?Ka(8,[qc,{provide:zc,useExisting:qc}]).\u0275providers:[],i?.enableViewTransitions?tP().\u0275providers:[],[{provide:bD,useFactory:pI},{provide:d.iLQ,multi:!0,useExisting:bD}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ro,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(_I,8))};static#t=this.\u0275mod=d.$C({type:n});static#n=this.\u0275inj=d.G2t({})}return n})();function iP(n){return"guarded"}function CD(n){return["disabled"===n.initialNavigation?Ka(3,[{provide:d.hnV,multi:!0,useFactory:()=>{const e=(0,d.WQX)(Po);return()=>{e.setUpLocationChangeListener()}}},{provide:q_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ka(2,[{provide:q_,useValue:0},{provide:d.hnV,multi:!0,deps:[d.zZn],useFactory:e=>{const t=e.get(mt,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get(Po),l=e.get(cg);ug(a,()=>{i(!0)}),e.get(G_).afterPreactivation=()=>(i(!0),l.closed?Ft(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const bD=new d.nKC("");let W_=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(d.sFG),d.rXU(d.aKT))};static#t=this.\u0275dir=d.FsC({type:n})}return n})(),nf=(()=>{class n extends W_{static#e=this.\u0275fac=(()=>{let t;return function(a){return(t||(t=d.xGo(n)))(a||n)}})();static#t=this.\u0275dir=d.FsC({type:n,features:[d.Vt3]})}return n})();const Nu=new d.nKC(""),nO={provide:Nu,useExisting:(0,d.Rfq)(()=>Cl),multi:!0},K_=new d.nKC("");let Cl=(()=>{class n extends W_{constructor(t,i,a){super(t,i),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function aP(){const n=Pe()?Pe().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(d.sFG),d.rXU(d.aKT),d.rXU(K_,8))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,a){1&i&&d.bIt("input",function(h){return a._handleInput(h.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(h){return a._compositionEnd(h.target.value)})},features:[d.Jv_([nO]),d.Vt3]})}return n})();function Qa(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function yI(n){return null!=n&&"number"==typeof n.length}const Yi=new d.nKC(""),bl=new d.nKC(""),uP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Sl{static min(e){return function Jc(n){return e=>{if(Qa(e.value)||Qa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Os(n){return e=>{if(Qa(e.value)||Qa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Mo(n){return Qa(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function vI(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function lP(n){return Qa(n.value)||uP.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function RD(n){return e=>Qa(e.value)||!yI(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function cP(n){return e=>yI(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function dP(n){if(!n)return hg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Qa(i.value))return null;const a=i.value;return e.test(a)?null:{pattern:{requiredPattern:t,actualValue:a}}}}(e)}static nullValidator(e){return null}static compose(e){return Zc(e)}static composeAsync(e){return wI(e)}}function hg(n){return null}function EI(n){return null!=n}function hP(n){return(0,d.jNT)(n)?qn(n):n}function fg(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Q_(n,e){return e.map(t=>t(n))}function PD(n){return n.map(e=>function II(n){return!n.validate}(e)?e:t=>e.validate(t))}function Zc(n){if(!n)return null;const e=n.filter(EI);return 0==e.length?null:function(t){return fg(Q_(t,e))}}function pg(n){return null!=n?Zc(PD(n)):null}function wI(n){if(!n)return null;const e=n.filter(EI);return 0==e.length?null:function(t){return function eO(...n){const e=Kt(n),{args:t,keys:i}=g_(n),a=new jr.c(l=>{const{length:h}=t;if(!h)return void l.complete();const y=new Array(h);let w=h,C=h;for(let M=0;M<h;M++){let O=!1;Qi(t[M]).subscribe((0,xr._)(l,j=>{O||(O=!0,C--),y[M]=j},()=>w--,void 0,()=>{(!w||!O)&&(C||l.next(i?xc(i,y):y),l.complete())}))}});return e?a.pipe(xp(e)):a}(Q_(t,e).map(hP)).pipe((0,cn.T)(fg))}}function gg(n){return null!=n?wI(PD(n)):null}function mg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function MD(n){return n._rawValidators}function ND(n){return n._rawAsyncValidators}function X_(n){return n?Array.isArray(n)?n:[n]:[]}function Y_(n,e){return Array.isArray(n)?n.includes(e):n===e}function xD(n,e){const t=X_(e);return X_(n).forEach(a=>{Y_(t,a)||t.push(a)}),t}function OD(n,e){return X_(e).filter(t=>!Y_(n,t))}class TI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Di extends TI{get formDirective(){return null}get path(){return null}}class ya extends TI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class J_{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let _g=(()=>{class n extends J_{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(ya,2))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,a){2&i&&d.AVh("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[d.Vt3]})}return n})(),Z_=(()=>{class n extends J_{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(Di,10))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,a){2&i&&d.AVh("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)("ng-submitted",a.isSubmitted)},features:[d.Vt3]})}return n})();const sf="VALID",af="INVALID",Ou="PENDING",vg="DISABLED";function ny(n){return(Eg(n)?n.validators:n)||null}function CI(n,e){return(Eg(e)?e.asyncValidators:n)||null}function Eg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function bI(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new d.wOt(1e3,"");if(!i[t])throw new d.wOt(1001,"")}function ln(n,e,t){n._forEachChild((i,a)=>{if(void 0===t[a])throw new d.wOt(1002,"")})}class Ig{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===sf}get invalid(){return this.status===af}get pending(){return this.status==Ou}get disabled(){return this.status===vg}get enabled(){return this.status!==vg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(xD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(OD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(OD(e,this._rawAsyncValidators))}hasValidator(e){return Y_(this._rawValidators,e)}hasAsyncValidator(e){return Y_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ou,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vg,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=sf,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sf||this.status===Ou)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vg:sf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ou,this._hasOwnPendingAsyncValidator=!0;const t=hP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,a)=>i&&i._find(a),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.bkB,this.statusChanges=new d.bkB}_calculateStatus(){return this._allControlsDisabled()?vg:this.errors?af:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ou)?Ou:this._anyControlsHaveStatus(af)?af:sf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Eg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function yP(n){return Array.isArray(n)?pg(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function vP(n){return Array.isArray(n)?gg(n):n||null}(this._rawAsyncValidators)}}class uf extends Ig{constructor(e,t,i){super(ny(t),CI(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ln(this,0,e),Object.keys(e).forEach(i=>{bI(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const a=this.controls[i];a&&a.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,a)=>{i.reset(e?e[a]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,a)=>((i.enabled||this.disabled)&&(t[a]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((a,l)=>{i=t(i,a,l)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class LD extends uf{}const No=new d.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>ed}),ed="always";function Rl(n,e){return[...e.path,n]}function lf(n,e,t=ed){ry(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function wP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&UD(n,e)})}(n,e),function BD(n,e){const t=(i,a)=>{e.valueAccessor.writeValue(i),a&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function TP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&UD(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function RI(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function cf(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),hf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function df(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ry(n,e){const t=MD(n);null!==e.validator?n.setValidators(mg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=ND(n);null!==e.asyncValidator?n.setAsyncValidators(mg(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const a=()=>n.updateValueAndValidity();df(e._rawValidators,a),df(e._rawAsyncValidators,a)}function hf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const a=MD(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(h=>h!==e.validator);l.length!==a.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const a=ND(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(h=>h!==e.asyncValidator);l.length!==a.length&&(t=!0,n.setAsyncValidators(l))}}}const i=()=>{};return df(e._rawValidators,i),df(e._rawAsyncValidators,i),t}function UD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jD(n,e){ry(n,e)}function PI(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function $D(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function MI(n,e){if(!e)return null;let t,i,a;return Array.isArray(e),e.forEach(l=>{l.constructor===Cl?t=l:function ks(n){return Object.getPrototypeOf(n.constructor)===nf}(l)?i=l:a=l}),a||i||t||null}const GD={provide:Di,useExisting:(0,d.Rfq)(()=>sy)},Tg=Promise.resolve();let sy=(()=>{class n extends Di{constructor(t,i,a){super(),this.callSetDisabledState=a,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.bkB,this.form=new uf({},pg(t),gg(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Tg.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),lf(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Tg.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Tg.then(()=>{const i=this._findContainer(t.path),a=new uf({});jD(a,t),i.registerControl(t.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Tg.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Tg.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,$D(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(Yi,10),d.rXU(bl,10),d.rXU(No,8))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,a){1&i&&d.bIt("submit",function(h){return a.onSubmit(h)})("reset",function(){return a.onReset()})},inputs:{options:[d.Mj6.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d.Jv_([GD]),d.Vt3]})}return n})();function zD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function NI(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Ag=class extends Ig{constructor(e=null,t,i){super(ny(t),CI(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Eg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=NI(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){NI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},bP={provide:ya,useExisting:(0,d.Rfq)(()=>ay)},WD=Promise.resolve();let ay=(()=>{class n extends ya{constructor(t,i,a,l,h,y){super(),this._changeDetectorRef=h,this.callSetDisabledState=y,this.control=new Ag,this._registered=!1,this.name="",this.update=new d.bkB,this._parent=t,this._setValidators(i),this._setAsyncValidators(a),this.valueAccessor=MI(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),PI(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){lf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){WD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,a=0!==i&&(0,d.L39)(i);WD.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Rl(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(Di,9),d.rXU(Yi,10),d.rXU(bl,10),d.rXU(Nu,10),d.rXU(d.gRc,8),d.rXU(No,8))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[d.Mj6.None,"disabled","isDisabled"],model:[d.Mj6.None,"ngModel","model"],options:[d.Mj6.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d.Jv_([bP]),d.Vt3,d.OA$]})}return n})(),uy=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const va=new d.nKC(""),kI={provide:Di,useExisting:(0,d.Rfq)(()=>fy)};let fy=(()=>{class n extends Di{constructor(t,i,a){super(),this.callSetDisabledState=a,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.bkB,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return lf(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){cf(t.control||null,t,!1),function lO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,$D(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,a=this.form.get(t.path);i!==a&&(cf(i||null,t),(n=>n instanceof Ag)(a)&&(lf(a,t,this.callSetDisabledState),t.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);jD(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function AP(n,e){return hf(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ry(this.form,this),this._oldForm&&hf(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(Yi,10),d.rXU(bl,10),d.rXU(No,8))};static#t=this.\u0275dir=d.FsC({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,a){1&i&&d.bIt("submit",function(h){return a.onSubmit(h)})("reset",function(){return a.onReset()})},inputs:{form:[d.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d.Jv_([kI]),d.Vt3,d.OA$]})}return n})();const Cg={provide:ya,useExisting:(0,d.Rfq)(()=>my)};let my=(()=>{class n extends ya{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,i,a,l,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.name=null,this.update=new d.bkB,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(a),this.valueAccessor=MI(0,l)}ngOnChanges(t){this._added||this._setUpControl(),PI(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Rl(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||n)(d.rXU(Di,13),d.rXU(Yi,10),d.rXU(bl,10),d.rXU(Nu,10),d.rXU(va,8))};static#n=this.\u0275dir=d.FsC({type:n,selectors:[["","formControlName",""]],inputs:{name:[d.Mj6.None,"formControlName","name"],isDisabled:[d.Mj6.None,"disabled","isDisabled"],model:[d.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[d.Jv_([Cg]),d.Vt3,d.OA$]})}return n})(),sC=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=d.$C({type:n});static#n=this.\u0275inj=d.G2t({})}return n})();class oC extends Ig{constructor(e,t,i){super(ny(t),CI(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let a=this._adjustIndex(e);a<0&&(a=0),this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),t&&(this.controls.splice(a,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ln(this,0,e),e.forEach((i,a)=>{bI(this,!1,a),this.at(a).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,a)=>{this.at(a)&&this.at(a).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,a)=>{i.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function gf(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let yy=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const a=this._reduceControls(t);let l={};return gf(i)?l=i:null!==i&&(l.validators=i.validator,l.asyncValidators=i.asyncValidator),new uf(a,l)}record(t,i=null){const a=this._reduceControls(t);return new LD(a,i)}control(t,i,a){let l={};return this.useNonNullable?(gf(i)?l=i:(l.validators=i,l.asyncValidators=a),new Ag(t,{...l,nonNullable:!0})):new Ag(t,i,a)}array(t,i,a){const l=t.map(h=>this._createControl(h));return new oC(l,i,a)}_reduceControls(t){const i={};return Object.keys(t).forEach(a=>{i[a]=this._createControl(t[a])}),i}_createControl(t){return t instanceof Ag||t instanceof Ig?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:No,useValue:t.callSetDisabledState??ed}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=d.$C({type:n});static#n=this.\u0275inj=d.G2t({imports:[sC]})}return n})(),LP=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:va,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:No,useValue:t.callSetDisabledState??ed}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=d.$C({type:n});static#n=this.\u0275inj=d.G2t({imports:[sC]})}return n})();var us=ye(8);const dC=[{provide:us.\u0275AnimationStyleNormalizer,useFactory:function UP(){return new us.\u0275WebAnimationsStyleNormalizer}},{provide:us.\u0275AnimationEngine,useClass:(()=>{class n extends us.\u0275AnimationEngine{constructor(t,i,a){super(t,i,a,(0,d.WQX)(d.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(Be),d.KVO(us.AnimationDriver),d.KVO(us.\u0275AnimationStyleNormalizer))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})()},{provide:d._9s,useFactory:function cC(n,e,t){return new us.\u0275AnimationRendererFactory(n,e,t)},deps:[na,us.\u0275AnimationEngine,d.SKi]}],mf=[{provide:us.AnimationDriver,useFactory:()=>new us.\u0275WebAnimationsDriver},{provide:d.bc$,useValue:"BrowserAnimations"},...dC],hC=[{provide:us.AnimationDriver,useClass:us.NoopAnimationDriver},{provide:d.bc$,useValue:"NoopAnimations"},...dC];let BP=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?hC:mf}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=d.$C({type:n});static#n=this.\u0275inj=d.G2t({providers:mf,imports:[Ti]})}return n})();function jP(){return(0,d.ngT)("NgEagerAnimations"),[...mf]}var Ys=ye(969);const _f=["toast-component",""];function $P(n,e){if(1&n){const t=d.RV6();d.j41(0,"button",5),d.bIt("click",function(){d.eBV(t);const a=d.XpG();return d.Njj(a.remove())}),d.j41(1,"span",6),d.EFF(2,"\xd7"),d.k0s()()}}function Ey(n,e){if(1&n&&(d.qex(0),d.EFF(1),d.bVm()),2&n){const t=d.XpG(2);d.R7$(),d.SpI("[",t.duplicatesCount+1,"]")}}function Iy(n,e){if(1&n&&(d.j41(0,"div"),d.EFF(1),d.DNE(2,Ey,2,1,"ng-container",4),d.k0s()),2&n){const t=d.XpG();d.HbH(t.options.titleClass),d.BMQ("aria-label",t.title),d.R7$(),d.SpI(" ",t.title," "),d.R7$(),d.Y8G("ngIf",t.duplicatesCount)}}function IO(n,e){if(1&n&&d.nrm(0,"div",7),2&n){const t=d.XpG();d.HbH(t.options.messageClass),d.Y8G("innerHTML",t.message,d.npT)}}function HP(n,e){if(1&n&&(d.j41(0,"div",8),d.EFF(1),d.k0s()),2&n){const t=d.XpG();d.HbH(t.options.messageClass),d.BMQ("aria-label",t.message),d.R7$(),d.SpI(" ",t.message," ")}}function GP(n,e){if(1&n&&(d.j41(0,"div"),d.nrm(1,"div",9),d.k0s()),2&n){const t=d.XpG();d.R7$(),d.xc7("width",t.width+"%")}}class KP{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class yf{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class wy{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new $r.B;_activate=new $r.B;_manualClose=new $r.B;_resetTimeout=new $r.B;_countDuplicate=new $r.B;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class Ty{toastId;config;message;title;toastType;toastRef;_onTap=new $r.B;_onAction=new $r.B;constructor(e,t,i,a,l,h){this.toastId=e,this.config=t,this.message=i,this.title=a,this.toastType=l,this.toastRef=h,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const gC=new d.nKC("ToastConfig");class mC extends yf{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,i){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){const i=this._componentFactoryResolver.resolveComponentFactory(e.component);let a;return a=i.create(e.injector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(a),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(a)),a}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let TO=(()=>{class n{_document=(0,d.WQX)(Be);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class QP{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let Mg=(()=>{class n{_overlayContainer=(0,d.WQX)(TO);_componentFactoryResolver=(0,d.WQX)(d.OM3);_appRef=(0,d.WQX)(d.o8S);_document=(0,d.WQX)(Be);_paneElements=new Map;create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){const a=this._document.createElement("div");return a.id="toast-container",a.classList.add(t),a.classList.add("toast-container"),i?i.getContainerElement().appendChild(a):this._overlayContainer.getContainerElement().appendChild(a),a}_createPortalHost(t){return new mC(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new QP(this._createPortalHost(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vf=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,i,a,l,h){this.overlay=i,this._injector=a,this.sanitizer=l,this.ngZone=h,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,i,a={},l=""){return this._preBuildNotification(l,t,i,this.applyConfig(a))}success(t,i,a={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,i,this.applyConfig(a))}error(t,i,a={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,i,this.applyConfig(a))}info(t,i,a={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,i,this.applyConfig(a))}warning(t,i,a={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,i,this.applyConfig(a))}clear(t){for(const i of this.toasts)if(void 0!==t){if(i.toastId===t)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(t){const i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const a=this.toasts[this.currentlyActive].toastRef;a.isInactive()||(this.currentlyActive=this.currentlyActive+1,a.activate())}return!0}findDuplicate(t="",i="",a,l){const{includeTitleDuplicates:h}=this.toastrConfig;for(const y of this.toasts)if((!h||h&&y.title===t)&&y.message===i)return y.toastRef.onDuplicate(a,l),y;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,a,l){return l.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,a,l)):this._buildNotification(t,i,a,l)}_buildNotification(t,i,a,l){if(!l.toastComponent)throw new Error("toastComponent required");const h=this.findDuplicate(a,i,this.toastrConfig.resetTimeoutOnDuplicate&&l.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&a||i)&&this.toastrConfig.preventDuplicates&&null!==h)return h;this.previousToastMessage=i;let y=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(y=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const w=this.overlay.create(l.positionClass,this.overlayContainer);this.index=this.index+1;let C=i;i&&l.enableHtml&&(C=this.sanitizer.sanitize(d.WPN.HTML,i));const M=new wy(w),O=new Ty(this.index,l,C,a,t,M),Y=d.zZn.create({providers:[{provide:Ty,useValue:O}],parent:this._injector}),me=new KP(l.toastComponent,Y),Me=w.attach(me,l.newestOnTop);M.componentInstance=Me.instance;const Ie={toastId:this.index,title:a||"",message:i||"",toastRef:M,onShown:M.afterActivate(),onHidden:M.afterClosed(),onTap:O.onTap(),onAction:O.onAction(),portal:Me};return y||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Ie.toastRef.activate()})),this.toasts.push(Ie),Ie}static \u0275fac=function(i){return new(i||n)(d.KVO(gC),d.KVO(Mg),d.KVO(d.zZn),d.KVO(ME),d.KVO(d.SKi))};static \u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const XP={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,a){this.toastrService=t,this.toastPackage=i,this.ngZone=a,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(l=>{this.duplicatesCount=l}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(i){return new(i||n)(d.rXU(vf),d.rXU(Ty),d.rXU(d.SKi))};static \u0275cmp=d.VBU({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,a){1&i&&d.bIt("click",function(){return a.tapToast()})("mouseenter",function(){return a.stickAround()})("mouseleave",function(){return a.delayedHideToast()}),2&i&&(d.zvX("@flyInOut",a.state),d.HbH(a.toastClasses),d.xc7("display",a.displayStyle))},standalone:!0,features:[d.aNF],attrs:_f,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,a){1&i&&d.DNE(0,$P,3,0,"button",0)(1,Iy,3,5,"div",1)(2,IO,1,3,"div",2)(3,HP,2,4,"div",3)(4,GP,2,2,"div",4),2&i&&(d.Y8G("ngIf",a.options.closeButton),d.R7$(),d.Y8G("ngIf",a.title),d.R7$(),d.Y8G("ngIf",a.message&&a.options.enableHtml),d.R7$(),d.Y8G("ngIf",a.message&&!a.options.enableHtml),d.R7$(),d.Y8G("ngIf",a.options.progressBar))},dependencies:[po],encapsulation:2,data:{animation:[(0,Ys.hZ)("flyInOut",[(0,Ys.wk)("inactive",(0,Ys.iF)({opacity:0})),(0,Ys.wk)("active",(0,Ys.iF)({opacity:1})),(0,Ys.wk)("removed",(0,Ys.iF)({opacity:0})),(0,Ys.kY)("inactive => active",(0,Ys.i0)("{{ easeTime }}ms {{ easing }}")),(0,Ys.kY)("active => removed",(0,Ys.i0)("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},_C=(n={})=>(0,d.EmA)([{provide:gC,useValue:{default:XP,config:n}}]);let GI=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[_C(t)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=d.$C({type:n});static \u0275inj=d.G2t({})}return n})(),zI=(()=>{class n{constructor(){}getByPage(){return(0,ve.A)(function*(){const i=yield(yield fetch("https://pokeapi.co/api/v2/pokemon/?limit=500&offset=0")).json();return i.results.length>0?i.results:[]})()}getById(t){return(0,ve.A)(function*(){return yield(yield fetch(`https://pokeapi.co/api/v2/pokemon/${t}`)).json()})()}searchPokemon(t){return(0,ve.A)(function*(){return(yield(yield fetch(`https://pokeapi.co/api/v2/pokemon/${t}`)).json()).results})()}getPokemonDescription(t){return(0,ve.A)(function*(){try{return(yield(yield fetch(`https://pokeapi.co/api/v2/pokemon-species/${t}`)).json()).flavor_text_entries.find(l=>"en"===l.language.name).flavor_text}catch(i){return console.error(`Error fetching description for Pok\xe9mon with ID ${t}:`,i),""}})()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yC=(()=>{class n{constructor(){this._query=new Ss.t("")}get query(){return this._query}setQuery(t){this._query.next(t)}searchPokemon(t){console.log("Searching for:",t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vr=ye(852);(0,vr.registerVersion)("firebase","10.12.0","app");class eM extends pl.yU{constructor(e,t){super()}schedule(e,t=0){return this}}const Ay={setInterval(n,e,...t){const{delegate:i}=Ay;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Ay;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var WI=ye(908);class KI extends eM{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const a=this.id,l=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(l,a,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(l,this.id,t),this}requestAsyncId(e,t,i=0){return Ay.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&Ay.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let a,i=!1;try{this.work(e)}catch(l){i=!0,a=l||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,WI.o)(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Dy={now:()=>(Dy.delegate||Date).now(),delegate:void 0};class Ng{constructor(e,t=Ng.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Ng.now=Dy.now;class EC extends Ng{constructor(e,t=Ng.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const IC=new class rd extends EC{}(class vC extends KI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}}),TC=new EC(KI),xg=new d.RxE("ANGULARFIRE2_VERSION");class ku{constructor(){return((n,e)=>{const t=(0,vr.getApps)(),i=[];return t.forEach(a=>{a.container.getProvider(n).instances.forEach(h=>{i.includes(h)||i.push(h)})}),i})(by)}}const by="app-check";function id(){}class Ef{zone;delegate;constructor(e,t=IC){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const a=this.zone;return this.delegate.schedule(function(h){a.runGuarded(()=>{e.apply(this,[h])})},t,i)}}class rM{zone;task=null;constructor(e){this.zone=e}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",id,{},id,id)),t.pipe(pi({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let AC=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ef(Zone.current)),this.insideAngular=t.run(()=>new Ef(Zone.current,TC)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(d.KVO(d.SKi))};static \u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ls(n){return function CC(n){return function(t){return(t=t.lift(new rM(n.ngZone))).pipe(hl(n.outsideAngular),Io(n.insideAngular))}}(function Pl(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var xo=ye(345);xo.A.registerVersion("firebase","10.12.0","app-compat");const sM=["ngOnDestroy"];class SC{constructor(e){return e}}const Ry=new d.nKC("angularfire2.app.options"),Py=new d.nKC("angularfire2.app.name");function XI(n,e,t){const a="object"==typeof t&&t||{};a.name=a.name||"string"==typeof t&&t||"[DEFAULT]";const h=xo.A.apps.filter(y=>y&&y.name===a.name)[0]||e.runOutsideAngular(()=>xo.A.initializeApp(n,a));try{if(JSON.stringify(n)!==JSON.stringify(h.options)){const y=!!module.hot;My("error",`${h.name} Firebase App already initialized with different options${y?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new SC(h)}const My=(n,...e)=>{(0,d.naY)()&&typeof console<"u"&&console[n](...e)},uM={provide:SC,useFactory:XI,deps:[Ry,d.SKi,[new d.Xx1,Py]]};let lM=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:Ry,useValue:t},{provide:Py,useValue:i}]}}constructor(t){xo.A.registerVersion("angularfire",xg.full,"core"),xo.A.registerVersion("angularfire",xg.full,"app-compat"),xo.A.registerVersion("angular",d.xvI.full,t.toString())}static \u0275fac=function(i){return new(i||n)(d.KVO(d.Agw))};static \u0275mod=d.$C({type:n});static \u0275inj=d.G2t({providers:[uM]})}return n})();function YI(n,e,t,i,a){const[,l,h]=globalThis.\u0275AngularfireInstanceCache.find(y=>y[0]===n)||[];if(l)return function RC(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(a,h)||(ZI("error",`${e} was already initialized on the ${t} Firebase App with different settings.${JI?" You may need to reload as Firebase is not HMR aware.":""}`),ZI("warn",{is:a,was:h})),l;{const y=i();return globalThis.\u0275AngularfireInstanceCache.push([n,y,a]),y}}const JI=typeof module<"u"&&!!module.hot,ZI=(n,...e)=>{(0,d.naY)()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[],ye(780);class ew extends $r.B{constructor(e=1/0,t=1/0,i=Dy){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:h}=this;t||(i.push(e),!a&&i.push(l.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:a}=this,l=a.slice();for(let h=0;h<l.length&&!e.closed;h+=i?1:2)e.next(l[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<i.length&&i.splice(0,i.length-l),!a){const h=t.now();let y=0;for(let w=1;w<i.length&&i[w]<=h;w+=2)y=w;y&&i.splice(0,y+1)}}}var tw=ye(707);function nw(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new tw.Ms({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function NC(n,e,t){let i,a=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):i=n??1/0,function MC(n={}){const{connector:e=(()=>new $r.B),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:a=!0}=n;return l=>{let h,y,w,C=0,M=!1,O=!1;const j=()=>{y?.unsubscribe(),y=void 0},Y=()=>{j(),h=w=void 0,M=O=!1},me=()=>{const Me=h;Y(),Me?.unsubscribe()};return(0,Nn.N)((Me,Ie)=>{C++,!O&&!M&&j();const Ge=w=w??e();Ie.add(()=>{C--,0===C&&!O&&!M&&(y=nw(me,a))}),Ge.subscribe(Ie),!h&&C>0&&(h=new tw.Ms({next:ft=>Ge.next(ft),error:ft=>{O=!0,j(),y=nw(Y,t,ft),Ge.error(ft)},complete:()=>{M=!0,j(),y=nw(Y,i),Ge.complete()}}),Qi(Me).subscribe(h))})(l)}}({connector:()=>new ew(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function xC(n,e){return(0,xi.T)(e)?Hr(()=>n,e):Hr(()=>n)}const Ny=new d.nKC("angularfire2.auth.use-emulator"),iw=new d.nKC("angularfire2.auth.settings"),xy=new d.nKC("angularfire2.auth.tenant-id"),Oy=new d.nKC("angularfire2.auth.langugage-code"),OC=new d.nKC("angularfire2.auth.use-device-language"),kC=new d.nKC("angularfire.auth.persistence"),FC=(n,e,t,i,a,l,h,y)=>YI(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),i&&(w.tenantId=i),w.languageCode=a,l&&w.useDeviceLanguage(),h)for(const[C,M]of Object.entries(h))w.settings[C]=M;return y&&w.setPersistence(y),w},[t,i,a,l,h,y]);let If=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,a,l,h,y,w,C,M,O,j,Y){const me=new $r.B,Me=Ft(void 0).pipe(Io(h.outsideAngular),Hr(()=>l.runOutsideAngular(()=>Promise.resolve().then(ye.bind(ye,780)))),(0,cn.T)(()=>XI(t,l,i)),(0,cn.T)(Ie=>FC(Ie,l,y,C,M,O,w,j)),NC({bufferSize:1,refCount:!1}));if(qo(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ft(null);else{Me.pipe(da()).subscribe();const Ie=Me.pipe(Hr(qe=>qe.getRedirectResult().then(vt=>vt,()=>null)),ls,NC({bufferSize:1,refCount:!1})),Ge=Me.pipe(Hr(qe=>new jr.c(vt=>({unsubscribe:l.runOutsideAngular(()=>qe.onAuthStateChanged(Xt=>vt.next(Xt),Xt=>vt.error(Xt),()=>vt.complete()))})))),ft=Me.pipe(Hr(qe=>new jr.c(vt=>({unsubscribe:l.runOutsideAngular(()=>qe.onIdTokenChanged(Xt=>vt.next(Xt),Xt=>vt.error(Xt),()=>vt.complete()))}))));this.authState=Ie.pipe(xC(Ge),hl(h.outsideAngular),Io(h.insideAngular)),this.user=Ie.pipe(xC(ft),hl(h.outsideAngular),Io(h.insideAngular)),this.idToken=this.user.pipe(Hr(qe=>qe?qn(qe.getIdToken()):Ft(null))),this.idTokenResult=this.user.pipe(Hr(qe=>qe?qn(qe.getIdTokenResult()):Ft(null))),this.credential=function PC(...n){const e=ja(n),t=function p_(n,e){return"number"==typeof la(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Qi(i[0]):fl(t)(qn(i,e)):ti}(Ie,me,this.authState.pipe(Ms(qe=>!qe))).pipe((0,cn.T)(qe=>qe?.user?qe:null),hl(h.outsideAngular),Io(h.insideAngular))}return((n,e,t,i={})=>new Proxy(n,{get:(a,l)=>t.runOutsideAngular(()=>{if(n[l])return i?.spy?.get&&i.spy.get(l,n[l]),n[l];if(sM.indexOf(l)>-1)return()=>{};const h=e.toPromise().then(y=>{const w=y?.[l];return"function"==typeof w?w.bind(y):w?.then?w.then(C=>t.run(()=>C)):t.run(()=>w)});return new Proxy(()=>{},{get:(y,w)=>h[w],apply:(y,w,C)=>h.then(M=>{const O=M?.(...C);return i?.spy?.apply&&i.spy.apply(l,C,O),O})})})}))(this,Me,l,{spy:{apply:(Ie,Ge,ft)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&ft.then(qe=>me.next(qe))}}})}static \u0275fac=function(i){return new(i||n)(d.KVO(Ry),d.KVO(Py,8),d.KVO(d.Agw),d.KVO(d.SKi),d.KVO(AC),d.KVO(Ny,8),d.KVO(iw,8),d.KVO(xy,8),d.KVO(Oy,8),d.KVO(OC,8),d.KVO(kC,8),d.KVO(ku,8))};static \u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),VC=(()=>{class n{constructor(){xo.A.registerVersion("angularfire",xg.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=d.$C({type:n});static \u0275inj=d.G2t({providers:[If]})}return n})();function kg(){return(0,Nn.N)((n,e)=>{let t,i=!1;n.subscribe((0,xr._)(e,a=>{const l=t;t=a,i&&e.next([l,a]),i=!0}))})}function LC(n,e){return n===e}var Fu,uw,ow=ye(362),Ea=ye(41),jn=ye(76),aw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},UC={};(function(){var n;function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function a(ie,G,J){J||(J=0);var se=Array(16);if("string"==typeof G)for(var le=0;16>le;++le)se[le]=G.charCodeAt(J++)|G.charCodeAt(J++)<<8|G.charCodeAt(J++)<<16|G.charCodeAt(J++)<<24;else for(le=0;16>le;++le)se[le]=G[J++]|G[J++]<<8|G[J++]<<16|G[J++]<<24;var pe=ie.g[3],X=(G=ie.g[0])+(pe^(J=ie.g[1])&((le=ie.g[2])^pe))+se[0]+3614090360&4294967295;X=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=(J=(le=(pe=(G=J+(X<<7&4294967295|X>>>25))+((X=pe+(le^G&(J^le))+se[1]+3905402710&4294967295)<<12&4294967295|X>>>20))+((X=le+(J^pe&(G^J))+se[2]+606105819&4294967295)<<17&4294967295|X>>>15))+((X=J+(G^le&(pe^G))+se[3]+3250441966&4294967295)<<22&4294967295|X>>>10))+((X=G+(pe^J&(le^pe))+se[4]+4118548399&4294967295)<<7&4294967295|X>>>25))+((X=pe+(le^G&(J^le))+se[5]+1200080426&4294967295)<<12&4294967295|X>>>20))+((X=le+(J^pe&(G^J))+se[6]+2821735955&4294967295)<<17&4294967295|X>>>15))+((X=J+(G^le&(pe^G))+se[7]+4249261313&4294967295)<<22&4294967295|X>>>10))+((X=G+(pe^J&(le^pe))+se[8]+1770035416&4294967295)<<7&4294967295|X>>>25))+((X=pe+(le^G&(J^le))+se[9]+2336552879&4294967295)<<12&4294967295|X>>>20))+((X=le+(J^pe&(G^J))+se[10]+4294925233&4294967295)<<17&4294967295|X>>>15))+((X=J+(G^le&(pe^G))+se[11]+2304563134&4294967295)<<22&4294967295|X>>>10))+((X=G+(pe^J&(le^pe))+se[12]+1804603682&4294967295)<<7&4294967295|X>>>25))+((X=pe+(le^G&(J^le))+se[13]+4254626195&4294967295)<<12&4294967295|X>>>20))+((X=le+(J^pe&(G^J))+se[14]+2792965006&4294967295)<<17&4294967295|X>>>15))+((X=J+(G^le&(pe^G))+se[15]+1236535329&4294967295)<<22&4294967295|X>>>10))+((X=G+(le^pe&(J^le))+se[1]+4129170786&4294967295)<<5&4294967295|X>>>27))+((X=pe+(J^le&(G^J))+se[6]+3225465664&4294967295)<<9&4294967295|X>>>23))+((X=le+(G^J&(pe^G))+se[11]+643717713&4294967295)<<14&4294967295|X>>>18))+((X=J+(pe^G&(le^pe))+se[0]+3921069994&4294967295)<<20&4294967295|X>>>12))+((X=G+(le^pe&(J^le))+se[5]+3593408605&4294967295)<<5&4294967295|X>>>27))+((X=pe+(J^le&(G^J))+se[10]+38016083&4294967295)<<9&4294967295|X>>>23))+((X=le+(G^J&(pe^G))+se[15]+3634488961&4294967295)<<14&4294967295|X>>>18))+((X=J+(pe^G&(le^pe))+se[4]+3889429448&4294967295)<<20&4294967295|X>>>12))+((X=G+(le^pe&(J^le))+se[9]+568446438&4294967295)<<5&4294967295|X>>>27))+((X=pe+(J^le&(G^J))+se[14]+3275163606&4294967295)<<9&4294967295|X>>>23))+((X=le+(G^J&(pe^G))+se[3]+4107603335&4294967295)<<14&4294967295|X>>>18))+((X=J+(pe^G&(le^pe))+se[8]+1163531501&4294967295)<<20&4294967295|X>>>12))+((X=G+(le^pe&(J^le))+se[13]+2850285829&4294967295)<<5&4294967295|X>>>27))+((X=pe+(J^le&(G^J))+se[2]+4243563512&4294967295)<<9&4294967295|X>>>23))+((X=le+(G^J&(pe^G))+se[7]+1735328473&4294967295)<<14&4294967295|X>>>18))+((X=J+(pe^G&(le^pe))+se[12]+2368359562&4294967295)<<20&4294967295|X>>>12))+((X=G+(J^le^pe)+se[5]+4294588738&4294967295)<<4&4294967295|X>>>28))+((X=pe+(G^J^le)+se[8]+2272392833&4294967295)<<11&4294967295|X>>>21))+((X=le+(pe^G^J)+se[11]+1839030562&4294967295)<<16&4294967295|X>>>16))+((X=J+(le^pe^G)+se[14]+4259657740&4294967295)<<23&4294967295|X>>>9))+((X=G+(J^le^pe)+se[1]+2763975236&4294967295)<<4&4294967295|X>>>28))+((X=pe+(G^J^le)+se[4]+1272893353&4294967295)<<11&4294967295|X>>>21))+((X=le+(pe^G^J)+se[7]+4139469664&4294967295)<<16&4294967295|X>>>16))+((X=J+(le^pe^G)+se[10]+3200236656&4294967295)<<23&4294967295|X>>>9))+((X=G+(J^le^pe)+se[13]+681279174&4294967295)<<4&4294967295|X>>>28))+((X=pe+(G^J^le)+se[0]+3936430074&4294967295)<<11&4294967295|X>>>21))+((X=le+(pe^G^J)+se[3]+3572445317&4294967295)<<16&4294967295|X>>>16))+((X=J+(le^pe^G)+se[6]+76029189&4294967295)<<23&4294967295|X>>>9))+((X=G+(J^le^pe)+se[9]+3654602809&4294967295)<<4&4294967295|X>>>28))+((X=pe+(G^J^le)+se[12]+3873151461&4294967295)<<11&4294967295|X>>>21))+((X=le+(pe^G^J)+se[15]+530742520&4294967295)<<16&4294967295|X>>>16))+((X=J+(le^pe^G)+se[2]+3299628645&4294967295)<<23&4294967295|X>>>9))+((X=G+(le^(J|~pe))+se[0]+4096336452&4294967295)<<6&4294967295|X>>>26))+((X=pe+(J^(G|~le))+se[7]+1126891415&4294967295)<<10&4294967295|X>>>22))+((X=le+(G^(pe|~J))+se[14]+2878612391&4294967295)<<15&4294967295|X>>>17))+((X=J+(pe^(le|~G))+se[5]+4237533241&4294967295)<<21&4294967295|X>>>11))+((X=G+(le^(J|~pe))+se[12]+1700485571&4294967295)<<6&4294967295|X>>>26))+((X=pe+(J^(G|~le))+se[3]+2399980690&4294967295)<<10&4294967295|X>>>22))+((X=le+(G^(pe|~J))+se[10]+4293915773&4294967295)<<15&4294967295|X>>>17))+((X=J+(pe^(le|~G))+se[1]+2240044497&4294967295)<<21&4294967295|X>>>11))+((X=G+(le^(J|~pe))+se[8]+1873313359&4294967295)<<6&4294967295|X>>>26))+((X=pe+(J^(G|~le))+se[15]+4264355552&4294967295)<<10&4294967295|X>>>22))+((X=le+(G^(pe|~J))+se[6]+2734768916&4294967295)<<15&4294967295|X>>>17))+((X=J+(pe^(le|~G))+se[13]+1309151649&4294967295)<<21&4294967295|X>>>11))+((pe=(G=J+((X=G+(le^(J|~pe))+se[4]+4149444226&4294967295)<<6&4294967295|X>>>26))+((X=pe+(J^(G|~le))+se[11]+3174756917&4294967295)<<10&4294967295|X>>>22))^((le=pe+((X=le+(G^(pe|~J))+se[2]+718787259&4294967295)<<15&4294967295|X>>>17))|~G))+se[9]+3951481745&4294967295,ie.g[0]=ie.g[0]+G&4294967295,ie.g[1]=ie.g[1]+(le+(X<<21&4294967295|X>>>11))&4294967295,ie.g[2]=ie.g[2]+le&4294967295,ie.g[3]=ie.g[3]+pe&4294967295}function h(ie,G){this.h=G;for(var J=[],se=!0,le=ie.length-1;0<=le;le--){var pe=0|ie[le];se&&pe==G||(J[le]=pe,se=!1)}this.g=J}(function e(ie,G){function J(){}J.prototype=G.prototype,ie.D=G.prototype,ie.prototype=new J,ie.prototype.constructor=ie,ie.C=function(se,le,pe){for(var X=Array(arguments.length-2),Yd=2;Yd<arguments.length;Yd++)X[Yd-2]=arguments[Yd];return G.prototype[le].apply(se,X)}})(i,function t(){this.blockSize=-1}),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},i.prototype.u=function(ie,G){void 0===G&&(G=ie.length);for(var J=G-this.blockSize,se=this.B,le=this.h,pe=0;pe<G;){if(0==le)for(;pe<=J;)a(this,ie,pe),pe+=this.blockSize;if("string"==typeof ie){for(;pe<G;)if(se[le++]=ie.charCodeAt(pe++),le==this.blockSize){a(this,se),le=0;break}}else for(;pe<G;)if(se[le++]=ie[pe++],le==this.blockSize){a(this,se),le=0;break}}this.h=le,this.o+=G},i.prototype.v=function(){var ie=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ie[0]=128;for(var G=1;G<ie.length-8;++G)ie[G]=0;var J=8*this.o;for(G=ie.length-8;G<ie.length;++G)ie[G]=255&J,J/=256;for(this.u(ie),ie=Array(16),G=J=0;4>G;++G)for(var se=0;32>se;se+=8)ie[J++]=this.g[G]>>>se&255;return ie};var y={};function w(ie){return-128<=ie&&128>ie?function l(ie,G){var J=y;return Object.prototype.hasOwnProperty.call(J,ie)?J[ie]:J[ie]=G(ie)}(ie,function(G){return new h([0|G],0>G?-1:0)}):new h([0|ie],0>ie?-1:0)}function C(ie){if(isNaN(ie)||!isFinite(ie))return O;if(0>ie)return Ie(C(-ie));for(var G=[],J=1,se=0;ie>=J;se++)G[se]=ie/J|0,J*=4294967296;return new h(G,0)}var O=w(0),j=w(1),Y=w(16777216);function me(ie){if(0!=ie.h)return!1;for(var G=0;G<ie.g.length;G++)if(0!=ie.g[G])return!1;return!0}function Me(ie){return-1==ie.h}function Ie(ie){for(var G=ie.g.length,J=[],se=0;se<G;se++)J[se]=~ie.g[se];return new h(J,~ie.h).add(j)}function Ge(ie,G){return ie.add(Ie(G))}function ft(ie,G){for(;(65535&ie[G])!=ie[G];)ie[G+1]+=ie[G]>>>16,ie[G]&=65535,G++}function qe(ie,G){this.g=ie,this.h=G}function vt(ie,G){if(me(G))throw Error("division by zero");if(me(ie))return new qe(O,O);if(Me(ie))return G=vt(Ie(ie),G),new qe(Ie(G.g),Ie(G.h));if(Me(G))return G=vt(ie,Ie(G)),new qe(Ie(G.g),G.h);if(30<ie.g.length){if(Me(ie)||Me(G))throw Error("slowDivide_ only works with positive integers.");for(var J=j,se=G;0>=se.l(ie);)J=Xt(J),se=Xt(se);var le=hn(J,1),pe=hn(se,1);for(se=hn(se,2),J=hn(J,2);!me(se);){var X=pe.add(se);0>=X.l(ie)&&(le=le.add(J),pe=X),se=hn(se,1),J=hn(J,1)}return G=Ge(ie,le.j(G)),new qe(le,G)}for(le=O;0<=ie.l(G);){for(J=Math.max(1,Math.floor(ie.m()/G.m())),se=48>=(se=Math.ceil(Math.log(J)/Math.LN2))?1:Math.pow(2,se-48),X=(pe=C(J)).j(G);Me(X)||0<X.l(ie);)X=(pe=C(J-=se)).j(G);me(pe)&&(pe=j),le=le.add(pe),ie=Ge(ie,X)}return new qe(le,ie)}function Xt(ie){for(var G=ie.g.length+1,J=[],se=0;se<G;se++)J[se]=ie.i(se)<<1|ie.i(se-1)>>>31;return new h(J,ie.h)}function hn(ie,G){var J=G>>5;G%=32;for(var se=ie.g.length-J,le=[],pe=0;pe<se;pe++)le[pe]=0<G?ie.i(pe+J)>>>G|ie.i(pe+J+1)<<32-G:ie.i(pe+J);return new h(le,ie.h)}(n=h.prototype).m=function(){if(Me(this))return-Ie(this).m();for(var ie=0,G=1,J=0;J<this.g.length;J++){var se=this.i(J);ie+=(0<=se?se:4294967296+se)*G,G*=4294967296}return ie},n.toString=function(ie){if(2>(ie=ie||10)||36<ie)throw Error("radix out of range: "+ie);if(me(this))return"0";if(Me(this))return"-"+Ie(this).toString(ie);for(var G=C(Math.pow(ie,6)),J=this,se="";;){var le=vt(J,G).g,pe=((0<(J=Ge(J,le.j(G))).g.length?J.g[0]:J.h)>>>0).toString(ie);if(me(J=le))return pe+se;for(;6>pe.length;)pe="0"+pe;se=pe+se}},n.i=function(ie){return 0>ie?0:ie<this.g.length?this.g[ie]:this.h},n.l=function(ie){return Me(ie=Ge(this,ie))?-1:me(ie)?0:1},n.abs=function(){return Me(this)?Ie(this):this},n.add=function(ie){for(var G=Math.max(this.g.length,ie.g.length),J=[],se=0,le=0;le<=G;le++){var pe=se+(65535&this.i(le))+(65535&ie.i(le)),X=(pe>>>16)+(this.i(le)>>>16)+(ie.i(le)>>>16);se=X>>>16,J[le]=(X&=65535)<<16|(pe&=65535)}return new h(J,-2147483648&J[J.length-1]?-1:0)},n.j=function(ie){if(me(this)||me(ie))return O;if(Me(this))return Me(ie)?Ie(this).j(Ie(ie)):Ie(Ie(this).j(ie));if(Me(ie))return Ie(this.j(Ie(ie)));if(0>this.l(Y)&&0>ie.l(Y))return C(this.m()*ie.m());for(var G=this.g.length+ie.g.length,J=[],se=0;se<2*G;se++)J[se]=0;for(se=0;se<this.g.length;se++)for(var le=0;le<ie.g.length;le++){var pe=this.i(se)>>>16,X=65535&this.i(se),Yd=ie.i(le)>>>16,NA=65535&ie.i(le);J[2*se+2*le]+=X*NA,ft(J,2*se+2*le),J[2*se+2*le+1]+=pe*NA,ft(J,2*se+2*le+1),J[2*se+2*le+1]+=X*Yd,ft(J,2*se+2*le+1),J[2*se+2*le+2]+=pe*Yd,ft(J,2*se+2*le+2)}for(se=0;se<G;se++)J[se]=J[2*se+1]<<16|J[2*se];for(se=G;se<2*G;se++)J[se]=0;return new h(J,0)},n.A=function(ie){return vt(this,ie).h},n.and=function(ie){for(var G=Math.max(this.g.length,ie.g.length),J=[],se=0;se<G;se++)J[se]=this.i(se)&ie.i(se);return new h(J,this.h&ie.h)},n.or=function(ie){for(var G=Math.max(this.g.length,ie.g.length),J=[],se=0;se<G;se++)J[se]=this.i(se)|ie.i(se);return new h(J,this.h|ie.h)},n.xor=function(ie){for(var G=Math.max(this.g.length,ie.g.length),J=[],se=0;se<G;se++)J[se]=this.i(se)^ie.i(se);return new h(J,this.h^ie.h)},i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,uw=UC.Md5=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=C,h.fromString=function M(ie,G){if(0==ie.length)throw Error("number format error: empty string");if(2>(G=G||10)||36<G)throw Error("radix out of range: "+G);if("-"==ie.charAt(0))return Ie(M(ie.substring(1),G));if(0<=ie.indexOf("-"))throw Error('number format error: interior "-" character');for(var J=C(Math.pow(G,8)),se=O,le=0;le<ie.length;le+=8){var pe=Math.min(8,ie.length-le),X=parseInt(ie.substring(le,le+pe),G);8>pe?(pe=C(Math.pow(G,pe)),se=se.j(pe).add(C(X))):se=(se=se.j(J)).add(C(X))}return se},Fu=UC.Integer=h}).apply(typeof aw<"u"?aw:typeof self<"u"?self:typeof window<"u"?window:{});var cM,BC,wf,lw,Tf,ky,cw,dw,hw,Fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ml={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(_,b,N){return _==Array.prototype||_==Object.prototype||(_[b]=N.value),_},i=function t(_){_=["object"==typeof globalThis&&globalThis,_,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Fg&&Fg];for(var b=0;b<_.length;++b){var N=_[b];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}(this);!function a(_,b){if(b)e:{var N=i;_=_.split(".");for(var U=0;U<_.length-1;U++){var ce=_[U];if(!(ce in N))break e;N=N[ce]}(b=b(U=N[_=_[_.length-1]]))!=U&&null!=b&&e(N,_,{configurable:!0,writable:!0,value:b})}}("Array.prototype.values",function(_){return _||function(){return function l(_,b){_ instanceof String&&(_+="");var N=0,U=!1,ce={next:function(){if(!U&&N<_.length){var Ae=N++;return{value:b(Ae,_[Ae]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}(this,function(b,N){return N})}});var h=h||{},y=this||self;function w(_){var b=typeof _;return"array"==(b="object"!=b?b:_?Array.isArray(_)?"array":b:"null")||"object"==b&&"number"==typeof _.length}function C(_){var b=typeof _;return"object"==b&&null!=_||"function"==b}function M(_,b,N){return _.call.apply(_.bind,arguments)}function O(_,b,N){if(!_)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,U),_.apply(b,ce)}}return function(){return _.apply(b,arguments)}}function j(_,b,N){return(j=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?M:O).apply(null,arguments)}function Y(_,b){var N=Array.prototype.slice.call(arguments,1);return function(){var U=N.slice();return U.push.apply(U,arguments),_.apply(this,U)}}function me(_,b){function N(){}N.prototype=b.prototype,_.aa=b.prototype,_.prototype=new N,_.prototype.constructor=_,_.Qb=function(U,ce,Ae){for(var st=Array(arguments.length-2),Tr=2;Tr<arguments.length;Tr++)st[Tr-2]=arguments[Tr];return b.prototype[ce].apply(U,st)}}function Me(_){const b=_.length;if(0<b){const N=Array(b);for(let U=0;U<b;U++)N[U]=_[U];return N}return[]}function Ie(_,b){for(let N=1;N<arguments.length;N++){const U=arguments[N];if(w(U)){const ce=_.length||0,Ae=U.length||0;_.length=ce+Ae;for(let st=0;st<Ae;st++)_[ce+st]=U[st]}else _.push(U)}}function ft(_){return/^[\s\xa0]*$/.test(_)}function qe(){var _=y.navigator;return _&&(_=_.userAgent)?_:""}function vt(_){return vt[" "](_),_}vt[" "]=function(){};var Xt=!(-1==qe().indexOf("Gecko")||-1!=qe().toLowerCase().indexOf("webkit")&&-1==qe().indexOf("Edge")||-1!=qe().indexOf("Trident")||-1!=qe().indexOf("MSIE")||-1!=qe().indexOf("Edge"));function hn(_,b,N){for(const U in _)b.call(N,_[U],U,_)}function G(_){const b={};for(const N in _)b[N]=_[N];return b}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(_,b){let N,U;for(let ce=1;ce<arguments.length;ce++){for(N in U=arguments[ce],U)_[N]=U[N];for(let Ae=0;Ae<J.length;Ae++)N=J[Ae],Object.prototype.hasOwnProperty.call(U,N)&&(_[N]=U[N])}}function le(_){var b=1;_=_.split(":");const N=[];for(;0<b&&_.length;)N.push(_.shift()),b--;return _.length&&N.push(_.join(":")),N}function pe(_){y.setTimeout(()=>{throw _},0)}function X(){var _=ux;let b=null;return _.g&&(b=_.g,_.g=_.g.next,_.g||(_.h=null),b.next=null),b}var NA=new class Ge{constructor(b,N){this.i=b,this.j=N,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}(()=>new AF,_=>_.reset());class AF{constructor(){this.next=this.g=this.h=null}set(b,N){this.h=b,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let xA,OA=!1,ux=new class Yd{constructor(){this.h=this.g=null}add(b,N){const U=NA.get();U.set(b,N),this.h?this.h.next=U:this.g=U,this.h=U}},Sk=()=>{const _=y.Promise.resolve(void 0);xA=()=>{_.then(DF)}};var DF=()=>{for(var _;_=X();){try{_.h.call(_.g)}catch(N){pe(N)}var b=NA;b.j(_),100>b.h&&(b.h++,_.next=b.g,b.g=_)}OA=!1};function lp(){this.s=this.s,this.C=this.C}function Us(_,b){this.type=_,this.g=this.target=b,this.defaultPrevented=!1}lp.prototype.s=!1,lp.prototype.ma=function(){this.s||(this.s=!0,this.N())},lp.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Us.prototype.h=function(){this.defaultPrevented=!0};var CF=function(){if(!y.addEventListener||!Object.defineProperty)return!1;var _=!1,b=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const N=()=>{};y.addEventListener("test",N,b),y.removeEventListener("test",N,b)}catch{}return _}();function kA(_,b){if(Us.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var N=this.type=_.type,U=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=b,b=_.relatedTarget){if(Xt){e:{try{vt(b.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(b=null)}}else"mouseover"==N?b=_.fromElement:"mouseout"==N&&(b=_.toElement);this.relatedTarget=b,U?(this.clientX=void 0!==U.clientX?U.clientX:U.pageX,this.clientY=void 0!==U.clientY?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=void 0!==_.clientX?_.clientX:_.pageX,this.clientY=void 0!==_.clientY?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType="string"==typeof _.pointerType?_.pointerType:bF[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&kA.aa.h.call(this)}}me(kA,Us);var bF={2:"touch",3:"pen",4:"mouse"};kA.prototype.h=function(){kA.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var FA="closure_listenable_"+(1e6*Math.random()|0),SF=0;function RF(_,b,N,U,ce){this.listener=_,this.proxy=null,this.src=b,this.type=N,this.capture=!!U,this.ha=ce,this.key=++SF,this.da=this.fa=!1}function KS(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function QS(_){this.src=_,this.g={},this.h=0}function lx(_,b){var N=b.type;if(N in _.g){var Ae,U=_.g[N],ce=Array.prototype.indexOf.call(U,b,void 0);(Ae=0<=ce)&&Array.prototype.splice.call(U,ce,1),Ae&&(KS(b),0==_.g[N].length&&(delete _.g[N],_.h--))}}function cx(_,b,N,U){for(var ce=0;ce<_.length;++ce){var Ae=_[ce];if(!Ae.da&&Ae.listener==b&&Ae.capture==!!N&&Ae.ha==U)return ce}return-1}QS.prototype.add=function(_,b,N,U,ce){var Ae=_.toString();(_=this.g[Ae])||(_=this.g[Ae]=[],this.h++);var st=cx(_,b,U,ce);return-1<st?(b=_[st],N||(b.fa=!1)):((b=new RF(b,this.src,Ae,!!U,ce)).fa=N,_.push(b)),b};var dx="closure_lm_"+(1e6*Math.random()|0),hx={};function Rk(_,b,N,U,ce){if(U&&U.once)return Mk(_,b,N,U,ce);if(Array.isArray(b)){for(var Ae=0;Ae<b.length;Ae++)Rk(_,b[Ae],N,U,ce);return null}return N=mx(N),_&&_[FA]?_.K(b,N,C(U)?!!U.capture:!!U,ce):Pk(_,b,N,!1,U,ce)}function Pk(_,b,N,U,ce,Ae){if(!b)throw Error("Invalid event type");var st=C(ce)?!!ce.capture:!!ce,Tr=px(_);if(Tr||(_[dx]=Tr=new QS(_)),(N=Tr.add(b,N,U,st,Ae)).proxy)return N;if(U=function PF(){const b=MF;return function _(N){return b.call(_.src,_.listener,N)}}(),N.proxy=U,U.src=_,U.listener=N,_.addEventListener)CF||(ce=st),void 0===ce&&(ce=!1),_.addEventListener(b.toString(),U,ce);else if(_.attachEvent)_.attachEvent(xk(b.toString()),U);else{if(!_.addListener||!_.removeListener)throw Error("addEventListener and attachEvent are unavailable.");_.addListener(U)}return N}function Mk(_,b,N,U,ce){if(Array.isArray(b)){for(var Ae=0;Ae<b.length;Ae++)Mk(_,b[Ae],N,U,ce);return null}return N=mx(N),_&&_[FA]?_.L(b,N,C(U)?!!U.capture:!!U,ce):Pk(_,b,N,!0,U,ce)}function Nk(_,b,N,U,ce){if(Array.isArray(b))for(var Ae=0;Ae<b.length;Ae++)Nk(_,b[Ae],N,U,ce);else U=C(U)?!!U.capture:!!U,N=mx(N),_&&_[FA]?(_=_.i,(b=String(b).toString())in _.g&&-1<(N=cx(Ae=_.g[b],N,U,ce))&&(KS(Ae[N]),Array.prototype.splice.call(Ae,N,1),0==Ae.length&&(delete _.g[b],_.h--))):_&&(_=px(_))&&(b=_.g[b.toString()],_=-1,b&&(_=cx(b,N,U,ce)),(N=-1<_?b[_]:null)&&fx(N))}function fx(_){if("number"!=typeof _&&_&&!_.da){var b=_.src;if(b&&b[FA])lx(b.i,_);else{var N=_.type,U=_.proxy;b.removeEventListener?b.removeEventListener(N,U,_.capture):b.detachEvent?b.detachEvent(xk(N),U):b.addListener&&b.removeListener&&b.removeListener(U),(N=px(b))?(lx(N,_),0==N.h&&(N.src=null,b[dx]=null)):KS(_)}}}function xk(_){return _ in hx?hx[_]:hx[_]="on"+_}function MF(_,b){if(_.da)_=!0;else{b=new kA(b,this);var N=_.listener,U=_.ha||_.src;_.fa&&fx(_),_=N.call(U,b)}return _}function px(_){return(_=_[dx])instanceof QS?_:null}var gx="__closure_events_fn_"+(1e9*Math.random()>>>0);function mx(_){return"function"==typeof _?_:(_[gx]||(_[gx]=function(b){return _.handleEvent(b)}),_[gx])}function Bs(){lp.call(this),this.i=new QS(this),this.M=this,this.F=null}function so(_,b){var N,U=_.F;if(U)for(N=[];U;U=U.F)N.push(U);if(_=_.M,U=b.type||b,"string"==typeof b)b=new Us(b,_);else if(b instanceof Us)b.target=b.target||_;else{var ce=b;se(b=new Us(U,_),ce)}if(ce=!0,N)for(var Ae=N.length-1;0<=Ae;Ae--){var st=b.g=N[Ae];ce=XS(st,U,!0,b)&&ce}if(ce=XS(st=b.g=_,U,!0,b)&&ce,ce=XS(st,U,!1,b)&&ce,N)for(Ae=0;Ae<N.length;Ae++)ce=XS(st=b.g=N[Ae],U,!1,b)&&ce}function XS(_,b,N,U){if(!(b=_.i.g[String(b)]))return!0;b=b.concat();for(var ce=!0,Ae=0;Ae<b.length;++Ae){var st=b[Ae];if(st&&!st.da&&st.capture==N){var Tr=st.listener,Ds=st.ha||st.src;st.fa&&lx(_.i,st),ce=!1!==Tr.call(Ds,U)&&ce}}return ce&&!U.defaultPrevented}function Ok(_,b,N){if("function"==typeof _)N&&(_=j(_,N));else{if(!_||"function"!=typeof _.handleEvent)throw Error("Invalid listener argument");_=j(_.handleEvent,_)}return 2147483647<Number(b)?-1:y.setTimeout(_,b||0)}function kk(_){_.g=Ok(()=>{_.g=null,_.i&&(_.i=!1,kk(_))},_.l);const b=_.h;_.h=null,_.m.apply(null,b)}me(Bs,lp),Bs.prototype[FA]=!0,Bs.prototype.removeEventListener=function(_,b,N,U){Nk(this,_,b,N,U)},Bs.prototype.N=function(){if(Bs.aa.N.call(this),this.i){var b,_=this.i;for(b in _.g){for(var N=_.g[b],U=0;U<N.length;U++)KS(N[U]);delete _.g[b],_.h--}}this.F=null},Bs.prototype.K=function(_,b,N,U){return this.i.add(String(_),b,!1,N,U)},Bs.prototype.L=function(_,b,N,U){return this.i.add(String(_),b,!0,N,U)};class NF extends lp{constructor(b,N){super(),this.m=b,this.l=N,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:kk(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function VA(_){lp.call(this),this.h=_,this.g={}}me(VA,lp);var Fk=[];function Vk(_){hn(_.g,function(b,N){this.g.hasOwnProperty(N)&&fx(b)},_),_.g={}}VA.prototype.N=function(){VA.aa.N.call(this),Vk(this)},VA.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _x=y.JSON.stringify,xF=y.JSON.parse,OF=class{stringify(_){return y.JSON.stringify(_,void 0)}parse(_){return y.JSON.parse(_,void 0)}};function yx(){}function Uk(){}yx.prototype.h=null;var LA={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vx(){Us.call(this,"d")}function Ex(){Us.call(this,"c")}me(vx,Us),me(Ex,Us);var Xm={},Bk=null;function YS(){return Bk=Bk||new Bs}function jk(_){Us.call(this,Xm.La,_)}function UA(_){const b=YS();so(b,new jk(b))}function $k(_,b){Us.call(this,Xm.STAT_EVENT,_),this.stat=b}function oo(_){const b=YS();so(b,new $k(b,_))}function Hk(_,b){Us.call(this,Xm.Ma,_),this.size=b}function BA(_,b){if("function"!=typeof _)throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){_()},b)}function jA(){this.g=!0}function gE(_,b,N,U){_.info(function(){return"XMLHTTP TEXT ("+b+"): "+function LF(_,b){if(!_.g)return b;if(!b)return null;try{var N=JSON.parse(b);if(N)for(_=0;_<N.length;_++)if(Array.isArray(N[_])){var U=N[_];if(!(2>U.length)){var ce=U[1];if(Array.isArray(ce)&&!(1>ce.length)){var Ae=ce[0];if("noop"!=Ae&&"stop"!=Ae&&"close"!=Ae)for(var st=1;st<ce.length;st++)ce[st]=""}}}return _x(N)}catch{return b}}(_,N)+(U?" "+U:"")})}Xm.La="serverreachability",me(jk,Us),Xm.STAT_EVENT="statevent",me($k,Us),Xm.Ma="timingevent",me(Hk,Us),jA.prototype.xa=function(){this.g=!1},jA.prototype.info=function(){};var Ix,JS={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gk={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function ZS(){}function cp(_,b,N,U){this.j=_,this.i=b,this.l=N,this.R=U||1,this.U=new VA(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zk}function zk(){this.i=null,this.g="",this.h=!1}me(ZS,yx),ZS.prototype.g=function(){return new XMLHttpRequest},ZS.prototype.i=function(){return{}},Ix=new ZS;var qk={},wx={};function Tx(_,b,N){_.L=1,_.v=rR(Jd(b)),_.m=N,_.P=!0,Wk(_,null)}function Wk(_,b){_.F=Date.now(),eR(_),_.A=Jd(_.v);var N=_.A,U=_.R;Array.isArray(U)||(U=[String(U)]),a1(N.i,"t",U),_.C=0,N=_.j.J,_.h=new zk,_.g=D1(_.j,N?b:null,!_.m),0<_.O&&(_.M=new NF(j(_.Y,_,_.g),_.O)),b=_.U,N=_.g,U=_.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(Fk[0]=ce.toString()),ce=Fk);for(var Ae=0;Ae<ce.length;Ae++){var st=Rk(N,ce[Ae],U||b.handleEvent,!1,b.h||b);if(!st)break;b.g[st.key]=st}b=_.H?G(_.H):{},_.m?(_.u||(_.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,b)):(_.u="GET",_.g.ea(_.A,_.u,null,b)),UA(),function kF(_,b,N,U,ce,Ae){_.info(function(){if(_.g)if(Ae)for(var st="",Tr=Ae.split("&"),Ds=0;Ds<Tr.length;Ds++){var Qn=Tr[Ds].split("=");if(1<Qn.length){var js=Qn[0];Qn=Qn[1];var $s=js.split("_");st=2<=$s.length&&"type"==$s[1]?st+(js+"=")+Qn+"&":st+(js+"=redacted&")}}else st=null;else st=Ae;return"XMLHTTP REQ ("+U+") [attempt "+ce+"]: "+b+"\n"+N+"\n"+st})}(_.i,_.u,_.A,_.l,_.R,_.m)}function Kk(_){return!!_.g&&"GET"==_.u&&2!=_.L&&_.j.Ca}function UF(_,b){var N=_.C,U=b.indexOf("\n",N);return-1==U?wx:(N=Number(b.substring(N,U)),isNaN(N)?qk:(U+=1)+N>b.length?wx:(b=b.slice(U,U+N),_.C=U+N,b))}function eR(_){_.S=Date.now()+_.I,Qk(_,_.I)}function Qk(_,b){if(null!=_.B)throw Error("WatchDog timer not null");_.B=BA(j(_.ba,_),b)}function Ax(_){_.B&&(y.clearTimeout(_.B),_.B=null)}function $A(_){0==_.j.G||_.J||I1(_.j,_)}function Ym(_){Ax(_);var b=_.M;b&&"function"==typeof b.ma&&b.ma(),_.M=null,Vk(_.U),_.g&&(b=_.g,_.g=null,b.abort(),b.ma())}function Dx(_,b){try{var N=_.j;if(0!=N.G&&(N.g==_||Cx(N.h,_)))if(!_.K&&Cx(N.h,_)&&3==N.G){try{var U=N.Da.g.parse(b)}catch{U=null}if(Array.isArray(U)&&3==U.length){var ce=U;if(0==ce[0]){e:if(!N.u){if(N.g){if(!(N.g.F+3e3<_.F))break e;uR(N),oR(N)}Px(N),oo(18)}}else N.za=ce[1],0<N.za-N.T&&37500>ce[2]&&N.F&&0==N.v&&!N.C&&(N.C=BA(j(N.Za,N),6e3));if(1>=Jk(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else Zm(N,11)}else if((_.K||N.g==_)&&uR(N),!ft(b))for(ce=N.Da.g.parse(b),b=0;b<ce.length;b++){let Qn=ce[b];if(N.T=Qn[0],Qn=Qn[1],2==N.G)if("c"==Qn[0]){N.K=Qn[1],N.ia=Qn[2];const js=Qn[3];null!=js&&(N.la=js,N.j.info("VER="+N.la));const $s=Qn[4];null!=$s&&(N.Aa=$s,N.j.info("SVER="+N.Aa));const yE=Qn[5];null!=yE&&"number"==typeof yE&&0<yE&&(N.L=U=1.5*yE,N.j.info("backChannelRequestTimeoutMs_="+U)),U=N;const el=_.g;if(el){const cR=el.g?el.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cR){var Ae=U.h;Ae.g||-1==cR.indexOf("spdy")&&-1==cR.indexOf("quic")&&-1==cR.indexOf("h2")||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(bx(Ae,Ae.h),Ae.h=null))}if(U.D){const Nx=el.g?el.g.getResponseHeader("X-HTTP-Session-Id"):null;Nx&&(U.ya=Nx,Lr(U.I,U.D,Nx))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-_.F,N.j.info("Handshake RTT: "+N.R+"ms"));var st=_;if((U=N).qa=A1(U,U.J?U.ia:null,U.W),st.K){Zk(U.h,st);var Tr=st,Ds=U.L;Ds&&(Tr.I=Ds),Tr.B&&(Ax(Tr),eR(Tr)),U.g=st}else v1(U);0<N.i.length&&aR(N)}else"stop"!=Qn[0]&&"close"!=Qn[0]||Zm(N,7);else 3==N.G&&("stop"==Qn[0]||"close"==Qn[0]?"stop"==Qn[0]?Zm(N,7):Rx(N):"noop"!=Qn[0]&&N.l&&N.l.ta(Qn),N.v=0)}UA()}catch{}}cp.prototype.ca=function(_){_=_.target;const b=this.M;b&&3==Zd(_)?b.j():this.Y(_)},cp.prototype.Y=function(_){try{if(_==this.g)e:{const $s=Zd(this.g);var b=this.g.Ba();if(this.g.Z(),!(3>$s)&&(3!=$s||this.g&&(this.h.h||this.g.oa()||p1(this.g)))){this.J||4!=$s||7==b||UA(),Ax(this);var N=this.g.Z();this.X=N;t:if(Kk(this)){var U=p1(this.g);_="";var ce=U.length,Ae=4==Zd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ym(this),$A(this);var st="";break t}this.h.i=new y.TextDecoder}for(b=0;b<ce;b++)this.h.h=!0,_+=this.h.i.decode(U[b],{stream:!(Ae&&b==ce-1)});U.length=0,this.h.g+=_,this.C=0,st=this.h.g}else st=this.g.oa();if(this.o=200==N,function FF(_,b,N,U,ce,Ae,st){_.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ce+"]: "+b+"\n"+N+"\n"+Ae+" "+st})}(this.i,this.u,this.A,this.l,this.R,$s,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Tr,Ds=this.g;if((Tr=Ds.g?Ds.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ft(Tr)){var Qn=Tr;break t}}Qn=null}if(!(N=Qn)){this.o=!1,this.s=3,oo(12),Ym(this),$A(this);break e}gE(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dx(this,N)}if(this.P){let el;for(N=!0;!this.J&&this.C<st.length;){if(el=UF(this,st),el==wx){4==$s&&(this.s=4,oo(14),N=!1),gE(this.i,this.l,null,"[Incomplete Response]");break}if(el==qk){this.s=4,oo(15),gE(this.i,this.l,st,"[Invalid Chunk]"),N=!1;break}gE(this.i,this.l,el,null),Dx(this,el)}if(Kk(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=$s||0!=st.length||this.h.h||(this.s=1,oo(16),N=!1),this.o=this.o&&N,N){if(0<st.length&&!this.W){this.W=!0;var js=this.j;js.g==this&&js.ba&&!js.M&&(js.j.info("Great, no buffering proxy detected. Bytes received: "+st.length),Mx(js),js.M=!0,oo(11))}}else gE(this.i,this.l,st,"[Invalid Chunked Response]"),Ym(this),$A(this)}else gE(this.i,this.l,st,null),Dx(this,st);4==$s&&Ym(this),this.o&&!this.J&&(4==$s?I1(this.j,this):(this.o=!1,eR(this)))}else(function nV(_){const b={};_=(_.g&&2<=Zd(_)&&_.g.getAllResponseHeaders()||"").split("\r\n");for(let U=0;U<_.length;U++){if(ft(_[U]))continue;var N=le(_[U]);const ce=N[0];if("string"!=typeof(N=N[1]))continue;N=N.trim();const Ae=b[ce]||[];b[ce]=Ae,Ae.push(N)}!function ie(_,b){for(const N in _)b.call(void 0,_[N],N,_)}(b,function(U){return U.join(", ")})})(this.g),400==N&&0<st.indexOf("Unknown SID")?(this.s=3,oo(12)):(this.s=0,oo(13)),Ym(this),$A(this)}}}catch{}},cp.prototype.cancel=function(){this.J=!0,Ym(this)},cp.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(function VF(_,b){_.info(function(){return"TIMEOUT: "+b})}(this.i,this.A),2!=this.L&&(UA(),oo(17)),Ym(this),this.s=2,$A(this)):Qk(this,this.S-_)};var BF=class{constructor(_,b){this.g=_,this.map=b}};function Xk(_){this.l=_||10,_=y.PerformanceNavigationTiming?0<(_=y.performance.getEntriesByType("navigation")).length&&("hq"==_[0].nextHopProtocol||"h2"==_[0].nextHopProtocol):!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yk(_){return!!_.h||!!_.g&&_.g.size>=_.j}function Jk(_){return _.h?1:_.g?_.g.size:0}function Cx(_,b){return _.h?_.h==b:!!_.g&&_.g.has(b)}function bx(_,b){_.g?_.g.add(b):_.h=b}function Zk(_,b){_.h&&_.h==b?_.h=null:_.g&&_.g.has(b)&&_.g.delete(b)}function e1(_){if(null!=_.h)return _.i.concat(_.h.D);if(null!=_.g&&0!==_.g.size){let b=_.i;for(const N of _.g.values())b=b.concat(N.D);return b}return Me(_.i)}function t1(_,b){if(_.forEach&&"function"==typeof _.forEach)_.forEach(b,void 0);else if(w(_)||"string"==typeof _)Array.prototype.forEach.call(_,b,void 0);else for(var N=function $F(_){if(_.na&&"function"==typeof _.na)return _.na();if(!_.V||"function"!=typeof _.V){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(w(_)||"string"==typeof _){var b=[];_=_.length;for(var N=0;N<_;N++)b.push(N);return b}b=[],N=0;for(const U in _)b[N++]=U;return b}}}(_),U=function jF(_){if(_.V&&"function"==typeof _.V)return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if("string"==typeof _)return _.split("");if(w(_)){for(var b=[],N=_.length,U=0;U<N;U++)b.push(_[U]);return b}for(U in b=[],N=0,_)b[N++]=_[U];return b}(_),ce=U.length,Ae=0;Ae<ce;Ae++)b.call(void 0,U[Ae],N&&N[Ae],_)}Xk.prototype.cancel=function(){if(this.i=e1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const _ of this.g.values())_.cancel();this.g.clear()}};var n1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jm(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof Jm){this.h=_.h,tR(this,_.j),this.o=_.o,this.g=_.g,nR(this,_.s),this.l=_.l;var b=_.i,N=new zA;N.i=b.i,b.g&&(N.g=new Map(b.g),N.h=b.h),r1(this,N),this.m=_.m}else _&&(b=String(_).match(n1))?(this.h=!1,tR(this,b[1]||"",!0),this.o=HA(b[2]||""),this.g=HA(b[3]||"",!0),nR(this,b[4]),this.l=HA(b[5]||"",!0),r1(this,b[6]||"",!0),this.m=HA(b[7]||"")):(this.h=!1,this.i=new zA(null,this.h))}function Jd(_){return new Jm(_)}function tR(_,b,N){_.j=N?HA(b,!0):b,_.j&&(_.j=_.j.replace(/:$/,""))}function nR(_,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);_.s=b}else _.s=null}function r1(_,b,N){b instanceof zA?(_.i=b,function QF(_,b){b&&!_.j&&(dp(_),_.i=null,_.g.forEach(function(N,U){var ce=U.toLowerCase();U!=ce&&(s1(this,U),a1(this,ce,N))},_)),_.j=b}(_.i,_.h)):(N||(b=GA(b,WF)),_.i=new zA(b,_.h))}function Lr(_,b,N){_.i.set(b,N)}function rR(_){return Lr(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function HA(_,b){return _?b?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function GA(_,b,N){return"string"==typeof _?(_=encodeURI(_).replace(b,GF),N&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function GF(_){return"%"+((_=_.charCodeAt(0))>>4&15).toString(16)+(15&_).toString(16)}Jm.prototype.toString=function(){var _=[],b=this.j;b&&_.push(GA(b,i1,!0),":");var N=this.g;return(N||"file"==b)&&(_.push("//"),(b=this.o)&&_.push(GA(b,i1,!0),"@"),_.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(N=this.s)&&_.push(":",String(N))),(N=this.l)&&(this.g&&"/"!=N.charAt(0)&&_.push("/"),_.push(GA(N,"/"==N.charAt(0)?qF:zF,!0))),(N=this.i.toString())&&_.push("?",N),(N=this.m)&&_.push("#",GA(N,KF)),_.join("")};var i1=/[#\/\?@]/g,zF=/[#\?:]/g,qF=/[#\?]/g,WF=/[#\?@]/g,KF=/#/g;function zA(_,b){this.h=this.g=null,this.i=_||null,this.j=!!b}function dp(_){_.g||(_.g=new Map,_.h=0,_.i&&function HF(_,b){if(_){_=_.split("&");for(var N=0;N<_.length;N++){var U=_[N].indexOf("="),ce=null;if(0<=U){var Ae=_[N].substring(0,U);ce=_[N].substring(U+1)}else Ae=_[N];b(Ae,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}(_.i,function(b,N){_.add(decodeURIComponent(b.replace(/\+/g," ")),N)}))}function s1(_,b){dp(_),b=mE(_,b),_.g.has(b)&&(_.i=null,_.h-=_.g.get(b).length,_.g.delete(b))}function o1(_,b){return dp(_),b=mE(_,b),_.g.has(b)}function a1(_,b,N){s1(_,b),0<N.length&&(_.i=null,_.g.set(mE(_,b),Me(N)),_.h+=N.length)}function mE(_,b){return b=String(b),_.j&&(b=b.toLowerCase()),b}function hp(_,b,N,U,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),U(N)}catch{}}function JF(){this.g=new OF}function ZF(_,b,N){const U=N||"";try{t1(_,function(ce,Ae){let st=ce;C(ce)&&(st=_x(ce)),b.push(U+Ae+"="+encodeURIComponent(st))})}catch(ce){throw b.push(U+"type="+encodeURIComponent("_badmap")),ce}}function qA(_){this.l=_.Ub||null,this.j=_.eb||!1}function iR(_,b){Bs.call(this),this.D=_,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function u1(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}function WA(_){_.readyState=4,_.l=null,_.j=null,_.v=null,KA(_)}function KA(_){_.onreadystatechange&&_.onreadystatechange.call(_)}function l1(_){let b="";return hn(_,function(N,U){b+=U,b+=":",b+=N,b+="\r\n"}),b}function Sx(_,b,N){e:{for(U in N){var U=!1;break e}U=!0}U||(N=l1(N),"string"==typeof _?null!=N&&encodeURIComponent(String(N)):Lr(_,b,N))}function _i(_){Bs.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=zA.prototype).add=function(_,b){dp(this),this.i=null,_=mE(this,_);var N=this.g.get(_);return N||this.g.set(_,N=[]),N.push(b),this.h+=1,this},n.forEach=function(_,b){dp(this),this.g.forEach(function(N,U){N.forEach(function(ce){_.call(b,ce,U,this)},this)},this)},n.na=function(){dp(this);const _=Array.from(this.g.values()),b=Array.from(this.g.keys()),N=[];for(let U=0;U<b.length;U++){const ce=_[U];for(let Ae=0;Ae<ce.length;Ae++)N.push(b[U])}return N},n.V=function(_){dp(this);let b=[];if("string"==typeof _)o1(this,_)&&(b=b.concat(this.g.get(mE(this,_))));else{_=Array.from(this.g.values());for(let N=0;N<_.length;N++)b=b.concat(_[N])}return b},n.set=function(_,b){return dp(this),this.i=null,o1(this,_=mE(this,_))&&(this.h-=this.g.get(_).length),this.g.set(_,[b]),this.h+=1,this},n.get=function(_,b){return _&&0<(_=this.V(_)).length?String(_[0]):b},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],b=Array.from(this.g.keys());for(var N=0;N<b.length;N++){var U=b[N];const Ae=encodeURIComponent(String(U)),st=this.V(U);for(U=0;U<st.length;U++){var ce=Ae;""!==st[U]&&(ce+="="+encodeURIComponent(String(st[U]))),_.push(ce)}}return this.i=_.join("&")},me(qA,yx),qA.prototype.g=function(){return new iR(this.l,this.j)},qA.prototype.i=function(_){return function(){return _}}({}),me(iR,Bs),(n=iR.prototype).open=function(_,b){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=b,this.readyState=1,KA(this)},n.send=function(_){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(b.body=_),(this.D||y).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,WA(this)),this.readyState=0},n.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,KA(this)),this.g&&(this.readyState=3,KA(this),this.g)))if("arraybuffer"===this.responseType)_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;u1(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var b=_.value?_.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!_.done}))&&(this.response=this.responseText+=b)}_.done?WA(this):KA(this),3==this.readyState&&u1(this)}},n.Ra=function(_){this.g&&(this.response=this.responseText=_,WA(this))},n.Qa=function(_){this.g&&(this.response=_,WA(this))},n.ga=function(){this.g&&WA(this)},n.setRequestHeader=function(_,b){this.u.append(_,b)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],b=this.h.entries();for(var N=b.next();!N.done;)_.push((N=N.value)[0]+": "+N[1]),N=b.next();return _.join("\r\n")},Object.defineProperty(iR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(_){this.m=_?"include":"same-origin"}}),me(_i,Bs);var eV=/^https?$/i,tV=["POST","PUT"];function c1(_,b){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=b,_.m=5,d1(_),sR(_)}function d1(_){_.A||(_.A=!0,so(_,"complete"),so(_,"error"))}function h1(_){if(_.h&&typeof h<"u"&&(!_.v[1]||4!=Zd(_)||2!=_.Z()))if(_.u&&4==Zd(_))Ok(_.Ea,0,_);else if(so(_,"readystatechange"),4==Zd(_)){_.h=!1;try{const st=_.Z();e:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var N;if(!(N=b)){var U;if(U=0===st){var ce=String(_.D).match(n1)[1]||null;!ce&&y.self&&y.self.location&&(ce=y.self.location.protocol.slice(0,-1)),U=!eV.test(ce?ce.toLowerCase():"")}N=U}if(N)so(_,"complete"),so(_,"success");else{_.m=6;try{var Ae=2<Zd(_)?_.g.statusText:""}catch{Ae=""}_.l=Ae+" ["+_.Z()+"]",d1(_)}}finally{sR(_)}}}function sR(_,b){if(_.g){f1(_);const N=_.g,U=_.v[0]?()=>{}:null;_.g=null,_.v=null,b||so(_,"ready");try{N.onreadystatechange=U}catch{}}}function f1(_){_.I&&(y.clearTimeout(_.I),_.I=null)}function Zd(_){return _.g?_.g.readyState:0}function p1(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function QA(_,b,N){return N&&N.internalChannelParams&&N.internalChannelParams[_]||b}function g1(_){this.Aa=0,this.i=[],this.j=new jA,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=QA("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=QA("baseRetryDelayMs",5e3,_),this.cb=QA("retryDelaySeedMs",1e4,_),this.Wa=QA("forwardChannelMaxRetries",2,_),this.wa=QA("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new Xk(_&&_.concurrentRequestLimit),this.Da=new JF,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Rx(_){if(m1(_),3==_.G){var b=_.U++,N=Jd(_.I);if(Lr(N,"SID",_.K),Lr(N,"RID",b),Lr(N,"TYPE","terminate"),XA(_,N),(b=new cp(_,_.j,b)).L=2,b.v=rR(Jd(N)),N=!1,y.navigator&&y.navigator.sendBeacon)try{N=y.navigator.sendBeacon(b.v.toString(),"")}catch{}!N&&y.Image&&((new Image).src=b.v,N=!0),N||(b.g=D1(b.j,null),b.g.ea(b.v)),b.F=Date.now(),eR(b)}T1(_)}function oR(_){_.g&&(Mx(_),_.g.cancel(),_.g=null)}function m1(_){oR(_),_.u&&(y.clearTimeout(_.u),_.u=null),uR(_),_.h.cancel(),_.s&&("number"==typeof _.s&&y.clearTimeout(_.s),_.s=null)}function aR(_){if(!Yk(_.h)&&!_.s){_.s=!0;var b=_.Ga;xA||Sk(),OA||(xA(),OA=!0),ux.add(b,_),_.B=0}}function _1(_,b){var N;N=b?b.l:_.U++;const U=Jd(_.I);Lr(U,"SID",_.K),Lr(U,"RID",N),Lr(U,"AID",_.T),XA(_,U),_.m&&_.o&&Sx(U,_.m,_.o),N=new cp(_,_.j,N,_.B+1),null===_.m&&(N.H=_.o),b&&(_.i=b.D.concat(_.i)),b=y1(_,N,1e3),N.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),bx(_.h,N),Tx(N,U,b)}function XA(_,b){_.H&&hn(_.H,function(N,U){Lr(b,U,N)}),_.l&&t1({},function(N,U){Lr(b,U,N)})}function y1(_,b,N){N=Math.min(_.i.length,N);var U=_.l?j(_.l.Na,_.l,_):null;e:{var ce=_.i;let Ae=-1;for(;;){const st=["count="+N];-1==Ae?0<N?(Ae=ce[0].g,st.push("ofs="+Ae)):Ae=0:st.push("ofs="+Ae);let Tr=!0;for(let Ds=0;Ds<N;Ds++){let Qn=ce[Ds].g;const js=ce[Ds].map;if(Qn-=Ae,0>Qn)Ae=Math.max(0,ce[Ds].g-100),Tr=!1;else try{ZF(js,st,"req"+Qn+"_")}catch{U&&U(js)}}if(Tr){U=st.join("&");break e}}}return _=_.i.splice(0,N),b.D=_,U}function v1(_){if(!_.g&&!_.u){_.Y=1;var b=_.Fa;xA||Sk(),OA||(xA(),OA=!0),ux.add(b,_),_.v=0}}function Px(_){return!(_.g||_.u||3<=_.v||(_.Y++,_.u=BA(j(_.Fa,_),w1(_,_.v)),_.v++,0))}function Mx(_){null!=_.A&&(y.clearTimeout(_.A),_.A=null)}function E1(_){_.g=new cp(_,_.j,"rpc",_.Y),null===_.m&&(_.g.H=_.o),_.g.O=0;var b=Jd(_.qa);Lr(b,"RID","rpc"),Lr(b,"SID",_.K),Lr(b,"AID",_.T),Lr(b,"CI",_.F?"0":"1"),!_.F&&_.ja&&Lr(b,"TO",_.ja),Lr(b,"TYPE","xmlhttp"),XA(_,b),_.m&&_.o&&Sx(b,_.m,_.o),_.L&&(_.g.I=_.L);var N=_.g;_=_.ia,N.L=1,N.v=rR(Jd(b)),N.m=null,N.P=!0,Wk(N,_)}function uR(_){null!=_.C&&(y.clearTimeout(_.C),_.C=null)}function I1(_,b){var N=null;if(_.g==b){uR(_),Mx(_),_.g=null;var U=2}else{if(!Cx(_.h,b))return;N=b.D,Zk(_.h,b),U=1}if(0!=_.G)if(b.o)if(1==U){N=b.m?b.m.length:0,b=Date.now()-b.F;var ce=_.B;so(U=YS(),new Hk(U,N)),aR(_)}else v1(_);else if(3==(ce=b.s)||0==ce&&0<b.X||!(1==U&&function rV(_,b){return!(Jk(_.h)>=_.h.j-(_.s?1:0)||(_.s?(_.i=b.D.concat(_.i),0):1==_.G||2==_.G||_.B>=(_.Va?0:_.Wa)||(_.s=BA(j(_.Ga,_,b),w1(_,_.B)),_.B++,0)))}(_,b)||2==U&&Px(_)))switch(N&&0<N.length&&(b=_.h,b.i=b.i.concat(N)),ce){case 1:Zm(_,5);break;case 4:Zm(_,10);break;case 3:Zm(_,6);break;default:Zm(_,2)}}function w1(_,b){let N=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(N*=2),N*b}function Zm(_,b){if(_.j.info("Error code "+b),2==b){var N=j(_.fb,_),U=_.Xa;const ce=!U;U=new Jm(U||"//www.google.com/images/cleardot.gif"),y.location&&"http"==y.location.protocol||tR(U,"https"),rR(U),ce?function XF(_,b){const N=new jA;if(y.Image){const U=new Image;U.onload=Y(hp,N,"TestLoadImage: loaded",!0,b,U),U.onerror=Y(hp,N,"TestLoadImage: error",!1,b,U),U.onabort=Y(hp,N,"TestLoadImage: abort",!1,b,U),U.ontimeout=Y(hp,N,"TestLoadImage: timeout",!1,b,U),y.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=_}else b(!1)}(U.toString(),N):function YF(_,b){new jA;const U=new AbortController,ce=setTimeout(()=>{U.abort(),hp(0,0,!1,b)},1e4);fetch(_,{signal:U.signal}).then(Ae=>{clearTimeout(ce),hp(0,0,!!Ae.ok,b)}).catch(()=>{clearTimeout(ce),hp(0,0,!1,b)})}(U.toString(),N)}else oo(2);_.G=0,_.l&&_.l.sa(b),T1(_),m1(_)}function T1(_){if(_.G=0,_.ka=[],_.l){const b=e1(_.h);(0!=b.length||0!=_.i.length)&&(Ie(_.ka,b),Ie(_.ka,_.i),_.h.i.length=0,Me(_.i),_.i.length=0),_.l.ra()}}function A1(_,b,N){var U=N instanceof Jm?Jd(N):new Jm(N);if(""!=U.g)b&&(U.g=b+"."+U.g),nR(U,U.s);else{var ce=y.location;U=ce.protocol,b=b?b+"."+ce.hostname:ce.hostname,ce=+ce.port;var Ae=new Jm(null);U&&tR(Ae,U),b&&(Ae.g=b),ce&&nR(Ae,ce),N&&(Ae.l=N),U=Ae}return b=_.ya,(N=_.D)&&b&&Lr(U,N,b),Lr(U,"VER",_.la),XA(_,U),U}function D1(_,b,N){if(b&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return(b=new _i(_.Ca&&!_.pa?new qA({eb:N}):_.pa)).Ha(_.J),b}function C1(){}function lR(){}function Da(_,b){Bs.call(this),this.g=new g1(b),this.l=_,this.h=b&&b.messageUrlParams||null,_=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(_?_["X-WebChannel-Content-Type"]=b.messageContentType:_={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(_?_["X-WebChannel-Client-Profile"]=b.va:_={"X-WebChannel-Client-Profile":b.va}),this.g.S=_,(_=b&&b.Sb)&&!ft(_)&&(this.g.m=_),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!ft(b)&&(this.g.D=b,null!==(_=this.h)&&b in _&&b in(_=this.h)&&delete _[b]),this.j=new _E(this)}function b1(_){vx.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var b=_.__sm__;if(b){e:{for(const N in b){_=N;break e}_=void 0}(this.i=_)&&(_=this.i,b=null!==b&&_ in b?b[_]:void 0),this.data=b}else this.data=_}function S1(){Ex.call(this),this.status=1}function _E(_){this.g=_}(n=_i.prototype).Ha=function(_){this.J=_},n.ea=function(_,b,N,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);b=b?b.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ix.g(),this.v=function Lk(_){return _.h||(_.h=_.i())}(this.o?this.o:Ix),this.g.onreadystatechange=j(this.Ea,this);try{this.B=!0,this.g.open(b,String(_),!0),this.B=!1}catch(Ae){return void c1(this,Ae)}if(_=N||"",N=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ce in U)N.set(ce,U[ce]);else{if("function"!=typeof U.keys||"function"!=typeof U.get)throw Error("Unknown input type for opt_headers: "+String(U));for(const Ae of U.keys())N.set(Ae,U.get(Ae))}U=Array.from(N.keys()).find(Ae=>"content-type"==Ae.toLowerCase()),ce=y.FormData&&_ instanceof y.FormData,!(0<=Array.prototype.indexOf.call(tV,b,void 0))||U||ce||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,st]of N)this.g.setRequestHeader(Ae,st);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{f1(this),this.u=!0,this.g.send(_),this.u=!1}catch(Ae){c1(this,Ae)}},n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,so(this,"complete"),so(this,"abort"),sR(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sR(this,!0)),_i.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?h1(this):this.bb())},n.bb=function(){h1(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Zd(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(_){if(this.g){var b=this.g.responseText;return _&&0==b.indexOf(_)&&(b=b.substring(_.length)),xF(b)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=g1.prototype).la=8,n.G=1,n.connect=function(_,b,N,U){oo(0),this.W=_,this.H=b||{},N&&void 0!==U&&(this.H.OSID=N,this.H.OAID=U),this.F=this.X,this.I=A1(this,null,this.W),aR(this)},n.Ga=function(_){if(this.s)if(this.s=null,1==this.G){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const ce=new cp(this,this.j,_);let Ae=this.o;if(this.S&&(Ae?(Ae=G(Ae),se(Ae,this.S)):Ae=this.S),null!==this.m||this.O||(ce.H=Ae,Ae=null),this.P)e:{for(var b=0,N=0;N<this.i.length;N++){var U=this.i[N];if(void 0===(U="__data__"in U.map&&"string"==typeof(U=U.map.__data__)?U.length:void 0))break;if(4096<(b+=U)){b=N;break e}if(4096===b||N===this.i.length-1){b=N+1;break e}}b=1e3}else b=1e3;b=y1(this,ce,b),Lr(N=Jd(this.I),"RID",_),Lr(N,"CVER",22),this.D&&Lr(N,"X-HTTP-Session-Id",this.D),XA(this,N),Ae&&(this.O?b="headers="+encodeURIComponent(String(l1(Ae)))+"&"+b:this.m&&Sx(N,this.m,Ae)),bx(this.h,ce),this.Ua&&Lr(N,"TYPE","init"),this.P?(Lr(N,"$req",b),Lr(N,"SID","null"),ce.T=!0,Tx(ce,N,null)):Tx(ce,N,b),this.G=2}}else 3==this.G&&(_?_1(this,_):0==this.i.length||Yk(this.h)||_1(this))},n.Fa=function(){if(this.u=null,E1(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=BA(j(this.ab,this),_)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oo(10),oR(this),E1(this))},n.Za=function(){null!=this.C&&(this.C=null,oR(this),Px(this),oo(19))},n.fb=function(_){_?(this.j.info("Successfully pinged google.com"),oo(2)):(this.j.info("Failed to ping google.com"),oo(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=C1.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},lR.prototype.g=function(_,b){return new Da(_,b)},me(Da,Bs),Da.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Da.prototype.close=function(){Rx(this.g)},Da.prototype.o=function(_){var b=this.g;if("string"==typeof _){var N={};N.__data__=_,_=N}else this.u&&((N={}).__data__=_x(_),_=N);b.i.push(new BF(b.Ya++,_)),3==b.G&&aR(b)},Da.prototype.N=function(){this.g.l=null,delete this.j,Rx(this.g),delete this.g,Da.aa.N.call(this)},me(b1,vx),me(S1,Ex),me(_E,C1),_E.prototype.ua=function(){so(this.g,"a")},_E.prototype.ta=function(_){so(this.g,new b1(_))},_E.prototype.sa=function(_){so(this.g,new S1)},_E.prototype.ra=function(){so(this.g,"b")},lR.prototype.createWebChannel=lR.prototype.g,Da.prototype.send=Da.prototype.o,Da.prototype.open=Da.prototype.m,Da.prototype.close=Da.prototype.close,hw=Ml.createWebChannelTransport=function(){return new lR},dw=Ml.getStatEventTarget=function(){return YS()},cw=Ml.Event=Xm,ky=Ml.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},JS.NO_ERROR=0,JS.TIMEOUT=8,JS.HTTP_ERROR=6,Tf=Ml.ErrorCode=JS,Gk.COMPLETE="complete",lw=Ml.EventType=Gk,Uk.EventType=LA,LA.OPEN="a",LA.CLOSE="b",LA.ERROR="c",LA.MESSAGE="d",Bs.prototype.listen=Bs.prototype.K,wf=Ml.WebChannel=Uk,BC=Ml.FetchXmlHttpFactory=qA,_i.prototype.listenOnce=_i.prototype.L,_i.prototype.getLastError=_i.prototype.Ka,_i.prototype.getLastErrorCode=_i.prototype.Ba,_i.prototype.getStatus=_i.prototype.Z,_i.prototype.getResponseJson=_i.prototype.Oa,_i.prototype.getResponseText=_i.prototype.oa,_i.prototype.send=_i.prototype.ea,_i.prototype.setWithCredentials=_i.prototype.Ha,cM=Ml.XhrIo=_i}).apply(typeof Fg<"u"?Fg:typeof self<"u"?self:typeof window<"u"?window:{});const jC="@firebase/firestore";class Ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");let Vg="10.12.0";const sd=new Ea.Vy("@firebase/firestore");function Lg(){return sd.logLevel}function je(n,...e){if(sd.logLevel<=Ea.$b.DEBUG){const t=e.map(Fy);sd.debug(`Firestore (${Vg}): ${n}`,...t)}}function gi(n,...e){if(sd.logLevel<=Ea.$b.ERROR){const t=e.map(Fy);sd.error(`Firestore (${Vg}): ${n}`,...t)}}function Js(n,...e){if(sd.logLevel<=Ea.$b.WARN){const t=e.map(Fy);sd.warn(`Firestore (${Vg}): ${n}`,...t)}}function Fy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${Vg}) INTERNAL ASSERTION FAILED: `+n;throw gi(e),new Error(e)}function Ct(n,e){n||gt()}function it(n,e){return n}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends jn.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ji.UNAUTHENTICATED))}shutdown(){}}class PO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hM{constructor(e){this.t=e,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const l=C=>this.i!==a?(a=this.i,t(C)):Promise.resolve();let h=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ui,e.enqueueRetryable(()=>l(this.currentUser))};const y=()=>{const C=h;e.enqueueRetryable((0,ve.A)(function*(){yield C.promise,yield l(i.currentUser)}))},w=C=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ui)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ct("string"==typeof i.accessToken),new dM(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Ji(e)}}class Af{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ug{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Af(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $C{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=l=>{null!=l.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,je("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.R=t.token,new $C(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function pM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class gM{static newId(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const a=pM(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(a[l]%62))}return i}}function on(n,e){return n<e?-1:n>e?1:0}function Df(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function HC(n){return n+"\0"}class ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new ur(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?on(this.nanoseconds,e.nanoseconds):on(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new ur(0,0))}static max(){return new bt(new ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bg{constructor(e,t,i){void 0===t?t=0:t>e.length&&gt(),void 0===i?i=e.length-t:i>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Bg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bg?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=e.get(a),h=t.get(a);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class An extends Bg{construct(e,t,i){return new An(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new An(t)}static emptyPath(){return new An([])}}const NO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends Bg{construct(e,t,i){return new hr(e,t,i)}static isValidIdentifier(e){return NO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(0===i.length)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Ue(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[a+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ue(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=w,a+=2}else"`"===y?(h=!h,a++):"."!==y||h?(i+=y,a++):(l(),a++)}if(l(),h)throw new Ue(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(t)}static emptyPath(){return new hr([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(An.fromString(e))}static fromName(e){return new ot(An.fromString(e).popFirst(5))}static empty(){return new ot(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===An.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return An.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new An(e.slice()))}}class Cf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Vy(n){return n.fields.find(e=>2===e.kind)}function Vu(n){return n.fields.filter(e=>2!==e.kind)}Cf.UNKNOWN_ID=-1;class od{constructor(e,t){this.fieldPath=e,this.kind=t}}class bf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bf(0,Zs.min())}}function GC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=bt.fromTimestamp(1e9===i?new ur(t+1,0):new ur(t,i));return new Zs(a,ot.empty(),e)}function zC(n){return new Zs(n.readTime,n.key,-1)}class Zs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Zs(bt.min(),ot.empty(),-1)}static max(){return new Zs(bt.max(),ot.empty(),-1)}}function fw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ot.comparator(n.documentKey,e.documentKey),0!==t?t:on(n.largestBatchId,e.largestBatchId))}const qC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Lu(n){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,ve.A)(function*(n){if(n.code!==Ee.FAILED_PRECONDITION||n.message!==qC)throw n;je("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,i)=>{t(e)})}static reject(e){return new de((t,i)=>{i(e)})}static waitFor(e){return new de((t,i)=>{let a=0,l=0,h=!1;e.forEach(y=>{++a,y.next(()=>{++l,h&&l===a&&t()},w=>i(w))}),h=!0,l===a&&t()})}static or(e){let t=de.resolve(!1);for(const i of e)t=t.next(a=>a?de.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new de((i,a)=>{const l=e.length,h=new Array(l);let y=0;for(let w=0;w<l;w++){const C=w;t(e[C]).next(M=>{h[C]=M,++y,y===l&&i(h)},M=>a(M))}})}static doWhile(e,t){return new de((i,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):i()};l()})}}class pw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ui,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Sf(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const a=mw(i.target.error);this.V.reject(new Sf(e,a))}}static open(e,t,i,a){try{return new pw(t,e.transaction(a,i))}catch(l){throw new Sf(t,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xO(t)}}class Ia{constructor(e,t,i){this.name=e,this.version=t,this.p=i,12.2===Ia.S((0,jn.ZQ)())&&gi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),Uu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,jn.zW)())return!1;if(Ia.C())return!0;const e=(0,jn.ZQ)(),t=Ia.S(e),i=0<t&&t<10,a=gw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){var t=this;return(0,ve.A)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=h=>{i(h.target.result)},l.onblocked=()=>{a(new Sf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=h=>{const y=h.target.error;a("VersionError"===y.name?new Ue(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Ue(Ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Sf(e,y))},l.onupgradeneeded=h=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.p.O(h.target.result,l.transaction,h.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=i=>t.N(i)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var l=this;return(0,ve.A)(function*(){const h="readonly"===t;let y=0;for(;;){++y;try{l.db=yield l.M(e);const w=pw.open(l.db,e,h?"readonly":"readwrite",i),C=a(w).next(M=>(w.g(),M)).catch(M=>(w.abort(M),de.reject(M))).toPromise();return C.catch(()=>{}),yield w.m,C}catch(w){const C=w,M="FirebaseError"!==C.name&&y<3;if(je("SimpleDb","Transaction failed with error:",C.message,"Retrying:",M),l.close(),!M)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function gw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class ad{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Uu(this.B.delete())}}class Sf extends Ue{constructor(e,t){super(Ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nl(n){return"IndexedDbTransactionError"===n.name}class xO{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Uu(i)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),Uu(this.store.add(e))}get(e){return Uu(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),Uu(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),Uu(this.store.count())}U(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if("function"==typeof a.getAll){const l=a.getAll(i.range);return new de((h,y)=>{l.onerror=w=>{y(w.target.error)},l.onsuccess=w=>{h(w.target.result)}})}{const l=this.cursor(i),h=[];return this.W(l,(y,w)=>{h.push(w)}).next(()=>h)}}G(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new de((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}j(e,t){je("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.H=!1;const a=this.cursor(i);return this.W(a,(l,h,y)=>y.delete())}J(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.W(a,t)}Y(e){const t=this.cursor({});return new de((i,a)=>{t.onerror=l=>{const h=mw(l.target.error);a(h)},t.onsuccess=l=>{const h=l.target.result;h?e(h.primaryKey,h.value).next(y=>{y?h.continue():i()}):i()}})}W(e,t){const i=[];return new de((a,l)=>{e.onerror=h=>{l(h.target.error)},e.onsuccess=h=>{const y=h.target.result;if(!y)return void a();const w=new ad(y),C=t(y.primaryKey,y.value,w);if(C instanceof de){const M=C.catch(O=>(w.done(),de.reject(O)));i.push(M)}w.isDone?a():null===w.K?y.continue():y.continue(w.K)}}).next(()=>de.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Uu(n){return new de((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=mw(i.target.error);t(a)}})}let By=!1;function mw(n){const e=Ia.S((0,jn.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return By||(By=!0,setTimeout(()=>{throw i},0)),i}}return n}class KC{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;je("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.A)(function*(){t.task=null;try{je("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(i){Nl(i)?je("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",i):yield Lu(i)}yield t.X(6e4)}))}}class _w{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ve.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.te(i,e))})()}te(e,t){const i=new Set;let a=t,l=!0;return de.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!i.has(h))return je("IndexBackfiller",`Processing collection: ${h}`),this.ne(e,h,a).next(y=>{a-=y,i.add(h)});l=!1})).next(()=>t-a)}ne(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(l=>{const h=l.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.re(a,l)).next(y=>(je("IndexBackfiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>h.size)}))}re(e,t){let i=e;return t.changes.forEach((a,l)=>{const h=zC(l);fw(h,i)>0&&(i=h)}),new Zs(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let eo=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.ie(a),this.se=a=>i.writeSequenceNumber(a))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function xl(n){return null==n}function jy(n){return 0===n&&1/n==-1/0}function _M(n){return"number"==typeof n&&Number.isInteger(n)&&!jy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function cs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ud(e)),e=OO(n.get(t),e);return ud(e)}function OO(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function ud(n){return n+"\x01\x01"}function Bu(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),An.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const h=n.indexOf("\x01",l);switch((h<0||h>t)&&gt(),n.charAt(h+1)){case"\x01":const y=n.substring(l,h);let w;0===a.length?w=y:(a+=y,w=a,a=""),i.push(w);break;case"\x10":a+=n.substring(l,h),a+="\0";break;case"\x11":a+=n.substring(l,h+1);break;default:gt()}l=h+2}return new An(i)}const jg=["userId","batchId"];function $y(n,e){return[n,cs(e)]}function QC(n,e,t){return[n,cs(e),t]}const yw={},yM=["prefixPath","collectionGroup","readTime","documentId"],Ja=["prefixPath","collectionGroup","documentId"],$g=["collectionGroup","readTime","prefixPath","documentId"],ii=["canonicalId","targetId"],ld=["targetId","path"],Hy=["path","targetId"],Oo=["collectionId","parent"],Hg=["indexId","uid"],vM=["uid","sequenceNumber"],Rf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XC=["indexId","uid","orderedDocumentKey"],YC=["userId","collectionPath","documentId"],EM=["userId","collectionPath","largestBatchId"],IM=["userId","collectionGroup","largestBatchId"],zr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JC=[...zr,"documentOverlays"],ZC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qr=ZC,Pf=[...qr,"indexConfiguration","indexState","indexEntries"],Mf=Pf;class Nf extends WC{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=it(n);return Ia.F(t._e,e)}function Gg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ju(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ew(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Jn{constructor(e,t){this.comparator=e,this.root=t||Bi.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bi.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xf(this.root,e,this.comparator,!1)}getReverseIterator(){return new xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xf(this.root,e,this.comparator,!0)}}class xf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bi{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Bi.RED,this.left=a??Bi.EMPTY,this.right=l??Bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Bi(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Bi.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Bi.EMPTY=null,Bi.RED=!0,Bi.BLACK=!1,Bi.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(e,t,i,a,l){return this}insert(e,t,i){return new Bi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ol(this.data.getIterator())}getIteratorFrom(e){return new Ol(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class Ol{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Of(n){return n.hasNext()?n.getNext():void 0}class fr{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new fr([])}unionWith(e){let t=new $n(hr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new fr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Df(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class e0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new e0("Invalid base64 string: "+l):l}}(e);return new si(t)}static fromUint8Array(e){const t=function(a){let l="";for(let h=0;h<a.length;++h)l+=String.fromCharCode(a[h]);return l}(e);return new si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return on(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}si.EMPTY_BYTE_STRING=new si("");const t0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=t0.exec(n);if(Ct(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Kr(n.seconds),nanos:Kr(n.nanos)}}function Kr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function kl(n){return"string"==typeof n?si.fromBase64String(n):si.fromUint8Array(n)}function Gy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cd(n){const e=n.mapValue.fields.__previous_value__;return Gy(e)?cd(e):e}function dd(n){const e=Za(n.mapValue.fields.__local_write_time__.timestampValue);return new ur(e.seconds,e.nanos)}class Iw{constructor(e,t,i,a,l,h,y,w,C){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.longPollingOptions=w,this.useFetchStreams=C}}class to{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new to("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof to&&e.projectId===this.projectId&&e.database===this.database}}const $u={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zg={nullValue:"NULL_VALUE"};function no(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gy(n)?4:s0(n)?9007199254740991:10:gt()}function ko(n,e){if(n===e)return!0;const t=no(n);if(t!==no(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dd(n).isEqual(dd(e));case 3:return function(a,l){if("string"==typeof a.timestampValue&&"string"==typeof l.timestampValue&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const h=Za(a.timestampValue),y=Za(l.timestampValue);return h.seconds===y.seconds&&h.nanos===y.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return l=e,kl(n.bytesValue).isEqual(kl(l.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return Kr(a.geoPointValue.latitude)===Kr(l.geoPointValue.latitude)&&Kr(a.geoPointValue.longitude)===Kr(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Kr(a.integerValue)===Kr(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const h=Kr(a.doubleValue),y=Kr(l.doubleValue);return h===y?jy(h)===jy(y):isNaN(h)&&isNaN(y)}return!1}(n,e);case 9:return Df(n.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:return function(a,l){const h=a.mapValue.fields||{},y=l.mapValue.fields||{};if(Gg(h)!==Gg(y))return!1;for(const w in h)if(h.hasOwnProperty(w)&&(void 0===y[w]||!ko(h[w],y[w])))return!1;return!0}(n,e);default:return gt()}var l}function hd(n,e){return void 0!==(n.values||[]).find(t=>ko(t,e))}function Hu(n,e){if(n===e)return 0;const t=no(n),i=no(e);if(t!==i)return on(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return on(n.booleanValue,e.booleanValue);case 2:return function(l,h){const y=Kr(l.integerValue||l.doubleValue),w=Kr(h.integerValue||h.doubleValue);return y<w?-1:y>w?1:y===w?0:isNaN(y)?isNaN(w)?0:-1:1}(n,e);case 3:return ww(n.timestampValue,e.timestampValue);case 4:return ww(dd(n),dd(e));case 5:return on(n.stringValue,e.stringValue);case 6:return function(l,h){const y=kl(l),w=kl(h);return y.compareTo(w)}(n.bytesValue,e.bytesValue);case 7:return function(l,h){const y=l.split("/"),w=h.split("/");for(let C=0;C<y.length&&C<w.length;C++){const M=on(y[C],w[C]);if(0!==M)return M}return on(y.length,w.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,h){const y=on(Kr(l.latitude),Kr(h.latitude));return 0!==y?y:on(Kr(l.longitude),Kr(h.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(l,h){const y=l.values||[],w=h.values||[];for(let C=0;C<y.length&&C<w.length;++C){const M=Hu(y[C],w[C]);if(M)return M}return on(y.length,w.length)}(n.arrayValue,e.arrayValue);case 10:return function(l,h){if(l===$u.mapValue&&h===$u.mapValue)return 0;if(l===$u.mapValue)return 1;if(h===$u.mapValue)return-1;const y=l.fields||{},w=Object.keys(y),C=h.fields||{},M=Object.keys(C);w.sort(),M.sort();for(let O=0;O<w.length&&O<M.length;++O){const j=on(w[O],M[O]);if(0!==j)return j;const Y=Hu(y[w[O]],C[M[O]]);if(0!==Y)return Y}return on(w.length,M.length)}(n.mapValue,e.mapValue);default:throw gt()}}function ww(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return on(n,e);const t=Za(n),i=Za(e),a=on(t.seconds,i.seconds);return 0!==a?a:on(t.nanos,i.nanos)}function fd(n){return Tw(n)}function Tw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Za(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?kl(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Tw(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Tw(t.fields[h])}`;return a+"}"}(n.mapValue):gt()}function Fo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qy(n){return!!n&&"integerValue"in n}function qg(n){return!!n&&"arrayValue"in n}function n0(n){return!!n&&"nullValue"in n}function r0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wg(n){return!!n&&"mapValue"in n}function kf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ju(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=kf(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function s0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function kO(n){return"nullValue"in n?zg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fo(to.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function TM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fo(to.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?$u:gt()}function Wy(n,e){const t=Hu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ky(n,e){const t=Hu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Wg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kf(t)}setAll(e){let t=hr.emptyPath(),i={},a=[];e.forEach((h,y)=>{if(!t.isImmediateParentOf(y)){const w=this.getFieldsMap(t);this.applyChanges(w,i,a),i={},a=[],t=y.popLast()}h?i[y.lastSegment()]=kf(h):a.push(y.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Wg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Wg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){ju(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new Zi(kf(this.value))}}function o0(n){const e=[];return ju(n.fields,(t,i)=>{const a=new hr([t]);if(Wg(i)){const l=o0(i.mapValue).fields;if(0===l.length)e.push(a);else for(const h of l)e.push(a.child(h))}else e.push(a)}),new fr(e)}class Er{constructor(e,t,i,a,l,h,y){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=h,this.documentState=y}static newInvalidDocument(e){return new Er(e,0,bt.min(),bt.min(),bt.min(),Zi.empty(),0)}static newFoundDocument(e,t,i,a){return new Er(e,1,t,bt.min(),i,a,0)}static newNoDocument(e,t){return new Er(e,2,t,bt.min(),bt.min(),Zi.empty(),0)}static newUnknownDocument(e,t){return new Er(e,3,t,bt.min(),bt.min(),Zi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fl{constructor(e,t){this.position=e,this.inclusive=t}}function a0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],h=n.position[a];if(i=l.field.isKeyField()?ot.comparator(ot.fromName(h.referenceValue),t.key):Hu(h,t.data.field(l.field)),"desc"===l.dir&&(i*=-1),0!==i)break}return i}function u0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ko(n.position[t],e.position[t]))return!1;return!0}class Kg{constructor(e,t="asc"){this.field=e,this.dir=t}}function AM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class l0{}class Cn extends l0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new DM(e,t,i):"array-contains"===t?new f0(e,i):"in"===t?new Rw(e,i):"not-in"===t?new Qg(e,i):"array-contains-any"===t?new Pw(e,i):new Cn(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new CM(e,i):new d0(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Hu(t,this.value)):null!==t&&no(this.value)===no(t)&&this.matchesComparison(Hu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends l0{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Zn(e,t)}matches(e){return Ff(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ff(n){return"and"===n.op}function Aw(n){return"or"===n.op}function Dw(n){return c0(n)&&Ff(n)}function c0(n){for(const e of n.filters)if(e instanceof Zn)return!1;return!0}function Cw(n){if(n instanceof Cn)return n.field.canonicalString()+n.op.toString()+fd(n.value);if(Dw(n))return n.filters.map(e=>Cw(e)).join(",");{const e=n.filters.map(t=>Cw(t)).join(",");return`${n.op}(${e})`}}function bw(n,e){return n instanceof Cn?(i=n,(a=e)instanceof Cn&&i.op===a.op&&i.field.isEqual(a.field)&&ko(i.value,a.value)):n instanceof Zn?function(i,a){return a instanceof Zn&&i.op===a.op&&i.filters.length===a.filters.length&&i.filters.reduce((l,h,y)=>l&&bw(h,a.filters[y]),!0)}(n,e):void gt();var i,a}function Sw(n,e){const t=n.filters.concat(e);return Zn.create(t,n.op)}function Gu(n){return n instanceof Cn?`${(t=n).field.canonicalString()} ${t.op} ${fd(t.value)}`:n instanceof Zn?function(t){return t.op.toString()+" {"+t.getFilters().map(Gu).join(" ,")+"}"}(n):"Filter";var t}class DM extends Cn{constructor(e,t,i){super(e,t,i),this.key=ot.fromName(i.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class CM extends Cn{constructor(e,t){super(e,"in",t),this.keys=h0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class d0 extends Cn{constructor(e,t){super(e,"not-in",t),this.keys=h0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function h0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>ot.fromName(i.referenceValue))}class f0 extends Cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qg(t)&&hd(t.arrayValue,this.value)}}class Rw extends Cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hd(this.value.arrayValue,t)}}class Qg extends Cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hd(this.value.arrayValue,t)}}class Pw extends Cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>hd(this.value.arrayValue,i))}}class Vf{constructor(e,t=null,i=[],a=[],l=null,h=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=h,this.endAt=y,this.ue=null}}function Qy(n,e=null,t=[],i=[],a=null,l=null,h=null){return new Vf(n,e,t,i,a,l,h)}function Vo(n){const e=it(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Cw(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(l=i).field.canonicalString()+l.dir;var l}).join(","),xl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>fd(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>fd(i)).join(",")),e.ue=t}return e.ue}function pd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!u0(n.startAt,e.startAt)&&u0(n.endAt,e.endAt)}function zu(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function qu(n,e){return n.filters.filter(t=>t instanceof Cn&&t.field.isEqual(e))}function gd(n,e,t){let i=zg,a=!0;for(const l of qu(n,e)){let h=zg,y=!0;switch(l.op){case"<":case"<=":h=kO(l.value);break;case"==":case"in":case">=":h=l.value;break;case">":h=l.value,y=!1;break;case"!=":case"not-in":h=zg}Wy({value:i,inclusive:a},{value:h,inclusive:y})<0&&(i=h,a=y)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const h=t.position[l];Wy({value:i,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(i=h,a=t.inclusive);break}return{value:i,inclusive:a}}function md(n,e,t){let i=$u,a=!0;for(const l of qu(n,e)){let h=$u,y=!0;switch(l.op){case">=":case">":h=TM(l.value),y=!1;break;case"==":case"in":case"<=":h=l.value;break;case"<":h=l.value,y=!1;break;case"!=":case"not-in":h=$u}Ky({value:i,inclusive:a},{value:h,inclusive:y})>0&&(i=h,a=y)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const h=t.position[l];Ky({value:i,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(i=h,a=t.inclusive);break}return{value:i,inclusive:a}}class Vs{constructor(e,t=null,i=[],a=[],l=null,h="F",y=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=h,this.startAt=y,this.endAt=w,this.ce=null,this.le=null,this.he=null}}function _d(n,e,t,i,a,l,h,y){return new Vs(n,e,t,i,a,l,h,y)}function wa(n){return new Vs(n)}function yd(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Vl(n){return null!==n.collectionGroup}function vd(n){const e=it(n);if(null===e.ce){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let y=new $n(hr.comparator);return h.filters.forEach(w=>{w.getFlattenedFilters().forEach(C=>{C.isInequality()&&(y=y.add(C.field))})}),y})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Kg(l,i))}),t.has(hr.keyField().canonicalString())||e.ce.push(new Kg(hr.keyField(),i))}return e.ce}function es(n){const e=it(n);return e.le||(e.le=function Nw(n,e){if("F"===n.limitType)return Qy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>new Kg(a.field,"desc"===a.dir?"asc":"desc"));const t=n.endAt?new Fl(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Fl(n.startAt.position,n.startAt.inclusive):null;return Qy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}(e,vd(n))),e.le}function Xy(n,e){const t=n.filters.concat([e]);return new Vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xg(n,e,t){return new Vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lf(n,e){return pd(es(n),es(e))&&n.limitType===e.limitType}function xw(n){return`${Vo(es(n))}|lt:${n.limitType}`}function Ed(n){return`Query(target=${function(t){let i=t.path.canonicalString();return null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>Gu(a)).join(", ")}]`),xl(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>{return`${(h=a).field.canonicalString()} (${h.dir})`;var h}).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>fd(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>fd(a)).join(",")),`Target(${i})`}(es(n))}; limitType=${n.limitType})`}function Ll(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return null!==i.collectionGroup?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ot.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of vd(i))if(!l.field.isKeyField()&&null===a.data.field(l.field))return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&(a=e,!((i=n).startAt&&!function(h,y,w){const C=a0(h,y,w);return h.inclusive?C<=0:C<0}(i.startAt,vd(i),a)||i.endAt&&!function(h,y,w){const C=a0(h,y,w);return h.inclusive?C>=0:C>0}(i.endAt,vd(i),a)));var i,a}function Wu(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function p0(n){return(e,t)=>{let i=!1;for(const a of vd(n)){const l=bM(a,e,t);if(0!==l)return l;i=i||a.field.isKeyField()}return 0}}function bM(n,e,t){const i=n.field.isKeyField()?ot.comparator(e.key,t.key):function(l,h,y){const w=h.data.field(l),C=y.data.field(l);return null!==w&&null!==C?Hu(w,C):gt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return gt()}}class Ta{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,l]of i)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ju(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return Ew(this.inner)}size(){return this.innerSize}}const Id=new Jn(ot.comparator);function ds(){return Id}const g0=new Jn(ot.comparator);function wd(...n){let e=g0;for(const t of n)e=e.insert(t.key,t);return e}function SM(n){let e=g0;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ku(){return Yg()}function m0(){return Yg()}function Yg(){return new Ta(n=>n.toString(),(n,e)=>n.isEqual(e))}const _0=new Jn(ot.comparator),RM=new $n(ot.comparator);function St(...n){let e=RM;for(const t of n)e=e.add(t);return e}const y0=new $n(on);function Ow(){return y0}function v0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jy(e)?"-0":e}}function kw(n){return{integerValue:""+n}}function E0(n,e){return _M(e)?kw(e):v0(n,e)}class Jg{constructor(){this._=void 0}}function I0(n,e,t){return n instanceof Bf?function(a,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Gy(l)&&(l=cd(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):n instanceof Ul?T0(n,e):n instanceof Bl?PM(n,e):function(a,l){const h=w0(a,l),y=Yy(h)+Yy(a.Pe);return qy(h)&&qy(a.Pe)?kw(y):v0(a.serializer,y)}(n,e)}function Uf(n,e,t){return n instanceof Ul?T0(n,e):n instanceof Bl?PM(n,e):t}function w0(n,e){return n instanceof jl?qy(i=e)||(l=i)&&"doubleValue"in l?e:{integerValue:0}:null;var i,l}class Bf extends Jg{}class Ul extends Jg{constructor(e){super(),this.elements=e}}function T0(n,e){const t=Jy(e);for(const i of n.elements)t.some(a=>ko(a,i))||t.push(i);return{arrayValue:{values:t}}}class Bl extends Jg{constructor(e){super(),this.elements=e}}function PM(n,e){let t=Jy(e);for(const i of n.elements)t=t.filter(a=>!ko(a,i));return{arrayValue:{values:t}}}class jl extends Jg{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Yy(n){return Kr(n.integerValue||n.doubleValue)}function Jy(n){return qg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Td{constructor(e,t){this.field=e,this.transform=t}}class MM{constructor(e,t){this.version=e,this.transformResults=t}}class Ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ro(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ls{}function Lo(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ad(n.key,Ir.none()):new $f(n.key,n.data,Ir.none());{const t=n.data,i=Zi.empty();let a=new $n(hr.comparator);for(let l of e.fields)if(!a.has(l)){let h=t.field(l);null===h&&l.length>1&&(l=l.popLast(),h=t.field(l)),null===h?i.delete(l):i.set(l,h),a=a.add(l)}return new Qu(n.key,i,new fr(a.toArray()),Ir.none())}}function A0(n,e,t){n instanceof $f?function(a,l,h){const y=a.value.clone(),w=Hf(a.fieldTransforms,l,h.transformResults);y.setAll(w),l.convertToFoundDocument(h.version,y).setHasCommittedMutations()}(n,e,t):n instanceof Qu?function(a,l,h){if(!ro(a.precondition,l))return void l.convertToUnknownDocument(h.version);const y=Hf(a.fieldTransforms,l,h.transformResults),w=l.data;w.setAll(Zy(a)),w.setAll(y),l.convertToFoundDocument(h.version,w).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function jf(n,e,t,i){return n instanceof $f?function(l,h,y,w){if(!ro(l.precondition,h))return y;const C=l.value.clone(),M=C0(l.fieldTransforms,w,h);return C.setAll(M),h.convertToFoundDocument(h.version,C).setHasLocalMutations(),null}(n,e,t,i):n instanceof Qu?function(l,h,y,w){if(!ro(l.precondition,h))return y;const C=C0(l.fieldTransforms,w,h),M=h.data;return M.setAll(Zy(l)),M.setAll(C),h.convertToFoundDocument(h.version,M).setHasLocalMutations(),null===y?null:y.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(O=>O.field))}(n,e,t,i):(y=t,ro(n.precondition,h=e)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):y);var h,y}function NM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=w0(i.transform,a||null);null!=l&&(null===t&&(t=Zi.empty()),t.set(i.field,l))}return t||null}function D0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===a||i&&a&&Df(i,a,(l,h)=>function eu(n,e){return n.field.isEqual(e.field)&&(a=e.transform,(i=n.transform)instanceof Ul&&a instanceof Ul||i instanceof Bl&&a instanceof Bl?Df(i.elements,a.elements,ko):i instanceof jl&&a instanceof jl?ko(i.Pe,a.Pe):i instanceof Bf&&a instanceof Bf);var i,a}(l,h))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var i,a}class $f extends Ls{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Qu extends Ls{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Zy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Hf(n,e,t){const i=new Map;Ct(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],h=l.transform,y=e.data.field(l.field);i.set(l.field,Uf(h,y,t[a]))}return i}function C0(n,e,t){const i=new Map;for(const a of n){const l=a.transform,h=t.data.field(a.field);i.set(a.field,I0(l,h,e))}return i}class Ad extends Ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fw extends Ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vw{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&A0(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=jf(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=jf(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=m0();return this.mutations.forEach(a=>{const l=e.get(a.key),h=l.overlayedDocument;let y=this.applyToLocalView(h,l.mutatedFields);y=t.has(a.key)?null:y;const w=Lo(h,y);null!==w&&i.set(a.key,w),h.isValidDocument()||h.convertToNoDocument(bt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),St())}isEqual(e){return this.batchId===e.batchId&&Df(this.mutations,e.mutations,(t,i)=>D0(t,i))&&Df(this.baseMutations,e.baseMutations,(t,i)=>D0(t,i))}}class ev{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Ct(e.mutations.length===i.length);let a=function(){return _0}();const l=e.mutations;for(let h=0;h<l.length;h++)a=a.insert(l[h].key,i[h].version);return new ev(e,t,i,a)}}class tv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xM{constructor(e,t){this.count=e,this.unchangedNames=t}}var oi,On;function b0(n){switch(n){default:return gt();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0}}function S0(n){if(void 0===n)return gi("GRPC error has no .code"),Ee.UNKNOWN;switch(n){case oi.OK:return Ee.OK;case oi.CANCELLED:return Ee.CANCELLED;case oi.UNKNOWN:return Ee.UNKNOWN;case oi.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case oi.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case oi.INTERNAL:return Ee.INTERNAL;case oi.UNAVAILABLE:return Ee.UNAVAILABLE;case oi.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case oi.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case oi.NOT_FOUND:return Ee.NOT_FOUND;case oi.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case oi.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case oi.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case oi.ABORTED:return Ee.ABORTED;case oi.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case oi.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case oi.DATA_LOSS:return Ee.DATA_LOSS;default:return gt()}}(On=oi||(oi={}))[On.OK=0]="OK",On[On.CANCELLED=1]="CANCELLED",On[On.UNKNOWN=2]="UNKNOWN",On[On.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",On[On.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",On[On.NOT_FOUND=5]="NOT_FOUND",On[On.ALREADY_EXISTS=6]="ALREADY_EXISTS",On[On.PERMISSION_DENIED=7]="PERMISSION_DENIED",On[On.UNAUTHENTICATED=16]="UNAUTHENTICATED",On[On.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",On[On.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",On[On.ABORTED=10]="ABORTED",On[On.OUT_OF_RANGE=11]="OUT_OF_RANGE",On[On.UNIMPLEMENTED=12]="UNIMPLEMENTED",On[On.INTERNAL=13]="INTERNAL",On[On.UNAVAILABLE=14]="UNAVAILABLE",On[On.DATA_LOSS=15]="DATA_LOSS";function R0(){return new TextEncoder}const OM=new Fu([4294967295,4294967295],0);function P0(n){const e=R0().encode(n),t=new uw;return t.update(e),new Uint8Array(t.digest())}function M0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Fu([t,i],0),new Fu([a,l],0)]}class Lw{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new em(`Invalid padding: ${t}`);if(i<0)throw new em(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new em(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new em(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fu.fromNumber(this.Ie)}Ee(e,t,i){let a=e.add(t.multiply(Fu.fromNumber(i)));return 1===a.compare(OM)&&(a=new Fu([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=P0(e),[i,a]=M0(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,a,l);if(!this.de(h))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Lw(l,a,t);return i.forEach(y=>h.insert(y)),h}insert(e){if(0===this.Ie)return;const t=P0(e),[i,a]=M0(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,a,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class em extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tm{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new tm(bt.min(),a,new Jn(on),ds(),St())}}class Dd{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dd(i,t,St(),St(),St())}}class rv{constructor(e,t,i,a){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=a}}class iv{constructor(e,t){this.targetId=e,this.me=t}}class Uw{constructor(e,t,i=si.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Bw{constructor(){this.fe=0,this.ge=O0(),this.pe=si.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=St(),t=St(),i=St();return this.ge.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:gt()}}),new Dd(this.pe,this.ye,e,t,i)}ve(){this.we=!1,this.ge=O0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class N0{constructor(e){this.Le=e,this.Be=new Map,this.ke=ds(),this.qe=x0(),this.Qe=new Jn(on)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,a)=>{this.ze(a)&&t(a)})}He(e){const t=e.targetId,i=e.me.count,a=this.Je(t);if(a){const l=a.target;if(zu(l))if(0===i){const h=new ot(l.path);this.Ue(t,h,Er.newNoDocument(h,bt.min()))}else Ct(1===i);else{const h=this.Ye(t);if(h!==i){const y=this.Ze(e),w=y?this.Xe(y,e,h):1;0!==w&&(this.je(t),this.Qe=this.Qe.insert(t,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let h,y;try{h=kl(i).toUint8Array()}catch(w){if(w instanceof e0)return Js("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw w}try{y=new Lw(h,a,l)}catch(w){return Js(w instanceof em?"BloomFilter error: ":"Applying bloom filter failed: ",w),null}return 0===y.Ie?null:y}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const h=this.Le.tt(),y=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(y)||(this.Ue(t,l,null),a++)}),a}rt(e){const t=new Map;this.Be.forEach((l,h)=>{const y=this.Je(h);if(y){if(l.current&&zu(y.target)){const w=new ot(y.target.path);null!==this.ke.get(w)||this.it(h,w)||this.Ue(h,w,Er.newNoDocument(w,e))}l.be&&(t.set(h,l.Ce()),l.ve())}});let i=St();this.qe.forEach((l,h)=>{let y=!0;h.forEachWhile(w=>{const C=this.Je(w);return!C||"TargetPurposeLimboResolution"===C.purpose||(y=!1,!1)}),y&&(i=i.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const a=new tm(e,t,this.Qe,this.ke,i);return this.ke=ds(),this.qe=x0(),this.Qe=new Jn(on),a}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,t)?a.Fe(t,1):a.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Bw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new $n(on),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bw),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function x0(){return new Jn(ot.comparator)}function O0(){return new Jn(ot.comparator)}const kM={asc:"ASCENDING",desc:"DESCENDING"},FM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VM={and:"AND",or:"OR"};class LM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jw(n,e){return n.useProto3Json||xl(e)?e:{value:e}}function Gf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UM(n,e){return Gf(n,e.toTimestamp())}function ai(n){return Ct(!!n),bt.fromTimestamp(function(t){const i=Za(t);return new ur(i.seconds,i.nanos)}(n))}function nm(n,e){return $w(n,e).canonicalString()}function $w(n,e){const t=(a=n,new An(["projects",a.projectId,"databases",a.database])).child("documents");var a;return void 0===e?t:t.child(e)}function rm(n){const e=An.fromString(n);return Ct(j0(e)),e}function $l(n,e){return nm(n.databaseId,e.path)}function Uo(n,e){const t=rm(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(F0(t))}function Hw(n,e){return nm(n.databaseId,e)}function k0(n){const e=rm(n);return 4===e.length?An.emptyPath():F0(e)}function Gw(n){return new An(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function F0(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function im(n,e,t){return{name:$l(n,e),fields:t.value.mapValue.fields}}function sm(n,e,t){const i=Uo(n,e.name),a=ai(e.updateTime),l=e.createTime?ai(e.createTime):bt.min(),h=new Zi({mapValue:{fields:e.fields}}),y=Er.newFoundDocument(i,a,l,h);return t&&y.setHasCommittedMutations(),t?y.setHasCommittedMutations():y}function om(n,e){let t;if(e instanceof $f)t={update:im(n,e.key,e.value)};else if(e instanceof Ad)t={delete:$l(n,e.key)};else if(e instanceof Qu)t={update:im(n,e.key,e.data),updateMask:qf(e.fieldMask)};else{if(!(e instanceof Fw))return gt();t={verify:$l(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const y=h.transform;if(y instanceof Bf)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Ul)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Bl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof jl)return{fieldPath:h.field.canonicalString(),increment:y.Pe};throw gt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:UM(n,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:gt()),t;var l}function zw(n,e){const t=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?Ir.updateTime(ai(l.updateTime)):void 0!==l.exists?Ir.exists(l.exists):Ir.none():Ir.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(h,y){let w=null;"setToServerValue"in y?(Ct("REQUEST_TIME"===y.setToServerValue),w=new Bf):"appendMissingElements"in y?w=new Ul(y.appendMissingElements.values||[]):"removeAllFromArray"in y?w=new Bl(y.removeAllFromArray.values||[]):"increment"in y?w=new jl(h,y.increment):gt();const C=hr.fromServerFormat(y.fieldPath);return new Td(C,w)}(n,a)):[];var l;if(e.update){const a=Uo(n,e.update.name),l=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new fr((e.updateMask.fieldPaths||[]).map(M=>hr.fromServerFormat(M)));return new Qu(a,l,h,t,i)}return new $f(a,l,t,i)}if(e.delete){const a=Uo(n,e.delete);return new Ad(a,t)}if(e.verify){const a=Uo(n,e.verify);return new Fw(a,t)}return gt()}function qw(n,e){return{documents:[Hw(n,e.path)]}}function zf(n,e){const t={structuredQuery:{}},i=e.path;let a;null!==e.collectionGroup?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Hw(n,a);const l=function(C){if(0!==C.length)return jM(Zn.create(C,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(C){if(0!==C.length)return C.map(M=>{return{field:Xu((j=M).field),direction:FO(j.dir)};var j})}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const y=jw(n,e.limit);return null!==y&&(t.structuredQuery.limit=y),e.startAt&&(t.structuredQuery.startAt={before:(C=e.startAt).inclusive,values:C.position}),e.endAt&&(t.structuredQuery.endAt=function(C){return{before:!C.inclusive,values:C.position}}(e.endAt)),{_t:t,parent:a};var C}function B0(n){let e=k0(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Ct(1===i);const M=t.from[0];M.allDescendants?a=M.collectionId:e=e.child(M.collectionId)}let l=[];t.where&&(l=function(O){const j=Cd(O);return j instanceof Zn&&Dw(j)?j.getFilters():[j]}(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(j=>{return new Kg(bd((me=j).field),function(Ie){switch(Ie){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(me.direction));var me}));let y=null;t.limit&&(y=function(O){let j;return j="object"==typeof O?O.value:O,xl(j)?null:j}(t.limit));let w=null;var O;t.startAt&&(w=new Fl((O=t.startAt).values||[],!!O.before));let C=null;return t.endAt&&(C=function(O){return new Fl(O.values||[],!O.before)}(t.endAt)),_d(e,a,h,l,y,"F",w,C)}function Cd(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=bd(t.unaryFilter.field);return Cn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=bd(t.unaryFilter.field);return Cn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bd(t.unaryFilter.field);return Cn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=bd(t.unaryFilter.field);return Cn.create(h,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(n):void 0!==n.fieldFilter?Cn.create(bd((t=n).fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Zn.create(t.compositeFilter.filters.map(i=>Cd(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return gt()}}(t.compositeFilter.op))}(n):gt();var t}function FO(n){return kM[n]}function Ww(n){return FM[n]}function VO(n){return VM[n]}function Xu(n){return{fieldPath:n.canonicalString()}}function bd(n){return hr.fromServerFormat(n.fieldPath)}function jM(n){return n instanceof Cn?function(t){if("=="===t.op){if(r0(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NAN"}};if(n0(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(r0(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NOT_NAN"}};if(n0(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xu(t.field),op:Ww(t.op),value:t.value}}}(n):n instanceof Zn?function(t){const i=t.getFilters().map(a=>jM(a));return 1===i.length?i[0]:{compositeFilter:{op:VO(t.op),filters:i}}}(n):gt()}function qf(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function j0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Yu{constructor(e,t,i,a,l=bt.min(),h=bt.min(),y=si.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y,this.expectedCount=w}withSequenceNumber(e){return new Yu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $0{constructor(e){this.ct=e}}function H0(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Sd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:$l(l=n.ct,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:Gf(l,h.version.toTimestamp()),createTime:Gf(l,h.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:tu(e.version)};else{if(!e.isUnknownDocument())return gt();i.unknownDocument={path:t.path.toArray(),version:tu(e.version)}}var l,h;return i}function Sd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function tu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mi(n){const e=new ur(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Gl(n,e){const t=(e.baseMutations||[]).map(l=>zw(n.ct,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const i=e.mutations.map(l=>zw(n.ct,l)),a=ur.fromMillis(e.localWriteTimeMs);return new Vw(e.batchId,a,t,i)}function Kf(n){const e=mi(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mi(n.lastLimboFreeSnapshotVersion):bt.min();let i;return i=void 0!==n.query.documents?(Ct(1===(l=n.query).documents.length),es(wa(k0(l.documents[0])))):function(l){return es(B0(l))}(n.query),new Yu(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,si.fromBase64String(n.resumeToken));var l}function G0(n,e){const t=tu(e.snapshotVersion),i=tu(e.lastLimboFreeSnapshotVersion);let a;a=zu(e.target)?qw(n.ct,e.target):zf(n.ct,e.target)._t;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function ov(n){const e=B0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Xg(e,e.limit,"L"):e}function av(n,e){return new tv(e.largestBatchId,zw(n.ct,e.overlayMutation))}function Kw(n,e){const t=e.path.lastSegment();return[n,cs(e.path.popLast()),t]}function Qw(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:tu(i.readTime),documentKey:cs(i.documentKey.path),largestBatchId:i.largestBatchId}}class $M{getBundleMetadata(e,t){return z0(e).get(t).next(i=>{if(i)return{id:(l=i).bundleId,createTime:mi(l.createTime),version:l.version};var l})}saveBundleMetadata(e,t){return z0(e).put({bundleId:(a=t).id,createTime:tu(ai(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return q0(e).get(t).next(i=>{if(i)return{name:(l=i).name,query:ov(l.bundledQuery),readTime:mi(l.readTime)};var l})}saveNamedQuery(e,t){return q0(e).put({name:(a=t).name,readTime:tu(ai(a.readTime)),bundledQuery:a.bundledQuery});var a}}function z0(n){return Wr(n,"bundles")}function q0(n){return Wr(n,"namedQueries")}class zl{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new zl(e,t.uid||"")}getOverlay(e,t){return am(e).get(Kw(this.userId,t)).next(i=>i?av(this.serializer,i):null)}getOverlays(e,t){const i=Ku();return de.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((l,h)=>{const y=new tv(t,h);a.push(this.ht(e,y))}),de.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(h=>a.add(cs(h.getCollectionPath())));const l=[];return a.forEach(h=>{const y=IDBKeyRange.bound([this.userId,h,i],[this.userId,h,i+1],!1,!0);l.push(am(e).j("collectionPathOverlayIndex",y))}),de.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Ku(),l=cs(t),h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return am(e).U("collectionPathOverlayIndex",h).next(y=>{for(const w of y){const C=av(this.serializer,w);a.set(C.getKey(),C)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const l=Ku();let h;const y=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return am(e).J({index:"collectionGroupOverlayIndex",range:y},(w,C,M)=>{const O=av(this.serializer,C);l.size()<a||O.largestBatchId===h?(l.set(O.getKey(),O),h=O.largestBatchId):M.done()}).next(()=>l)}ht(e,t){return am(e).put(function(a,l,h){const[y,w,C]=Kw(l,h.mutation.key);return{userId:l,collectionPath:w,documentId:C,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:om(a.ct,h.mutation)}}(this.serializer,this.userId,t))}}function am(n){return Wr(n,"documentOverlays")}class Rd{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Kr(e.integerValue));else if("doubleValue"in e){const i=Kr(e.doubleValue);isNaN(i)?this.Et(t,13):(this.Et(t,15),jy(i)?t.dt(0):t.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(t,20),"string"==typeof i&&(i=Za(i)),t.At(`${i.seconds||""}`),t.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(kl(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?s0(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):gt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const i=e.fields||{};this.Et(t,55);for(const a of Object.keys(i))this.Rt(a,t),this.It(i[a],t)}wt(e,t){const i=e.values||[];this.Et(t,50);for(const a of i)this.It(a,t)}gt(e,t){this.Et(t,37),ot.fromName(e).path.forEach(i=>{this.Et(t,60),this.St(i,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function HM(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function um(n){const e=64-function(i){let a=0;for(let l=0;l<8;++l){const h=HM(255&i[l]);if(a+=h,8!==h)break}return a}(n);return Math.ceil(e/8)}Rd.bt=new Rd;class W0{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ct(i.value),i=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Mt(i.value),i=t.next();this.xt()}Ot(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{const a=t.codePointAt(0);this.Ct(240|a>>>18),this.Ct(128|63&a>>>12),this.Ct(128|63&a>>>6),this.Ct(128|63&a)}}this.vt()}Nt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{const a=t.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}this.xt()}Lt(e){const t=this.Bt(e),i=um(t);this.kt(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}qt(e){const t=this.Bt(e),i=um(t);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(l){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,l,!1),new Uint8Array(h.buffer)}(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class K0{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Q0{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class lm{constructor(){this.Gt=new W0,this.zt=new K0(this.Gt),this.jt=new Q0(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Aa{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Aa(this.indexId,this.documentKey,this.arrayValue,i)}}function Bo(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=X0(n.arrayValue,e.arrayValue),0!==t?t:(t=X0(n.directionalValue,e.directionalValue),0!==t?t:ot.comparator(n.documentKey,e.documentKey)))}function X0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class Y0{constructor(e){this.Yt=new $n((t,i)=>hr.comparator(t.field,i.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const i=t;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(Ct(e.collectionGroup===this.collectionId),this.en)return!1;const t=Vy(e);if(void 0!==t&&!this.nn(t))return!1;const i=Vu(e);let a=new Set,l=0,h=0;for(;l<i.length&&this.nn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Yt.size>0){const y=this.Yt.getIterator().getNext();if(!a.has(y.field.canonicalString())){const w=i[l];if(!this.rn(y,w)||!this.sn(this.Zt[h++],w))return!1}++l}for(;l<i.length;++l)if(h>=this.Zt.length||!this.sn(this.Zt[h++],i[l]))return!1;return!0}on(){if(this.en)return null;let e=new $n(hr.comparator);const t=[];for(const i of this.Xt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)t.push(new od(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new od(i.field,0))}for(const i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new od(i.field,"asc"===i.dir?0:1)));return new Cf(Cf.UNKNOWN_ID,this.collectionId,t,bf.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Xw(n){var e,t;if(Ct(n instanceof Cn||n instanceof Zn),n instanceof Cn){if(n instanceof Rw){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>Cn.create(n.field,"==",l)))||[];return Zn.create(a,"or")}return n}const i=n.filters.map(a=>Xw(a));return Zn.create(i,n.op)}function cm(n){if(0===n.getFilters().length)return[];const e=uv(Xw(n));return Ct(J0(e)),Yw(e)||Jw(e)?[e]:e.getFilters()}function Yw(n){return n instanceof Cn}function Jw(n){return n instanceof Zn&&Dw(n)}function J0(n){return Yw(n)||Jw(n)||function(t){if(t instanceof Zn&&Aw(t)){for(const i of t.getFilters())if(!Yw(i)&&!Jw(i))return!1;return!0}return!1}(n)}function uv(n){if(Ct(n instanceof Cn||n instanceof Zn),n instanceof Cn)return n;if(1===n.filters.length)return uv(n.filters[0]);const e=n.filters.map(i=>uv(i));let t=Zn.create(e,n.op);return t=cv(t),J0(t)?t:(Ct(t instanceof Zn),Ct(Ff(t)),Ct(t.filters.length>1),t.filters.reduce((i,a)=>lv(i,a)))}function lv(n,e){let t;return Ct(n instanceof Cn||n instanceof Zn),Ct(e instanceof Cn||e instanceof Zn),t=n instanceof Cn?e instanceof Cn?Zn.create([n,e],"and"):Zw(n,e):e instanceof Cn?Zw(e,n):function(a,l){if(Ct(a.filters.length>0&&l.filters.length>0),Ff(a)&&Ff(l))return Sw(a,l.getFilters());const h=Aw(a)?a:l,y=Aw(a)?l:a,w=h.filters.map(C=>lv(C,y));return Zn.create(w,"or")}(n,e),cv(t)}function Zw(n,e){if(Ff(e))return Sw(e,n.getFilters());{const t=e.filters.map(i=>lv(n,i));return Zn.create(t,"or")}}function cv(n){if(Ct(n instanceof Cn||n instanceof Zn),n instanceof Cn)return n;const e=n.getFilters();if(1===e.length)return cv(e[0]);if(c0(n))return n;const t=e.map(a=>cv(a)),i=[];return t.forEach(a=>{a instanceof Cn?i.push(a):a instanceof Zn&&(a.op===n.op?i.push(...a.filters):i.push(a))}),1===i.length?i[0]:Zn.create(i,n.op)}class Z0{constructor(){this._n=new eT}addToCollectionParentIndex(e,t){return this._n.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Zs.min())}updateCollectionGroup(e,t,i){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class eT{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new $n(An.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new $n(An.comparator)).toArray()}}const dv=new Uint8Array(0);class LO{constructor(e,t){this.databaseId=t,this.an=new eT,this.un=new Ta(i=>Vo(i),(i,a)=>pd(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const l={collectionId:i,parent:cs(a)};return GM(e).put(l)}return de.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[HC(t),""],!1,!0);return GM(e).U(a).next(l=>{for(const h of l){if(h.collectionId!==t)break;i.push(Bu(h.parent))}return i})}addFieldIndex(e,t){const i=hv(e),a={indexId:(y=t).indexId,collectionGroup:y.collectionGroup,fields:y.fields.map(w=>[w.fieldPath.canonicalString(),w.kind])};var y;delete a.indexId;const l=i.add(a);if(t.indexState){const h=Pd(e);return l.next(y=>{h.put(Qw(y,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const i=hv(e),a=Pd(e),l=dm(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=hv(e),i=dm(e),a=Pd(e);return t.j().next(()=>i.j()).next(()=>a.j())}createTargetIndexes(e,t){return de.forEach(this.cn(t),i=>this.getIndexType(e,i).next(a=>{if(0===a||1===a){const l=new Y0(i).on();if(null!=l)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const i=dm(e);let a=!0;const l=new Map;return de.forEach(this.cn(t),h=>this.ln(e,h).next(y=>{a&&(a=!!y),l.set(h,y)})).next(()=>{if(a){let h=St();const y=[];return de.forEach(l,(w,C)=>{var qe;je("IndexedDbIndexManager",`Using index ${qe=w,`id=${qe.indexId}|cg=${qe.collectionGroup}|f=${qe.fields.map(vt=>`${vt.fieldPath}:${vt.kind}`).join(",")}`} to execute ${Vo(t)}`);const M=function(qe,vt){const Xt=Vy(vt);if(void 0===Xt)return null;for(const hn of qu(qe,Xt.fieldPath))switch(hn.op){case"array-contains-any":return hn.value.arrayValue.values||[];case"array-contains":return[hn.value]}return null}(C,w),O=function(qe,vt){const Xt=new Map;for(const hn of Vu(vt))for(const ie of qu(qe,hn.fieldPath))switch(ie.op){case"==":case"in":Xt.set(hn.fieldPath.canonicalString(),ie.value);break;case"not-in":case"!=":return Xt.set(hn.fieldPath.canonicalString(),ie.value),Array.from(Xt.values())}return null}(C,w),j=function(qe,vt){const Xt=[];let hn=!0;for(const ie of Vu(vt)){const G=0===ie.kind?gd(qe,ie.fieldPath,qe.startAt):md(qe,ie.fieldPath,qe.startAt);Xt.push(G.value),hn&&(hn=G.inclusive)}return new Fl(Xt,hn)}(C,w),Y=function(qe,vt){const Xt=[];let hn=!0;for(const ie of Vu(vt)){const G=0===ie.kind?md(qe,ie.fieldPath,qe.endAt):gd(qe,ie.fieldPath,qe.endAt);Xt.push(G.value),hn&&(hn=G.inclusive)}return new Fl(Xt,hn)}(C,w),me=this.hn(w,C,j),Me=this.hn(w,C,Y),Ie=this.Pn(w,C,O),Ge=this.In(w.indexId,M,me,j.inclusive,Me,Y.inclusive,Ie);return de.forEach(Ge,ft=>i.G(ft,t.limit).next(qe=>{qe.forEach(vt=>{const Xt=ot.fromSegments(vt.documentKey);h.has(Xt)||(h=h.add(Xt),y.push(Xt))})}))}).next(()=>y)}return de.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:cm(Zn.create(e.filters,"and")).map(i=>Qy(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,i,a,l,h,y){const w=(null!=t?t.length:1)*Math.max(i.length,l.length),C=w/(null!=t?t.length:1),M=[];for(let O=0;O<w;++O){const j=t?this.Tn(t[O/C]):dv,Y=this.En(e,j,i[O%C],a),me=this.dn(e,j,l[O%C],h),Me=y.map(Ie=>this.En(e,j,Ie,!0));M.push(...this.createRange(Y,me,Me))}return M}En(e,t,i,a){const l=new Aa(e,ot.empty(),t,i);return a?l:l.Jt()}dn(e,t,i,a){const l=new Aa(e,ot.empty(),t,i);return a?l.Jt():l}ln(e,t){const i=new Y0(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let h=null;for(const y of l)i.tn(y)&&(!h||y.fields.length>h.fields.length)&&(h=y);return h})}getIndexType(e,t){let i=2;const a=this.cn(t);return de.forEach(a,l=>this.ln(e,l).next(h=>{h?0!==i&&h.fields.length<function(w){let C=new $n(hr.comparator),M=!1;for(const O of w.filters)for(const j of O.getFlattenedFilters())j.field.isKeyField()||("array-contains"===j.op||"array-contains-any"===j.op?M=!0:C=C.add(j.field));for(const O of w.orderBy)O.field.isKeyField()||(C=C.add(O.field));return C.size+(M?1:0)}(l)&&(i=1):i=0})).next(()=>null!==t.limit&&a.length>1&&2===i?1:i)}An(e,t){const i=new lm;for(const a of Vu(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const h=i.Ht(a.kind);Rd.bt.Pt(l,h)}return i.Wt()}Tn(e){const t=new lm;return Rd.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const i=new lm;return Rd.bt.Pt(Fo(this.databaseId,t),i.Ht(function(l){const h=Vu(l);return 0===h.length?0:h[h.length-1].kind}(e))),i.Wt()}Pn(e,t,i){if(null===i)return[];let a=[];a.push(new lm);let l=0;for(const h of Vu(e)){const y=i[l++];for(const w of a)if(this.Vn(t,h.fieldPath)&&qg(y))a=this.mn(a,h,y);else{const C=w.Ht(h.kind);Rd.bt.Pt(y,C)}}return this.fn(a)}hn(e,t,i){return this.Pn(e,t,i.position)}fn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Wt();return t}mn(e,t,i){const a=[...e],l=[];for(const h of i.arrayValue.values||[])for(const y of a){const w=new lm;w.seed(y.Wt()),Rd.bt.Pt(h,w.Ht(t.kind)),l.push(w)}return l}Vn(e,t){return!!e.filters.find(i=>i instanceof Cn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=hv(e),a=Pd(e);return(t?i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.U()).next(l=>{const h=[];return de.forEach(l,y=>a.get([y.indexId,this.uid]).next(w=>{h.push(function(M,O){const j=O?new bf(O.sequenceNumber,new Zs(mi(O.readTime),new ot(Bu(O.documentKey)),O.largestBatchId)):bf.empty(),Y=M.fields.map(([me,Me])=>new od(hr.fromServerFormat(me),Me));return new Cf(M.indexId,M.collectionGroup,Y,j)}(y,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:on(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=hv(e),l=Pd(e);return this.gn(e).next(h=>a.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>de.forEach(y,w=>l.put(Qw(w.indexId,this.uid,h,i)))))}updateIndexEntries(e,t){const i=new Map;return de.forEach(t,(a,l)=>{const h=i.get(a.collectionGroup);return(h?de.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(i.set(a.collectionGroup,y),de.forEach(y,w=>this.pn(e,a,w).next(C=>{const M=this.yn(l,w);return C.isEqual(M)?de.resolve():this.wn(e,l,w,C,M)}))))})}Sn(e,t,i,a){return dm(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.Rn(i,t.key),documentKey:t.key.path.toArray()})}bn(e,t,i,a){return dm(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.Rn(i,t.key),t.key.path.toArray()])}pn(e,t,i){const a=dm(e);let l=new $n(Bo);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,t)])},(h,y)=>{l=l.add(new Aa(i.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>l)}yn(e,t){let i=new $n(Bo);const a=this.An(t,e);if(null==a)return i;const l=Vy(t);if(null!=l){const h=e.data.field(l.fieldPath);if(qg(h))for(const y of h.arrayValue.values||[])i=i.add(new Aa(t.indexId,e.key,this.Tn(y),a))}else i=i.add(new Aa(t.indexId,e.key,dv,a));return i}wn(e,t,i,a,l){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(w,C,M,O,j){const Y=w.getIterator(),me=C.getIterator();let Me=Of(Y),Ie=Of(me);for(;Me||Ie;){let Ge=!1,ft=!1;if(Me&&Ie){const qe=M(Me,Ie);qe<0?ft=!0:qe>0&&(Ge=!0)}else null!=Me?ft=!0:Ge=!0;Ge?(O(Ie),Ie=Of(me)):ft?(j(Me),Me=Of(Y)):(Me=Of(Y),Ie=Of(me))}}(a,l,Bo,y=>{h.push(this.Sn(e,t,i,y))},y=>{h.push(this.bn(e,t,i,y))}),de.waitFor(h)}gn(e){let t=1;return Pd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((h,y)=>Bo(h,y)).filter((h,y,w)=>!y||0!==Bo(h,w[y-1]));const a=[];a.push(e);for(const h of i){const y=Bo(h,e),w=Bo(h,t);if(0===y)a[0]=e.Jt();else if(y>0&&w<0)a.push(h),a.push(h.Jt());else if(w>0)break}a.push(t);const l=[];for(let h=0;h<a.length;h+=2){if(this.Dn(a[h],a[h+1]))return[];l.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,dv,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,dv,[]]))}return l}Dn(e,t){return Bo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hm)}getMinOffset(e,t){return de.mapArray(this.cn(t),i=>this.ln(e,i).next(a=>a||gt())).next(hm)}}function GM(n){return Wr(n,"collectionParents")}function dm(n){return Wr(n,"indexEntries")}function hv(n){return Wr(n,"indexConfiguration")}function Pd(n){return Wr(n,"indexState")}function hm(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;fw(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Zs(e.readTime,e.documentKey,t)}const eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hs{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new hs(e,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tT(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),l=[],h=IDBKeyRange.only(t.batchId);let y=0;const w=i.J({range:h},(M,O,j)=>(y++,j.delete()));l.push(w.next(()=>{Ct(1===y)}));const C=[];for(const M of t.mutations){const O=QC(e,M.key.path,t.batchId);l.push(a.delete(O)),C.push(M.key)}return de.waitFor(l).next(()=>C)}function ql(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(41943040,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);class fv{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Cn={}}static lt(e,t,i,a){Ct(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new fv(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wl(e).J({index:"userMutationsIndex",range:i},(a,l,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const l=Qf(e),h=Wl(e);return h.add({}).next(y=>{Ct("number"==typeof y);const w=new Vw(y,t,i,a),C=function(Y,me,Me){const Ie=Me.baseMutations.map(ft=>om(Y.ct,ft)),Ge=Me.mutations.map(ft=>om(Y.ct,ft));return{userId:me,batchId:Me.batchId,localWriteTimeMs:Me.localWriteTime.toMillis(),baseMutations:Ie,mutations:Ge}}(this.serializer,this.userId,w),M=[];let O=new $n((j,Y)=>on(j.canonicalString(),Y.canonicalString()));for(const j of a){const Y=QC(this.userId,j.key.path,y);O=O.add(j.key.path.popLast()),M.push(h.put(C)),M.push(l.put(Y,yw))}return O.forEach(j=>{M.push(this.indexManager.addToCollectionParentIndex(e,j))}),e.addOnCommittedListener(()=>{this.Cn[y]=w.keys()}),de.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return Wl(e).get(t).next(i=>i?(Ct(i.userId===this.userId),Gl(this.serializer,i)):null)}vn(e,t){return this.Cn[t]?de.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.Cn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Wl(e).J({index:"userMutationsIndex",range:a},(h,y,w)=>{y.userId===this.userId&&(Ct(y.batchId>=i),l=Gl(this.serializer,y)),w.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Wl(e).J({index:"userMutationsIndex",range:t,reverse:!0},(a,l,h)=>{i=l.batchId,h.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wl(e).U("userMutationsIndex",t).next(i=>i.map(a=>Gl(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=$y(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Qf(e).J({range:a},(h,y,w)=>{const[C,M,O]=h,j=Bu(M);if(C===this.userId&&t.path.isEqual(j))return Wl(e).get(O).next(Y=>{if(!Y)throw gt();Ct(Y.userId===this.userId),l.push(Gl(this.serializer,Y))});w.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new $n(on);const a=[];return t.forEach(l=>{const h=$y(this.userId,l.path),y=IDBKeyRange.lowerBound(h),w=Qf(e).J({range:y},(C,M,O)=>{const[j,Y,me]=C,Me=Bu(Y);j===this.userId&&l.path.isEqual(Me)?i=i.add(me):O.done()});a.push(w)}),de.waitFor(a).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=$y(this.userId,i),h=IDBKeyRange.lowerBound(l);let y=new $n(on);return Qf(e).J({range:h},(w,C,M)=>{const[O,j,Y]=w,me=Bu(j);O===this.userId&&i.isPrefixOf(me)?me.length===a&&(y=y.add(Y)):M.done()}).next(()=>this.Fn(e,y))}Fn(e,t){const i=[],a=[];return t.forEach(l=>{a.push(Wl(e).get(l).next(h=>{if(null===h)throw gt();Ct(h.userId===this.userId),i.push(Gl(this.serializer,h))}))}),de.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return tT(e._e,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),de.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const i=IDBKeyRange.lowerBound(function(h){return[h]}(this.userId)),a=[];return Qf(e).J({range:i},(l,h,y)=>{if(l[0]===this.userId){const w=Bu(l[1]);a.push(w)}else y.done()}).next(()=>{Ct(0===a.length)})})}containsKey(e,t){return tb(e,this.userId,t)}xn(e){return zM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tb(n,e,t){const i=$y(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let h=!1;return Qf(n).J({range:l,H:!0},(y,w,C)=>{const[M,O,j]=y;M===e&&O===a&&(h=!0),C.done()}).next(()=>h)}function Wl(n){return Wr(n,"mutations")}function Qf(n){return Wr(n,"documentMutations")}function zM(n){return Wr(n,"mutationQueues")}class Md{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Md(0)}static Ln(){return new Md(-1)}}class nb{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const i=new Md(t.highestTargetId);return t.highestTargetId=i.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>bt.fromTimestamp(new ur(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Bn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.kn(e,a)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(t,i),this.kn(e,i))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xf(e).delete(t.targetId)).next(()=>this.Bn(e)).next(i=>(Ct(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,t,i){let a=0;const l=[];return Xf(e).J((h,y)=>{const w=Kf(y);w.sequenceNumber<=t&&null===i.get(w.targetId)&&(a++,l.push(this.removeTargetData(e,w)))}).next(()=>de.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Xf(e).J((i,a)=>{const l=Kf(a);t(l)})}Bn(e){return rb(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}kn(e,t){return rb(e).put("targetGlobalKey",t)}qn(e,t){return Xf(e).put(G0(this.serializer,t))}Qn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Vo(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Xf(e).J({range:a,index:"queryTargetsIndex"},(h,y,w)=>{const C=Kf(y);pd(t,C.target)&&(l=C,w.done())}).next(()=>l)}addMatchingKeys(e,t,i){const a=[],l=jo(e);return t.forEach(h=>{const y=cs(h.path);a.push(l.put({targetId:i,path:y})),a.push(this.referenceDelegate.addReference(e,i,h))}),de.waitFor(a)}removeMatchingKeys(e,t,i){const a=jo(e);return de.forEach(t,l=>{const h=cs(l.path);return de.waitFor([a.delete([i,h]),this.referenceDelegate.removeReference(e,i,l)])})}removeMatchingKeysForTargetId(e,t){const i=jo(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=jo(e);let l=St();return a.J({range:i,H:!0},(h,y,w)=>{const C=Bu(h[1]),M=new ot(C);l=l.add(M)}).next(()=>l)}containsKey(e,t){const i=cs(t.path),a=IDBKeyRange.bound([i],[HC(i)],!1,!0);let l=0;return jo(e).J({index:"documentTargetsIndex",H:!0,range:a},([h,y],w,C)=>{0!==h&&(l++,C.done())}).next(()=>l>0)}ot(e,t){return Xf(e).get(t).next(i=>i?Kf(i):null)}}function Xf(n){return Wr(n,"targets")}function rb(n){return Wr(n,"targetGlobal")}function jo(n){return Wr(n,"targetDocuments")}function ib([n,e],[t,i]){const a=on(n,t);return 0===a?on(e,i):a}class sb{constructor(e){this.Kn=e,this.buffer=new $n(ib),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ib(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ob{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.A)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Nl(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Lu(i)}yield t.zn(3e5)}))}}class ab{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return de.resolve(eo.oe);const i=new sb(t);return this.jn.forEachTarget(e,a=>i.Wn(a.sequenceNumber)).next(()=>this.jn.Jn(e,a=>i.Wn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(eb)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eb):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let i,a,l,h,y,w,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),a=this.params.maximumSequenceNumbersToCollect):a=O,h=Date.now(),this.nthSequenceNumber(e,a))).next(O=>(i=O,y=Date.now(),this.removeTargets(e,i,t))).next(O=>(l=O,w=Date.now(),this.removeOrphanedDocuments(e,i))).next(O=>(C=Date.now(),Lg()<=Ea.$b.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-M}ms\n\tDetermined least recently used ${a} in `+(y-h)+`ms\n\tRemoved ${l} targets in `+(w-y)+`ms\n\tRemoved ${O} documents in `+(C-w)+`ms\nTotal Duration: ${C-M}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:O})))}}class lb{constructor(e,t){this.db=e,this.garbageCollector=function ub(n,e){return new ab(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Zn(e){let t=0;return this.Jn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(i,a)=>t(a))}addReference(e,t,i){return pv(e,i)}removeReference(e,t,i){return pv(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return pv(e,t)}er(e,t){return function(a,l){let h=!1;return zM(a).Y(y=>tb(a,y,l).next(w=>(w&&(h=!0),de.resolve(!w)))).next(()=>h)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Xn(e,(h,y)=>{if(y<=t){const w=this.er(e,h).next(C=>{if(!C)return l++,i.getEntry(e,h).next(()=>(i.removeEntry(h,bt.min()),jo(e).delete([0,cs(h.path)])))});a.push(w)}}).next(()=>de.waitFor(a)).next(()=>i.apply(e)).next(()=>l)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return pv(e,t)}Xn(e,t){const i=jo(e);let a,l=eo.oe;return i.J({index:"documentTargetsIndex"},([h,y],{path:w,sequenceNumber:C})=>{0===h?(l!==eo.oe&&t(new ot(Bu(a)),l),l=C,a=w):l=eo.oe}).next(()=>{l!==eo.oe&&t(new ot(Bu(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pv(n,e){return jo(n).put((a=n.currentSequenceNumber,{targetId:0,path:cs(e.path),sequenceNumber:a}));var a}class gv{constructor(){this.changes=new Ta(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?de.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Nd(e).put(i)}removeEntry(e,t,i){return Nd(e).delete(function(l,h){const y=l.path.toArray();return[y.slice(0,y.length-2),y[y.length-2],Sd(h),y[y.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.tr(e,i)))}getEntry(e,t){let i=Er.newInvalidDocument(t);return Nd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fm(t))},(a,l)=>{i=this.nr(t,l)}).next(()=>i)}rr(e,t){let i={size:0,document:Er.newInvalidDocument(t)};return Nd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fm(t))},(a,l)=>{i={document:this.nr(t,l),size:ql(l)}}).next(()=>i)}getEntries(e,t){let i=ds();return this.ir(e,t,(a,l)=>{const h=this.nr(a,l);i=i.insert(a,h)}).next(()=>i)}sr(e,t){let i=ds(),a=new Jn(ot.comparator);return this.ir(e,t,(l,h)=>{const y=this.nr(l,h);i=i.insert(l,y),a=a.insert(l,ql(h))}).next(()=>({documents:i,_r:a}))}ir(e,t,i){if(t.isEmpty())return de.resolve();let a=new $n(hb);t.forEach(w=>a=a.add(w));const l=IDBKeyRange.bound(fm(a.first()),fm(a.last())),h=a.getIterator();let y=h.getNext();return Nd(e).J({index:"documentKeyIndex",range:l},(w,C,M)=>{const O=ot.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;y&&hb(y,O)<0;)i(y,null),y=h.getNext();y&&y.isEqual(O)&&(i(y,C),y=h.hasNext()?h.getNext():null),y?M.$(fm(y)):M.done()}).next(()=>{for(;y;)i(y,null),y=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(e,t,i,a,l){const h=t.path,y=[h.popLast().toArray(),h.lastSegment(),Sd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],w=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nd(e).U(IDBKeyRange.bound(y,w,!0)).next(C=>{l?.incrementDocumentReadCount(C.length);let M=ds();for(const O of C){const j=this.nr(ot.fromSegments(O.prefixPath.concat(O.collectionGroup,O.documentId)),O);j.isFoundDocument()&&(Ll(t,j)||a.has(j.key))&&(M=M.insert(j.key,j))}return M})}getAllFromCollectionGroup(e,t,i,a){let l=ds();const h=mv(t,i),y=mv(t,Zs.max());return Nd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,y,!0)},(w,C,M)=>{const O=this.nr(ot.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(O.key,O),l.size===a&&M.done()}).next(()=>l)}newChangeBuffer(e){return new cb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return db(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}tr(e,t){return db(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const i=function Wf(n,e){let t;if(e.document)t=sm(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ot.fromSegments(e.noDocument.path),a=mi(e.noDocument.readTime);t=Er.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const i=ot.fromSegments(e.unknownDocument.path),a=mi(e.unknownDocument.version);t=Er.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(a){const l=new ur(a[0],a[1]);return bt.fromTimestamp(l)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(bt.min()))return i}return Er.newInvalidDocument(e)}}function nT(n){return new qM(n)}class cb extends gv{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Ta(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new $n((l,h)=>on(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const y=this.ur.get(l);if(t.push(this.ar.removeEntry(e,l,y.readTime)),h.isValidDocument()){const w=H0(this.ar.serializer,h);a=a.add(l.path.popLast());const C=ql(w);i+=C-y.size,t.push(this.ar.addEntry(e,l,w))}else if(i-=y.size,this.trackRemovals){const w=H0(this.ar.serializer,h.convertToNoDocument(bt.min()));t.push(this.ar.addEntry(e,l,w))}}),a.forEach(l=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.ar.updateMetadata(e,i)),de.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(i=>(this.ur.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:i,_r:a})=>(a.forEach((l,h)=>{this.ur.set(l,{size:h,readTime:i.get(l).readTime})}),i))}}function db(n){return Wr(n,"remoteDocumentGlobal")}function Nd(n){return Wr(n,"remoteDocumentsV14")}function fm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mv(n,e){const t=e.documentKey.path.toArray();return[n,Sd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function hb(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=on(t[l],i[l]),a)return a;return a=on(t.length,i.length),a||(a=on(t[t.length-2],i[i.length-2]),a||on(t[t.length-1],i[i.length-1]))}class fb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pb{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==i&&jf(i.mutation,a,fr.empty(),ur.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,St()).next(()=>i))}getLocalViewOfDocuments(e,t,i=St()){const a=Ku();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let h=wd();return l.forEach((y,w)=>{h=h.insert(y,w.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=Ku();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,St()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((h,y)=>{t.set(h,y)})})}computeViews(e,t,i,a){let l=ds();const h=Yg(),y=Yg();return t.forEach((w,C)=>{const M=i.get(C.key);a.has(C.key)&&(void 0===M||M.mutation instanceof Qu)?l=l.insert(C.key,C):void 0!==M?(h.set(C.key,M.mutation.getFieldMask()),jf(M.mutation,C,M.mutation.getFieldMask(),ur.now())):h.set(C.key,fr.empty())}),this.recalculateAndSaveOverlays(e,l).next(w=>(w.forEach((C,M)=>h.set(C,M)),t.forEach((C,M)=>{var O;return y.set(C,new fb(M,null!==(O=h.get(C))&&void 0!==O?O:null))}),y))}recalculateAndSaveOverlays(e,t){const i=Yg();let a=new Jn((h,y)=>h-y),l=St();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const y of h)y.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let M=i.get(w)||fr.empty();M=y.applyToLocalView(C,M),i.set(w,M);const O=(a.get(y.batchId)||St()).add(w);a=a.insert(y.batchId,O)})}).next(()=>{const h=[],y=a.getReverseIterator();for(;y.hasNext();){const w=y.getNext(),C=w.key,M=w.value,O=m0();M.forEach(j=>{if(!l.has(j)){const Y=Lo(t.get(j),i.get(j));null!==Y&&O.set(j,Y),l=l.add(j)}}),h.push(this.documentOverlayCache.saveOverlays(e,C,O))}return de.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return ot.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Vl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a);var h}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const h=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):de.resolve(Ku());let y=-1,w=l;return h.next(C=>de.forEach(C,(M,O)=>(y<O.largestBatchId&&(y=O.largestBatchId),l.get(M)?de.resolve():this.remoteDocumentCache.getEntry(e,M).next(j=>{w=w.insert(M,j)}))).next(()=>this.populateOverlays(e,C,l)).next(()=>this.computeViews(e,w,C,St())).next(M=>({batchId:y,changes:SM(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next(i=>{let a=wd();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let h=wd();return this.indexManager.getCollectionParents(e,l).next(y=>de.forEach(y,w=>{const C=(O=t,j=w.child(l),new Vs(j,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt));var O,j;return this.getDocumentsMatchingCollectionQuery(e,C,i,a).next(M=>{M.forEach((O,j)=>{h=h.insert(O,j)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(h=>{l.forEach((w,C)=>{const M=C.getKey();null===h.get(M)&&(h=h.insert(M,Er.newInvalidDocument(M)))});let y=wd();return h.forEach((w,C)=>{const M=l.get(w);void 0!==M&&jf(M.mutation,C,fr.empty(),ur.now()),Ll(t,C)&&(y=y.insert(w,C))}),y})}}class WM{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return de.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(a=t).id,version:a.version,createTime:ai(a.createTime)}),de.resolve();var a}getNamedQuery(e,t){return de.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(a=t).name,query:ov(a.bundledQuery),readTime:ai(a.readTime)}),de.resolve();var a}}class KM{constructor(){this.overlays=new Jn(ot.comparator),this.hr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ku();return de.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.ht(e,t,l)}),de.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.hr.get(i);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.hr.delete(i)),de.resolve()}getOverlaysForCollection(e,t,i){const a=Ku(),l=t.length+1,h=new ot(t.child("")),y=this.overlays.getIteratorFrom(h);for(;y.hasNext();){const w=y.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&w.largestBatchId>i&&a.set(w.getKey(),w)}return de.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Jn((C,M)=>C-M);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>i){let M=l.get(C.largestBatchId);null===M&&(M=Ku(),l=l.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const y=Ku(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,M)=>y.set(C,M)),!(y.size()>=a)););return de.resolve(y)}ht(e,t,i){const a=this.overlays.get(i.key);if(null!==a){const h=this.hr.get(a.largestBatchId).delete(i.key);this.hr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new tv(t,i));let l=this.hr.get(t);void 0===l&&(l=St(),this.hr.set(t,l)),this.hr.set(t,l.add(i.key))}}class rT{constructor(){this.Pr=new $n(ji.Ir),this.Tr=new $n(ji.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const i=new ji(e,t);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Ar(new ji(e,t))}Rr(e,t){e.forEach(i=>this.removeReference(i,t))}Vr(e){const t=new ot(new An([])),i=new ji(t,e),a=new ji(t,e+1),l=[];return this.Tr.forEachInRange([i,a],h=>{this.Ar(h),l.push(h.key)}),l}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new ot(new An([])),i=new ji(t,e),a=new ji(t,e+1);let l=St();return this.Tr.forEachInRange([i,a],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new ji(e,0),i=this.Pr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class ji{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ot.comparator(e.key,t.key)||on(e.pr,t.pr)}static Er(e,t){return on(e.pr,t.pr)||ot.comparator(e.key,t.key)}}class QM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new $n(ji.Ir)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,a){const l=this.yr;this.yr++;const h=new Vw(l,t,i,a);this.mutationQueue.push(h);for(const y of a)this.wr=this.wr.add(new ji(y.key,l)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return de.resolve(h)}lookupMutationBatch(e,t){return de.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.br(t+1),l=a<0?0:a;return de.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ji(t,0),a=new ji(t,Number.POSITIVE_INFINITY),l=[];return this.wr.forEachInRange([i,a],h=>{const y=this.Sr(h.pr);l.push(y)}),de.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new $n(on);return t.forEach(a=>{const l=new ji(a,0),h=new ji(a,Number.POSITIVE_INFINITY);this.wr.forEachInRange([l,h],y=>{i=i.add(y.pr)})}),de.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ot.isDocumentKey(l)||(l=l.child(""));const h=new ji(new ot(l),0);let y=new $n(on);return this.wr.forEachWhile(w=>{const C=w.key.path;return!!i.isPrefixOf(C)&&(C.length===a&&(y=y.add(w.pr)),!0)},h),de.resolve(this.Dr(y))}Dr(e){const t=[];return e.forEach(i=>{const a=this.Sr(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Ct(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let i=this.wr;return de.forEach(t.mutations,a=>{const l=new ji(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,t){const i=new ji(t,0),a=this.wr.firstAfterOrEqual(i);return de.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return de.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class XM{constructor(e){this.vr=e,this.docs=new Jn(ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,h=this.vr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return de.resolve(i?i.document.mutableCopy():Er.newInvalidDocument(t))}getEntries(e,t){let i=ds();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Er.newInvalidDocument(a))}),de.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=ds();const h=t.path,y=new ot(h.child("")),w=this.docs.getIteratorFrom(y);for(;w.hasNext();){const{key:C,value:{document:M}}=w.getNext();if(!h.isPrefixOf(C.path))break;C.path.length>h.length+1||fw(zC(M),i)<=0||(a.has(M.key)||Ll(t,M))&&(l=l.insert(M.key,M.mutableCopy()))}return de.resolve(l)}getAllFromCollectionGroup(e,t,i,a){gt()}Fr(e,t){return de.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new YM(this)}getSize(e){return de.resolve(this.size)}}class YM extends gv{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.ar.addEntry(e,a)):this.ar.removeEntry(i)}),de.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class gb{constructor(e){this.persistence=e,this.Mr=new Ta(t=>Vo(t),pd),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new rT,this.targetCount=0,this.Lr=Md.Nn()}forEachTarget(e,t){return this.Mr.forEach((i,a)=>t(a)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Or&&(this.Or=t),de.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Md(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.qn(t),de.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.Mr.forEach((h,y)=>{y.sequenceNumber<=t&&null===i.get(y.targetId)&&(this.Mr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),de.waitFor(l).next(()=>a)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const i=this.Mr.get(t)||null;return de.resolve(i)}addMatchingKeys(e,t,i){return this.Nr.dr(t,i),de.resolve()}removeMatchingKeys(e,t,i){this.Nr.Rr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(h=>{l.push(a.markPotentiallyOrphaned(e,h))}),de.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Nr.gr(t);return de.resolve(i)}containsKey(e,t){return de.resolve(this.Nr.containsKey(t))}}class _v{constructor(e,t){this.Br={},this.overlays={},this.kr=new eo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new gb(this),this.indexManager=new Z0,this.remoteDocumentCache=new XM(i=>this.referenceDelegate.Kr(i)),this.serializer=new $0(t),this.$r=new WM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new QM(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,i){je("MemoryPersistence","Starting transaction:",e);const a=new JM(this.kr.next());return this.referenceDelegate.Ur(),i(a).next(l=>this.referenceDelegate.Wr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Gr(e,t){return de.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}}class JM extends WC{constructor(e){super(),this.currentSequenceNumber=e}}class yv{constructor(e){this.persistence=e,this.zr=new rT,this.jr=null}static Hr(e){return new yv(e)}get Jr(){if(this.jr)return this.jr;throw gt()}addReference(e,t,i){return this.zr.addReference(i,t),this.Jr.delete(i.toString()),de.resolve()}removeReference(e,t,i){return this.zr.removeReference(i,t),this.Jr.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),de.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(a=>this.Jr.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Jr.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Jr,i=>{const a=ot.fromPath(i);return this.Yr(e,a).next(l=>{l||t.removeEntry(a,bt.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(i=>{i?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return de.or([()=>de.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class ZM{constructor(e){this.serializer=e}O(e,t,i,a){const l=new pw("createOrUpgrade",t);var w;i<1&&a>=1&&(e.createObjectStore("owner"),(w=e).createObjectStore("mutationQueues",{keyPath:"userId"}),w.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jg,{unique:!0}),w.createObjectStore("documentMutations"),mb(e),function(w){w.createObjectStore("remoteDocuments")}(e));let h=de.resolve();return i<3&&a>=3&&(0!==i&&(function(w){w.deleteObjectStore("targetDocuments"),w.deleteObjectStore("targets"),w.deleteObjectStore("targetGlobal")}(e),mb(e)),h=h.next(()=>function(w){const C=w.store("targetGlobal"),M={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return C.put("targetGlobalKey",M)}(l))),i<4&&a>=4&&(0!==i&&(h=h.next(()=>function(w,C){return C.store("mutations").U().next(M=>{w.deleteObjectStore("mutations"),w.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jg,{unique:!0});const O=C.store("mutations"),j=M.map(Y=>O.put(Y));return de.waitFor(j)})}(e,l))),h=h.next(()=>{!function(w){w.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(h=h.next(()=>this.Xr(l))),i<6&&a>=6&&(h=h.next(()=>(function(w){w.createObjectStore("remoteDocumentGlobal")}(e),this.ei(l)))),i<7&&a>=7&&(h=h.next(()=>this.ti(l))),i<8&&a>=8&&(h=h.next(()=>this.ni(e,l))),i<9&&a>=9&&(h=h.next(()=>{!function(w){w.objectStoreNames.contains("remoteDocumentChanges")&&w.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(h=h.next(()=>this.ri(l))),i<11&&a>=11&&(h=h.next(()=>{(function(w){w.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(w){w.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(h=h.next(()=>{!function(w){const C=w.createObjectStore("documentOverlays",{keyPath:YC});C.createIndex("collectionPathOverlayIndex",EM,{unique:!1}),C.createIndex("collectionGroupOverlayIndex",IM,{unique:!1})}(e)})),i<13&&a>=13&&(h=h.next(()=>function(w){const C=w.createObjectStore("remoteDocumentsV14",{keyPath:yM});C.createIndex("documentKeyIndex",Ja),C.createIndex("collectionGroupIndex",$g)}(e)).next(()=>this.ii(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(h=h.next(()=>this.si(e,l))),i<15&&a>=15&&(h=h.next(()=>function(w){w.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),w.createObjectStore("indexState",{keyPath:Hg}).createIndex("sequenceNumberIndex",vM,{unique:!1}),w.createObjectStore("indexEntries",{keyPath:Rf}).createIndex("documentKeyIndex",XC,{unique:!1})}(e))),i<16&&a>=16&&(h=h.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),h}ei(e){let t=0;return e.store("remoteDocuments").J((i,a)=>{t+=ql(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.U().next(a=>de.forEach(a,l=>{const h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",h).next(y=>de.forEach(y,w=>{Ct(w.userId===l.userId);const C=Gl(this.serializer,w);return tT(e,l.userId,C).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return i.J((h,y)=>{const w=new An(h),C=[0,cs(w)];l.push(t.get(C).next(M=>M?de.resolve():t.put({targetId:0,path:cs(w),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>de.waitFor(l))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Oo});const i=t.store("collectionParents"),a=new eT,l=h=>{if(a.add(h)){const y=h.lastSegment(),w=h.popLast();return i.put({collectionId:y,parent:cs(w)})}};return t.store("remoteDocuments").J({H:!0},(h,y)=>{const w=new An(h);return l(w.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([h,y,w],C)=>{const M=Bu(y);return l(M.popLast())}))}ri(e){const t=e.store("targets");return t.J((i,a)=>{const l=Kf(a),h=G0(this.serializer,l);return t.put(h)})}ii(e,t){const i=t.store("remoteDocuments"),a=[];return i.J((l,h)=>{const y=t.store("remoteDocumentsV14"),w=(O=h,O.document?new ot(An.fromString(O.document.name).popFirst(5)):O.noDocument?ot.fromSegments(O.noDocument.path):O.unknownDocument?ot.fromSegments(O.unknownDocument.path):gt()).path.toArray(),C={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};var O;a.push(y.put(C))}).next(()=>de.waitFor(a))}si(e,t){const i=t.store("mutations"),a=nT(this.serializer),l=new _v(yv.Hr,this.serializer.ct);return i.U().next(h=>{const y=new Map;return h.forEach(w=>{var C;let M=null!==(C=y.get(w.userId))&&void 0!==C?C:St();Gl(this.serializer,w).keys().forEach(O=>M=M.add(O)),y.set(w.userId,M)}),de.forEach(y,(w,C)=>{const M=new Ji(C),O=zl.lt(this.serializer,M),j=l.getIndexManager(M),Y=fv.lt(M,this.serializer,j,l.referenceDelegate);return new pb(a,Y,O,j).recalculateAndSaveOverlaysForDocumentKeys(new Nf(t,eo.oe),w).next()})})}}function mb(n){n.createObjectStore("targetDocuments",{keyPath:ld}).createIndex("documentTargetsIndex",Hy,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ii,{unique:!0}),n.createObjectStore("targetGlobal")}const gm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vv{constructor(e,t,i,a,l,h,y,w,C,M,O=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.oi=l,this.window=h,this.document=y,this._i=C,this.ai=M,this.ui=O,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=j=>Promise.resolve(),!vv.D())throw new Ue(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lb(this,a),this.Ti=t+"main",this.serializer=new $0(w),this.Ei=new Ia(this.Ti,this.ui,new ZM(this.serializer)),this.Qr=new nb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nT(this.serializer),this.$r=new $M,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===M&&gi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(Ee.FAILED_PRECONDITION,gm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new eo(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var i=(0,ve.A)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,ve.A)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ve.A)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Nl(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return mm(e).get("owner").next(t=>de.resolve(this.Si(t)))}bi(e){return Yf(e).delete(this.clientId)}Di(){var e=this;return(0,ve.A)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=Wr(i,"clientMetadata");return a.U().next(l=>{const h=e.vi(l,18e5),y=l.filter(w=>-1===h.indexOf(w));return de.forEach(y,w=>a.delete(w.clientId)).next(()=>y)})}).catch(()=>[]);if(e.di)for(const i of t)e.di.removeItem(e.Fi(i.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?de.resolve(!0):mm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Ue(Ee.FAILED_PRECONDITION,gm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yf(e).U().next(i=>void 0===this.vi(i,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.A)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new Nf(t,eo.oe);return e.yi(i).next(()=>e.bi(i))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(i=>this.Ci(i.updateTimeMs,t)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Yf(e).U().next(t=>this.vi(t,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return fv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LO(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return zl.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,i){je("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=16===(w=this.ui)?Mf:15===w?Pf:14===w?qr:13===w?ZC:12===w?JC:11===w?zr:void gt();var w;let h;return this.Ei.runTransaction(e,a,l,y=>(h=new Nf(y,this.kr?this.kr.next():eo.oe),"readwrite-primary"===t?this.gi(h).next(w=>!!w||this.pi(h)).next(w=>{if(!w)throw gi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ue(Ee.FAILED_PRECONDITION,qC);return i(h)}).next(w=>this.wi(h).next(()=>w)):this.ki(h).next(()=>i(h)))).then(y=>(h.raiseOnCommittedEvent(),y))}ki(e){return mm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(Ee.FAILED_PRECONDITION,gm)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mm(e).put("owner",t)}static D(){return Ia.D()}yi(e){const t=mm(e);return t.get("owner").next(i=>this.Si(i)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ci(e,t){const i=Date.now();return!(e<i-t||e>i&&(gi(`Detected an update time that is in the future: ${e} > ${i}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,jn.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const i=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return je("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return gi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){gi("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mm(n){return Wr(n,"owner")}function Yf(n){return Wr(n,"clientMetadata")}function Ev(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Iv{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.qi=i,this.Qi=a}static Ki(e,t){let i=St(),a=St();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Iv(e,t.fromCache,i,a)}}class UO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class iT{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,jn.nr)()?8:gw((0,jn.ZQ)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ji(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.Hi(e,t,a,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new UO;return this.Ji(e,t,h).next(y=>{if(l.result=y,this.Ui)return this.Yi(e,t,h,y.size)})}).next(()=>l.result)}Yi(e,t,i,a){return i.documentReadCount<this.Wi?(Lg()<=Ea.$b.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",Ed(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),de.resolve()):(Lg()<=Ea.$b.DEBUG&&je("QueryEngine","Query:",Ed(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.Gi*a?(Lg()<=Ea.$b.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",Ed(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(t))):de.resolve())}ji(e,t){if(yd(t))return de.resolve(null);let i=es(t);return this.indexManager.getIndexType(e,i).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Xg(t,null,"F"),i=es(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=St(...l);return this.zi.getDocuments(e,h).next(y=>this.indexManager.getMinOffset(e,i).next(w=>{const C=this.Zi(t,y);return this.Xi(t,C,h,w.readTime)?this.ji(e,Xg(t,null,"F")):this.es(e,C,t,w)}))})))}Hi(e,t,i,a){return yd(t)||a.isEqual(bt.min())?de.resolve(null):this.zi.getDocuments(e,i).next(l=>{const h=this.Zi(t,l);return this.Xi(t,h,i,a)?de.resolve(null):(Lg()<=Ea.$b.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ed(t)),this.es(e,h,t,GC(a,-1)).next(y=>y))})}Zi(e,t){let i=new $n(p0(e));return t.forEach((a,l)=>{Ll(e,l)&&(i=i.add(l))}),i}Xi(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ji(e,t,i){return Lg()<=Ea.$b.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",Ed(t)),this.zi.getDocumentsMatchingQuery(e,t,Zs.min(),i)}es(e,t,i,a){return this.zi.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}class eN{constructor(e,t,i,a){this.persistence=e,this.ts=t,this.serializer=a,this.ns=new Jn(on),this.rs=new Ta(l=>Vo(l),pd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pb(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function _b(n,e,t,i){return new eN(n,e,t,i)}function yb(n,e){return wv.apply(this,arguments)}function wv(){return(wv=(0,ve.A)(function*(n,e){const t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t._s(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],y=[];let w=St();for(const C of a){h.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}for(const C of l){y.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}return t.localDocuments.getDocuments(i,w).next(C=>({us:C,removedBatchIds:h,addedBatchIds:y}))})})})).apply(this,arguments)}function oT(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function aT(n,e,t){let i=St(),a=St();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let h=ds();return t.forEach((y,w)=>{const C=l.get(y);w.isFoundDocument()!==C.isFoundDocument()&&(a=a.add(y)),w.isNoDocument()&&w.version.isEqual(bt.min())?(e.removeEntry(y,w.readTime),h=h.insert(y,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),h=h.insert(y,w)):je("LocalStore","Ignoring outdated watch update for ",y,". Current version:",C.version," Watch version:",w.version)}),{cs:h,ls:a}})}function Eb(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xd(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Qr.getTargetData(i,e).next(l=>l?(a=l,de.resolve(a)):t.Qr.allocateTargetId(i).next(h=>(a=new Yu(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Qr.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.ns.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.ns=t.ns.insert(i.targetId,i),t.rs.set(e,i.targetId)),i})}function Od(n,e,t){return Tv.apply(this,arguments)}function Tv(){return(Tv=(0,ve.A)(function*(n,e,t){const i=it(n),a=i.ns.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Nl(h))throw h;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.ns=i.ns.remove(e),i.rs.delete(a.target)})).apply(this,arguments)}function _m(n,e,t){const i=it(n);let a=bt.min(),l=St();return i.persistence.runTransaction("Execute query","readwrite",h=>function(w,C,M){const O=it(w),j=O.rs.get(M);return void 0!==j?de.resolve(O.ns.get(j)):O.Qr.getTargetData(C,M)}(i,h,es(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(h,y.targetId).next(w=>{l=w})}).next(()=>i.ts.getDocumentsMatchingQuery(h,e,t?a:bt.min(),t?l:St())).next(y=>(lT(i,Wu(e),y),{documents:y,hs:l})))}function uT(n,e){const t=it(n),i=it(t.Qr),a=t.ns.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>i.ot(l,e).next(h=>h?h.target:null))}function Ib(n,e){const t=it(n),i=t.ss.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.os.getAllFromCollectionGroup(a,e,GC(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(lT(t,e,a),a))}function lT(n,e,t){let i=n.ss.get(e)||bt.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ss.set(e,i)}function cT(){return(cT=(0,ve.A)(function*(n,e,t,i){const a=it(n);let l=St(),h=ds();for(const C of t){const M=e.Ps(C.metadata.name);C.document&&(l=l.add(M));const O=e.Is(C);O.setReadTime(e.Ts(C.metadata.readTime)),h=h.insert(M,O)}const y=a.os.newChangeBuffer({trackRemovals:!0}),w=yield xd(a,(M=i,es(wa(An.fromString(`__bundle__/docs/${M}`)))));var M;return a.persistence.runTransaction("Apply bundle documents","readwrite",C=>aT(C,y,h).next(M=>(y.apply(C),M)).next(M=>a.Qr.removeMatchingKeysForTargetId(C,w.targetId).next(()=>a.Qr.addMatchingKeys(C,l,w.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(C,M.cs,M.ls)).next(()=>M.cs)))})).apply(this,arguments)}function tN(n,e){return dT.apply(this,arguments)}function dT(){return(dT=(0,ve.A)(function*(n,e,t=St()){const i=yield xd(n,es(ov(e.bundledQuery))),a=it(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const h=ai(e.readTime);if(i.snapshotVersion.compareTo(h)>=0)return a.$r.saveNamedQuery(l,e);const y=i.withResumeToken(si.EMPTY_BYTE_STRING,h);return a.ns=a.ns.insert(y.targetId,y),a.Qr.updateTargetData(l,y).next(()=>a.Qr.removeMatchingKeysForTargetId(l,i.targetId)).next(()=>a.Qr.addMatchingKeys(l,t,i.targetId)).next(()=>a.$r.saveNamedQuery(l,e))})})).apply(this,arguments)}function Tb(n,e){return`firestore_clients_${n}_${e}`}function Ab(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function hT(n,e){return`firestore_targets_${n}_${e}`}class Av{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Es(e,t,i){const a=JSON.parse(i);let l,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(l=new Ue(a.error.code,a.error.message))),h?new Av(e,t,a.state,l):(gi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ym{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Es(e,t){const i=JSON.parse(t);let a,l="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ue(i.error.code,i.error.message))),l?new ym(e,i.state,a):(gi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const i=JSON.parse(t);let a="object"==typeof i&&i.activeTargetIds instanceof Array,l=Ow();for(let h=0;a&&h<i.activeTargetIds.length;++h)a=_M(i.activeTargetIds[h]),l=l.add(i.activeTargetIds[h]);return a?new Dv(e,l):(gi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class fT{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new fT(t.clientId,t.onlineState):(gi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pT{constructor(){this.activeTargetIds=Ow()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gT{constructor(e,t,i,a,l){this.window=e,this.oi=t,this.persistenceKey=i,this.Vs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Jn(on),this.started=!1,this.ys=[];const h=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ws=Tb(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new pT),this.bs=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(w){return`firestore_bundle_loaded_v2_${w}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.A)(function*(){const t=yield e.syncEngine.Bi();for(const a of t){if(a===e.Vs)continue;const l=e.getItem(Tb(e.persistenceKey,a));if(l){const h=Dv.Es(a,l);h&&(e.ps=e.ps.insert(h.clientId,h))}}e.Ms();const i=e.storage.getItem(e.vs);if(i){const a=e.xs(i);a&&e.Os(a)}for(const a of e.ys)e.gs(a);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,i){this.Ls(e,t,i),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(hT(this.persistenceKey,e));if(i){const a=ym.Es(e,i);a&&(t=a.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hT(this.persistenceKey,e))}updateQueryState(e,t,i){this.qs(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Bs(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const i=e;if(i.storageArea===this.storage){if(je("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ws)return void gi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ve.A)(function*(){if(t.started){if(null!==i.key)if(t.bs.test(i.key)){if(null==i.newValue){const a=t.$s(i.key);return t.Us(a,null)}{const a=t.Ws(i.key,i.newValue);if(a)return t.Us(a.clientId,a)}}else if(t.Ds.test(i.key)){if(null!==i.newValue){const a=t.Gs(i.key,i.newValue);if(a)return t.zs(a)}}else if(t.Cs.test(i.key)){if(null!==i.newValue){const a=t.js(i.key,i.newValue);if(a)return t.Hs(a)}}else if(i.key===t.vs){if(null!==i.newValue){const a=t.xs(i.newValue);if(a)return t.Os(a)}}else if(i.key===t.Ss){const a=function(h){let y=eo.oe;if(null!=h)try{const w=JSON.parse(h);Ct("number"==typeof w),y=w}catch(w){gi("SharedClientState","Failed to read sequence number from WebStorage",w)}return y}(i.newValue);a!==eo.oe&&t.sequenceNumberHandler(a)}else if(i.key===t.Fs){const a=t.Js(i.newValue);yield Promise.all(a.map(l=>t.syncEngine.Ys(l)))}}else t.ys.push(i)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,i){const a=new Av(this.currentUser,e,t,i),l=Ab(this.persistenceKey,this.currentUser,e);this.setItem(l,a.ds())}Bs(e){const t=Ab(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,i){const a=hT(this.persistenceKey,e),l=new ym(e,t,i);this.setItem(a,l.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const i=this.$s(e);return Dv.Es(i,t)}Gs(e,t){const i=this.Ds.exec(e),a=Number(i[1]);return Av.Es(new Ji(void 0!==i[2]?i[2]:null),a,t)}js(e,t){const i=this.Cs.exec(e),a=Number(i[1]);return ym.Es(a,t)}xs(e){return fT.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,ve.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const i=t?this.ps.insert(e,t):this.ps.remove(e),a=this.Ns(this.ps),l=this.Ns(i),h=[],y=[];return l.forEach(w=>{a.has(w)||h.push(w)}),a.forEach(w=>{l.has(w)||y.push(w)}),this.syncEngine.eo(h,y).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Ow();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Db{constructor(){this.no=new pT,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,i){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new pT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nN{io(e){}shutdown(){}}class mT{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vm=null;function Cv(){return null===vm?vm=268435456+Math.round(2147483648*Math.random()):vm++,"0x"+vm.toString(16)}const Cb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bb{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const ts="WebChannelConnection";class Sb extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+t.host,this.So=`projects/${a}/databases/${l}`,this.bo="(default)"===this.databaseId.database?`project_id=${a}`:`project_id=${a}&database_id=${l}`}get Do(){return!1}Co(t,i,a,l,h){const y=Cv(),w=this.vo(t,i.toUriEncodedString());je("RestConnection",`Sending RPC '${t}' ${y}:`,w,a);const C={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(C,l,h),this.Mo(t,w,C,a).then(M=>(je("RestConnection",`Received RPC '${t}' ${y}: `,M),M),M=>{throw Js("RestConnection",`RPC '${t}' ${y} failed with error: `,M,"url: ",w,"request:",a),M})}xo(t,i,a,l,h,y){return this.Co(t,i,a,l,h)}Fo(t,i,a){t["X-Goog-Api-Client"]="gl-js/ fire/"+Vg,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),a&&a.headers.forEach((l,h)=>t[h]=l)}vo(t,i){return`${this.wo}/v1/${i}:${Cb[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,i,a){const l=Cv();return new Promise((h,y)=>{const w=new cM;w.setWithCredentials(!0),w.listenOnce(lw.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Tf.NO_ERROR:const M=w.getResponseJson();je(ts,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(M)),h(M);break;case Tf.TIMEOUT:je(ts,`RPC '${e}' ${l} timed out`),y(new Ue(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const O=w.getStatus();if(je(ts,`RPC '${e}' ${l} failed with status:`,O,"response text:",w.getResponseText()),O>0){let j=w.getResponseJson();Array.isArray(j)&&(j=j[0]);const Y=j?.error;if(Y&&Y.status&&Y.message){const me=function(Ie){const Ge=Ie.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(Ge)>=0?Ge:Ee.UNKNOWN}(Y.status);y(new Ue(me,Y.message))}else y(new Ue(Ee.UNKNOWN,"Server responded with status "+w.getStatus()))}else y(new Ue(Ee.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{je(ts,`RPC '${e}' ${l} completed.`)}});const C=JSON.stringify(a);je(ts,`RPC '${e}' ${l} sending request:`,a),w.send(t,"POST",C,i,15)})}Oo(e,t,i){const a=Cv(),l=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=hw(),y=dw(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(w.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(w.xmlHttpFactory=new BC({})),this.Fo(w.initMessageHeaders,t,i),w.encodeInitMessageHeaders=!0;const M=l.join("");je(ts,`Creating RPC '${e}' stream ${a}: ${M}`,w);const O=h.createWebChannel(M,w);let j=!1,Y=!1;const me=new bb({lo:Ie=>{Y?je(ts,`Not sending because RPC '${e}' stream ${a} is closed:`,Ie):(j||(je(ts,`Opening RPC '${e}' stream ${a} transport.`),O.open(),j=!0),je(ts,`RPC '${e}' stream ${a} sending:`,Ie),O.send(Ie))},ho:()=>O.close()}),Me=(Ie,Ge,ft)=>{Ie.listen(Ge,qe=>{try{ft(qe)}catch(vt){setTimeout(()=>{throw vt},0)}})};return Me(O,wf.EventType.OPEN,()=>{Y||(je(ts,`RPC '${e}' stream ${a} transport opened.`),me.mo())}),Me(O,wf.EventType.CLOSE,()=>{Y||(Y=!0,je(ts,`RPC '${e}' stream ${a} transport closed`),me.po())}),Me(O,wf.EventType.ERROR,Ie=>{Y||(Y=!0,Js(ts,`RPC '${e}' stream ${a} transport errored:`,Ie),me.po(new Ue(Ee.UNAVAILABLE,"The operation could not be completed")))}),Me(O,wf.EventType.MESSAGE,Ie=>{var Ge;if(!Y){const ft=Ie.data[0];Ct(!!ft);const vt=ft.error||(null===(Ge=ft[0])||void 0===Ge?void 0:Ge.error);if(vt){je(ts,`RPC '${e}' stream ${a} received error:`,vt);const Xt=vt.status;let hn=function(J){const se=oi[J];if(void 0!==se)return S0(se)}(Xt),ie=vt.message;void 0===hn&&(hn=Ee.INTERNAL,ie="Unknown error status: "+Xt+" with message "+vt.message),Y=!0,me.po(new Ue(hn,ie)),O.close()}else je(ts,`RPC '${e}' stream ${a} received:`,ft),me.yo(ft)}}),Me(y,cw.STAT_EVENT,Ie=>{Ie.stat===ky.PROXY?je(ts,`RPC '${e}' stream ${a} detected buffering proxy`):Ie.stat===ky.NOPROXY&&je(ts,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{me.fo()},0),me}}function _T(){return typeof window<"u"?window:null}function Em(){return typeof document<"u"?document:null}function Jf(n){return new LM(n,!0)}class bv{constructor(e,t,i=1e3,a=1.5,l=6e4){this.oi=e,this.timerId=t,this.No=i,this.Lo=a,this.Bo=l,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),a=Math.max(0,t-i);a>0&&je("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,a,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Rb{constructor(e,t,i,a,l,h,y,w){this.oi=e,this.Go=i,this.zo=a,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=w,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new bv(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ve.A)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ve.A)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var i=this;return(0,ve.A)(function*(){i.s_(),i.o_(),i.Yo.cancel(),i.jo++,4!==e?i.Yo.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(gi(t.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),i.Yo.Ko()):t&&t.code===Ee.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.__(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.jo===t&&this.u_(i,a)},i=>{e(()=>{const a=new Ue(Ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(a)})})}u_(e,t){const i=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(a=>{i(()=>this.c_(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ve.A)(function*(){e.state=0,e.start()}))}c_(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rN extends Rb{constructor(e,t,i,a,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,h),this.serializer=l}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function L0(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(C=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===C?1:"REMOVE"===C?2:"CURRENT"===C?3:"RESET"===C?4:gt(),a=e.targetChange.targetIds||[],l=function(C,M){return C.useProto3Json?(Ct(void 0===M||"string"==typeof M),si.fromBase64String(M||"")):(Ct(void 0===M||M instanceof Buffer||M instanceof Uint8Array),si.fromUint8Array(M||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&function(C){const M=void 0===C.code?Ee.UNKNOWN:S0(C.code);return new Ue(M,C.message||"")}(h);t=new Uw(i,a,l,y||null)}else if("documentChange"in e){const i=e.documentChange,a=Uo(n,i.document.name),l=ai(i.document.updateTime),h=i.document.createTime?ai(i.document.createTime):bt.min(),y=new Zi({mapValue:{fields:i.document.fields}}),w=Er.newFoundDocument(a,l,h,y);t=new rv(i.targetIds||[],i.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const i=e.documentDelete,a=Uo(n,i.document),l=i.readTime?ai(i.readTime):bt.min(),h=Er.newNoDocument(a,l);t=new rv([],i.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const i=e.documentRemove,a=Uo(n,i.document);t=new rv([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return gt();{const i=e.filter,{count:a=0,unchangedNames:l}=i,h=new xM(a,l);t=new iv(i.targetId,h)}}var C;return t}(this.serializer,e),i=function(l){if(!("targetChange"in l))return bt.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?bt.min():h.readTime?ai(h.readTime):bt.min()}(e);return this.listener.h_(t,i)}P_(e){const t={};t.database=Gw(this.serializer),t.addTarget=function(l,h){let y;const w=h.target;if(y=zu(w)?{documents:qw(l,w)}:{query:zf(l,w)._t},y.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){y.resumeToken=sv(l,h.resumeToken);const C=jw(l,h.expectedCount);null!==C&&(y.expectedCount=C)}else if(h.snapshotVersion.compareTo(bt.min())>0){y.readTime=Gf(l,h.snapshotVersion.toTimestamp());const C=jw(l,h.expectedCount);null!==C&&(y.expectedCount=C)}return y}(this.serializer,e);const i=function BM(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.i_(t)}I_(e){const t={};t.database=Gw(this.serializer),t.removeTarget=e,this.i_(t)}}class yT extends Rb{constructor(e,t,i,a,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,h),this.serializer=l,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function U0(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(a,l){let h=ai(a.updateTime?a.updateTime:l);return h.isEqual(bt.min())&&(h=ai(l)),new MM(h,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=ai(e.commitTime);return this.listener.A_(i,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Gw(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>om(this.serializer,i))};this.i_(t)}}class Sv extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.m_=!1}f_(){if(this.m_)throw new Ue(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,i,a){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Co(e,$w(t,i),a,l,h)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ue(Ee.UNKNOWN,l.toString())})}xo(e,t,i,a,l){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,y])=>this.connection.xo(e,$w(t,i),a,h,y,l)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ue(Ee.UNKNOWN,h.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class vT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(gi(t),this.y_=!1):je("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Pb{constructor(e,t,i,a,l){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=l,this.O_.io(y=>{i.enqueueAndForget((0,ve.A)(function*(){var w;nu(h)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ve.A)(function*(M){const O=it(M);O.M_.add(4),yield kd(O),O.N_.set("Unknown"),O.M_.delete(4),yield Zf(O)}),function C(M){return w.apply(this,arguments)})(h))}))}),this.N_=new vT(i,a)}}function Zf(n){return Rv.apply(this,arguments)}function Rv(){return(Rv=(0,ve.A)(function*(n){if(nu(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function kd(n){return Pv.apply(this,arguments)}function Pv(){return(Pv=(0,ve.A)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function Im(n,e){const t=it(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),IT(t)?Tm(t):Vd(t).Xo()&&wm(t,e))}function Fd(n,e){const t=it(n),i=Vd(t);t.F_.delete(e),i.Xo()&&ET(t,e),0===t.F_.size&&(i.Xo()?i.n_():nu(t)&&t.N_.set("Unknown"))}function wm(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vd(n).P_(e)}function ET(n,e){n.L_.xe(e),Vd(n).I_(e)}function Tm(n){n.L_=new N0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Vd(n).start(),n.N_.w_()}function IT(n){return nu(n)&&!Vd(n).Zo()&&n.F_.size>0}function nu(n){return 0===it(n).M_.size}function Mv(n){n.L_=void 0}function Mb(n){return Am.apply(this,arguments)}function Am(){return(Am=(0,ve.A)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function iN(n){return wT.apply(this,arguments)}function wT(){return(wT=(0,ve.A)(function*(n){n.F_.forEach((e,t)=>{wm(n,e)})})).apply(this,arguments)}function TT(n,e){return AT.apply(this,arguments)}function AT(){return(AT=(0,ve.A)(function*(n,e){Mv(n),IT(n)?(n.N_.D_(e),Tm(n)):n.N_.set("Unknown")})).apply(this,arguments)}function Nb(n,e,t){return DT.apply(this,arguments)}function DT(){return DT=(0,ve.A)(function*(n,e,t){if(n.N_.set("Online"),e instanceof Uw&&2===e.state&&e.cause)try{yield(i=(0,ve.A)(function*(l,h){const y=h.cause;for(const w of h.targetIds)l.F_.has(w)&&(yield l.remoteSyncer.rejectListen(w,y),l.F_.delete(w),l.L_.removeTarget(w))}),function a(l,h){return i.apply(this,arguments)})(n,e)}catch(i){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Dm(n,i)}else if(e instanceof rv?n.L_.Ke(e):e instanceof iv?n.L_.He(e):n.L_.We(e),!t.isEqual(bt.min()))try{const i=yield oT(n.localStore);t.compareTo(i)>=0&&(yield function(l,h){const y=l.L_.rt(h);return y.targetChanges.forEach((w,C)=>{if(w.resumeToken.approximateByteSize()>0){const M=l.F_.get(C);M&&l.F_.set(C,M.withResumeToken(w.resumeToken,h))}}),y.targetMismatches.forEach((w,C)=>{const M=l.F_.get(w);if(!M)return;l.F_.set(w,M.withResumeToken(si.EMPTY_BYTE_STRING,M.snapshotVersion)),ET(l,w);const O=new Yu(M.target,w,C,M.sequenceNumber);wm(l,O)}),l.remoteSyncer.applyRemoteEvent(y)}(n,t))}catch(i){je("RemoteStore","Failed to raise snapshot:",i),yield Dm(n,i)}var i}),DT.apply(this,arguments)}function Dm(n,e,t){return CT.apply(this,arguments)}function CT(){return(CT=(0,ve.A)(function*(n,e,t){if(!Nl(e))throw e;n.M_.add(1),yield kd(n),n.N_.set("Offline"),t||(t=()=>oT(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.A)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Zf(n)}))})).apply(this,arguments)}function xb(n,e){return e().catch(t=>Dm(n,t,e))}function Ju(n){return Nv.apply(this,arguments)}function Nv(){return(Nv=(0,ve.A)(function*(n){const e=it(n),t=Kl(e);let i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Ob(e);)try{const a=yield Eb(e.localStore,i);if(null===a){0===e.v_.length&&t.n_();break}i=a.batchId,sN(e,a)}catch(a){yield Dm(e,a)}kb(e)&&Fb(e)})).apply(this,arguments)}function Ob(n){return nu(n)&&n.v_.length<10}function sN(n,e){n.v_.push(e);const t=Kl(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function kb(n){return nu(n)&&!Kl(n).Zo()&&n.v_.length>0}function Fb(n){Kl(n).start()}function oN(n){return bT.apply(this,arguments)}function bT(){return(bT=(0,ve.A)(function*(n){Kl(n).V_()})).apply(this,arguments)}function aN(n){return ST.apply(this,arguments)}function ST(){return(ST=(0,ve.A)(function*(n){const e=Kl(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function uN(n,e,t){return RT.apply(this,arguments)}function RT(){return(RT=(0,ve.A)(function*(n,e,t){const i=n.v_.shift(),a=ev.from(i,e,t);yield xb(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Ju(n)})).apply(this,arguments)}function Cm(n,e){return xv.apply(this,arguments)}function xv(){return xv=(0,ve.A)(function*(n,e){var t;e&&Kl(n).E_&&(yield(t=(0,ve.A)(function*(a,l){if(b0(y=l.code)&&y!==Ee.ABORTED){const h=a.v_.shift();Kl(a).t_(),yield xb(a,()=>a.remoteSyncer.rejectFailedWrite(h.batchId,l)),yield Ju(a)}var y}),function i(a,l){return t.apply(this,arguments)})(n,e)),kb(n)&&Fb(n)}),xv.apply(this,arguments)}function PT(n,e){return Ov.apply(this,arguments)}function Ov(){return(Ov=(0,ve.A)(function*(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const i=nu(t);t.M_.add(3),yield kd(t),i&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Zf(t)})).apply(this,arguments)}function kv(n,e){return Fv.apply(this,arguments)}function Fv(){return(Fv=(0,ve.A)(function*(n,e){const t=it(n);e?(t.M_.delete(2),yield Zf(t)):e||(t.M_.add(2),yield kd(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Vd(n){return n.B_||(n.B_=function(t,i,a){const l=it(t);return l.f_(),new rN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Po:Mb.bind(null,n),To:iN.bind(null,n),Ao:TT.bind(null,n),h_:Nb.bind(null,n)}),n.x_.push(function(){var e=(0,ve.A)(function*(t){t?(n.B_.t_(),IT(n)?Tm(n):n.N_.set("Unknown")):(yield n.B_.stop(),Mv(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function Kl(n){return n.k_||(n.k_=function(t,i,a){const l=it(t);return l.f_(),new yT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:oN.bind(null,n),Ao:Cm.bind(null,n),R_:aN.bind(null,n),A_:uN.bind(null,n)}),n.x_.push(function(){var e=(0,ve.A)(function*(t){t?(n.k_.t_(),yield Ju(n)):(yield n.k_.stop(),n.v_.length>0&&(je("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class Vb{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const h=Date.now()+i,y=new Vb(e,t,h,a,l);return y.start(i),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bm(n,e){if(gi("AsyncQueue",`${e}: ${n}`),Nl(n))return new Ue(Ee.UNAVAILABLE,`${e}: ${n}`);throw n}class Ld{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ot.comparator(t.key,i.key):(t,i)=>ot.comparator(t.key,i.key),this.keyedMap=wd(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new Ld(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ld)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Ld;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Lb{constructor(){this.q_=new Jn(ot.comparator)}track(e){const t=e.doc.key,i=this.q_.get(t);i?0!==e.type&&3===i.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==i.type?this.q_=this.q_.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.q_=this.q_.remove(t):1===e.type&&2===i.type?this.q_=this.q_.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):gt():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,i)=>{e.push(i)}),e}}class ep{constructor(e,t,i,a,l,h,y,w,C){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,i,a,l){const h=[];return t.forEach(y=>{h.push({type:0,doc:y})}),new ep(e,t,Ld.emptySet(t),h,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class lN{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class cN{constructor(){this.queries=new Ta(e=>xw(e),Lf),this.onlineState="Unknown",this.z_=new Set}}function Ud(n,e){return MT.apply(this,arguments)}function MT(){return(MT=(0,ve.A)(function*(n,e){const t=it(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.W_()&&e.G_()&&(i=2):(l=new lN,i=e.G_()?0:1);try{switch(i){case 0:l.K_=yield t.onListen(a,!0);break;case 1:l.K_=yield t.onListen(a,!1);break;case 2:yield t.onFirstRemoteStoreListen(a)}}catch(h){const y=bm(h,`Initialization of query '${Ed(e.query)}' failed`);return void e.onError(y)}t.queries.set(a,l),l.U_.push(e),e.j_(t.onlineState),l.K_&&e.H_(l.K_)&&OT(t)})).apply(this,arguments)}function NT(n,e){return xT.apply(this,arguments)}function xT(){return(xT=(0,ve.A)(function*(n,e){const t=it(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const h=l.U_.indexOf(e);h>=0&&(l.U_.splice(h,1),0===l.U_.length?a=e.G_()?0:1:!l.W_()&&e.G_()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})).apply(this,arguments)}function ws(n,e){const t=it(n);let i=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const y of h.U_)y.H_(a)&&(i=!0);h.K_=a}}i&&OT(t)}function tp(n,e,t){const i=it(n),a=i.queries.get(e);if(a)for(const l of a.U_)l.onError(t);i.queries.delete(e)}function OT(n){n.z_.forEach(e=>{e.next()})}var kT,dN;(dN=kT||(kT={})).J_="default",dN.Cache="cache";class Ub{constructor(e,t,i){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new ep(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=ep.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==kT.Cache}}class Sm{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class Bb{constructor(e){this.serializer=e}Ps(e){return Uo(this.serializer,e)}Is(e){return e.metadata.exists?sm(this.serializer,e.document,!1):Er.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ai(e)}}class FT{constructor(e,t,i){this.oa=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jb(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const i=An.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,i=new Bb(this.serializer);for(const a of e)if(a.metadata.queries){const l=i.Ps(a.metadata.name);for(const h of a.metadata.queries){const y=(t.get(h)||St()).add(l);t.set(h,y)}}return t}complete(){var e=this;return(0,ve.A)(function*(){const t=yield function wb(n,e,t,i){return cT.apply(this,arguments)}(e.localStore,new Bb(e.serializer),e.documents,e.oa.id),i=e.aa(e.documents);for(const a of e.queries)yield tN(e.localStore,a,i.get(a.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function jb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class VT{constructor(e){this.key=e}}class $b{constructor(e){this.key=e}}class Hb{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=St(),this.mutatedKeys=St(),this.Ia=p0(e),this.Ta=new Ld(this.Ia)}get Ea(){return this.la}da(e,t){const i=t?t.Aa:new Lb,a=t?t.Ta:this.Ta;let l=t?t.mutatedKeys:this.mutatedKeys,h=a,y=!1;const w="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,C="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((M,O)=>{const j=a.get(M),Y=Ll(this.query,O)?O:null,me=!!j&&this.mutatedKeys.has(j.key),Me=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Ie=!1;j&&Y?j.data.isEqual(Y.data)?me!==Me&&(i.track({type:3,doc:Y}),Ie=!0):this.Ra(j,Y)||(i.track({type:2,doc:Y}),Ie=!0,(w&&this.Ia(Y,w)>0||C&&this.Ia(Y,C)<0)&&(y=!0)):!j&&Y?(i.track({type:0,doc:Y}),Ie=!0):j&&!Y&&(i.track({type:1,doc:j}),Ie=!0,(w||C)&&(y=!0)),Ie&&(Y?(h=h.add(Y),l=Me?l.add(M):l.delete(M)):(h=h.delete(M),l=l.delete(M)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const M="F"===this.query.limitType?h.last():h.first();h=h.delete(M.key),l=l.delete(M.key),i.track({type:1,doc:M})}return{Ta:h,Aa:i,Xi:y,mutatedKeys:l}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const h=e.Aa.Q_();h.sort((M,O)=>function(Y,me){const Me=Ie=>{switch(Ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return Me(Y)-Me(me)}(M.type,O.type)||this.Ia(M.doc,O.doc)),this.Va(i),a=null!=a&&a;const y=t&&!a?this.ma():[],w=0===this.Pa.size&&this.current&&!a?1:0,C=w!==this.ha;return this.ha=w,0!==h.length||C?{snapshot:new ep(this.query,e.Ta,l,h,e.mutatedKeys,0===w,C,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:y}:{fa:y}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Lb,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=St(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});const t=[];return e.forEach(i=>{this.Pa.has(i)||t.push(new $b(i))}),this.Pa.forEach(i=>{e.has(i)||t.push(new VT(i))}),t}pa(e){this.la=e.hs,this.Pa=St();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return ep.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class hN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class LT{constructor(e){this.key=e,this.wa=!1}}class Gb{constructor(e,t,i,a,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Sa={},this.ba=new Ta(y=>xw(y),Lf),this.Da=new Map,this.Ca=new Set,this.va=new Jn(ot.comparator),this.Fa=new Map,this.Ma=new rT,this.xa={},this.Oa=new Map,this.Na=Md.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function fN(n,e){return np.apply(this,arguments)}function np(){return(np=(0,ve.A)(function*(n,e,t=!0){const i=Pm(n);let a;const l=i.ba.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.ya()):a=yield BT(i,e,t,!0),a})).apply(this,arguments)}function UT(n,e){return zb.apply(this,arguments)}function zb(){return(zb=(0,ve.A)(function*(n,e){const t=Pm(n);yield BT(t,e,!0,!1)})).apply(this,arguments)}function BT(n,e,t,i){return jT.apply(this,arguments)}function jT(){return(jT=(0,ve.A)(function*(n,e,t,i){const a=yield xd(n.localStore,es(e)),l=a.targetId,h=t?n.sharedClientState.addLocalQueryTarget(l):"not-current";let y;return i&&(y=yield Vv(n,e,l,"current"===h,a.resumeToken)),n.isPrimaryClient&&t&&Im(n.remoteStore,a),y})).apply(this,arguments)}function Vv(n,e,t,i,a){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,ve.A)(function*(n,e,t,i,a){n.Ba=(O,j,Y)=>{return(me=(0,ve.A)(function*(Ie,Ge,ft,qe){let vt=Ge.view.da(ft);vt.Xi&&(vt=yield _m(Ie.localStore,Ge.query,!1).then(({documents:G})=>Ge.view.da(G,vt)));const Xt=qe&&qe.targetChanges.get(Ge.targetId),hn=qe&&null!=qe.targetMismatches.get(Ge.targetId),ie=Ge.view.applyChanges(vt,Ie.isPrimaryClient,Xt,hn);return qT(Ie,Ge.targetId,ie.fa),ie.snapshot}),function Me(Ie,Ge,ft,qe){return me.apply(this,arguments)})(n,O,j,Y);var me};const l=yield _m(n.localStore,e,!0),h=new Hb(e,l.hs),y=h.da(l.documents),w=Dd.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,a),C=h.applyChanges(y,n.isPrimaryClient,w);qT(n,t,C.fa);const M=new hN(e,t,h);return n.ba.set(e,M),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),C.snapshot}),Ql.apply(this,arguments)}function pN(n,e,t){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,ve.A)(function*(n,e,t){const i=it(n),a=i.ba.get(e),l=i.Da.get(a.targetId);if(l.length>1)return i.Da.set(a.targetId,l.filter(h=>!Lf(h,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Od(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Fd(i.remoteStore,a.targetId),Bd(i,a.targetId)}).catch(Lu))):(Bd(i,a.targetId),yield Od(i.localStore,a.targetId,!0))})).apply(this,arguments)}function $T(n,e){return qb.apply(this,arguments)}function qb(){return(qb=(0,ve.A)(function*(n,e){const t=it(n),i=t.ba.get(e),a=t.Da.get(i.targetId);t.isPrimaryClient&&1===a.length&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Fd(t.remoteStore,i.targetId))})).apply(this,arguments)}function HT(){return(HT=(0,ve.A)(function*(n,e,t){const i=XT(n);try{const a=yield function(h,y){const w=it(h),C=ur.now(),M=y.reduce((Y,me)=>Y.add(me.key),St());let O,j;return w.persistence.runTransaction("Locally write mutations","readwrite",Y=>{let me=ds(),Me=St();return w.os.getEntries(Y,M).next(Ie=>{me=Ie,me.forEach((Ge,ft)=>{ft.isValidDocument()||(Me=Me.add(Ge))})}).next(()=>w.localDocuments.getOverlayedDocuments(Y,me)).next(Ie=>{O=Ie;const Ge=[];for(const ft of y){const qe=NM(ft,O.get(ft.key).overlayedDocument);null!=qe&&Ge.push(new Qu(ft.key,qe,o0(qe.value.mapValue),Ir.exists(!0)))}return w.mutationQueue.addMutationBatch(Y,C,Ge,y)}).next(Ie=>{j=Ie;const Ge=Ie.applyToLocalDocumentSet(O,Me);return w.documentOverlayCache.saveOverlays(Y,Ie.batchId,Ge)})}).then(()=>({batchId:j.batchId,changes:SM(O)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(h,y,w){let C=h.xa[h.currentUser.toKey()];C||(C=new Jn(on)),C=C.insert(y,w),h.xa[h.currentUser.toKey()]=C}(i,a.batchId,t),yield Xl(i,a.changes),yield Ju(i.remoteStore)}catch(a){const l=bm(a,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function Wb(n,e){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,ve.A)(function*(n,e){const t=it(n);try{const i=yield function vb(n,e){const t=it(n),i=e.snapshotVersion;let a=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.os.newChangeBuffer({trackRemovals:!0});a=t.ns;const y=[];e.targetChanges.forEach((M,O)=>{const j=a.get(O);if(!j)return;y.push(t.Qr.removeMatchingKeys(l,M.removedDocuments,O).next(()=>t.Qr.addMatchingKeys(l,M.addedDocuments,O)));let Y=j.withSequenceNumber(l.currentSequenceNumber);var Me,Ie,Ge;null!==e.targetMismatches.get(O)?Y=Y.withResumeToken(si.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):M.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(M.resumeToken,i)),a=a.insert(O,Y),Ie=Y,Ge=M,(0===(Me=j).resumeToken.approximateByteSize()||Ie.snapshotVersion.toMicroseconds()-Me.snapshotVersion.toMicroseconds()>=3e8||Ge.addedDocuments.size+Ge.modifiedDocuments.size+Ge.removedDocuments.size>0)&&y.push(t.Qr.updateTargetData(l,Y))});let w=ds(),C=St();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(l,M))}),y.push(aT(l,h,e.documentUpdates).next(M=>{w=M.cs,C=M.ls})),!i.isEqual(bt.min())){const M=t.Qr.getLastRemoteSnapshotVersion(l).next(O=>t.Qr.setTargetsMetadata(l,l.currentSequenceNumber,i));y.push(M)}return de.waitFor(y).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,w,C)).next(()=>w)}).then(l=>(t.ns=a,l))}(t.localStore,e);e.targetChanges.forEach((a,l)=>{const h=t.Fa.get(l);h&&(Ct(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.wa=!0:a.modifiedDocuments.size>0?Ct(h.wa):a.removedDocuments.size>0&&(Ct(h.wa),h.wa=!1))}),yield Xl(t,i,e)}catch(i){yield Lu(i)}})).apply(this,arguments)}function GT(n,e,t){const i=it(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.ba.forEach((l,h)=>{const y=h.view.j_(e);y.snapshot&&a.push(y.snapshot)}),function(h,y){const w=it(h);w.onlineState=y;let C=!1;w.queries.forEach((M,O)=>{for(const j of O.U_)j.j_(y)&&(C=!0)}),C&&OT(w)}(i.eventManager,e),a.length&&i.Sa.h_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function mN(n,e,t){return Bv.apply(this,arguments)}function Bv(){return(Bv=(0,ve.A)(function*(n,e,t){const i=it(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Fa.get(e),l=a&&a.key;if(l){let h=new Jn(ot.comparator);h=h.insert(l,Er.newNoDocument(l,bt.min()));const y=St().add(l),w=new tm(bt.min(),new Map,new Jn(on),h,y);yield Wb(i,w),i.va=i.va.remove(l),i.Fa.delete(e),zv(i)}else yield Od(i.localStore,e,!1).then(()=>Bd(i,e,t)).catch(Lu)})).apply(this,arguments)}function Kb(n,e){return zT.apply(this,arguments)}function zT(){return(zT=(0,ve.A)(function*(n,e){const t=it(n),i=e.batch.batchId;try{const a=yield function sT(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.os.newChangeBuffer({trackRemovals:!0});return function(y,w,C,M){const O=C.batch,j=O.keys();let Y=de.resolve();return j.forEach(me=>{Y=Y.next(()=>M.getEntry(w,me)).next(Me=>{const Ie=C.docVersions.get(me);Ct(null!==Ie),Me.version.compareTo(Ie)<0&&(O.applyToRemoteDocument(Me,C),Me.isValidDocument()&&(Me.setReadTime(C.commitVersion),M.addEntry(Me)))})}),Y.next(()=>y.mutationQueue.removeMutationBatch(w,O))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(y){let w=St();for(let C=0;C<y.mutationResults.length;++C)y.mutationResults[C].transformResults.length>0&&(w=w.add(y.batch.mutations[C].key));return w}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}(t.localStore,e);Gv(t,i,null),Hv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Xl(t,a)}catch(a){yield Lu(a)}})).apply(this,arguments)}function _N(n,e,t){return jv.apply(this,arguments)}function jv(){return(jv=(0,ve.A)(function*(n,e,t){const i=it(n);try{const a=yield function(h,y){const w=it(h);return w.persistence.runTransaction("Reject batch","readwrite-primary",C=>{let M;return w.mutationQueue.lookupMutationBatch(C,y).next(O=>(Ct(null!==O),M=O.keys(),w.mutationQueue.removeMutationBatch(C,O))).next(()=>w.mutationQueue.performConsistencyCheck(C)).next(()=>w.documentOverlayCache.removeOverlaysForBatchId(C,M,y)).next(()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(C,M)).next(()=>w.localDocuments.getDocuments(C,M))})}(i.localStore,e);Gv(i,e,t),Hv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Xl(i,a)}catch(a){yield Lu(a)}})).apply(this,arguments)}function $v(){return($v=(0,ve.A)(function*(n,e){const t=it(n);nu(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(h){const y=it(h);return y.persistence.runTransaction("Get highest unacknowledged batch id","readonly",w=>y.mutationQueue.getHighestUnacknowledgedBatchId(w))}(t.localStore);if(-1===i)return void e.resolve();const a=t.Oa.get(i)||[];a.push(e),t.Oa.set(i,a)}catch(i){const a=bm(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function Hv(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function Gv(n,e,t){const i=it(n);let a=i.xa[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.xa[i.currentUser.toKey()]=a}}function Bd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Da.get(e))n.ba.delete(i),t&&n.Sa.ka(i,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(i=>{n.Ma.containsKey(i)||Qb(n,i)})}function Qb(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Fd(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),zv(n))}function qT(n,e,t){for(const i of t)i instanceof VT?(n.Ma.addReference(i.key,e),BO(n,i)):i instanceof $b?(je("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,e),n.Ma.containsKey(i.key)||Qb(n,i.key)):gt()}function BO(n,e){const t=e.key,i=t.path.canonicalString();n.va.get(t)||n.Ca.has(i)||(je("SyncEngine","New document in limbo: "+t),n.Ca.add(i),zv(n))}function zv(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new ot(An.fromString(e)),i=n.Na.next();n.Fa.set(i,new LT(t)),n.va=n.va.insert(t,i),Im(n.remoteStore,new Yu(es(wa(t.path)),i,"TargetPurposeLimboResolution",eo.oe))}}function Xl(n,e,t){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,ve.A)(function*(n,e,t){const i=it(n),a=[],l=[],h=[];var y;i.ba.isEmpty()||(i.ba.forEach((y,w)=>{h.push(i.Ba(w,e,t).then(C=>{if((C||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){a.push(C);const M=Iv.Ki(w.targetId,C);l.push(M)}}))}),yield Promise.all(h),i.Sa.h_(a),yield(y=(0,ve.A)(function*(C,M){const O=it(C);try{yield O.persistence.runTransaction("notifyLocalViewChanges","readwrite",j=>de.forEach(M,Y=>de.forEach(Y.qi,me=>O.persistence.referenceDelegate.addReference(j,Y.targetId,me)).next(()=>de.forEach(Y.Qi,me=>O.persistence.referenceDelegate.removeReference(j,Y.targetId,me)))))}catch(j){if(!Nl(j))throw j;je("LocalStore","Failed to update sequence numbers: "+j)}for(const j of M){const Y=j.targetId;if(!j.fromCache){const me=O.ns.get(Y),Ie=me.withLastLimboFreeSnapshotVersion(me.snapshotVersion);O.ns=O.ns.insert(Y,Ie)}}}),function w(C,M){return y.apply(this,arguments)})(i.localStore,l))}),Xb.apply(this,arguments)}function jO(n,e){return Yb.apply(this,arguments)}function Yb(){return(Yb=(0,ve.A)(function*(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const i=yield yb(t.localStore,e);t.currentUser=e,(l=t).Oa.forEach(y=>{y.forEach(w=>{w.reject(new Ue(Ee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Oa.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Xl(t,i.us)}var l})).apply(this,arguments)}function $O(n,e){const t=it(n),i=t.Fa.get(e);if(i&&i.wa)return St().add(i.key);{let a=St();const l=t.Da.get(e);if(!l)return a;for(const h of l){const y=t.ba.get(h);a=a.unionWith(y.view.Ea)}return a}}function HO(n,e){return Jb.apply(this,arguments)}function Jb(){return(Jb=(0,ve.A)(function*(n,e){const t=it(n),i=yield _m(t.localStore,e.query,!0),a=e.view.pa(i);return t.isPrimaryClient&&qT(t,e.targetId,a.fa),a})).apply(this,arguments)}function GO(n,e){return qv.apply(this,arguments)}function qv(){return(qv=(0,ve.A)(function*(n,e){const t=it(n);return Ib(t.localStore,e).then(i=>Xl(t,i))})).apply(this,arguments)}function vN(n,e,t,i){return Wv.apply(this,arguments)}function Wv(){return(Wv=(0,ve.A)(function*(n,e,t,i){const a=it(n),l=yield function(y,w){const C=it(y),M=it(C.mutationQueue);return C.persistence.runTransaction("Lookup mutation documents","readonly",O=>M.vn(O,w).next(j=>j?C.localDocuments.getDocuments(O,j):de.resolve(null)))}(a.localStore,e);var w;null!==l?("pending"===t?yield Ju(a.remoteStore):"acknowledged"===t||"rejected"===t?(Gv(a,e,i||null),Hv(a,e),w=e,it(it(a.localStore).mutationQueue).Mn(w)):gt(),yield Xl(a,l)):je("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function jd(){return(jd=(0,ve.A)(function*(n,e){const t=it(n);if(Pm(t),XT(t),!0===e&&!0!==t.La){const i=t.sharedClientState.getAllActiveQueryTargets(),a=yield Rm(t,i.toArray());t.La=!0,yield kv(t.remoteStore,!0);for(const l of a)Im(t.remoteStore,l)}else if(!1===e&&!1!==t.La){const i=[];let a=Promise.resolve();t.Da.forEach((l,h)=>{t.sharedClientState.isLocalQueryTarget(h)?i.push(h):a=a.then(()=>(Bd(t,h),Od(t.localStore,h,!0))),Fd(t.remoteStore,h)}),yield a,yield Rm(t,i),function(h){const y=it(h);y.Fa.forEach((w,C)=>{Fd(y.remoteStore,C)}),y.Ma.mr(),y.Fa=new Map,y.va=new Jn(ot.comparator)}(t),t.La=!1,yield kv(t.remoteStore,!1)}})).apply(this,arguments)}function Rm(n,e,t){return WT.apply(this,arguments)}function WT(){return(WT=(0,ve.A)(function*(n,e,t){const i=it(n),a=[],l=[];for(const h of e){let y;const w=i.Da.get(h);if(w&&0!==w.length){y=yield xd(i.localStore,es(w[0]));for(const C of w){const M=i.ba.get(C),O=yield HO(i,M);O.snapshot&&l.push(O.snapshot)}}else{const C=yield uT(i.localStore,h);y=yield xd(i.localStore,C),yield Vv(i,Zb(C),h,!1,y.resumeToken)}a.push(y)}return i.Sa.h_(l),a})).apply(this,arguments)}function Zb(n){return _d(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function IN(n){return t=it(n).localStore,it(it(t).persistence).Bi();var t}function wN(n,e,t,i){return KT.apply(this,arguments)}function KT(){return(KT=(0,ve.A)(function*(n,e,t,i){const a=it(n);if(a.La)return void je("SyncEngine","Ignoring unexpected query state notification.");const l=a.Da.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const h=yield Ib(a.localStore,Wu(l[0])),y=tm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,si.EMPTY_BYTE_STRING);yield Xl(a,h,y);break}case"rejected":yield Od(a.localStore,e,!0),Bd(a,e,i);break;default:gt()}})).apply(this,arguments)}function TN(n,e,t){return QT.apply(this,arguments)}function QT(){return(QT=(0,ve.A)(function*(n,e,t){const i=Pm(n);if(i.La){for(const a of e){if(i.Da.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){je("SyncEngine","Adding an already active target "+a);continue}const l=yield uT(i.localStore,a),h=yield xd(i.localStore,l);yield Vv(i,Zb(l),h.targetId,!1,h.resumeToken),Im(i.remoteStore,h)}for(const a of t)i.Da.has(a)&&(yield Od(i.localStore,a,!1).then(()=>{Fd(i.remoteStore,a),Bd(i,a)}).catch(Lu))}})).apply(this,arguments)}function Pm(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$O.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mN.bind(null,e),e.Sa.h_=ws.bind(null,e.eventManager),e.Sa.ka=tp.bind(null,e.eventManager),e}function XT(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Kb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_N.bind(null,e),e}class rp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.A)(function*(){t.serializer=Jf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return _b(this.persistence,new iT,e.initialUser,this.serializer)}createPersistence(e){return new _v(yv.Hr,this.serializer)}createSharedClientState(e){return new Db}terminate(){var e=this;return(0,ve.A)(function*(){var t,i;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(i=e.indexBackfillerScheduler)||void 0===i||i.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YT extends rp{constructor(e,t,i){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ve.A)(function*(){yield t().call(i,e),yield i.Qa.initialize(i,e),yield XT(i.Qa.syncEngine),yield Ju(i.Qa.remoteStore),yield i.persistence.fi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return _b(this.persistence,new iT,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new ob(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new _w(t,this.persistence);return new KC(e.asyncQueue,i)}createPersistence(e){const t=Ev(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?hs.withCacheSize(this.cacheSizeBytes):hs.DEFAULT;return new vv(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,_T(),Em(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Db}}class eS extends YT{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ve.A)(function*(){yield t().call(i,e);const a=i.Qa.syncEngine;i.sharedClientState instanceof gT&&(i.sharedClientState.syncEngine={Zs:vN.bind(null,a),Xs:wN.bind(null,a),eo:TN.bind(null,a),Bi:IN.bind(null,a),Ys:GO.bind(null,a)},yield i.sharedClientState.start()),yield i.persistence.fi(function(){var l=(0,ve.A)(function*(h){yield function EN(n,e){return jd.apply(this,arguments)}(i.Qa.syncEngine,h),i.gcScheduler&&(h&&!i.gcScheduler.started?i.gcScheduler.start():h||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(h&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():h||i.indexBackfillerScheduler.stop())});return function(h){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=_T();if(!gT.D(t))throw new Ue(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ev(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gT(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class ip{initialize(e,t){var i=this;return(0,ve.A)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>GT(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=jO.bind(null,i.syncEngine),yield kv(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new cN}createDatastore(e){const t=Jf(e.databaseInfo.databaseId),i=new Sb(e.databaseInfo);return new Sv(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return i=this.localStore,a=this.datastore,l=e.asyncQueue,h=t=>GT(this.syncEngine,t,0),y=mT.D()?new mT:new nN,new Pb(i,a,l,h,y);var i,a,l,h,y}createSyncEngine(e,t){return function(a,l,h,y,w,C,M){const O=new Gb(a,l,h,y,w,C);return M&&(O.La=!0),O}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ve.A)(function*(){var t,i;yield(i=(0,ve.A)(function*(l){const h=it(l);je("RemoteStore","RemoteStore shutting down."),h.M_.add(5),yield kd(h),h.O_.shutdown(),h.N_.set("Unknown")}),function a(l){return i.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function tS(n,e=10240){let t=0;return{read:()=>(0,ve.A)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ve.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Kv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class CN{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Ui,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ve.A)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ve.A)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ve.A)(function*(){const t=yield e.za();if(null===t)return null;const i=e.Wa.decode(t),a=Number(i);isNaN(a)&&e.ja(`length string (${i}) is not valid number`);const l=yield e.Ha(a);return new Sm(JSON.parse(l),t.length+a)})()}Ja(){return this.buffer.findIndex(e=>123===e)}za(){var e=this;return(0,ve.A)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Ha(e){var t=this;return(0,ve.A)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const i=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ve.A)(function*(){const t=yield e.Ua.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class bN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Ue(Ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const i=yield(a=(0,ve.A)(function*(h,y){const w=it(h),C={documents:y.map(Y=>$l(w.serializer,Y))},M=yield w.xo("BatchGetDocuments",w.serializer.databaseId,An.emptyPath(),C,y.length),O=new Map;M.forEach(Y=>{const me=function V0(n,e){return"found"in e?function(i,a){Ct(!!a.found);const l=Uo(i,a.found.name),h=ai(a.found.updateTime),y=a.found.createTime?ai(a.found.createTime):bt.min(),w=new Zi({mapValue:{fields:a.found.fields}});return Er.newFoundDocument(l,h,y,w)}(n,e):"missing"in e?function(i,a){Ct(!!a.missing),Ct(!!a.readTime);const l=Uo(i,a.missing),h=ai(a.readTime);return Er.newNoDocument(l,h)}(n,e):gt()}(w.serializer,Y);O.set(me.key.toString(),me)});const j=[];return y.forEach(Y=>{const me=O.get(Y.toString());Ct(!!me),j.push(me)}),j}),function l(h,y){return a.apply(this,arguments)})(t.datastore,e);var a;return i.forEach(a=>t.recordVersion(a)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ad(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,a)=>{const l=ot.fromPath(a);e.mutations.push(new Fw(l,e.precondition(l)))}),yield(i=(0,ve.A)(function*(l,h){const y=it(l),w={writes:h.map(C=>om(y.serializer,C))};yield y.Co("Commit",y.serializer.databaseId,An.emptyPath(),w)}),function a(l,h){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=bt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Ue(Ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?Ir.exists(!1):Ir.updateTime(t):Ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Ue(Ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ir.updateTime(t)}return Ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class SN{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.Za=i.maxAttempts,this.Yo=new bv(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ve.A)(function*(){const t=new bN(e.datastore),i=e.tu(t);i&&i.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.nu(l)}))}).catch(a=>{e.nu(a)})}))}tu(e){try{const t=this.updateFunction(e);return!xl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!b0(t)}return!1}}class RN{constructor(e,t,i,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Ji.UNAUTHENTICATED,this.clientId=gM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var h=(0,ve.A)(function*(y){je("FirestoreClient","Received user=",y.uid),yield l.authCredentialListener(y),l.user=y});return function(y){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(i,h=>(je("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=bm(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Mm(n,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,ve.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,ve.A)(function*(l){i.isEqual(l)||(yield yb(e.localStore,l),i=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Nm.apply(this,arguments)}function JT(n,e){return ZT.apply(this,arguments)}function ZT(){return(ZT=(0,ve.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield tA(n);je("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>PT(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>PT(e.remoteStore,a)),n._onlineComponents=e})).apply(this,arguments)}function eA(n){return"FirebaseError"===n.name?n.code===Ee.FAILED_PRECONDITION||n.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function tA(n){return Qv.apply(this,arguments)}function Qv(){return(Qv=(0,ve.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Mm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!eA(t))throw t;Js("Error using user provided cache. Falling back to memory cache: "+t),yield Mm(n,new rp)}}else je("FirestoreClient","Using default OfflineComponentProvider"),yield Mm(n,new rp);return n._offlineComponents})).apply(this,arguments)}function nA(n){return rA.apply(this,arguments)}function rA(){return(rA=(0,ve.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je("FirestoreClient","Using user provided OnlineComponentProvider"),yield JT(n,n._uninitializedComponentsProvider._online)):(je("FirestoreClient","Using default OnlineComponentProvider"),yield JT(n,new ip))),n._onlineComponents})).apply(this,arguments)}function iA(n){return tA(n).then(e=>e.persistence)}function $d(n){return tA(n).then(e=>e.localStore)}function nS(n){return nA(n).then(e=>e.remoteStore)}function Xv(n){return nA(n).then(e=>e.syncEngine)}function Yl(n){return xm.apply(this,arguments)}function xm(){return(xm=(0,ve.A)(function*(n){const e=yield nA(n),t=e.eventManager;return t.onListen=fN.bind(null,e.syncEngine),t.onUnlisten=pN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UT.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$T.bind(null,e.syncEngine),t})).apply(this,arguments)}function Yv(n,e,t={}){const i=new Ui;return n.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return function(l,h,y,w,C){const M=new Kv({next:j=>{h.enqueueAndForget(()=>NT(l,O));const Y=j.docs.has(y);!Y&&j.fromCache?C.reject(new Ue(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):Y&&j.fromCache&&w&&"server"===w.source?C.reject(new Ue(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):C.resolve(j)},error:j=>C.reject(j)}),O=new Ub(wa(y.path),M,{includeMetadataChanges:!0,ra:!0});return Ud(l,O)}(yield Yl(n),n.asyncQueue,e,t,i)})),i.promise}function oA(n,e,t={}){const i=new Ui;return n.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return function(l,h,y,w,C){const M=new Kv({next:j=>{h.enqueueAndForget(()=>NT(l,O)),j.fromCache&&"server"===w.source?C.reject(new Ue(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):C.resolve(j)},error:j=>C.reject(j)}),O=new Ub(y,M,{includeMetadataChanges:!0,ra:!0});return Ud(l,O)}(yield Yl(n),n.asyncQueue,e,t,i)})),i.promise}function uS(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const lS=new Map;function Om(n,e,t){if(!t)throw new Ue(Ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cS(n,e,t,i){if(!0===e&&!0===i)throw new Ue(Ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dS(n){if(!ot.isDocumentKey(n))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hS(n){if(ot.isDocumentKey(n))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(i=n).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof n?"a function":gt()}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eE(n);throw new Ue(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fS(n,e){if(e<=0)throw new Ue(Ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class aA{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=uS(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(l){if(void 0!==l.timeoutSeconds){if(isNaN(l.timeoutSeconds))throw new Ue(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ue(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ue(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class km{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aA(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new RO;switch(i.type){case"firstParty":return new Ug(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ue(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=lS.get(t);i&&(je("ComponentProvider","Removing Datastore"),lS.delete(t),i.terminate())}(this),Promise.resolve()}}class $i{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class wr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class ru extends $i{constructor(e,t,i){super(e,t,wa(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new ot(e))}withConverter(e){return new ru(this.firestore,e,this._path)}}function uA(n,e,...t){if(n=(0,jn.Ku)(n),Om("collection","path",e),n instanceof km){const i=An.fromString(e,...t);return hS(i),new ru(n,null,i)}{if(!(n instanceof wr||n instanceof ru))throw new Ue(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(An.fromString(e,...t));return hS(i),new ru(n.firestore,null,i)}}function tE(n,e,...t){if(n=(0,jn.Ku)(n),1===arguments.length&&(e=gM.newId()),Om("doc","path",e),n instanceof km){const i=An.fromString(e,...t);return dS(i),new wr(n,null,new ot(i))}{if(!(n instanceof wr||n instanceof ru))throw new Ue(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(An.fromString(e,...t));return dS(i),new wr(n.firestore,n instanceof ru?n.converter:null,new ot(i))}}function Fm(n,e){return n=(0,jn.Ku)(n),e=(0,jn.Ku)(e),(n instanceof wr||n instanceof ru)&&(e instanceof wr||e instanceof ru)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lA(n,e){return n=(0,jn.Ku)(n),e=(0,jn.Ku)(e),n instanceof $i&&e instanceof $i&&n.firestore===e.firestore&&Lf(n._query,e._query)&&n.converter===e.converter}class WO{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new bv(this,"async_queue_retry"),this.hu=()=>{const t=Em();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=Em();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Em();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Ui;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ve.A)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!Nl(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(i=>{throw this.au=i,this.uu=!1,gi("INTERNAL UNHANDLED ERROR: ",function(h){let y=h.message||"";return h.stack&&(y=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),y}(i)),i}).then(i=>(this.uu=!1,i))));return this.iu=t,t}enqueueAfterDelay(e,t,i){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const a=Vb.createAndSchedule(this,e,t,i,l=>this.Eu(l));return this._u.push(a),a}Pu(){this.au&&gt()}verifyOperationInProgress(){}du(){var e=this;return(0,ve.A)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function pS(n){return function(t,i){if("object"!=typeof t||null===t)return!1;const a=t;for(const l of["next","error","complete"])if(l in a&&"function"==typeof a[l])return!0;return!1}(n)}class xN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class er extends km{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new WO,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||dA(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||dA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function dA(n){var e,t,i;const a=n._freezeSettings(),l=(w=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Iw(n._databaseId,w,n._persistenceKey,(M=a).host,M.ssl,M.experimentalForceLongPolling,M.experimentalAutoDetectLongPolling,uS(M.experimentalLongPollingOptions),M.useFetchStreams));var w,M;n._firestoreClient=new RN(n._authCredentials,n._appCheckCredentials,n._queue,l),null!==(t=a.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=a.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.localCache.kind,_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider})}function nE(n,e,t){const i=new Ui;return n.asyncQueue.enqueue((0,ve.A)(function*(){try{yield Mm(n,t),yield JT(n,e),i.resolve()}catch(a){const l=a;if(!eA(l))throw l;Js("Error enabling indexeddb cache. Falling back to memory cache: "+l),i.reject(l)}})).then(()=>i.promise)}function hA(n){if(n._initialized||n._terminated)throw new Ue(Ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iu(si.fromBase64String(e))}catch(t){throw new Ue(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new iu(si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class op{constructor(e){this._methodName=e}}class fA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return on(this._lat,e._lat)||on(this._long,e._long)}}const YO=/^__.*__$/;class _S{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Qu(e,this.data,this.fieldMask,t,this.fieldTransforms):new $f(e,this.data,t,this.fieldTransforms)}}class Vm{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Qu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class rE{constructor(e,t,i,a,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,void 0===l&&this.mu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new rE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.gu({path:i,yu:!1});return a.wu(e),a}Su(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.gu({path:i,yu:!1});return a.mu(),a}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Hm(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(yS(this.fu)&&YO.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class vS{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Jf(e)}Fu(e,t,i,a=!1){return new rE({fu:e,methodName:t,vu:i,path:hr.emptyPath(),yu:!1,Cu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function io(n){const e=n._freezeSettings(),t=Jf(n._databaseId);return new vS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Lm(n,e,t,i,a,l={}){const h=n.Fu(l.merge||l.mergeFields?2:0,e,t,a);gA("Data must be an object, but it was:",h,i);const y=wS(i,h);let w,C;if(l.merge)w=new fr(h.fieldMask),C=h.fieldTransforms;else if(l.mergeFields){const M=[];for(const O of l.mergeFields){const j=jm(e,O,t);if(!h.contains(j))throw new Ue(Ee.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);DS(M,j)||M.push(j)}w=new fr(M),C=h.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,C=h.fieldTransforms;return new _S(new Zi(y),w,C)}class Gd extends op{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gd}}function iE(n,e,t){return new rE({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class pA extends op{_toFieldTransform(e){return new Td(e.path,new Bf)}isEqual(e){return e instanceof pA}}class Um extends op{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=iE(this,e,!0),i=this.Mu.map(l=>ec(l,t)),a=new Ul(i);return new Td(e.path,a)}isEqual(e){return e instanceof Um&&(0,jn.bD)(this.Mu,e.Mu)}}class Bm extends op{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=iE(this,e,!0),i=this.Mu.map(l=>ec(l,t)),a=new Bl(i);return new Td(e.path,a)}isEqual(e){return e instanceof Bm&&(0,jn.bD)(this.Mu,e.Mu)}}class ap extends op{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new jl(e.serializer,E0(e.serializer,this.xu));return new Td(e.path,t)}isEqual(e){return e instanceof ap&&this.xu===e.xu}}function ES(n,e,t,i){const a=n.Fu(1,e,t);gA("Data must be an object, but it was:",a,i);const l=[],h=Zi.empty();ju(i,(w,C)=>{const M=$m(e,w,t);C=(0,jn.Ku)(C);const O=a.Su(M);if(C instanceof Gd)l.push(M);else{const j=ec(C,O);null!=j&&(l.push(M),h.set(M,j))}});const y=new fr(l);return new Vm(h,y,a.fieldTransforms)}function IS(n,e,t,i,a,l){const h=n.Fu(1,e,t),y=[jm(e,i,t)],w=[a];if(l.length%2!=0)throw new Ue(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<l.length;j+=2)y.push(jm(e,l[j])),w.push(l[j+1]);const C=[],M=Zi.empty();for(let j=y.length-1;j>=0;--j)if(!DS(C,y[j])){const Y=y[j];let me=w[j];me=(0,jn.Ku)(me);const Me=h.Su(Y);if(me instanceof Gd)C.push(Y);else{const Ie=ec(me,Me);null!=Ie&&(C.push(Y),M.set(Y,Ie))}}const O=new fr(C);return new Vm(M,O,h.fieldTransforms)}function UN(n,e,t,i=!1){return ec(t,n.Fu(i?4:3,e))}function ec(n,e){if(TS(n=(0,jn.Ku)(n)))return gA("Unsupported field value:",e,n),wS(n,e);if(n instanceof op)return function(i,a){if(!yS(a.fu))throw a.Du(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Du(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(i,a){const l=[];let h=0;for(const y of i){let w=ec(y,a.bu(h));null==w&&(w={nullValue:"NULL_VALUE"}),l.push(w),h++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if(null===(i=(0,jn.Ku)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return E0(a.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const l=ur.fromDate(i);return{timestampValue:Gf(a.serializer,l)}}if(i instanceof ur){const l=new ur(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gf(a.serializer,l)}}if(i instanceof fA)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof iu)return{bytesValue:sv(a.serializer,i._byteString)};if(i instanceof wr){const l=a.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw a.Du(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:nm(i.firestore._databaseId||a.databaseId,i._key.path)}}throw a.Du(`Unsupported field value: ${eE(i)}`)}(n,e)}function wS(n,e){const t={};return Ew(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ju(n,(i,a)=>{const l=ec(a,e.pu(i));null!=l&&(t[i]=l)}),{mapValue:{fields:t}}}function TS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ur||n instanceof fA||n instanceof iu||n instanceof wr||n instanceof op)}function gA(n,e,t){if(!TS(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const i=eE(t);throw e.Du("an object"===i?n+" a custom object":n+" "+i)}var a}function jm(n,e,t){if((e=(0,jn.Ku)(e))instanceof Zl)return e._internalPath;if("string"==typeof e)return $m(n,e);throw Hm("Field path arguments must be of type string or ",n,!1,void 0,t)}const AS=new RegExp("[~\\*/\\[\\]]");function $m(n,e,t){if(e.search(AS)>=0)throw Hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zl(...e.split("."))._internalPath}catch{throw Hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hm(n,e,t,i,a){const l=i&&!i.isEmpty(),h=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let w="";return(l||h)&&(w+=" (found",l&&(w+=` in field ${i}`),h&&(w+=` in document ${a}`),w+=")"),new Ue(Ee.INVALID_ARGUMENT,y+n+w)}function DS(n,e){return n.some(t=>t.isEqual(e))}class Gm{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new CS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(up("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class CS extends Gm{data(){return super.data()}}function up(n,e){return"string"==typeof e?$m(n,e):e instanceof Zl?e._internalPath:e._delegate._internalPath}function BN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sE{}class zd extends sE{}function tc(n,e,...t){let i=[];e instanceof sE&&i.push(e),i=i.concat(t),function(l){const h=l.filter(w=>w instanceof qm).length,y=l.filter(w=>w instanceof zm).length;if(h>1||h>0&&y>0)throw new Ue(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class zm extends zd{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new zm(e,t,i)}_apply(e){const t=this._parse(e);return EA(e._query,t),new $i(e.firestore,e.converter,Xy(e._query,t))}_parse(e){const t=io(e.firestore);return function(l,h,y,w,C,M,O){let j;if(C.isKeyField()){if("array-contains"===M||"array-contains-any"===M)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${M}' queries on documentId().`);if("in"===M||"not-in"===M){vA(O,M);const Y=[];for(const me of O)Y.push(yA(w,l,me));j={arrayValue:{values:Y}}}else j=yA(w,l,O)}else"in"!==M&&"not-in"!==M&&"array-contains-any"!==M||vA(O,M),j=UN(y,"where",O,"in"===M||"not-in"===M);return Cn.create(C,M,j)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class qm extends sE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qm(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Zn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,l){let h=a;const y=l.getFlattenedFilters();for(const w of y)EA(h,w),h=Xy(h,w)}(e._query,t),new $i(e.firestore,e.converter,Xy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bS extends zd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bS(e,t)}_apply(e){const t=function(a,l,h){if(null!==a.startAt)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kg(l,h)}(e._query,this._field,this._direction);return new $i(e.firestore,e.converter,function(a,l){const h=a.explicitOrderBy.concat([l]);return new Vs(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class nc extends zd{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new nc(e,t,i)}_apply(e){return new $i(e.firestore,e.converter,Xg(e._query,this._limit,this._limitType))}}class Wm extends zd{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Wm(e,t,i)}_apply(e){const t=SS(e,this.type,this._docOrFields,this._inclusive);return new $i(e.firestore,e.converter,(l=t,new Vs((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)));var a,l}}class mA extends zd{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new mA(e,t,i)}_apply(e){const t=SS(e,this.type,this._docOrFields,this._inclusive);return new $i(e.firestore,e.converter,(l=t,new Vs((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)));var a,l}}function SS(n,e,t,i){if(t[0]=(0,jn.Ku)(t[0]),t[0]instanceof Gm)return function(l,h,y,w,C){if(!w)throw new Ue(Ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${y}().`);const M=[];for(const O of vd(l))if(O.field.isKeyField())M.push(Fo(h,w.key));else{const j=w.data.field(O.field);if(Gy(j))throw new Ue(Ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+O.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===j){const Y=O.field.canonicalString();throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Y}' (used as the orderBy) does not exist.`)}M.push(j)}return new Fl(M,C)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=io(n.firestore);return function(h,y,w,C,M,O){const j=h.explicitOrderBy;if(M.length>j.length)throw new Ue(Ee.INVALID_ARGUMENT,`Too many arguments provided to ${C}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Y=[];for(let me=0;me<M.length;me++){const Me=M[me];if(j[me].field.isKeyField()){if("string"!=typeof Me)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${C}(), but got a ${typeof Me}`);if(!Vl(h)&&-1!==Me.indexOf("/"))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${C}() must be a plain document ID, but '${Me}' contains a slash.`);const Ie=h.path.child(An.fromString(Me));if(!ot.isDocumentKey(Ie))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${C}() must result in a valid document path, but '${Ie}' is not because it contains an odd number of segments.`);const Ge=new ot(Ie);Y.push(Fo(y,Ge))}else{const Ie=UN(w,C,Me);Y.push(Ie)}}return new Fl(Y,O)}(n._query,n.firestore._databaseId,a,e,t,i)}}function yA(n,e,t){if("string"==typeof(t=(0,jn.Ku)(t))){if(""===t)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vl(e)&&-1!==t.indexOf("/"))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(An.fromString(t));if(!ot.isDocumentKey(i))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Fo(n,new ot(i))}if(t instanceof wr)return Fo(n,t._key);throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eE(t)}.`)}function vA(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EA(n,e){const t=function(a,l){for(const h of a)for(const y of h.getFlattenedFilters())if(l.indexOf(y.op)>=0)return y.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ue(Ee.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class wA{convertValue(e,t="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ju(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertGeoPoint(e){return new fA(Kr(e.latitude),Kr(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=cd(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(dd(e));default:return null}}convertTimestamp(e){const t=Za(e);return new ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=An.fromString(e);Ct(j0(i));const a=new to(i.get(1),i.get(3)),l=new ot(i.popFirst(5));return a.isEqual(t)||gi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function uE(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class RS extends wA{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}class rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ic extends Gm{constructor(e,t,i,a,l,h){super(e,t,i,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(up("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class dE extends ic{data(e={}){return super.data(e)}}class qd{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new rc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new dE(this._firestore,this._userDataWriter,i.key,i,new rc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(y=>({type:"added",doc:new dE(a._firestore,a._userDataWriter,y.doc.key,y.doc,new rc(a._snapshot.mutatedKeys.has(y.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:h++}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(y=>l||3!==y.type).map(y=>{const w=new dE(a._firestore,a._userDataWriter,y.doc.key,y.doc,new rc(a._snapshot.mutatedKeys.has(y.doc.key),a._snapshot.fromCache),a.query.converter);let C=-1,M=-1;return 0!==y.type&&(C=h.indexOf(y.doc.key),h=h.delete(y.doc.key)),1!==y.type&&(h=h.add(y.doc),M=h.indexOf(y.doc.key)),{type:HN(y.type),doc:w,oldIndex:C,newIndex:M}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function PS(n,e){return n instanceof ic&&e instanceof ic?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof qd&&e instanceof qd&&n._firestore===e._firestore&&lA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Zu extends wA{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}function GN(n,e,t){n=wn(n,wr);const i=wn(n.firestore,er),a=uE(n.converter,e,t);return Wd(i,[Lm(io(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Ir.none())])}function NS(n,e,t,...i){n=wn(n,wr);const a=wn(n.firestore,er),l=io(a);let h;return h="string"==typeof(e=(0,jn.Ku)(e))||e instanceof Zl?IS(l,"updateDoc",n._key,e,t,i):ES(l,"updateDoc",n._key,e),Wd(a,[h.toMutation(n._key,Ir.exists(!0))])}function xS(n,...e){var t,i,a;n=(0,jn.Ku)(n);let l={includeMetadataChanges:!1,source:"default"},h=0;"object"!=typeof e[h]||pS(e[h])||(l=e[h],h++);const y={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(pS(e[h])){const O=e[h];e[h]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[h+1]=null===(i=O.error)||void 0===i?void 0:i.bind(O),e[h+2]=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}let w,C,M;if(n instanceof wr)C=wn(n.firestore,er),M=wa(n._key.path),w={next:O=>{e[h]&&e[h](AA(C,n,O))},error:e[h+1],complete:e[h+2]};else{const O=wn(n,$i);C=wn(O.firestore,er),M=O._query;const j=new Zu(C);w={next:Y=>{e[h]&&e[h](new qd(C,j,O,Y))},error:e[h+1],complete:e[h+2]},BN(n._query)}return function(j,Y,me,Me){const Ie=new Kv(Me),Ge=new Ub(Y,Ie,me);return j.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return Ud(yield Yl(j),Ge)})),()=>{Ie.$a(),j.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return NT(yield Yl(j),Ge)}))}}(Or(C),M,y,w)}function Wd(n,e){return function(i,a){const l=new Ui;return i.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return function gN(n,e,t){return HT.apply(this,arguments)}(yield Xv(i),a,l)})),l.promise}(Or(n),e)}function AA(n,e,t){const i=t.docs.get(e._key),a=new Zu(n);return new ic(n,a,e._key,i,new rc(t.hasPendingWrites,t.fromCache),e.converter)}const pk={maxAttempts:5};class VS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=io(e)}set(e,t,i){this._verifyNotCommitted();const a=Kd(e,this._firestore),l=uE(a.converter,t,i),h=Lm(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,i);return this._mutations.push(h.toMutation(a._key,Ir.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Kd(e,this._firestore);let h;return h="string"==typeof(t=(0,jn.Ku)(t))||t instanceof Zl?IS(this._dataReader,"WriteBatch.update",l._key,t,i,a):ES(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,Ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Kd(e,this._firestore);return this._mutations=this._mutations.concat(new Ad(t._key,Ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kd(n,e){if((n=(0,jn.Ku)(n)).firestore!==e)throw new Ue(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gk extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=io(t)}get(t){const i=Kd(t,this._firestore),a=new RS(this._firestore);return this._transaction.lookup([i._key]).then(l=>{if(!l||1!==l.length)return gt();const h=l[0];if(h.isFoundDocument())return new Gm(this._firestore,a,h.key,h,i.converter);if(h.isNoDocument())return new Gm(this._firestore,a,i._key,null,i.converter);throw gt()})}set(t,i,a){const l=Kd(t,this._firestore),h=uE(l.converter,i,a),y=Lm(this._dataReader,"Transaction.set",l._key,h,null!==l.converter,a);return this._transaction.set(l._key,y),this}update(t,i,a,...l){const h=Kd(t,this._firestore);let y;return y="string"==typeof(i=(0,jn.Ku)(i))||i instanceof Zl?IS(this._dataReader,"Transaction.update",h._key,i,a,l):ES(this._dataReader,"Transaction.update",h._key,i),this._transaction.update(h._key,y),this}delete(t){const i=Kd(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Kd(e,this._firestore),i=new Zu(this._firestore);return super.get(e).then(a=>new ic(this._firestore,i,t._key,a._document,new rc(!1,!1),t.converter))}}function jS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rx(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function ix(){if(!function wM(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Vg=vr.SDK_VERSION,(0,vr._registerComponent)(new ow.uA("firestore",(i,{instanceIdentifier:a,options:l})=>{const h=i.getProvider("app").getImmediate(),y=new er(new hM(i.getProvider("auth-internal")),new MO(i.getProvider("app-check-internal")),function(C,M){if(!Object.prototype.hasOwnProperty.apply(C.options,["projectId"]))throw new Ue(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new to(C.options.projectId,M)}(h,a),h);return l=Object.assign({useFetchStreams:t},l),y._setSettings(l),y},"PUBLIC").setMultipleInstances(!0)),(0,vr.registerVersion)(jC,"4.6.2",e),(0,vr.registerVersion)(jC,"4.6.2","esm2017")}();class fE{constructor(e){this._delegate=e}static fromBase64String(e){return ix(),new fE(iu.fromBase64String(e))}static fromUint8Array(e){return rx(),new fE(iu.fromUint8Array(e))}toBase64(){return ix(),this._delegate.toBase64()}toUint8Array(){return rx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function PA(n){return function wk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class Tk{enableIndexedDbPersistence(e,t){return function gS(n,e){hA(n=wn(n,er));const t=Or(n);if(t._uninitializedComponentsProvider)throw new Ue(Ee.FAILED_PRECONDITION,"SDK cache is already specified.");Js("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),a=new ip;return nE(t,a,new YT(a,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function kN(n){hA(n=wn(n,er));const e=Or(n);if(e._uninitializedComponentsProvider)throw new Ue(Ee.FAILED_PRECONDITION,"SDK cache is already specified.");Js("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new ip;return nE(e,i,new eS(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function KO(n){if(n._initialized&&!n._terminated)throw new Ue(Ee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ui;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.A)(function*(){try{yield(t=(0,ve.A)(function*(a){if(!Ia.D())return Promise.resolve();const l=a+"main";yield Ia.delete(l)}),function i(a){return t.apply(this,arguments)})(Ev(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class sx{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof to||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Js("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function MN(n,e,t,i={}){var a;const l=(n=wn(n,km))._getSettings(),h=`${e}:${t}`;if("firestore.googleapis.com"!==l.host&&l.host!==h&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let y,w;if("string"==typeof i.mockUserToken)y=i.mockUserToken,w=Ji.MOCK_USER;else{y=(0,jn.Fy)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new Ue(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ji(C)}n._authCredentials=new PO(new dM(y,w))}}(this._delegate,e,t,i)}enableNetwork(){return function mS(n){return function iS(n){return n.asyncQueue.enqueue((0,ve.A)(function*(){const e=yield iA(n),t=yield nS(n);return e.setNetworkEnabled(!0),function(a){const l=it(a);return l.M_.delete(0),Zf(l)}(t)}))}(Or(n=wn(n,er)))}(this._delegate)}disableNetwork(){return function VN(n){return function sS(n){return n.asyncQueue.enqueue((0,ve.A)(function*(){const e=yield iA(n),t=yield nS(n);return e.setNetworkEnabled(!1),(i=(0,ve.A)(function*(l){const h=it(l);h.M_.add(0),yield kd(h),h.N_.set("Offline")}),function a(l){return i.apply(this,arguments)})(t);var i}))}(Or(n=wn(n,er)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,cS("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function FN(n){return function(t){const i=new Ui;return t.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return function yN(n,e){return $v.apply(this,arguments)}(yield Xv(t),i)})),i.promise}(Or(n=wn(n,er)))}(this._delegate)}onSnapshotsInSync(e){return function lk(n,e){return function qO(n,e){const t=new Kv(e);return n.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return a=yield Yl(n),l=t,it(a).z_.add(l),void l.next();var a,l})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return a=yield Yl(n),l=t,void it(a).z_.delete(l);var a,l}))}}(Or(n=wn(n,er)),pS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new u(this,uA(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new $o(this,tE(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new r(this,function NN(n,e){if(n=wn(n,km),Om("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $i(n,null,(i=e,new Vs(An.emptyPath(),i)));var i}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function XN(n,e,t){n=wn(n,er);const i=Object.assign(Object.assign({},pk),t);return function(l){if(l.maxAttempts<1)throw new Ue(Ee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(l,h,y){const w=new Ui;return l.asyncQueue.enqueueAndForget((0,ve.A)(function*(){const C=yield function rS(n){return nA(n).then(e=>e.datastore)}(l);new SN(l.asyncQueue,C,y,h,w).Xa()})),w.promise}(Or(n),a=>e(new gk(n,a)),i)}(this._delegate,t=>e(new $S(this,t)))}batch(){return Or(this._delegate),new HS(new VS(this._delegate,e=>Wd(this._delegate,e)))}loadBundle(e){return function QO(n,e){const t=Or(n=wn(n,er)),i=new xN;return function oS(n,e,t,i){const a=function(h,y){let w;return w="string"==typeof h?R0().encode(h):h,M=function(M,O){if(M instanceof Uint8Array)return tS(M,O);if(M instanceof ArrayBuffer)return tS(new Uint8Array(M),O);if(M instanceof ReadableStream)return M.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(w),new CN(M,y);var M}(t,Jf(e));n.asyncQueue.enqueueAndForget((0,ve.A)(function*(){!function AN(n,e,t){const i=it(n);var a;(a=(0,ve.A)(function*(h,y,w){try{const C=yield y.getMetadata();if(yield function(me,Me){const Ie=it(me),Ge=ai(Me.createTime);return Ie.persistence.runTransaction("hasNewerBundle","readonly",ft=>Ie.$r.getBundleMetadata(ft,Me.id)).then(ft=>!!ft&&ft.createTime.compareTo(Ge)>=0)}(h.localStore,C))return yield y.close(),w._completeWith({taskState:"Success",documentsLoaded:(me=C).totalDocuments,bytesLoaded:me.totalBytes,totalDocuments:me.totalDocuments,totalBytes:me.totalBytes}),Promise.resolve(new Set);w._updateProgress(jb(C));const M=new FT(C,h.localStore,y.serializer);let O=yield y.qa();for(;O;){const Y=yield M._a(O);Y&&w._updateProgress(Y),O=yield y.qa()}const j=yield M.complete();return yield Xl(h,j.ca,void 0),yield function(me,Me){const Ie=it(me);return Ie.persistence.runTransaction("Save bundle","readwrite",Ge=>Ie.$r.saveBundleMetadata(Ge,Me))}(h.localStore,C),w._completeWith(j.progress),Promise.resolve(j.ua)}catch(C){return Js("SyncEngine",`Loading bundle failed with ${C}`),w._failWith(C),Promise.resolve(new Set)}var me}),function l(h,y,w){return a.apply(this,arguments)})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}(yield Xv(n),a,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function XO(n,e){return function aS(n,e){return n.asyncQueue.enqueue((0,ve.A)(function*(){return function(i,a){const l=it(i);return l.persistence.runTransaction("Get named query","readonly",h=>l.$r.getNamedQuery(h,a))}(yield $d(n),e)}))}(Or(n=wn(n,er)),e).then(t=>t?new $i(n,null,t.query):null)}(this._delegate,e).then(t=>t?new r(this,t):null)}}class MA extends wA{constructor(e){super(),this.firestore=e}convertBytes(e){return new fE(new iu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $o.forKey(t,this.firestore,null)}}class $S{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new MA(e)}get(e){const t=c(e);return this._delegate.get(t).then(i=>new Qm(this._firestore,new ic(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=c(e);return i?(jS("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=c(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=c(e);return this._delegate.delete(t),this}}class HS{constructor(e){this._delegate=e}set(e,t,i){const a=c(e);return i?(jS("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=c(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=c(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qd{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new dE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pE(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Qd.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let l=a.get(t);return l||(l=new Qd(e,new MA(e),t),a.set(t,l)),l}}Qd.INSTANCES=new WeakMap;class $o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MA(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $o(t,new wr(t._delegate,i,new ot(e)))}static forKey(e,t,i){return new $o(t,new wr(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new u(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new u(this.firestore,uA(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,jn.Ku)(e))instanceof wr&&Fm(this._delegate,e)}set(e,t){t=jS("DocumentReference.set",t);try{return t?GN(this._delegate,e,t):GN(this._delegate,e)}catch(i){throw Ts(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?NS(this._delegate,e):NS(this._delegate,e,t,...i)}catch(a){throw Ts(a,"updateDoc()","DocumentReference.update()")}}delete(){return function uk(n){return Wd(wn(n.firestore,er),[new Ad(n._key,Ir.none())])}(this._delegate)}onSnapshot(...e){const t=GS(e),i=ox(e,a=>new Qm(this.firestore,new ic(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return xS(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function MS(n){n=wn(n,wr);const e=wn(n.firestore,er),t=Or(e),i=new Zu(e);return function sA(n,e){const t=new Ui;return n.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return(i=(0,ve.A)(function*(l,h,y){try{const w=yield function(M,O){const j=it(M);return j.persistence.runTransaction("read document","readonly",Y=>j.localDocuments.getDocument(Y,O))}(l,h);w.isFoundDocument()?y.resolve(w):w.isNoDocument()?y.resolve(null):y.reject(new Ue(Ee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(w){const C=bm(w,`Failed to get document '${h} from cache`);y.reject(C)}}),function a(l,h,y){return i.apply(this,arguments)})(yield $d(n),e,t);var i})),t.promise}(t,n._key).then(a=>new ic(e,i,n._key,a,new rc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function sk(n){n=wn(n,wr);const e=wn(n.firestore,er);return Yv(Or(e),n._key,{source:"server"}).then(t=>AA(e,n,t))}(this._delegate):function ik(n){n=wn(n,wr);const e=wn(n.firestore,er);return Yv(Or(e),n._key).then(t=>AA(e,n,t))}(this._delegate),t.then(i=>new Qm(this.firestore,new ic(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new $o(this.firestore,this._delegate.withConverter(e?Qd.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function GS(n){for(const e of n)if("object"==typeof e&&!PA(e))return e;return{}}function ox(n,e){var t,i;let a;return a=PA(n[0])?n[0]:PA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(i=a.complete)||void 0===i?void 0:i.bind(a)}}class Qm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $o(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return PS(this._delegate,e._delegate)}}class pE extends Qm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function SO(n,e){n||gt()}(void 0!==t),t}}class r{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MA(e)}where(e,t,i){try{return new r(this.firestore,tc(this._delegate,function JO(n,e,t){const i=e,a=up("where",n);return zm._create(a,i,t)}(e,t,i)))}catch(a){throw Ts(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new r(this.firestore,tc(this._delegate,function Ci(n,e="asc"){const t=e,i=up("orderBy",n);return bS._create(i,t)}(e,t)))}catch(i){throw Ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new r(this.firestore,tc(this._delegate,function oE(n){return fS("limit",n),nc._create("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new r(this.firestore,tc(this._delegate,function aE(n){return fS("limitToLast",n),nc._create("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new r(this.firestore,tc(this._delegate,function tk(...n){return Wm._create("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new r(this.firestore,tc(this._delegate,function jN(...n){return Wm._create("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new r(this.firestore,tc(this._delegate,function nk(...n){return mA._create("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new r(this.firestore,tc(this._delegate,function _A(...n){return mA._create("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return lA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ok(n){n=wn(n,$i);const e=wn(n.firestore,er),t=Or(e),i=new Zu(e);return function zO(n,e){const t=new Ui;return n.asyncQueue.enqueueAndForget((0,ve.A)(function*(){return(i=(0,ve.A)(function*(l,h,y){try{const w=yield _m(l,h,!0),C=new Hb(h,w.hs),M=C.da(w.documents),O=C.applyChanges(M,!1);y.resolve(O.snapshot)}catch(w){const C=bm(w,`Failed to execute query '${h} against cache`);y.reject(C)}}),function a(l,h,y){return i.apply(this,arguments)})(yield $d(n),e,t);var i})),t.promise}(t,n._query).then(a=>new qd(e,i,n,a))}(this._delegate):"server"===e?.source?function ak(n){n=wn(n,$i);const e=wn(n.firestore,er),t=Or(e),i=new Zu(e);return oA(t,n._query,{source:"server"}).then(a=>new qd(e,i,n,a))}(this._delegate):function TA(n){n=wn(n,$i);const e=wn(n.firestore,er),t=Or(e),i=new Zu(e);return BN(n._query),oA(t,n._query).then(a=>new qd(e,i,n,a))}(this._delegate),t.then(i=>new o(this.firestore,new qd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=GS(e),i=ox(e,a=>new o(this.firestore,new qd(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return xS(this._delegate,t,i)}withConverter(e){return new r(this.firestore,this._delegate.withConverter(e?Qd.getInstance(this.firestore,e):null))}}class s{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new pE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class o{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new r(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new pE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new s(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new pE(this._firestore,i))})}isEqual(e){return PS(this._delegate,e._delegate)}}class u extends r{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $o(this.firestore,e):null}doc(e){try{return new $o(this.firestore,void 0===e?tE(this._delegate):tE(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function zN(n,e){const t=wn(n.firestore,er),i=tE(n),a=uE(n.converter,e);return Wd(t,[Lm(io(n.firestore),"addDoc",i._key,a,null!==n.converter,{}).toMutation(i._key,Ir.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new $o(this.firestore,t))}isEqual(e){return Fm(this._delegate,e._delegate)}withConverter(e){return new u(this.firestore,this._delegate.withConverter(e?Qd.getInstance(this.firestore,e):null))}}function c(n){return wn(n,wr)}class f{constructor(...e){this._delegate=new Zl(...e)}static documentId(){return new f(hr.keyField().canonicalString())}isEqual(e){return(e=(0,jn.Ku)(e))instanceof Zl&&this._delegate._internalPath.isEqual(e._internalPath)}}class m{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YN(){return new pA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new m(e)}static delete(){const e=function mk(){return new Gd("deleteField")}();return e._methodName="FieldValue.delete",new m(e)}static arrayUnion(...e){const t=function JN(...n){return new Um("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new m(t)}static arrayRemove(...e){const t=function ZN(...n){return new Bm("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new m(t)}static increment(e){const t=function LS(n){return new ap("increment",n)}(e);return t._methodName="FieldValue.increment",new m(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const E={Firestore:sx,GeoPoint:fA,Timestamp:ur,Blob:fE,Transaction:$S,WriteBatch:HS,DocumentReference:$o,DocumentSnapshot:Qm,Query:r,QueryDocumentSnapshot:pE,QuerySnapshot:o,CollectionReference:u,FieldPath:f,FieldValue:m,setLogLevel:function Ak(n){!function bO(n){sd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function V(n,e){return function x(n,e=TC){return new jr.c(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function Z(n,e){return V(n,e).pipe((0,cn.T)(t=>({payload:t,type:"query"})))}!function R(n){(function A(n,e){n.INTERNAL.registerComponent(new ow.uA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},E)))})(n,(e,t)=>new sx(e,t,new Tk)),n.registerVersion("@firebase/firestore-compat","0.3.31")}(xo.A);class ue{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:a,query:l}=Dk(i,t);return new tr(a,l,this.afs)}snapshotChanges(){return function W(n,e){return V(n,e).pipe(Sh(void 0),kg(),(0,cn.T)(t=>{const[i,a]=t;return a.exists?i?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ls)}valueChanges(e={}){return this.snapshotChanges().pipe((0,cn.T)(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return qn(this.ref.get(e)).pipe(ls)}}function be(n,e){return Z(n,e).pipe(Sh(void 0),kg(),(0,cn.T)(t=>{const[i,a]=t,l=a.payload.docChanges(),h=l.map(y=>({type:y.type,payload:y}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((y,w)=>{const C=l.find(O=>O.doc.ref.isEqual(y.ref)),M=i?.payload.docs.find(O=>O.ref.isEqual(y.ref));C&&JSON.stringify(C.doc.metadata)===JSON.stringify(y.metadata)||!C&&M&&JSON.stringify(M.metadata)===JSON.stringify(y.metadata)||h.push({type:"modified",payload:{oldIndex:w,newIndex:w,type:"modified",doc:y}})}),h}))}function $e(n,e,t){return be(n,t).pipe(Ao((i,a)=>function Qe(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function Qt(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Le(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Le(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Le(n,e.oldIndex,1)}return n}(n,i))}),n}(i,a.map(l=>l.payload),e),[]),function sw(n,e=Iu.D){return n=n??LC,(0,Nn.N)((t,i)=>{let a,l=!0;t.subscribe((0,xr._)(i,h=>{const y=e(h);(l||!n(a,y))&&(l=!1,a=y,i.next(h))}))})}(),(0,cn.T)(i=>i.map(a=>({type:a.type,payload:a}))))}function Le(n,e,t,...i){const a=n.slice();return a.splice(e,t,...i),a}function Rn(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class tr{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=be(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,cn.T)(i=>i.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(Sh(void 0),kg(),Ms(([i,a])=>a.length>0||!i),(0,cn.T)(([,i])=>i),ls)}auditTrail(e){return this.stateChanges(e).pipe(Ao((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Rn(e);return $e(this.query,t,this.afs.schedulers.outsideAngular).pipe(ls)}valueChanges(e={}){return Z(this.query,this.afs.schedulers.outsideAngular).pipe((0,cn.T)(t=>t.payload.docs.map(i=>e.idField?{...i.data(),[e.idField]:i.id}:i.data())),ls)}get(e){return qn(this.query.get(e)).pipe(ls)}add(e){return this.ref.add(e)}doc(e){return new ue(this.ref.doc(e),this.afs)}}class bi{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?be(this.query,this.afs.schedulers.outsideAngular).pipe((0,cn.T)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Ms(t=>t.length>0),ls):be(this.query,this.afs.schedulers.outsideAngular).pipe(ls)}auditTrail(e){return this.stateChanges(e).pipe(Ao((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Rn(e);return $e(this.query,t,this.afs.schedulers.outsideAngular).pipe(ls)}valueChanges(e={}){return Z(this.query,this.afs.schedulers.outsideAngular).pipe((0,cn.T)(i=>i.payload.docs.map(a=>e.idField?{[e.idField]:a.id,...a.data()}:a.data())),ls)}get(e){return qn(this.query.get(e)).pipe(ls)}}const As=new d.nKC("angularfire2.enableFirestorePersistence"),Xd=new d.nKC("angularfire2.firestore.persistenceSettings"),zS=new d.nKC("angularfire2.firestore.settings"),ax=new d.nKC("angularfire2.firestore.use-emulator");function Dk(n,e=(t=>t)){return{query:e(n),ref:n}}let Ck=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,a,l,h,y,w,C,M,O,j,Y,me,Me,Ie,Ge,ft){this.schedulers=w;const qe=XI(t,y,i),vt=M;O&&FC(qe,y,j,me,Me,Ie,Y,Ge),[this.firestore,this.persistenceEnabled$]=YI(`${qe.name}.firestore`,"AngularFirestore",qe.name,()=>{const Xt=y.runOutsideAngular(()=>qe.firestore());if(l&&Xt.settings(l),vt&&Xt.useEmulator(...vt),a&&!qo(h)){const hn=()=>{try{return qn(Xt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ie){return typeof console<"u"&&console.warn(ie),Ft(!1)}};return[Xt,y.runOutsideAngular(hn)]}return[Xt,Ft(!1)]},[l,vt,a])}collection(t,i){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:h}=Dk(a,i),y=this.schedulers.ngZone.run(()=>l);return new tr(y,h,this)}collectionGroup(t,i){const a=i||(h=>h),l=this.firestore.collectionGroup(t);return new bi(a(l),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>i);return new ue(a,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(d.KVO(Ry),d.KVO(Py,8),d.KVO(As,8),d.KVO(zS,8),d.KVO(d.Agw),d.KVO(d.SKi),d.KVO(AC),d.KVO(Xd,8),d.KVO(ax,8),d.KVO(If,8),d.KVO(Ny,8),d.KVO(iw,8),d.KVO(xy,8),d.KVO(Oy,8),d.KVO(OC,8),d.KVO(kC,8),d.KVO(ku,8))};static \u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),H1=(()=>{class n{constructor(){xo.A.registerVersion("angularfire",xg.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:As,useValue:!0},{provide:Xd,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=d.$C({type:n});static \u0275inj=d.G2t({providers:[Ck]})}return n})(),qS=(()=>{class n{constructor(t){this.firestore=t}addPokemonForUser(t,i){return this.firestore.collection(`users/${t}/pokedex`).add(i)}getAllPokemonForUser(t){return this.firestore.collection(`users/${t}/pokedex`).snapshotChanges().pipe((0,cn.T)(a=>a.map(l=>({...l.payload.doc.data(),docId:l.payload.doc.id}))))}deletePokemonForUser(t,i){return this.firestore.collection("users").doc(t).collection("pokedex").doc(i.toString()).delete()}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(Ck))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WS=(()=>{class n{constructor(t){this.afAuth=t}getAuthState(){return this.afAuth.authState}getCurrentUserId(){var t=this;return(0,ve.A)(function*(){return(yield t.afAuth.currentUser)?.uid||null})()}isLoggedIn(){var t=this;return(0,ve.A)(function*(){return!!(yield t.afAuth.currentUser)})()}logout(){var t=this;return(0,ve.A)(function*(){yield t.afAuth.signOut()})()}static#e=this.\u0275fac=function(i){return new(i||n)(d.KVO(If))};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function G1(n,e){1&n&&d.nrm(0,"img",6),2&n&&d.Y8G("src",e.$implicit,d.B4B)}function z1(n,e){if(1&n&&(d.j41(0,"div"),d.DNE(1,G1,1,1,"img",5),d.k0s()),2&n){const t=d.XpG();d.R7$(),d.Y8G("ngForOf",t.pokemonSprites)}}function q1(n,e){if(1&n&&(d.j41(0,"h4"),d.EFF(1),d.nI1(2,"titlecase"),d.k0s()),2&n){const t=d.XpG();d.R7$(),d.JRh(d.bMT(2,1,t.pokemonData.name))}}function W1(n,e){if(1&n){const t=d.RV6();d.j41(0,"button",7),d.bIt("click",function(){d.eBV(t);const a=d.XpG();return d.Njj(a.addToPokedex({id:a.pokemonId,name:a.pokemonData.name}))}),d.nrm(1,"img",8),d.j41(2,"span",9),d.EFF(3,"Add to Pok\xe9dex"),d.k0s()()}}function K1(n,e){1&n&&(d.j41(0,"span",10)(1,"button",11)(2,"span",9),d.EFF(3,"Done!"),d.k0s()()())}let Q1=(()=>{class n{constructor(t,i,a,l){this.pokemonService=t,this.pokedexFirestoreService=i,this.authService=a,this.toastr=l,this.showCheckIcon=!1,this.userID=null,this.pokemonId="0",this.pokemonSprites=[],this.authService.getCurrentUserId().then(h=>{this.userID=h})}ngOnChanges(){this.extractPokemonData()}extractPokemonData(){var t=this;return(0,ve.A)(function*(){if(t.pokemonData){t.pokemonId=t.pokemonData.url.substring(34,t.pokemonData.url.length-1);try{t.fullPokemonData=yield t.pokemonService.getById(t.pokemonId),t.fullPokemonData&&t.fullPokemonData.sprites&&t.pokemonSprites.push(t.fullPokemonData.sprites.front_default)}catch(i){console.error("Error fetching Pok\xe9mon data:",i)}}})()}addToPokedex(t){var i=this;return(0,ve.A)(function*(){(yield i.authService.isLoggedIn())?(yield i.authService.getCurrentUserId().then(l=>{i.userID=l}),i.userID?i.pokedexFirestoreService.addPokemonForUser(i.userID,t).then(()=>{i.toastr.success("","Pokemon Added to Pok\xe9dex")}).catch(l=>console.error("Error adding Pok\xe9mon to Firebase:",l)):i.toastr.warning("Please log in","Try Again")):i.toastr.warning("You need to be logged in to add your Pok\xe9mon","Login Required")})()}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(zI),d.rXU(qS),d.rXU(WS),d.rXU(vf))};static#t=this.\u0275cmp=d.VBU({type:n,selectors:[["app-card-grid"]],inputs:{pokemonData:"pokemonData"},features:[d.OA$],decls:8,vars:5,consts:[[1,"card-container","m-2"],[1,"p-2"],[4,"ngIf"],["class","btn-pokedex position-relative",3,"click",4,"ngIf"],["class","position-absolute top-0 end-0 mt-3",4,"ngIf"],["alt","Pokemon Sprite",3,"src",4,"ngFor","ngForOf"],["alt","Pokemon Sprite",3,"src"],[1,"btn-pokedex","position-relative",3,"click"],["src","assets/pokeball-gif.gif","alt","Pokeball",1,"pokeball-image-gif-pokedex","position-absolute",2,"left","-30px","top","50%","transform","translateY(-50%)"],[1,"mx-2"],[1,"position-absolute","top-0","end-0","mt-3"],[1,"btn-success","position-relative"]],template:function(i,a){1&i&&(d.j41(0,"div",0)(1,"div",1),d.DNE(2,z1,2,1,"div",2),d.j41(3,"span"),d.EFF(4),d.k0s(),d.DNE(5,q1,3,3,"h4",2)(6,W1,4,0,"button",3)(7,K1,4,0,"span",4),d.k0s()()),2&i&&(d.R7$(2),d.Y8G("ngIf",a.pokemonSprites.length>0),d.R7$(2),d.SpI("No. ",a.pokemonId,""),d.R7$(),d.Y8G("ngIf",a.pokemonData),d.R7$(),d.Y8G("ngIf",a.pokemonData),d.R7$(),d.Y8G("ngIf",a.showCheckIcon))},dependencies:[vn,po,ci]})}return n})();function X1(n,e){if(1&n&&(d.j41(0,"div",3)(1,"div",4),d.nrm(2,"app-card-grid",5),d.k0s()()),2&n){const t=e.$implicit;d.R7$(2),d.Y8G("pokemonData",t)}}let Y1=(()=>{class n{constructor(t,i){this.pokemonService=t,this.searchService=i,this.pokemonList=[],this.loading=!1,this.filteredPokemonList=[]}ngOnInit(){this.loadFullList(),this.searchService.query.subscribe(t=>{this.filterPokemonList(t)})}loadFullList(){var t=this;return(0,ve.A)(function*(){if(!t.loading){t.loading=!0;try{t.pokemonList=yield t.pokemonService.getByPage(),t.filteredPokemonList=[...t.pokemonList]}catch(i){console.error("Error loading Pok\xe9mon list:",i)}finally{t.loading=!1}}})()}filterPokemonList(t){this.filteredPokemonList=t.trim()?this.pokemonList.filter(i=>i.name.toLowerCase().includes(t.toLowerCase())):[...this.pokemonList]}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(zI),d.rXU(yC))};static#t=this.\u0275cmp=d.VBU({type:n,selectors:[["app-grid-visualizer"]],decls:3,vars:1,consts:[[1,"container","mt-5","py-4"],[1,"row"],["class","col-12 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"col-12","col-md-4","col-lg-3"],[1,"card","text-center","m-2"],[3,"pokemonData"]],template:function(i,a){1&i&&(d.j41(0,"div",0)(1,"div",1),d.DNE(2,X1,3,1,"div",2),d.k0s()()),2&i&&(d.R7$(2),d.Y8G("ngForOf",a.filteredPokemonList))},dependencies:[vn,Q1]})}return n})();function Z1(n,e){1&n&&(d.j41(0,"div",8)(1,"h1"),d.EFF(2,"Loading Pok\xe9mon list..."),d.k0s()())}function eF(n,e){1&n&&(d.j41(0,"div",8)(1,"h1"),d.EFF(2,"Login to see your Pok\xe9dex"),d.k0s()())}function tF(n,e){1&n&&(d.j41(0,"div",9)(1,"h1"),d.EFF(2,"Pok\xe9mon not found!!"),d.k0s()())}function nF(n,e){if(1&n&&d.nrm(0,"img",16),2&n){const t=d.XpG().$implicit;d.Y8G("src",t.spriteUrl,d.B4B)}}function rF(n,e){if(1&n&&(d.j41(0,"span",17),d.EFF(1),d.k0s()),2&n){const t=d.XpG().$implicit;d.R7$(),d.SpI("No: ",t.id,"")}}function iF(n,e){if(1&n){const t=d.RV6();d.j41(0,"button",18),d.bIt("click",function(a){d.eBV(t);const l=d.XpG().$implicit,h=d.XpG();return d.Njj(h.deletePokemon(a,l))}),d.nrm(1,"img",19),d.j41(2,"span",20),d.EFF(3," Delete"),d.k0s()()}}function sF(n,e){if(1&n){const t=d.RV6();d.j41(0,"div")(1,"div",10),d.bIt("click",function(){const a=d.eBV(t).$implicit,l=d.XpG();return d.Njj(l.selectPokemon(a))}),d.DNE(2,nF,1,1,"img",11),d.j41(3,"div",12),d.DNE(4,rF,2,1,"span",13),d.j41(5,"span",14),d.EFF(6),d.k0s(),d.DNE(7,iF,4,0,"button",15),d.k0s()()()}if(2&n){const t=e.$implicit,i=d.XpG();d.R7$(),d.AVh("selected",i.selectedPokemon===t),d.R7$(),d.Y8G("ngIf",t.spriteUrl),d.R7$(2),d.Y8G("ngIf",t.id),d.R7$(2),d.JRh(t.name),d.R7$(),d.Y8G("ngIf",t.docId)}}function oF(n,e){if(1&n&&d.nrm(0,"img",32),2&n){const t=d.XpG(2);d.Y8G("src",t.selectedPokemon.spriteUrl,d.B4B)}}function aF(n,e){if(1&n&&(d.j41(0,"div",21)(1,"div",22)(2,"div",23)(3,"h4",24),d.EFF(4),d.k0s()()(),d.j41(5,"div",25),d.DNE(6,oF,1,1,"img",26),d.k0s(),d.j41(7,"div",27)(8,"div",28)(9,"div",29)(10,"p",30),d.EFF(11),d.k0s(),d.j41(12,"p",30),d.EFF(13),d.k0s(),d.j41(14,"p",30),d.EFF(15),d.k0s()(),d.j41(16,"div",31)(17,"p",24),d.EFF(18),d.k0s()()()()()),2&n){const t=d.XpG();d.R7$(4),d.Lme(" ",t.selectedPokemon&&void 0!==t.selectedPokemon.id?"No."+t.selectedPokemon.id:""," ",t.selectedPokemon?t.selectedPokemon.name:""," "),d.R7$(2),d.Y8G("ngIf",t.selectedPokemon&&t.selectedPokemon.spriteUrl),d.R7$(5),d.JRh(t.selectedPokemonDetails&&0!==t.selectedPokemonDetails.height?"Height: "+t.selectedPokemonDetails.height:""),d.R7$(2),d.JRh(t.selectedPokemonDetails&&0!==t.selectedPokemonDetails.weight?"Weight: "+t.selectedPokemonDetails.weight:""),d.R7$(2),d.JRh(t.selectedPokemonDetails&&0!==t.selectedPokemonDetails.types.length?"Type: "+t.selectedPokemonDetails.types.join(", "):""),d.R7$(3),d.JRh(t.selectedPokemonDescription)}}const uF=[{path:"",component:(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=d.VBU({type:n,selectors:[["app-home"]],decls:2,vars:0,consts:[[1,"container-grid",2,"height","100vh"]],template:function(i,a){1&i&&(d.j41(0,"div",0),d.nrm(1,"app-grid-visualizer"),d.k0s())},dependencies:[Y1]})}return n})()},{path:"pokedex",component:(()=>{class n{constructor(t,i,a,l,h){this.pokemonService=t,this.pokedexFirestoreService=i,this.authService=a,this.searchService=l,this.toastr=h,this.firebasePokemons=[],this.pokemonWithSprites=[],this.selectedPokemonDetails={height:0,weight:0,types:[]},this.selectedPokemonDescription="",this.userID=null,this.filteredPokemonList=[],this.loading=!0}ngOnInit(){var t=this;this.authSubscription=this.authService.getAuthState().subscribe(function(){var i=(0,ve.A)(function*(a){t.loading=!0,a?(t.userID=a.uid,yield t.loadFirebasePokemons(),t.filteredPokemonList=[...t.pokemonWithSprites],t.loading=!1,t.searchSubscription=t.searchService.query.subscribe(l=>{t.filterPokemonList(l)})):(t.userID=null,t.loading=!1)});return function(a){return i.apply(this,arguments)}}())}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe(),this.authSubscription&&this.authSubscription.unsubscribe()}loadUserID(){var t=this;return(0,ve.A)(function*(){t.userID=yield t.authService.getCurrentUserId()})()}loadFirebasePokemons(){var i,t=this;this.loading=!0,this.pokedexFirestoreService.getAllPokemonForUser(this.userID).subscribe({next:(i=(0,ve.A)(function*(a){try{t.firebasePokemons=a,yield t.loadSpritesForPokemons(),t.filteredPokemonList=[...t.pokemonWithSprites],t.loading=!1,t.filteredPokemonList.length>0&&t.selectPokemon(t.filteredPokemonList[0])}catch(l){console.error("Error loading sprites for Pok\xe9mon:",l),t.loading=!1}}),function(l){return i.apply(this,arguments)}),error:i=>{console.error("Error loading Pok\xe9mon from Firestore:",i),this.loading=!1}})}loadSpritesForPokemons(){var t=this;return(0,ve.A)(function*(){t.pokemonWithSprites=[];for(let i=0;i<t.firebasePokemons.length;i++){const a=t.firebasePokemons[i],l=yield t.getSpriteUrl(a.id);t.pokemonWithSprites.push({...a,spriteUrl:l})}})()}getSpriteUrl(t){var i=this;return(0,ve.A)(function*(){try{return(yield i.pokemonService.getById(t)).sprites?.front_default}catch(a){return void console.error(`Error fetching sprite for Pok\xe9mon with ID ${t} from the API:`,a)}})()}selectPokemon(t){this.selectedPokemon=t,this.loadPokemonDetails(t),this.loadPokemonDescription(t)}loadPokemonDetails(t){var i=this;return(0,ve.A)(function*(){try{const a=yield i.pokemonService.getById(t.id);i.selectedPokemonDetails={height:a.height,weight:a.weight,types:a.types.map(l=>l.type.name)}}catch(a){console.error(`Error fetching details for Pok\xe9mon with ID ${t.id}:`,a)}})()}loadPokemonDescription(t){var i=this;return(0,ve.A)(function*(){try{i.selectedPokemonDescription=yield i.pokemonService.getPokemonDescription(t.id)}catch(a){console.error(`Error fetching description for Pok\xe9mon with ID ${t.id}:`,a)}})()}deletePokemon(t,i){t.stopPropagation(),this.userID&&i.docId?this.pokedexFirestoreService.deletePokemonForUser(this.userID,i.docId).then(()=>{console.log(`Pokemon ${i.id} deleted successfully!`),this.toastr.success("","Pokemon Deleted"),this.loadFirebasePokemons()}).catch(a=>{console.error(`Error deleting Pokemon ${i.name}:`,a)}):console.error("Cannot delete Pokemon: userID or docId is missing")}filterPokemonList(t){this.filteredPokemonList=t.trim()?this.pokemonWithSprites.filter(i=>i.name.toLowerCase().includes(t.toLowerCase())):[...this.pokemonWithSprites],this.filteredPokemonList.length>0?this.selectPokemon(this.filteredPokemonList[0]):(this.selectedPokemon=void 0,this.selectedPokemonDetails={height:0,weight:0,types:[]},this.selectedPokemonDescription="")}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(zI),d.rXU(qS),d.rXU(WS),d.rXU(yC),d.rXU(vf))};static#t=this.\u0275cmp=d.VBU({type:n,selectors:[["app-pokedex"]],decls:9,vars:5,consts:[[1,"container","mt-5","py-4"],[1,"row","align-content-center","p-2"],[1,"col-lg-5","col-md-12","mt-1"],[1,"card","m-2","overflow-auto","card-pokedex",2,"max-height","80vh"],["class","loading-message p-3 align-items-center",4,"ngIf"],["class","no-results p-3 align-items-center",4,"ngIf"],[4,"ngFor","ngForOf"],["class","col-lg-7 col-md-12 mt-1",4,"ngIf"],[1,"loading-message","p-3","align-items-center"],[1,"no-results","p-3","align-items-center"],[1,"card-body","m-1","d-flex","align-items-center","justify-content-between",3,"click"],["alt","Pokemon Sprite","class","pokemon-image-small",3,"src",4,"ngIf"],[1,"pokemon-details","d-flex","align-items-center","justify-content-between","w-100"],["class","card-text",4,"ngIf"],[1,"card-title","mb-0"],["class","btn-pokedex position-relative",3,"click",4,"ngIf"],["alt","Pokemon Sprite",1,"pokemon-image-small",3,"src"],[1,"card-text"],[1,"btn-pokedex","position-relative",3,"click"],["src","assets/pokeball-gif.gif","alt","Pokeball",1,"pokeball-image-gif-pokedex","position-absolute",2,"left","-30px","top","50%","transform","translateY(-50%)"],[1,"mx-2"],[1,"col-lg-7","col-md-12","mt-1"],[1,"card","text-center","d-flex","align-items-center","justify-content-center","m-2",2,"height","10%"],[1,"d-flex","align-items-center","justify-content-center","w-100"],[1,"mb-0"],[1,"card","text-center","m-2","right-section",2,"height","50%"],["alt","Selected Pokemon Sprite","class","pokemon-image-pokedex",3,"src",4,"ngIf"],[1,"card","m-2","p-3","d-flex","align-items-center","justify-content-center",2,"height","180px","overflow","auto"],[1,"row","w-100"],[1,"col-12","col-md-4","d-flex","flex-column","justify-content-around"],[1,"mb-1"],[1,"col-md-8","d-flex","flex-column","justify-content-center","align-items-center"],["alt","Selected Pokemon Sprite",1,"pokemon-image-pokedex",3,"src"]],template:function(i,a){1&i&&(d.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),d.DNE(4,Z1,3,0,"div",4)(5,eF,3,0,"div",4)(6,tF,3,0,"div",5)(7,sF,8,6,"div",6),d.k0s()(),d.DNE(8,aF,19,7,"div",7),d.k0s()()),2&i&&(d.R7$(4),d.Y8G("ngIf",a.loading),d.R7$(),d.Y8G("ngIf",!a.loading&&!a.userID&&0===a.firebasePokemons.length),d.R7$(),d.Y8G("ngIf",!a.loading&&a.userID&&0===a.filteredPokemonList.length&&0!=a.firebasePokemons.length),d.R7$(),d.Y8G("ngForOf",a.filteredPokemonList),d.R7$(),d.Y8G("ngIf",a.userID&&a.filteredPokemonList.length>0))},dependencies:[vn,po]})}return n})()}];let lF=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=d.$C({type:n});static#n=this.\u0275inj=d.G2t({imports:[DD.forRoot(uF),DD]})}return n})();const cF=()=>({standalone:!0});let dF=(()=>{class n{constructor(t){this.searchService=t,this.searchQuery=""}onSearchInputChange(){this.searchQuery.trim()||(this.searchQuery=""),this.searchService.setQuery(this.searchQuery),console.log(this.searchQuery)}onSubmit(){this.searchService.setQuery(this.searchQuery),console.log(this.searchQuery)}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(yC))};static#t=this.\u0275cmp=d.VBU({type:n,selectors:[["app-search-bar"]],decls:5,vars:3,consts:[[1,"align-items-center","px-2"],["role","search",1,"d-flex",2,"margin-top","2px","margin-bottom","2px",3,"ngSubmit"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2",2,"width","60%",3,"ngModelChange","keyup","ngModel","ngModelOptions"],["type","submit",1,"btn","btn-search"],["src","assets/glass.png","alt","Search",1,"img-search",3,"click"]],template:function(i,a){1&i&&(d.j41(0,"div",0)(1,"form",1),d.bIt("ngSubmit",function(){return a.onSubmit()}),d.j41(2,"input",2),d.mxI("ngModelChange",function(h){return d.DH7(a.searchQuery,h)||(a.searchQuery=h),h}),d.bIt("keyup",function(){return a.onSearchInputChange()}),d.k0s(),d.j41(3,"button",3)(4,"img",4),d.bIt("click",function(){return a.onSubmit()}),d.k0s()()()()),2&i&&(d.R7$(2),d.R50("ngModel",a.searchQuery),d.Y8G("ngModelOptions",d.lJ4(2,cF)))},dependencies:[uy,Cl,_g,Z_,ay,sy]})}return n})();function hF(n,e){1&n&&(d.j41(0,"button",28),d.EFF(1,"Login"),d.k0s())}function fF(n,e){1&n&&(d.j41(0,"button",29),d.EFF(1,"Sign Up"),d.k0s())}function pF(n,e){if(1&n){const t=d.RV6();d.j41(0,"div",30)(1,"button",31),d.bIt("click",function(){d.eBV(t);const a=d.XpG();return d.Njj(a.Logout())}),d.EFF(2,"Logout"),d.k0s()()}}let gF=(()=>{class n{constructor(t,i,a,l,h,y,w){this.fbs=t,this.afireAuthSignUp=i,this.fbl=a,this.afireAuthLogin=l,this.authService=h,this.toastr=y,this.pokedexFirestoreService=w,this.isLoggedIn=!1,this.userID=null,this.authStateSubscription=null,this.registerUser=this.fbs.group({emailSignUp:["",[Sl.required,Sl.email]],passwordSignUp:["",[Sl.required,Sl.minLength(6)]],confirmPasswordSignUp:["",Sl.required]}),this.loginUser=this.fbl.group({emailLogin:["",Sl.required],passwordLogin:["",Sl.required]})}ngOnInit(){this.authStateSubscription=this.authService.getAuthState().subscribe(t=>{this.isLoggedIn=!!t})}ngOnDestroy(){this.authStateSubscription&&this.authStateSubscription.unsubscribe()}SignUp(){const t=this.registerUser.value.emailSignUp,i=this.registerUser.value.passwordSignUp;i!==this.registerUser.value.confirmPasswordSignUp?this.toastr.error("Passwords do not match","Error"):this.afireAuthSignUp.createUserWithEmailAndPassword(t,i).then(l=>{const h=l.user;console.log(h),this.toastr.success("User registered successfully","Hello"),h?(this.addDefaultPokemonToPokedex(h.uid,{id:"25",name:"pikachu"}),setTimeout(()=>{this.refreshPage()},1e3)):this.toastr.warning("Please log in","Try Again")}).catch(l=>{console.error(l),this.handleError(l)})}handleError(t){switch(t.code){case"auth/email-already-in-use":this.toastr.error("The email address is already in use by another account.","Error");break;case"auth/invalid-email":this.toastr.error("The email address is not valid.","Error");break;case"auth/operation-not-allowed":this.toastr.error("Email/password accounts are not enabled.","Error");break;case"auth/weak-password":this.toastr.error("The password is too weak.","Error");break;default:this.toastr.error("Error signing up. Please try again","Error")}}addDefaultPokemonToPokedex(t,i){this.pokedexFirestoreService.addPokemonForUser(t,i).then(()=>{console.log("Default Pok\xe9mon added to Pok\xe9dex")}).catch(a=>{console.error("Error adding default Pok\xe9mon to Pok\xe9dex:",a),this.toastr.error("Error adding default Pok\xe9mon","Error")})}loadUserID(){var t=this;return(0,ve.A)(function*(){t.userID=yield t.authService.getCurrentUserId()})()}Login(){this.afireAuthLogin.signInWithEmailAndPassword(this.loginUser.value.emailLogin,this.loginUser.value.passwordLogin).then(a=>{console.log(a),setTimeout(()=>{this.refreshPage()},1e3),this.toastr.success("","Welcome")}).catch(a=>{console.error(a),this.toastr.error("Error logging in. Please try again","Error")})}Logout(){var t=this;return(0,ve.A)(function*(){try{yield t.authService.logout(),t.isLoggedIn=!1,setTimeout(()=>{t.refreshPage()},1e3),t.toastr.success("","See you soon")}catch(i){console.error("Error logging out:",i),t.toastr.error("Error logging out","Error")}})()}refreshPage(){window.location.reload()}static#e=this.\u0275fac=function(i){return new(i||n)(d.rXU(yy),d.rXU(If),d.rXU(yy),d.rXU(If),d.rXU(WS),d.rXU(vf),d.rXU(qS))};static#t=this.\u0275cmp=d.VBU({type:n,selectors:[["app-login-signup"]],decls:48,vars:5,consts:[[1,"auth-buttons"],["class","btn","data-bs-toggle","modal","data-bs-target","#loginModal",4,"ngIf"],["class","btn","data-bs-toggle","modal","data-bs-target","#signupModal",4,"ngIf"],["class","d-flex","style","padding-top: 3px;",4,"ngIf"],["id","loginModal","tabindex","-1","aria-labelledby","loginModalLabel","aria-hidden","true",1,"modal","fade","text-center"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["src","assets/pokeball.png","alt","Pokeball",1,"pokeball-img"],["id","loginModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","loginEmail",1,"form-label"],["type","email","formControlName","emailLogin","id","loginEmail","aria-describedby","emailHelp",1,"form-control"],["for","loginPassword",1,"form-label"],["type","password","formControlName","passwordLogin","id","loginPassword",1,"form-control"],["type","submit",1,"btn"],["id","signupModal","tabindex","-1","aria-labelledby","signupModalLabel","aria-hidden","true",1,"modal","fade","text-center"],[1,"modal-header","text-center"],["id","signupModalLabel",1,"modal-title"],["for","signupEmail",1,"form-label"],["type","email","formControlName","emailSignUp","id","signupEmail","aria-describedby","emailHelp",1,"form-control"],["for","signupPassword",1,"form-label"],["type","password","formControlName","passwordSignUp","id","signupPassword",1,"form-control"],["for","signupConfirmPassword",1,"form-label"],["type","password","formControlName","confirmPasswordSignUp","id","signupConfirmPassword",1,"form-control"],["data-bs-toggle","modal","data-bs-target","#loginModal",1,"btn"],["data-bs-toggle","modal","data-bs-target","#signupModal",1,"btn"],[1,"d-flex",2,"padding-top","3px"],[1,"btn",3,"click"]],template:function(i,a){1&i&&(d.j41(0,"div",0),d.DNE(1,hF,2,0,"button",1)(2,fF,2,0,"button",2)(3,pF,3,0,"div",3),d.k0s(),d.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),d.nrm(8,"img",8),d.j41(9,"h5",9),d.EFF(10,"Login"),d.k0s(),d.nrm(11,"button",10),d.k0s(),d.j41(12,"div",11)(13,"form",12),d.bIt("ngSubmit",function(){return a.Login()}),d.j41(14,"div",13)(15,"label",14),d.EFF(16,"Email address"),d.k0s(),d.nrm(17,"input",15),d.k0s(),d.j41(18,"div",13)(19,"label",16),d.EFF(20,"Password"),d.k0s(),d.nrm(21,"input",17),d.k0s(),d.j41(22,"button",18),d.EFF(23,"Login"),d.k0s()()()()()(),d.j41(24,"div",19)(25,"div",5)(26,"div",6)(27,"div",20),d.nrm(28,"img",8),d.j41(29,"h5",21),d.EFF(30,"Sign Up"),d.k0s(),d.nrm(31,"button",10),d.k0s(),d.j41(32,"div",11)(33,"form",12),d.bIt("ngSubmit",function(){return a.SignUp()}),d.j41(34,"div",13)(35,"label",22),d.EFF(36,"Email address"),d.k0s(),d.nrm(37,"input",23),d.k0s(),d.j41(38,"div",13)(39,"label",24),d.EFF(40,"Password"),d.k0s(),d.nrm(41,"input",25),d.k0s(),d.j41(42,"div",13)(43,"label",26),d.EFF(44,"Confirm Password"),d.k0s(),d.nrm(45,"input",27),d.k0s(),d.j41(46,"button",18),d.EFF(47,"Signup"),d.k0s()()()()()()),2&i&&(d.R7$(),d.Y8G("ngIf",!a.isLoggedIn),d.R7$(),d.Y8G("ngIf",!a.isLoggedIn),d.R7$(),d.Y8G("ngIf",a.isLoggedIn),d.R7$(10),d.Y8G("formGroup",a.loginUser),d.R7$(20),d.Y8G("formGroup",a.registerUser))},dependencies:[po,uy,Cl,_g,Z_,fy,my]})}return n})();const bk=()=>({exact:!0});let mF=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=d.VBU({type:n,selectors:[["app-navbar"]],decls:19,vars:4,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],[1,"col-md-4","align-middle","col-sm-6"],[1,"title-dash","text-center"],[1,"d-lg-none",2,"width","50%"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarScroll","aria-controls","navbarScroll","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarScroll",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","my-lg-0","navbar-nav-scroll",2,"--bs-scroll-height","200px"],[1,"nav-item"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/pokedex","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],[1,"d-none","d-lg-block"]],template:function(i,a){1&i&&(d.j41(0,"nav",0)(1,"div",1)(2,"a",2)(3,"div",3)(4,"div",4),d.EFF(5,"PokeWeb"),d.k0s()()(),d.nrm(6,"app-search-bar",5),d.j41(7,"button",6),d.nrm(8,"span",7),d.k0s(),d.j41(9,"div",8)(10,"ul",9)(11,"li",10)(12,"a",11),d.EFF(13,"PokeList"),d.k0s()(),d.j41(14,"li",10)(15,"a",12),d.EFF(16,"Pok\xe9dex"),d.k0s()()(),d.nrm(17,"app-search-bar",13)(18,"app-login-signup"),d.k0s()()()),2&i&&(d.R7$(12),d.Y8G("routerLinkActiveOptions",d.lJ4(2,bk)),d.R7$(3),d.Y8G("routerLinkActiveOptions",d.lJ4(3,bk)))},dependencies:[dI,QR,dF,gF]})}return n})(),_F=(()=>{class n{constructor(){this.title="pokeweb"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=d.VBU({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[2,"margin-bottom","0"]],template:function(i,a){1&i&&(d.j41(0,"header",0),d.nrm(1,"app-navbar"),d.k0s(),d.nrm(2,"router-outlet"))},dependencies:[as,mF]})}return n})();const yF_firebaseConfig={apiKey:"AIzaSyAP9V2EeKxdNT_2kAyymGNP5nR_tFEEPoM",authDomain:"pokeweb-hatch.firebaseapp.com",projectId:"pokeweb-hatch",storageBucket:"pokeweb-hatch.appspot.com",messagingSenderId:"292561553214",appId:"1:292561553214:web:a47a940c306c4373628e6f",measurementId:"G-JEFDH84DH0"};let EF=(()=>{class n{constructor(t,i,a,l,h){this.doc=t,this.delegate=i,this.zone=a,this.animationType=l,this.moduleImpl=h,this._rendererFactoryPromise=null,this.scheduler=(0,d.WQX)(d.An2,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??Promise.resolve().then(ye.bind(ye,8))).catch(i=>{throw new d.wOt(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:a})=>{this._engine=i(this.animationType,this.doc,this.scheduler);const l=new a(this.delegate,this._engine,this.zone);return this.delegate=l,l})}createRenderer(t,i){const a=this.delegate.createRenderer(t,i);if(0===a.\u0275type)return a;"boolean"==typeof a.throwOnSyntheticProps&&(a.throwOnSyntheticProps=!1);const l=new IF(a);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(h=>{const y=h.createRenderer(t,i);l.use(y)}).catch(h=>{l.use(a)}),l}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static#e=this.\u0275fac=function(i){d.QTQ()};static#t=this.\u0275prov=d.jDH({token:n,factory:n.\u0275fac})}return n})();class IF{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,null!==this.replay){for(const t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,a){this.delegate.insertBefore(e,t,i,a)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,a){this.delegate.setAttribute(e,t,i,a)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,a){this.delegate.setStyle(e,t,i,a)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(a=>a.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(a=>a.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return null!==this.replay&&e.startsWith("@")}}function wF(n="animations"){return(0,d.ngT)("NgAsyncAnimations"),(0,d.EmA)([{provide:d._9s,useFactory:(e,t,i)=>new EF(e,t,i,n),deps:[Be,na,d.SKi]},{provide:d.bc$,useValue:"noop"===n?"NoopAnimations":"BrowserAnimations"}])}let TF=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=d.$C({type:n,bootstrap:[_F]});static#n=this.\u0275inj=d.G2t({providers:[WS,qS,wF(),jP(),_C()],imports:[Ti,DD,uC,lF,lM.initializeApp(yF_firebaseConfig),VC,LP,H1,BP,GI.forRoot({timeOut:3e3,positionClass:"toast-center-center",preventDuplicates:!0})]})}return n})();_h().bootstrapModule(TF).catch(n=>console.error(n))},412:(Ln,At,ye)=>{ye.d(At,{t:()=>Ce});var d=ye(413);class Ce extends d.B{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const et=super._subscribe(ne);return!et.closed&&ne.next(this._value),et}getValue(){const{hasError:ne,thrownError:et,_value:Tt}=this;if(ne)throw et;return this._throwIfClosed(),Tt}next(ne){super.next(this._value=ne)}}},985:(Ln,At,ye)=>{ye.d(At,{c:()=>an});var d=ye(707),Ce=ye(359),Pe=ye(494),ne=ye(203),et=ye(26),Tt=ye(71),Be=ye(786);let an=(()=>{class Ne{constructor(Ye){Ye&&(this._subscribe=Ye)}lift(Ye){const Zt=new Ne;return Zt.source=this,Zt.operator=Ye,Zt}subscribe(Ye,Zt,un){const wt=function re(Ne){return Ne&&Ne instanceof d.vU||function ae(Ne){return Ne&&(0,Tt.T)(Ne.next)&&(0,Tt.T)(Ne.error)&&(0,Tt.T)(Ne.complete)}(Ne)&&(0,Ce.Uv)(Ne)}(Ye)?Ye:new d.Ms(Ye,Zt,un);return(0,Be.Y)(()=>{const{operator:Rt,source:Fn}=this;wt.add(Rt?Rt.call(wt,Fn):Fn?this._subscribe(wt):this._trySubscribe(wt))}),wt}_trySubscribe(Ye){try{return this._subscribe(Ye)}catch(Zt){Ye.error(Zt)}}forEach(Ye,Zt){return new(Zt=mt(Zt))((un,wt)=>{const Rt=new d.Ms({next:Fn=>{try{Ye(Fn)}catch(ir){wt(ir),Rt.unsubscribe()}},error:wt,complete:un});this.subscribe(Rt)})}_subscribe(Ye){var Zt;return null===(Zt=this.source)||void 0===Zt?void 0:Zt.subscribe(Ye)}[Pe.s](){return this}pipe(...Ye){return(0,ne.m)(Ye)(this)}toPromise(Ye){return new(Ye=mt(Ye))((Zt,un)=>{let wt;this.subscribe(Rt=>wt=Rt,Rt=>un(Rt),()=>Zt(wt))})}}return Ne.create=_t=>new Ne(_t),Ne})();function mt(Ne){var _t;return null!==(_t=Ne??et.$.Promise)&&void 0!==_t?_t:Promise}},413:(Ln,At,ye)=>{ye.d(At,{B:()=>Be});var d=ye(985),Ce=ye(359);const ne=(0,ye(853).L)(mt=>function(){mt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=ye(908),Tt=ye(786);let Be=(()=>{class mt extends d.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const Ne=new an(this,this);return Ne.operator=re,Ne}_throwIfClosed(){if(this.closed)throw new ne}next(re){(0,Tt.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ne of this.currentObservers)Ne.next(re)}})}error(re){(0,Tt.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:Ne}=this;for(;Ne.length;)Ne.shift().error(re)}})}complete(){(0,Tt.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:Ne,isStopped:_t,observers:Ye}=this;return Ne||_t?Ce.Kn:(this.currentObservers=null,Ye.push(re),new Ce.yU(()=>{this.currentObservers=null,(0,et.o)(Ye,re)}))}_checkFinalizedStatuses(re){const{hasError:Ne,thrownError:_t,isStopped:Ye}=this;Ne?re.error(_t):Ye&&re.complete()}asObservable(){const re=new d.c;return re.source=this,re}}return mt.create=(ae,re)=>new an(ae,re),mt})();class an extends Be{constructor(ae,re){super(),this.destination=ae,this.source=re}next(ae){var re,Ne;null===(Ne=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===Ne||Ne.call(re,ae)}error(ae){var re,Ne;null===(Ne=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===Ne||Ne.call(re,ae)}complete(){var ae,re;null===(re=null===(ae=this.destination)||void 0===ae?void 0:ae.complete)||void 0===re||re.call(ae)}_subscribe(ae){var re,Ne;return null!==(Ne=null===(re=this.source)||void 0===re?void 0:re.subscribe(ae))&&void 0!==Ne?Ne:Ce.Kn}}},707:(Ln,At,ye)=>{ye.d(At,{Ms:()=>un,vU:()=>Ne});var d=ye(71),Ce=ye(359),Pe=ye(26),ne=ye(334),et=ye(343);const Tt=mt("C",void 0,void 0);function mt(Yt,Je,Ot){return{kind:Yt,value:Je,error:Ot}}var ae=ye(270),re=ye(786);class Ne extends Ce.yU{constructor(Je){super(),this.isStopped=!1,Je?(this.destination=Je,(0,Ce.Uv)(Je)&&Je.add(this)):this.destination=ir}static create(Je,Ot,Pn){return new un(Je,Ot,Pn)}next(Je){this.isStopped?Fn(function an(Yt){return mt("N",Yt,void 0)}(Je),this):this._next(Je)}error(Je){this.isStopped?Fn(function Be(Yt){return mt("E",void 0,Yt)}(Je),this):(this.isStopped=!0,this._error(Je))}complete(){this.isStopped?Fn(Tt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Je){this.destination.next(Je)}_error(Je){try{this.destination.error(Je)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _t=Function.prototype.bind;function Ye(Yt,Je){return _t.call(Yt,Je)}class Zt{constructor(Je){this.partialObserver=Je}next(Je){const{partialObserver:Ot}=this;if(Ot.next)try{Ot.next(Je)}catch(Pn){wt(Pn)}}error(Je){const{partialObserver:Ot}=this;if(Ot.error)try{Ot.error(Je)}catch(Pn){wt(Pn)}else wt(Je)}complete(){const{partialObserver:Je}=this;if(Je.complete)try{Je.complete()}catch(Ot){wt(Ot)}}}class un extends Ne{constructor(Je,Ot,Pn){let pt;if(super(),(0,d.T)(Je)||!Je)pt={next:Je??void 0,error:Ot??void 0,complete:Pn??void 0};else{let Jt;this&&Pe.$.useDeprecatedNextContext?(Jt=Object.create(Je),Jt.unsubscribe=()=>this.unsubscribe(),pt={next:Je.next&&Ye(Je.next,Jt),error:Je.error&&Ye(Je.error,Jt),complete:Je.complete&&Ye(Je.complete,Jt)}):pt=Je}this.destination=new Zt(pt)}}function wt(Yt){Pe.$.useDeprecatedSynchronousErrorHandling?(0,re.l)(Yt):(0,ne.m)(Yt)}function Fn(Yt,Je){const{onStoppedNotification:Ot}=Pe.$;Ot&&ae.f.setTimeout(()=>Ot(Yt,Je))}const ir={closed:!0,next:et.l,error:function Rt(Yt){throw Yt},complete:et.l}},359:(Ln,At,ye)=>{ye.d(At,{Kn:()=>Tt,yU:()=>et,Uv:()=>Be});var d=ye(71);const Pe=(0,ye(853).L)(mt=>function(re){mt(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((Ne,_t)=>`${_t+1}) ${Ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var ne=ye(908);class et{constructor(ae){this.initialTeardown=ae,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ae;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const Ye of re)Ye.remove(this);else re.remove(this);const{initialTeardown:Ne}=this;if((0,d.T)(Ne))try{Ne()}catch(Ye){ae=Ye instanceof Pe?Ye.errors:[Ye]}const{_finalizers:_t}=this;if(_t){this._finalizers=null;for(const Ye of _t)try{an(Ye)}catch(Zt){ae=ae??[],Zt instanceof Pe?ae=[...ae,...Zt.errors]:ae.push(Zt)}}if(ae)throw new Pe(ae)}}add(ae){var re;if(ae&&ae!==this)if(this.closed)an(ae);else{if(ae instanceof et){if(ae.closed||ae._hasParent(this))return;ae._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(ae)}}_hasParent(ae){const{_parentage:re}=this;return re===ae||Array.isArray(re)&&re.includes(ae)}_addParent(ae){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(ae),re):re?[re,ae]:ae}_removeParent(ae){const{_parentage:re}=this;re===ae?this._parentage=null:Array.isArray(re)&&(0,ne.o)(re,ae)}remove(ae){const{_finalizers:re}=this;re&&(0,ne.o)(re,ae),ae instanceof et&&ae._removeParent(this)}}et.EMPTY=(()=>{const mt=new et;return mt.closed=!0,mt})();const Tt=et.EMPTY;function Be(mt){return mt instanceof et||mt&&"closed"in mt&&(0,d.T)(mt.remove)&&(0,d.T)(mt.add)&&(0,d.T)(mt.unsubscribe)}function an(mt){(0,d.T)(mt)?mt():mt.unsubscribe()}},26:(Ln,At,ye)=>{ye.d(At,{$:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},360:(Ln,At,ye)=>{ye.d(At,{_:()=>Ce});var d=ye(707);function Ce(ne,et,Tt,Be,an){return new Pe(ne,et,Tt,Be,an)}class Pe extends d.vU{constructor(et,Tt,Be,an,mt,ae){super(et),this.onFinalize=mt,this.shouldUnsubscribe=ae,this._next=Tt?function(re){try{Tt(re)}catch(Ne){et.error(Ne)}}:super._next,this._error=an?function(re){try{an(re)}catch(Ne){et.error(Ne)}finally{this.unsubscribe()}}:super._error,this._complete=Be?function(){try{Be()}catch(re){et.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var et;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Tt}=this;super.unsubscribe(),!Tt&&(null===(et=this.onFinalize)||void 0===et||et.call(this))}}}},354:(Ln,At,ye)=>{ye.d(At,{T:()=>Pe});var d=ye(974),Ce=ye(360);function Pe(ne,et){return(0,d.N)((Tt,Be)=>{let an=0;Tt.subscribe((0,Ce._)(Be,mt=>{Be.next(ne.call(et,mt,an++))}))})}},270:(Ln,At,ye)=>{ye.d(At,{f:()=>d});const d={setTimeout(Ce,Pe,...ne){const{delegate:et}=d;return et?.setTimeout?et.setTimeout(Ce,Pe,...ne):setTimeout(Ce,Pe,...ne)},clearTimeout(Ce){const{delegate:Pe}=d;return(Pe?.clearTimeout||clearTimeout)(Ce)},delegate:void 0}},494:(Ln,At,ye)=>{ye.d(At,{s:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},908:(Ln,At,ye)=>{function d(Ce,Pe){if(Ce){const ne=Ce.indexOf(Pe);0<=ne&&Ce.splice(ne,1)}}ye.d(At,{o:()=>d})},853:(Ln,At,ye)=>{function d(Ce){const ne=Ce(et=>{Error.call(et),et.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}ye.d(At,{L:()=>d})},786:(Ln,At,ye)=>{ye.d(At,{Y:()=>Pe,l:()=>ne});var d=ye(26);let Ce=null;function Pe(et){if(d.$.useDeprecatedSynchronousErrorHandling){const Tt=!Ce;if(Tt&&(Ce={errorThrown:!1,error:null}),et(),Tt){const{errorThrown:Be,error:an}=Ce;if(Ce=null,Be)throw an}}else et()}function ne(et){d.$.useDeprecatedSynchronousErrorHandling&&Ce&&(Ce.errorThrown=!0,Ce.error=et)}},669:(Ln,At,ye)=>{function d(Ce){return Ce}ye.d(At,{D:()=>d})},71:(Ln,At,ye)=>{function d(Ce){return"function"==typeof Ce}ye.d(At,{T:()=>d})},974:(Ln,At,ye)=>{ye.d(At,{N:()=>Pe,S:()=>Ce});var d=ye(71);function Ce(ne){return(0,d.T)(ne?.lift)}function Pe(ne){return et=>{if(Ce(et))return et.lift(function(Tt){try{return ne(Tt,this)}catch(Be){this.error(Be)}});throw new TypeError("Unable to lift unknown Observable type")}}},343:(Ln,At,ye)=>{function d(){}ye.d(At,{l:()=>d})},203:(Ln,At,ye)=>{ye.d(At,{F:()=>Ce,m:()=>Pe});var d=ye(669);function Ce(...ne){return Pe(ne)}function Pe(ne){return 0===ne.length?d.D:1===ne.length?ne[0]:function(Tt){return ne.reduce((Be,an)=>an(Be),Tt)}}},334:(Ln,At,ye)=>{ye.d(At,{m:()=>Pe});var d=ye(26),Ce=ye(270);function Pe(ne){Ce.f.setTimeout(()=>{const{onUnhandledError:et}=d.$;if(!et)throw ne;et(ne)})}},969:(Ln,At,ye)=>{ye.d(At,{FX:()=>Jt,If:()=>d,K2:()=>Tt,hZ:()=>Pe,i0:()=>ne,iF:()=>Be,kY:()=>ae,kp:()=>Ce,sf:()=>Pn,ui:()=>pt,wk:()=>an});var d=function(Fe){return Fe[Fe.State=0]="State",Fe[Fe.Transition=1]="Transition",Fe[Fe.Sequence=2]="Sequence",Fe[Fe.Group=3]="Group",Fe[Fe.Animate=4]="Animate",Fe[Fe.Keyframes=5]="Keyframes",Fe[Fe.Style=6]="Style",Fe[Fe.Trigger=7]="Trigger",Fe[Fe.Reference=8]="Reference",Fe[Fe.AnimateChild=9]="AnimateChild",Fe[Fe.AnimateRef=10]="AnimateRef",Fe[Fe.Query=11]="Query",Fe[Fe.Stagger=12]="Stagger",Fe}(d||{});const Ce="*";function Pe(Fe,q){return{type:d.Trigger,name:Fe,definitions:q,options:{}}}function ne(Fe,q=null){return{type:d.Animate,styles:q,timings:Fe}}function Tt(Fe,q=null){return{type:d.Sequence,steps:Fe,options:q}}function Be(Fe){return{type:d.Style,styles:Fe,offset:null}}function an(Fe,q,tt){return{type:d.State,name:Fe,styles:q,options:tt}}function ae(Fe,q,tt=null){return{type:d.Transition,expr:Fe,animation:q,options:tt}}class Pn{constructor(q=0,tt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=q+tt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(q=>q()),this._onDoneFns=[])}onStart(q){this._originalOnStartFns.push(q),this._onStartFns.push(q)}onDone(q){this._originalOnDoneFns.push(q),this._onDoneFns.push(q)}onDestroy(q){this._onDestroyFns.push(q)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(q=>q()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(q=>q()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(q){this._position=this.totalTime?q*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(q){const tt="start"==q?this._onStartFns:this._onDoneFns;tt.forEach(fn=>fn()),tt.length=0}}class pt{constructor(q){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=q;let tt=0,fn=0,nr=0;const yi=this.players.length;0==yi?queueMicrotask(()=>this._onFinish()):this.players.forEach(Ar=>{Ar.onDone(()=>{++tt==yi&&this._onFinish()}),Ar.onDestroy(()=>{++fn==yi&&this._onDestroy()}),Ar.onStart(()=>{++nr==yi&&this._onStart()})}),this.totalTime=this.players.reduce((Ar,Hs)=>Math.max(Ar,Hs.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(q=>q()),this._onDoneFns=[])}init(){this.players.forEach(q=>q.init())}onStart(q){this._onStartFns.push(q)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(q=>q()),this._onStartFns=[])}onDone(q){this._onDoneFns.push(q)}onDestroy(q){this._onDestroyFns.push(q)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(q=>q.play())}pause(){this.players.forEach(q=>q.pause())}restart(){this.players.forEach(q=>q.restart())}finish(){this._onFinish(),this.players.forEach(q=>q.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(q=>q.destroy()),this._onDestroyFns.forEach(q=>q()),this._onDestroyFns=[])}reset(){this.players.forEach(q=>q.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(q){const tt=q*this.totalTime;this.players.forEach(fn=>{const nr=fn.totalTime?Math.min(1,tt/fn.totalTime):1;fn.setPosition(nr)})}getPosition(){const q=this.players.reduce((tt,fn)=>null===tt||fn.totalTime>tt.totalTime?fn:tt,null);return null!=q?q.getPosition():0}beforeDestroy(){this.players.forEach(q=>{q.beforeDestroy&&q.beforeDestroy()})}triggerCallback(q){const tt="start"==q?this._onStartFns:this._onDoneFns;tt.forEach(fn=>fn()),tt.length=0}}const Jt="!"},8:(Ln,At,ye)=>{ye.r(At),ye.d(At,{AnimationDriver:()=>Cr,NoopAnimationDriver:()=>ba,\u0275Animation:()=>qs,\u0275AnimationEngine:()=>_o,\u0275AnimationRenderer:()=>pn,\u0275AnimationRendererFactory:()=>sl,\u0275AnimationStyleNormalizer:()=>en,\u0275BaseAnimationRenderer:()=>Yr,\u0275NoopAnimationStyleNormalizer:()=>Bt,\u0275WebAnimationsDriver:()=>Mi,\u0275WebAnimationsPlayer:()=>mc,\u0275WebAnimationsStyleNormalizer:()=>Fr,\u0275allowPreviousPlayerStylesMerge:()=>dt,\u0275camelCaseToDashCase:()=>fe,\u0275containsElement:()=>Gi,\u0275createEngine:()=>Xo,\u0275getParentElement:()=>kr,\u0275invokeQuery:()=>ao,\u0275normalizeKeyframes:()=>Ho,\u0275validateStyleProperty:()=>Qr,\u0275validateWebAnimatableStyleProperty:()=>rt});var d=ye(969),Ce=ye(438);function ne(L){return new Ce.wOt(3e3,!1)}const ze=new Set(["-moz-outline-radius","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-ms-grid-columns","-ms-grid-rows","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke","-webkit-text-stroke-color","accent-color","all","backdrop-filter","background","background-color","background-position","background-size","block-size","border","border-block-end","border-block-end-color","border-block-end-width","border-block-start","border-block-start-color","border-block-start-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-width","border-color","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-slice","border-image-width","border-inline-end","border-inline-end-color","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-width","border-left","border-left-color","border-left-width","border-radius","border-right","border-right-color","border-right-width","border-start-end-radius","border-start-start-radius","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-width","border-width","bottom","box-shadow","caret-color","clip","clip-path","color","column-count","column-gap","column-rule","column-rule-color","column-rule-width","column-width","columns","filter","flex","flex-basis","flex-grow","flex-shrink","font","font-size","font-size-adjust","font-stretch","font-variation-settings","font-weight","gap","grid-column-gap","grid-gap","grid-row-gap","grid-template-columns","grid-template-rows","height","inline-size","input-security","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","left","letter-spacing","line-clamp","line-height","margin","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","mask","mask-border","mask-position","mask-size","max-block-size","max-height","max-inline-size","max-lines","max-width","min-block-size","min-height","min-inline-size","min-width","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","outline","outline-color","outline-offset","outline-width","padding","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","perspective","perspective-origin","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-coordinate","scroll-snap-destination","scrollbar-color","shape-image-threshold","shape-margin","shape-outside","tab-size","text-decoration","text-decoration-color","text-decoration-thickness","text-emphasis","text-emphasis-color","text-indent","text-shadow","text-underline-offset","top","transform","transform-origin","translate","vertical-align","visibility","width","word-spacing","z-index","zoom"]);function De(L){switch(L.length){case 0:return new d.sf;case 1:return L[0];default:return new d.ui(L)}}function nt(L,T,D=new Map,P=new Map){const k=[],B=[];let z=-1,K=null;if(T.forEach(he=>{const Te=he.get("offset"),at=Te==z,ut=at&&K||new Map;he.forEach((gn,sn)=>{let Mt=sn,Dt=gn;if("offset"!==sn)switch(Mt=L.normalizePropertyName(Mt,k),Dt){case d.FX:Dt=D.get(sn);break;case d.kp:Dt=P.get(sn);break;default:Dt=L.normalizeStyleValue(sn,Mt,Dt,k)}ut.set(Mt,Dt)}),at||B.push(ut),K=ut,z=Te}),k.length)throw function q(L){return new Ce.wOt(3502,!1)}();return B}function mn(L,T,D,P){switch(T){case"start":L.onStart(()=>P(D&&Dr(D,"start",L)));break;case"done":L.onDone(()=>P(D&&Dr(D,"done",L)));break;case"destroy":L.onDestroy(()=>P(D&&Dr(D,"destroy",L)))}}function Dr(L,T,D){const B=Vt(L.element,L.triggerName,L.fromState,L.toState,T||L.phaseName,D.totalTime??L.totalTime,!!D.disabled),z=L._data;return null!=z&&(B._data=z),B}function Vt(L,T,D,P,k="",B=0,z){return{element:L,triggerName:T,fromState:D,toState:P,phaseName:k,totalTime:B,disabled:!!z}}function Ut(L,T,D){let P=L.get(T);return P||L.set(T,P=D),P}function sr(L){const T=L.indexOf(":");return[L.substring(1,T),L.slice(T+1)]}const Vn=typeof document>"u"?null:document.documentElement;function kr(L){const T=L.parentNode||L.host||null;return T===Vn?null:T}let or=null,rr=!1;function Qr(L){or||(or=function ns(){return typeof document<"u"?document.body:null}()||{},rr=!!or.style&&"WebkitAppearance"in or.style);let T=!0;return or.style&&!function Hi(L){return"ebkit"==L.substring(1,6)}(L)&&(T=L in or.style,!T&&rr&&(T="Webkit"+L.charAt(0).toUpperCase()+L.slice(1)in or.style)),T}function rt(L){return ze.has(L)}function Gi(L,T){for(;T;){if(T===L)return!0;T=kr(T)}return!1}function ao(L,T,D){if(D)return Array.from(L.querySelectorAll(T));const P=L.querySelector(T);return P?[P]:[]}let ba=(()=>{class L{validateStyleProperty(D){return Qr(D)}matchesElement(D,P){return!1}containsElement(D,P){return Gi(D,P)}getParentElement(D){return kr(D)}query(D,P,k){return ao(D,P,k)}computeStyle(D,P,k){return k||""}animate(D,P,k,B,z,K=[],he){return new d.sf(k,B)}static#e=this.\u0275fac=function(P){return new(P||L)};static#t=this.\u0275prov=Ce.jDH({token:L,factory:L.\u0275fac})}return L})();class Cr{static#e=this.NOOP=new ba}class en{}class Bt{normalizePropertyName(T,D){return T}normalizeStyleValue(T,D,P,k){return P}}const ui=1e3,zi="ng-enter",Xn="ng-leave",rs="ng-trigger",Lt=".ng-trigger",lo="ng-animating",bn=".ng-animating";function Ht(L){if("number"==typeof L)return L;const T=L.match(/^(-?[\.\d]+)(m?s)/);return!T||T.length<2?0:fs(parseFloat(T[1]),T[2])}function fs(L,T){return"s"===T?L*ui:L}function yn(L,T,D){return L.hasOwnProperty("duration")?L:function ps(L,T,D){let k,B=0,z="";if("string"==typeof L){const K=L.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===K)return T.push(ne()),{duration:0,delay:0,easing:""};k=fs(parseFloat(K[1]),K[2]);const he=K[3];null!=he&&(B=fs(parseFloat(he),K[4]));const Te=K[5];Te&&(z=Te)}else k=L;if(!D){let K=!1,he=T.length;k<0&&(T.push(function et(){return new Ce.wOt(3100,!1)}()),K=!0),B<0&&(T.push(function Tt(){return new Ce.wOt(3101,!1)}()),K=!0),K&&T.splice(he,0,ne())}return{duration:k,delay:B,easing:z}}(L,T,D)}function Ho(L){return L.length?L[0]instanceof Map?L:L.map(T=>new Map(Object.entries(T))):[]}function gs(L){return Array.isArray(L)?new Map(...L):new Map(L)}function lr(L,T,D){T.forEach((P,k)=>{const B=Ve(k);D&&!D.has(k)&&D.set(k,L.style[B]),L.style[B]=P})}function Et(L,T){T.forEach((D,P)=>{const k=Ve(P);L.style[k]=""})}function vi(L){return Array.isArray(L)?1==L.length?L[0]:(0,d.K2)(L):L}const Gs=new RegExp("{{\\s*(.+?)\\s*}}","g");function Q(L){let T=[];if("string"==typeof L){let D;for(;D=Gs.exec(L);)T.push(D[1]);Gs.lastIndex=0}return T}function $(L,T,D){const P=`${L}`,k=P.replace(Gs,(B,z)=>{let K=T[z];return null==K&&(D.push(function an(L){return new Ce.wOt(3003,!1)}()),K=""),K.toString()});return k==P?L:k}const ee=/-+([a-z0-9])/g;function Ve(L){return L.replace(ee,(...T)=>T[1].toUpperCase())}function fe(L){return L.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function dt(L,T){return 0===L||0===T}function nn(L,T,D){switch(T.type){case d.If.Trigger:return L.visitTrigger(T,D);case d.If.State:return L.visitState(T,D);case d.If.Transition:return L.visitTransition(T,D);case d.If.Sequence:return L.visitSequence(T,D);case d.If.Group:return L.visitGroup(T,D);case d.If.Animate:return L.visitAnimate(T,D);case d.If.Keyframes:return L.visitKeyframes(T,D);case d.If.Style:return L.visitStyle(T,D);case d.If.Reference:return L.visitReference(T,D);case d.If.AnimateChild:return L.visitAnimateChild(T,D);case d.If.AnimateRef:return L.visitAnimateRef(T,D);case d.If.Query:return L.visitQuery(T,D);case d.If.Stagger:return L.visitStagger(T,D);default:throw function mt(L){return new Ce.wOt(3004,!1)}()}}function Tn(L,T){return window.getComputedStyle(L)[T]}const li=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Fr extends en{normalizePropertyName(T,D){return Ve(T)}normalizeStyleValue(T,D,P,k){let B="";const z=P.toString().trim();if(li.has(D)&&0!==P&&"0"!==P)if("number"==typeof P)B="px";else{const K=P.match(/^[+-]?[\d\.]+([a-z]*)$/);K&&0==K[1].length&&k.push(function ae(L,T){return new Ce.wOt(3005,!1)}())}return z+B}}const Go="*";const Si=new Set(["true","1"]),ge=new Set(["false","0"]);function oe(L,T){const D=Si.has(L)||ge.has(L),P=Si.has(T)||ge.has(T);return(k,B)=>{let z=L==Go||L==k,K=T==Go||T==B;return!z&&D&&"boolean"==typeof k&&(z=k?Si.has(L):ge.has(L)),!K&&P&&"boolean"==typeof B&&(K=B?Si.has(T):ge.has(T)),z&&K}}const Ze=new RegExp("s*:selfs*,?","g");function $t(L,T,D,P){return new rn(L).build(T,D,P)}class rn{constructor(T){this._driver=T}build(T,D,P){const k=new Ei(D);return this._resetContextStyleTimingState(k),nn(this,vi(T),k)}_resetContextStyleTimingState(T){T.currentQuerySelector="",T.collectedStyles=new Map,T.collectedStyles.set("",new Map),T.currentTime=0}visitTrigger(T,D){let P=D.queryCount=0,k=D.depCount=0;const B=[],z=[];return"@"==T.name.charAt(0)&&D.errors.push(function re(){return new Ce.wOt(3006,!1)}()),T.definitions.forEach(K=>{if(this._resetContextStyleTimingState(D),K.type==d.If.State){const he=K,Te=he.name;Te.toString().split(/\s*,\s*/).forEach(at=>{he.name=at,B.push(this.visitState(he,D))}),he.name=Te}else if(K.type==d.If.Transition){const he=this.visitTransition(K,D);P+=he.queryCount,k+=he.depCount,z.push(he)}else D.errors.push(function Ne(){return new Ce.wOt(3007,!1)}())}),{type:d.If.Trigger,name:T.name,states:B,transitions:z,queryCount:P,depCount:k,options:null}}visitState(T,D){const P=this.visitStyle(T.styles,D),k=T.options&&T.options.params||null;if(P.containsDynamicStyles){const B=new Set,z=k||{};P.styles.forEach(K=>{K instanceof Map&&K.forEach(he=>{Q(he).forEach(Te=>{z.hasOwnProperty(Te)||B.add(Te)})})}),B.size&&D.errors.push(function _t(L,T){return new Ce.wOt(3008,!1)}(0,B.values()))}return{type:d.If.State,name:T.name,style:P,options:k?{params:k}:null}}visitTransition(T,D){D.queryCount=0,D.depCount=0;const P=nn(this,vi(T.animation),D),k=function In(L,T){const D=[];return"string"==typeof L?L.split(/\s*,\s*/).forEach(P=>function oc(L,T,D){if(":"==L[0]){const he=function ho(L,T){switch(L){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(D,P)=>parseFloat(P)>parseFloat(D);case":decrement":return(D,P)=>parseFloat(P)<parseFloat(D);default:return T.push(function Pn(L){return new Ce.wOt(3016,!1)}()),"* => *"}}(L,D);if("function"==typeof he)return void T.push(he);L=he}const P=L.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==P||P.length<4)return D.push(function Ot(L){return new Ce.wOt(3015,!1)}()),T;const k=P[1],B=P[2],z=P[3];T.push(oe(k,z)),"<"==B[0]&&(k!=Go||z!=Go)&&T.push(oe(z,k))}(P,D,T)):D.push(L),D}(T.expr,D.errors);return{type:d.If.Transition,matchers:k,animation:P,queryCount:D.queryCount,depCount:D.depCount,options:vn(T.options)}}visitSequence(T,D){return{type:d.If.Sequence,steps:T.steps.map(P=>nn(this,P,D)),options:vn(T.options)}}visitGroup(T,D){const P=D.currentTime;let k=0;const B=T.steps.map(z=>{D.currentTime=P;const K=nn(this,z,D);return k=Math.max(k,D.currentTime),K});return D.currentTime=k,{type:d.If.Group,steps:B,options:vn(T.options)}}visitAnimate(T,D){const P=function tl(L,T){if(L.hasOwnProperty("duration"))return L;if("number"==typeof L)return su(yn(L,T).duration,0,"");const D=L;if(D.split(/\s+/).some(B=>"{"==B.charAt(0)&&"{"==B.charAt(1))){const B=su(0,0,"");return B.dynamic=!0,B.strValue=D,B}const k=yn(D,T);return su(k.duration,k.delay,k.easing)}(T.timings,D.errors);D.currentAnimateTimings=P;let k,B=T.styles?T.styles:(0,d.iF)({});if(B.type==d.If.Keyframes)k=this.visitKeyframes(B,D);else{let z=T.styles,K=!1;if(!z){K=!0;const Te={};P.easing&&(Te.easing=P.easing),z=(0,d.iF)(Te)}D.currentTime+=P.duration+P.delay;const he=this.visitStyle(z,D);he.isEmptyStep=K,k=he}return D.currentAnimateTimings=null,{type:d.If.Animate,timings:P,style:k,options:null}}visitStyle(T,D){const P=this._makeStyleAst(T,D);return this._validateStyleAst(P,D),P}_makeStyleAst(T,D){const P=[],k=Array.isArray(T.styles)?T.styles:[T.styles];for(let K of k)"string"==typeof K?K===d.kp?P.push(K):D.errors.push(new Ce.wOt(3002,!1)):P.push(new Map(Object.entries(K)));let B=!1,z=null;return P.forEach(K=>{if(K instanceof Map&&(K.has("easing")&&(z=K.get("easing"),K.delete("easing")),!B))for(let he of K.values())if(he.toString().indexOf("{{")>=0){B=!0;break}}),{type:d.If.Style,styles:P,easing:z,offset:T.offset,containsDynamicStyles:B,options:null}}_validateStyleAst(T,D){const P=D.currentAnimateTimings;let k=D.currentTime,B=D.currentTime;P&&B>0&&(B-=P.duration+P.delay),T.styles.forEach(z=>{"string"!=typeof z&&z.forEach((K,he)=>{const Te=D.collectedStyles.get(D.currentQuerySelector),at=Te.get(he);let ut=!0;at&&(B!=k&&B>=at.startTime&&k<=at.endTime&&(D.errors.push(function un(L,T,D,P,k){return new Ce.wOt(3010,!1)}()),ut=!1),B=at.startTime),ut&&Te.set(he,{startTime:B,endTime:k}),D.options&&function Xr(L,T,D){const P=T.params||{},k=Q(L);k.length&&k.forEach(B=>{P.hasOwnProperty(B)||D.push(function Be(L){return new Ce.wOt(3001,!1)}())})}(K,D.options,D.errors)})})}visitKeyframes(T,D){const P={type:d.If.Keyframes,styles:[],options:null};if(!D.currentAnimateTimings)return D.errors.push(function wt(){return new Ce.wOt(3011,!1)}()),P;let B=0;const z=[];let K=!1,he=!1,Te=0;const at=T.steps.map(pr=>{const dr=this._makeStyleAst(pr,D);let Jr=null!=dr.offset?dr.offset:function Cs(L){if("string"==typeof L)return null;let T=null;if(Array.isArray(L))L.forEach(D=>{if(D instanceof Map&&D.has("offset")){const P=D;T=parseFloat(P.get("offset")),P.delete("offset")}});else if(L instanceof Map&&L.has("offset")){const D=L;T=parseFloat(D.get("offset")),D.delete("offset")}return T}(dr.styles),tn=0;return null!=Jr&&(B++,tn=dr.offset=Jr),he=he||tn<0||tn>1,K=K||tn<Te,Te=tn,z.push(tn),dr});he&&D.errors.push(function Rt(){return new Ce.wOt(3012,!1)}()),K&&D.errors.push(function Fn(){return new Ce.wOt(3200,!1)}());const ut=T.steps.length;let gn=0;B>0&&B<ut?D.errors.push(function ir(){return new Ce.wOt(3202,!1)}()):0==B&&(gn=1/(ut-1));const sn=ut-1,Mt=D.currentTime,Dt=D.currentAnimateTimings,Hn=Dt.duration;return at.forEach((pr,dr)=>{const Jr=gn>0?dr==sn?1:gn*dr:z[dr],tn=Jr*Hn;D.currentTime=Mt+Dt.delay+tn,Dt.duration=tn,this._validateStyleAst(pr,D),pr.offset=Jr,P.styles.push(pr)}),P}visitReference(T,D){return{type:d.If.Reference,animation:nn(this,vi(T.animation),D),options:vn(T.options)}}visitAnimateChild(T,D){return D.depCount++,{type:d.If.AnimateChild,options:vn(T.options)}}visitAnimateRef(T,D){return{type:d.If.AnimateRef,animation:this.visitReference(T.animation,D),options:vn(T.options)}}visitQuery(T,D){const P=D.currentQuerySelector,k=T.options||{};D.queryCount++,D.currentQuery=T;const[B,z]=function Yn(L){const T=!!L.split(/\s*,\s*/).find(D=>":self"==D);return T&&(L=L.replace(Ze,"")),L=L.replace(/@\*/g,Lt).replace(/@\w+/g,D=>Lt+"-"+D.slice(1)).replace(/:animating/g,bn),[L,T]}(T.selector);D.currentQuerySelector=P.length?P+" "+B:B,Ut(D.collectedStyles,D.currentQuerySelector,new Map);const K=nn(this,vi(T.animation),D);return D.currentQuery=null,D.currentQuerySelector=P,{type:d.If.Query,selector:B,limit:k.limit||0,optional:!!k.optional,includeSelf:z,animation:K,originalSelector:T.selector,options:vn(T.options)}}visitStagger(T,D){D.currentQuery||D.errors.push(function Yt(){return new Ce.wOt(3013,!1)}());const P="full"===T.timings?{duration:0,delay:0,easing:"full"}:yn(T.timings,D.errors,!0);return{type:d.If.Stagger,animation:nn(this,vi(T.animation),D),timings:P,options:null}}}class Ei{constructor(T){this.errors=T,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vn(L){return L?(L={...L}).params&&(L.params=function It(L){return L?{...L}:null}(L.params)):L={},L}function su(L,T,D){return{duration:L,delay:T,easing:D}}function fo(L,T,D,P,k,B,z=null,K=!1){return{type:1,element:L,keyframes:T,preStyleProps:D,postStyleProps:P,duration:k,delay:B,totalTime:k+B,easing:z,subTimeline:K}}class po{constructor(){this._map=new Map}get(T){return this._map.get(T)||[]}append(T,D){let P=this._map.get(T);P||this._map.set(T,P=[]),P.push(...D)}has(T){return this._map.has(T)}clear(){this._map.clear()}}const e_=new RegExp(":enter","g"),go=new RegExp(":leave","g");function au(L,T,D,P,k,B=new Map,z=new Map,K,he,Te=[]){return(new ac).buildKeyframes(L,T,D,P,k,B,z,K,he,Te)}class ac{buildKeyframes(T,D,P,k,B,z,K,he,Te,at=[]){Te=Te||new po;const ut=new ms(T,D,Te,k,B,at,[]);ut.options=he;const gn=he.delay?Ht(he.delay):0;ut.currentTimeline.delayNextStep(gn),ut.currentTimeline.setStyles([z],null,ut.errors,he),nn(this,P,ut);const sn=ut.timelines.filter(Mt=>Mt.containsAnimation());if(sn.length&&K.size){let Mt;for(let Dt=sn.length-1;Dt>=0;Dt--){const Hn=sn[Dt];if(Hn.element===D){Mt=Hn;break}}Mt&&!Mt.allowOnlyTimelineStyles()&&Mt.setStyles([K],null,ut.errors,he)}return sn.length?sn.map(Mt=>Mt.buildKeyframes()):[fo(D,[],[],[],0,gn,"",!1)]}visitTrigger(T,D){}visitState(T,D){}visitTransition(T,D){}visitAnimateChild(T,D){const P=D.subInstructions.get(D.element);if(P){const k=D.createSubContext(T.options),B=D.currentTimeline.currentTime,z=this._visitSubInstructions(P,k,k.options);B!=z&&D.transformIntoNewTimeline(z)}D.previousNode=T}visitAnimateRef(T,D){const P=D.createSubContext(T.options);P.transformIntoNewTimeline(),this._applyAnimationRefDelays([T.options,T.animation.options],D,P),this.visitReference(T.animation,P),D.transformIntoNewTimeline(P.currentTimeline.currentTime),D.previousNode=T}_applyAnimationRefDelays(T,D,P){for(const k of T){const B=k?.delay;if(B){const z="number"==typeof B?B:Ht($(B,k?.params??{},D.errors));P.delayNextStep(z)}}}_visitSubInstructions(T,D,P){let B=D.currentTimeline.currentTime;const z=null!=P.duration?Ht(P.duration):null,K=null!=P.delay?Ht(P.delay):null;return 0!==z&&T.forEach(he=>{const Te=D.appendInstructionToTimeline(he,z,K);B=Math.max(B,Te.duration+Te.delay)}),B}visitReference(T,D){D.updateOptions(T.options,!0),nn(this,T.animation,D),D.previousNode=T}visitSequence(T,D){const P=D.subContextCount;let k=D;const B=T.options;if(B&&(B.params||B.delay)&&(k=D.createSubContext(B),k.transformIntoNewTimeline(),null!=B.delay)){k.previousNode.type==d.If.Style&&(k.currentTimeline.snapshotCurrentStyles(),k.previousNode=uu);const z=Ht(B.delay);k.delayNextStep(z)}T.steps.length&&(T.steps.forEach(z=>nn(this,z,k)),k.currentTimeline.applyStylesToKeyframe(),k.subContextCount>P&&k.transformIntoNewTimeline()),D.previousNode=T}visitGroup(T,D){const P=[];let k=D.currentTimeline.currentTime;const B=T.options&&T.options.delay?Ht(T.options.delay):0;T.steps.forEach(z=>{const K=D.createSubContext(T.options);B&&K.delayNextStep(B),nn(this,z,K),k=Math.max(k,K.currentTimeline.currentTime),P.push(K.currentTimeline)}),P.forEach(z=>D.currentTimeline.mergeTimelineCollectedStyles(z)),D.transformIntoNewTimeline(k),D.previousNode=T}_visitTiming(T,D){if(T.dynamic){const P=T.strValue;return yn(D.params?$(P,D.params,D.errors):P,D.errors)}return{duration:T.duration,delay:T.delay,easing:T.easing}}visitAnimate(T,D){const P=D.currentAnimateTimings=this._visitTiming(T.timings,D),k=D.currentTimeline;P.delay&&(D.incrementTime(P.delay),k.snapshotCurrentStyles());const B=T.style;B.type==d.If.Keyframes?this.visitKeyframes(B,D):(D.incrementTime(P.duration),this.visitStyle(B,D),k.applyStylesToKeyframe()),D.currentAnimateTimings=null,D.previousNode=T}visitStyle(T,D){const P=D.currentTimeline,k=D.currentAnimateTimings;!k&&P.hasCurrentStyleProperties()&&P.forwardFrame();const B=k&&k.easing||T.easing;T.isEmptyStep?P.applyEmptyStep(B):P.setStyles(T.styles,B,D.errors,D.options),D.previousNode=T}visitKeyframes(T,D){const P=D.currentAnimateTimings,k=D.currentTimeline.duration,B=P.duration,K=D.createSubContext().currentTimeline;K.easing=P.easing,T.styles.forEach(he=>{K.forwardTime((he.offset||0)*B),K.setStyles(he.styles,he.easing,D.errors,D.options),K.applyStylesToKeyframe()}),D.currentTimeline.mergeTimelineCollectedStyles(K),D.transformIntoNewTimeline(k+B),D.previousNode=T}visitQuery(T,D){const P=D.currentTimeline.currentTime,k=T.options||{},B=k.delay?Ht(k.delay):0;B&&(D.previousNode.type===d.If.Style||0==P&&D.currentTimeline.hasCurrentStyleProperties())&&(D.currentTimeline.snapshotCurrentStyles(),D.previousNode=uu);let z=P;const K=D.invokeQuery(T.selector,T.originalSelector,T.limit,T.includeSelf,!!k.optional,D.errors);D.currentQueryTotal=K.length;let he=null;K.forEach((Te,at)=>{D.currentQueryIndex=at;const ut=D.createSubContext(T.options,Te);B&&ut.delayNextStep(B),Te===D.element&&(he=ut.currentTimeline),nn(this,T.animation,ut),ut.currentTimeline.applyStylesToKeyframe(),z=Math.max(z,ut.currentTimeline.currentTime)}),D.currentQueryIndex=0,D.currentQueryTotal=0,D.transformIntoNewTimeline(z),he&&(D.currentTimeline.mergeTimelineCollectedStyles(he),D.currentTimeline.snapshotCurrentStyles()),D.previousNode=T}visitStagger(T,D){const P=D.parentContext,k=D.currentTimeline,B=T.timings,z=Math.abs(B.duration),K=z*(D.currentQueryTotal-1);let he=z*D.currentQueryIndex;switch(B.duration<0?"reverse":B.easing){case"reverse":he=K-he;break;case"full":he=P.currentStaggerTime}const at=D.currentTimeline;he&&at.delayNextStep(he);const ut=at.currentTime;nn(this,T.animation,D),D.previousNode=T,P.currentStaggerTime=k.currentTime-ut+(k.startTime-P.currentTimeline.startTime)}}const uu={};class ms{constructor(T,D,P,k,B,z,K,he){this._driver=T,this.element=D,this.subInstructions=P,this._enterClassName=k,this._leaveClassName=B,this.errors=z,this.timelines=K,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=uu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=he||new _s(this._driver,D,0),K.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(T,D){if(!T)return;const P=T;let k=this.options;null!=P.duration&&(k.duration=Ht(P.duration)),null!=P.delay&&(k.delay=Ht(P.delay));const B=P.params;if(B){let z=k.params;z||(z=this.options.params={}),Object.keys(B).forEach(K=>{(!D||!z.hasOwnProperty(K))&&(z[K]=$(B[K],z,this.errors))})}}_copyOptions(){const T={};if(this.options){const D=this.options.params;if(D){const P=T.params={};Object.keys(D).forEach(k=>{P[k]=D[k]})}}return T}createSubContext(T=null,D,P){const k=D||this.element,B=new ms(this._driver,k,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(k,P||0));return B.previousNode=this.previousNode,B.currentAnimateTimings=this.currentAnimateTimings,B.options=this._copyOptions(),B.updateOptions(T),B.currentQueryIndex=this.currentQueryIndex,B.currentQueryTotal=this.currentQueryTotal,B.parentContext=this,this.subContextCount++,B}transformIntoNewTimeline(T){return this.previousNode=uu,this.currentTimeline=this.currentTimeline.fork(this.element,T),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(T,D,P){const k={duration:D??T.duration,delay:this.currentTimeline.currentTime+(P??0)+T.delay,easing:""},B=new lu(this._driver,T.element,T.keyframes,T.preStyleProps,T.postStyleProps,k,T.stretchStartingKeyframe);return this.timelines.push(B),k}incrementTime(T){this.currentTimeline.forwardTime(this.currentTimeline.duration+T)}delayNextStep(T){T>0&&this.currentTimeline.delayNextStep(T)}invokeQuery(T,D,P,k,B,z){let K=[];if(k&&K.push(this.element),T.length>0){T=(T=T.replace(e_,"."+this._enterClassName)).replace(go,"."+this._leaveClassName);let Te=this._driver.query(this.element,T,1!=P);0!==P&&(Te=P<0?Te.slice(Te.length+P,Te.length):Te.slice(0,P)),K.push(...Te)}return!B&&0==K.length&&z.push(function Je(L){return new Ce.wOt(3014,!1)}()),K}}class _s{constructor(T,D,P,k){this._driver=T,this.element=D,this.startTime=P,this._elementTimelineStylesLookup=k,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(D),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(D,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(T){const D=1===this._keyframes.size&&this._pendingStyles.size;this.duration||D?(this.forwardTime(this.currentTime+T),D&&this.snapshotCurrentStyles()):this.startTime+=T}fork(T,D){return this.applyStylesToKeyframe(),new _s(this._driver,T,D||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(T){this.applyStylesToKeyframe(),this.duration=T,this._loadKeyframe()}_updateStyle(T,D){this._localTimelineStyles.set(T,D),this._globalTimelineStyles.set(T,D),this._styleSummary.set(T,{time:this.currentTime,value:D})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(T){T&&this._previousKeyframe.set("easing",T);for(let[D,P]of this._globalTimelineStyles)this._backFill.set(D,P||d.kp),this._currentKeyframe.set(D,d.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(T,D,P,k){D&&this._previousKeyframe.set("easing",D);const B=k&&k.params||{},z=function Mn(L,T){const D=new Map;let P;return L.forEach(k=>{if("*"===k){P??=T.keys();for(let B of P)D.set(B,d.kp)}else for(let[B,z]of k)D.set(B,z)}),D}(T,this._globalTimelineStyles);for(let[K,he]of z){const Te=$(he,B,P);this._pendingStyles.set(K,Te),this._localTimelineStyles.has(K)||this._backFill.set(K,this._globalTimelineStyles.get(K)??d.kp),this._updateStyle(K,Te)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((T,D)=>{this._currentKeyframe.set(D,T)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((T,D)=>{this._currentKeyframe.has(D)||this._currentKeyframe.set(D,T)}))}snapshotCurrentStyles(){for(let[T,D]of this._localTimelineStyles)this._pendingStyles.set(T,D),this._updateStyle(T,D)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const T=[];for(let D in this._currentKeyframe)T.push(D);return T}mergeTimelineCollectedStyles(T){T._styleSummary.forEach((D,P)=>{const k=this._styleSummary.get(P);(!k||D.time>k.time)&&this._updateStyle(P,D.value)})}buildKeyframes(){this.applyStylesToKeyframe();const T=new Set,D=new Set,P=1===this._keyframes.size&&0===this.duration;let k=[];this._keyframes.forEach((K,he)=>{const Te=new Map([...this._backFill,...K]);Te.forEach((at,ut)=>{at===d.FX?T.add(ut):at===d.kp&&D.add(ut)}),P||Te.set("offset",he/this.duration),k.push(Te)});const B=[...T.values()],z=[...D.values()];if(P){const K=k[0],he=new Map(K);K.set("offset",0),he.set("offset",1),k=[K,he]}return fo(this.element,k,B,z,this.duration,this.startTime,this.easing,!1)}}class lu extends _s{constructor(T,D,P,k,B,z,K=!1){super(T,D,z.delay),this.keyframes=P,this.preStyleProps=k,this.postStyleProps=B,this._stretchStartingKeyframe=K,this.timings={duration:z.duration,delay:z.delay,easing:z.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let T=this.keyframes,{delay:D,duration:P,easing:k}=this.timings;if(this._stretchStartingKeyframe&&D){const B=[],z=P+D,K=D/z,he=new Map(T[0]);he.set("offset",0),B.push(he);const Te=new Map(T[0]);Te.set("offset",qt(K)),B.push(Te);const at=T.length-1;for(let ut=1;ut<=at;ut++){let gn=new Map(T[ut]);const sn=gn.get("offset");gn.set("offset",qt((D+sn*P)/z)),B.push(gn)}P=z,D=0,k="",T=B}return fo(this.element,T,this.preStyleProps,this.postStyleProps,P,D,k,!0)}}function qt(L,T=3){const D=Math.pow(10,T-1);return Math.round(L*D)/D}function nh(L,T,D,P,k,B,z,K,he,Te,at,ut,gn){return{type:0,element:L,triggerName:T,isRemovalTransition:k,fromState:D,fromStyles:B,toState:P,toStyles:z,timelines:K,queriedElements:he,preStyleProps:Te,postStyleProps:at,totalTime:ut,errors:gn}}const qi={};class rh{constructor(T,D,P){this._triggerName=T,this.ast=D,this._stateStyles=P}match(T,D,P,k){return function ih(L,T,D,P,k){return L.some(B=>B(T,D,P,k))}(this.ast.matchers,T,D,P,k)}buildStyles(T,D,P){let k=this._stateStyles.get("*");return void 0!==T&&(k=this._stateStyles.get(T?.toString())||k),k?k.buildStyles(D,P):new Map}build(T,D,P,k,B,z,K,he,Te,at){const ut=[],gn=this.ast.options&&this.ast.options.params||qi,Mt=this.buildStyles(P,K&&K.params||qi,ut),Dt=he&&he.params||qi,Hn=this.buildStyles(k,Dt,ut),pr=new Set,dr=new Map,Jr=new Map,tn="void"===k,Jo={params:nl(Dt,gn),delay:this.ast.options?.delay},ys=at?[]:au(T,D,this.ast.animation,B,z,Mt,Hn,Jo,Te,ut);let di=0;return ys.forEach(hi=>{di=Math.max(hi.duration+hi.delay,di)}),ut.length?nh(D,this._triggerName,P,k,tn,Mt,Hn,[],[],dr,Jr,di,ut):(ys.forEach(hi=>{const yo=hi.element,Zo=Ut(dr,yo,new Set);hi.preStyleProps.forEach(vo=>Zo.add(vo));const _c=Ut(Jr,yo,new Set);hi.postStyleProps.forEach(vo=>_c.add(vo)),yo!==D&&pr.add(yo)}),nh(D,this._triggerName,P,k,tn,Mt,Hn,ys,[...pr.values()],dr,Jr,di))}}function nl(L,T){const D={...T};return Object.entries(L).forEach(([P,k])=>{null!=k&&(D[P]=k)}),D}class _n{constructor(T,D,P){this.styles=T,this.defaultParams=D,this.normalizer=P}buildStyles(T,D){const P=new Map,k=nl(T,this.defaultParams);return this.styles.styles.forEach(B=>{"string"!=typeof B&&B.forEach((z,K)=>{z&&(z=$(z,k,D));const he=this.normalizer.normalizePropertyName(K,D);z=this.normalizer.normalizeStyleValue(K,he,z,D),P.set(K,z)})}),P}}class zo{constructor(T,D,P){this.name=T,this.ast=D,this._normalizer=P,this.transitionFactories=[],this.states=new Map,D.states.forEach(k=>{this.states.set(k.name,new _n(k.style,k.options&&k.options.params||{},P))}),cu(this.states,"true","1"),cu(this.states,"false","0"),D.transitions.forEach(k=>{this.transitionFactories.push(new rh(T,k,this.states))}),this.fallbackTransition=function ci(L,T,D){return new rh(L,{type:d.If.Transition,animation:{type:d.If.Sequence,steps:[],options:null},matchers:[(z,K)=>!0],options:null,queryCount:0,depCount:0},T)}(T,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(T,D,P,k){return this.transitionFactories.find(z=>z.match(T,D,P,k))||null}matchStyles(T,D,P){return this.fallbackTransition.buildStyles(T,D,P)}}function cu(L,T,D){L.has(T)?L.has(D)||L.set(D,L.get(T)):L.has(D)&&L.set(T,L.get(D))}const n_=new po;class sh{constructor(T,D,P){this.bodyNode=T,this._driver=D,this._normalizer=P,this._animations=new Map,this._playersById=new Map,this.players=[]}register(T,D){const P=[],B=$t(this._driver,D,P,[]);if(P.length)throw function tt(L){return new Ce.wOt(3503,!1)}();this._animations.set(T,B)}_buildPlayer(T,D,P){const k=T.element,B=nt(this._normalizer,T.keyframes,D,P);return this._driver.animate(k,B,T.duration,T.delay,T.easing,[],!0)}create(T,D,P={}){const k=[],B=this._animations.get(T);let z;const K=new Map;if(B?(z=au(this._driver,D,B,zi,Xn,new Map,new Map,P,n_,k),z.forEach(at=>{const ut=Ut(K,at.element,new Map);at.postStyleProps.forEach(gn=>ut.set(gn,null))})):(k.push(function fn(){return new Ce.wOt(3300,!1)}()),z=[]),k.length)throw function nr(L){return new Ce.wOt(3504,!1)}();K.forEach((at,ut)=>{at.forEach((gn,sn)=>{at.set(sn,this._driver.computeStyle(ut,sn,d.kp))})});const Te=De(z.map(at=>{const ut=K.get(at.element);return this._buildPlayer(at,new Map,ut)}));return this._playersById.set(T,Te),Te.onDestroy(()=>this.destroy(T)),this.players.push(Te),Te}destroy(T){const D=this._getPlayer(T);D.destroy(),this._playersById.delete(T);const P=this.players.indexOf(D);P>=0&&this.players.splice(P,1)}_getPlayer(T){const D=this._playersById.get(T);if(!D)throw function yi(L){return new Ce.wOt(3301,!1)}();return D}listen(T,D,P,k){const B=Vt(D,"","","");return mn(this._getPlayer(T),P,B,k),()=>{}}command(T,D,P,k){if("register"==P)return void this.register(T,k[0]);if("create"==P)return void this.create(T,D,k[0]||{});const B=this._getPlayer(T);switch(P){case"play":B.play();break;case"pause":B.pause();break;case"reset":B.reset();break;case"restart":B.restart();break;case"finish":B.finish();break;case"init":B.init();break;case"setPosition":B.setPosition(parseFloat(k[0]));break;case"destroy":this.destroy(T)}}}const Ra="ng-animate-queued",Pa="ng-animate-disabled",hu=[],zs={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},oh={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Rr="__ng_removed";class dc{get params(){return this.options.params}constructor(T,D=""){this.namespaceId=D;const P=T&&T.hasOwnProperty("value");if(this.value=function rl(L){return L??null}(P?T.value:T),P){const{value:B,...z}=T;this.options=z}else this.options={};this.options.params||(this.options.params={})}absorbOptions(T){const D=T.params;if(D){const P=this.options.params;Object.keys(D).forEach(k=>{null==P[k]&&(P[k]=D[k])})}}}const cr="void",Ma=new dc(cr);class zt{constructor(T,D,P){this.id=T,this.hostElement=D,this._engine=P,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+T,Ri(D,this._hostClassName)}listen(T,D,P,k){if(!this._triggers.has(D))throw function Ar(L,T){return new Ce.wOt(3302,!1)}();if(null==P||0==P.length)throw function Hs(L){return new Ce.wOt(3303,!1)}();if(!function fc(L){return"start"==L||"done"==L}(P))throw function Ca(L,T){return new Ce.wOt(3400,!1)}();const B=Ut(this._elementListeners,T,[]),z={name:D,phase:P,callback:k};B.push(z);const K=Ut(this._engine.statesByElement,T,new Map);return K.has(D)||(Ri(T,rs),Ri(T,rs+"-"+D),K.set(D,Ma)),()=>{this._engine.afterFlush(()=>{const he=B.indexOf(z);he>=0&&B.splice(he,1),this._triggers.has(D)||K.delete(D)})}}register(T,D){return!this._triggers.has(T)&&(this._triggers.set(T,D),!0)}_getTrigger(T){const D=this._triggers.get(T);if(!D)throw function _e(L){return new Ce.wOt(3401,!1)}();return D}trigger(T,D,P,k=!0){const B=this._getTrigger(D),z=new Na(this.id,D,T);let K=this._engine.statesByElement.get(T);K||(Ri(T,rs),Ri(T,rs+"-"+D),this._engine.statesByElement.set(T,K=new Map));let he=K.get(D);const Te=new dc(P,this.id);if(!(P&&P.hasOwnProperty("value"))&&he&&Te.absorbOptions(he.options),K.set(D,Te),he||(he=Ma),Te.value!==cr&&he.value===Te.value){if(!function mo(L,T){const D=Object.keys(L),P=Object.keys(T);if(D.length!=P.length)return!1;for(let k=0;k<D.length;k++){const B=D[k];if(!T.hasOwnProperty(B)||L[B]!==T[B])return!1}return!0}(he.params,Te.params)){const Dt=[],Hn=B.matchStyles(he.value,he.params,Dt),pr=B.matchStyles(Te.value,Te.params,Dt);Dt.length?this._engine.reportError(Dt):this._engine.afterFlush(()=>{Et(T,Hn),lr(T,pr)})}return}const gn=Ut(this._engine.playersByElement,T,[]);gn.forEach(Dt=>{Dt.namespaceId==this.id&&Dt.triggerName==D&&Dt.queued&&Dt.destroy()});let sn=B.matchTransition(he.value,Te.value,T,Te.params),Mt=!1;if(!sn){if(!k)return;sn=B.fallbackTransition,Mt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:T,triggerName:D,transition:sn,fromState:he,toState:Te,player:z,isFallbackTransition:Mt}),Mt||(Ri(T,Ra),z.onStart(()=>{Pi(T,Ra)})),z.onDone(()=>{let Dt=this.players.indexOf(z);Dt>=0&&this.players.splice(Dt,1);const Hn=this._engine.playersByElement.get(T);if(Hn){let pr=Hn.indexOf(z);pr>=0&&Hn.splice(pr,1)}}),this.players.push(z),gn.push(z),z}deregister(T){this._triggers.delete(T),this._engine.statesByElement.forEach(D=>D.delete(T)),this._elementListeners.forEach((D,P)=>{this._elementListeners.set(P,D.filter(k=>k.name!=T))})}clearElementCache(T){this._engine.statesByElement.delete(T),this._elementListeners.delete(T);const D=this._engine.playersByElement.get(T);D&&(D.forEach(P=>P.destroy()),this._engine.playersByElement.delete(T))}_signalRemovalForInnerTriggers(T,D){const P=this._engine.driver.query(T,Lt,!0);P.forEach(k=>{if(k[Rr])return;const B=this._engine.fetchNamespacesByElement(k);B.size?B.forEach(z=>z.triggerLeaveAnimation(k,D,!1,!0)):this.clearElementCache(k)}),this._engine.afterFlushAnimationsDone(()=>P.forEach(k=>this.clearElementCache(k)))}triggerLeaveAnimation(T,D,P,k){const B=this._engine.statesByElement.get(T),z=new Map;if(B){const K=[];if(B.forEach((he,Te)=>{if(z.set(Te,he.value),this._triggers.has(Te)){const at=this.trigger(T,Te,cr,k);at&&K.push(at)}}),K.length)return this._engine.markElementAsRemoved(this.id,T,!0,D,z),P&&De(K).onDone(()=>this._engine.processLeaveNode(T)),!0}return!1}prepareLeaveAnimationListeners(T){const D=this._elementListeners.get(T),P=this._engine.statesByElement.get(T);if(D&&P){const k=new Set;D.forEach(B=>{const z=B.name;if(k.has(z))return;k.add(z);const he=this._triggers.get(z).fallbackTransition,Te=P.get(z)||Ma,at=new dc(cr),ut=new Na(this.id,z,T);this._engine.totalQueuedPlayers++,this._queue.push({element:T,triggerName:z,transition:he,fromState:Te,toState:at,player:ut,isFallbackTransition:!0})})}}removeNode(T,D){const P=this._engine;if(T.childElementCount&&this._signalRemovalForInnerTriggers(T,D),this.triggerLeaveAnimation(T,D,!0))return;let k=!1;if(P.totalAnimations){const B=P.players.length?P.playersByQueriedElement.get(T):[];if(B&&B.length)k=!0;else{let z=T;for(;z=z.parentNode;)if(P.statesByElement.get(z)){k=!0;break}}}if(this.prepareLeaveAnimationListeners(T),k)P.markElementAsRemoved(this.id,T,!1,D);else{const B=T[Rr];(!B||B===zs)&&(P.afterFlush(()=>this.clearElementCache(T)),P.destroyInnerAnimations(T),P._onRemovalComplete(T,D))}}insertNode(T,D){Ri(T,this._hostClassName)}drainQueuedTransitions(T){const D=[];return this._queue.forEach(P=>{const k=P.player;if(k.destroyed)return;const B=P.element,z=this._elementListeners.get(B);z&&z.forEach(K=>{if(K.name==P.triggerName){const he=Vt(B,P.triggerName,P.fromState.value,P.toState.value);he._data=T,mn(P.player,K.phase,he,K.callback)}}),k.markedForDestroy?this._engine.afterFlush(()=>{k.destroy()}):D.push(P)}),this._queue=[],D.sort((P,k)=>{const B=P.transition.ast.depCount,z=k.transition.ast.depCount;return 0==B||0==z?B-z:this._engine.driver.containsElement(P.element,k.element)?1:-1})}destroy(T){this.players.forEach(D=>D.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,T)}}class hc{_onRemovalComplete(T,D){this.onRemovalComplete(T,D)}constructor(T,D,P,k){this.bodyNode=T,this.driver=D,this._normalizer=P,this.scheduler=k,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(B,z)=>{}}get queuedPlayers(){const T=[];return this._namespaceList.forEach(D=>{D.players.forEach(P=>{P.queued&&T.push(P)})}),T}createNamespace(T,D){const P=new zt(T,D,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,D)?this._balanceNamespaceList(P,D):(this.newHostElements.set(D,P),this.collectEnterElement(D)),this._namespaceLookup[T]=P}_balanceNamespaceList(T,D){const P=this._namespaceList,k=this.namespacesByHostElement;if(P.length-1>=0){let z=!1,K=this.driver.getParentElement(D);for(;K;){const he=k.get(K);if(he){const Te=P.indexOf(he);P.splice(Te+1,0,T),z=!0;break}K=this.driver.getParentElement(K)}z||P.unshift(T)}else P.push(T);return k.set(D,T),T}register(T,D){let P=this._namespaceLookup[T];return P||(P=this.createNamespace(T,D)),P}registerTrigger(T,D,P){let k=this._namespaceLookup[T];k&&k.register(D,P)&&this.totalAnimations++}destroy(T,D){T&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const P=this._fetchNamespace(T);this.namespacesByHostElement.delete(P.hostElement);const k=this._namespaceList.indexOf(P);k>=0&&this._namespaceList.splice(k,1),P.destroy(D),delete this._namespaceLookup[T]}))}_fetchNamespace(T){return this._namespaceLookup[T]}fetchNamespacesByElement(T){const D=new Set,P=this.statesByElement.get(T);if(P)for(let k of P.values())if(k.namespaceId){const B=this._fetchNamespace(k.namespaceId);B&&D.add(B)}return D}trigger(T,D,P,k){if(il(D)){const B=this._fetchNamespace(T);if(B)return B.trigger(D,P,k),!0}return!1}insertNode(T,D,P,k){if(!il(D))return;const B=D[Rr];if(B&&B.setForRemoval){B.setForRemoval=!1,B.setForMove=!0;const z=this.collectedLeaveElements.indexOf(D);z>=0&&this.collectedLeaveElements.splice(z,1)}if(T){const z=this._fetchNamespace(T);z&&z.insertNode(D,P)}k&&this.collectEnterElement(D)}collectEnterElement(T){this.collectedEnterElements.push(T)}markElementAsDisabled(T,D){D?this.disabledNodes.has(T)||(this.disabledNodes.add(T),Ri(T,Pa)):this.disabledNodes.has(T)&&(this.disabledNodes.delete(T),Pi(T,Pa))}removeNode(T,D,P){if(il(D)){this.scheduler?.notify();const k=T?this._fetchNamespace(T):null;k?k.removeNode(D,P):this.markElementAsRemoved(T,D,!1,P);const B=this.namespacesByHostElement.get(D);B&&B.id!==T&&B.removeNode(D,P)}else this._onRemovalComplete(D,P)}markElementAsRemoved(T,D,P,k,B){this.collectedLeaveElements.push(D),D[Rr]={namespaceId:T,setForRemoval:k,hasAnimation:P,removedBeforeQueried:!1,previousTriggersValues:B}}listen(T,D,P,k,B){return il(D)?this._fetchNamespace(T).listen(D,P,k,B):()=>{}}_buildInstruction(T,D,P,k,B){return T.transition.build(this.driver,T.element,T.fromState.value,T.toState.value,P,k,T.fromState.options,T.toState.options,D,B)}destroyInnerAnimations(T){let D=this.driver.query(T,Lt,!0);D.forEach(P=>this.destroyActiveAnimationsForElement(P)),0!=this.playersByQueriedElement.size&&(D=this.driver.query(T,bn,!0),D.forEach(P=>this.finishActiveQueriedAnimationOnElement(P)))}destroyActiveAnimationsForElement(T){const D=this.playersByElement.get(T);D&&D.forEach(P=>{P.queued?P.markedForDestroy=!0:P.destroy()})}finishActiveQueriedAnimationOnElement(T){const D=this.playersByQueriedElement.get(T);D&&D.forEach(P=>P.finish())}whenRenderingDone(){return new Promise(T=>{if(this.players.length)return De(this.players).onDone(()=>T());T()})}processLeaveNode(T){const D=T[Rr];if(D&&D.setForRemoval){if(T[Rr]=zs,D.namespaceId){this.destroyInnerAnimations(T);const P=this._fetchNamespace(D.namespaceId);P&&P.clearElementCache(T)}this._onRemovalComplete(T,D.setForRemoval)}T.classList?.contains(Pa)&&this.markElementAsDisabled(T,!1),this.driver.query(T,".ng-animate-disabled",!0).forEach(P=>{this.markElementAsDisabled(P,!1)})}flush(T=-1){let D=[];if(this.newHostElements.size&&(this.newHostElements.forEach((P,k)=>this._balanceNamespaceList(P,k)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let P=0;P<this.collectedEnterElements.length;P++)Ri(this.collectedEnterElements[P],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const P=[];try{D=this._flushAnimations(P,T)}finally{for(let k=0;k<P.length;k++)P[k]()}}else for(let P=0;P<this.collectedLeaveElements.length;P++)this.processLeaveNode(this.collectedLeaveElements[P]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(P=>P()),this._flushFns=[],this._whenQuietFns.length){const P=this._whenQuietFns;this._whenQuietFns=[],D.length?De(D).onDone(()=>{P.forEach(k=>k())}):P.forEach(k=>k())}}reportError(T){throw function we(L){return new Ce.wOt(3402,!1)}()}_flushAnimations(T,D){const P=new po,k=[],B=new Map,z=[],K=new Map,he=new Map,Te=new Map,at=new Set;this.disabledNodes.forEach(yt=>{at.add(yt);const He=this.driver.query(yt,".ng-animate-queued",!0);for(let lt=0;lt<He.length;lt++)at.add(He[lt])});const ut=this.bodyNode,gn=Array.from(this.statesByElement.keys()),sn=qo(gn,this.collectedEnterElements),Mt=new Map;let Dt=0;sn.forEach((yt,He)=>{const lt=zi+Dt++;Mt.set(He,lt),yt.forEach(Nt=>Ri(Nt,lt))});const Hn=[],pr=new Set,dr=new Set;for(let yt=0;yt<this.collectedLeaveElements.length;yt++){const He=this.collectedLeaveElements[yt],lt=He[Rr];lt&&lt.setForRemoval&&(Hn.push(He),pr.add(He),lt.hasAnimation?this.driver.query(He,".ng-star-inserted",!0).forEach(Nt=>pr.add(Nt)):dr.add(He))}const Jr=new Map,tn=qo(gn,Array.from(pr));tn.forEach((yt,He)=>{const lt=Xn+Dt++;Jr.set(He,lt),yt.forEach(Nt=>Ri(Nt,lt))}),T.push(()=>{sn.forEach((yt,He)=>{const lt=Mt.get(He);yt.forEach(Nt=>Pi(Nt,lt))}),tn.forEach((yt,He)=>{const lt=Jr.get(He);yt.forEach(Nt=>Pi(Nt,lt))}),Hn.forEach(yt=>{this.processLeaveNode(yt)})});const Jo=[],ys=[];for(let yt=this._namespaceList.length-1;yt>=0;yt--)this._namespaceList[yt].drainQueuedTransitions(D).forEach(lt=>{const Nt=lt.player,Sn=lt.element;if(Jo.push(Nt),this.collectedEnterElements.length){const gr=Sn[Rr];if(gr&&gr.setForMove){if(gr.previousTriggersValues&&gr.previousTriggersValues.has(lt.triggerName)){const Eo=gr.previousTriggersValues.get(lt.triggerName),Zr=this.statesByElement.get(lt.element);if(Zr&&Zr.has(lt.triggerName)){const La=Zr.get(lt.triggerName);La.value=Eo,Zr.set(lt.triggerName,La)}}return void Nt.destroy()}}const Un=!ut||!this.driver.containsElement(ut,Sn),wi=Jr.get(Sn),is=Mt.get(Sn),Bn=this._buildInstruction(lt,P,is,wi,Un);if(Bn.errors&&Bn.errors.length)return void ys.push(Bn);if(Un)return Nt.onStart(()=>Et(Sn,Bn.fromStyles)),Nt.onDestroy(()=>lr(Sn,Bn.toStyles)),void k.push(Nt);if(lt.isFallbackTransition)return Nt.onStart(()=>Et(Sn,Bn.fromStyles)),Nt.onDestroy(()=>lr(Sn,Bn.toStyles)),void k.push(Nt);const yc=[];Bn.timelines.forEach(gr=>{gr.stretchStartingKeyframe=!0,this.disabledNodes.has(gr.element)||yc.push(gr)}),Bn.timelines=yc,P.append(Sn,Bn.timelines),z.push({instruction:Bn,player:Nt,element:Sn}),Bn.queriedElements.forEach(gr=>Ut(K,gr,[]).push(Nt)),Bn.preStyleProps.forEach((gr,Eo)=>{if(gr.size){let Zr=he.get(Eo);Zr||he.set(Eo,Zr=new Set),gr.forEach((La,ea)=>Zr.add(ea))}}),Bn.postStyleProps.forEach((gr,Eo)=>{let Zr=Te.get(Eo);Zr||Te.set(Eo,Zr=new Set),gr.forEach((La,ea)=>Zr.add(ea))})});if(ys.length){const yt=[];ys.forEach(He=>{yt.push(function xe(L,T){return new Ce.wOt(3505,!1)}())}),Jo.forEach(He=>He.destroy()),this.reportError(yt)}const di=new Map,hi=new Map;z.forEach(yt=>{const He=yt.element;P.has(He)&&(hi.set(He,He),this._beforeAnimationBuild(yt.player.namespaceId,yt.instruction,di))}),k.forEach(yt=>{const He=yt.element;this._getPreviousPlayers(He,!1,yt.namespaceId,yt.triggerName,null).forEach(Nt=>{Ut(di,He,[]).push(Nt),Nt.destroy()})});const yo=Hn.filter(yt=>gc(yt,he,Te)),Zo=new Map;Wi(Zo,this.driver,dr,Te,d.kp).forEach(yt=>{gc(yt,he,Te)&&yo.push(yt)});const vo=new Map;sn.forEach((yt,He)=>{Wi(vo,this.driver,new Set(yt),he,d.FX)}),yo.forEach(yt=>{const He=Zo.get(yt),lt=vo.get(yt);Zo.set(yt,new Map([...He?.entries()??[],...lt?.entries()??[]]))});const Va=[],uh=[],ol={};z.forEach(yt=>{const{element:He,player:lt,instruction:Nt}=yt;if(P.has(He)){if(at.has(He))return lt.onDestroy(()=>lr(He,Nt.toStyles)),lt.disabled=!0,lt.overrideTotalTime(Nt.totalTime),void k.push(lt);let Sn=ol;if(hi.size>1){let wi=He;const is=[];for(;wi=wi.parentNode;){const Bn=hi.get(wi);if(Bn){Sn=Bn;break}is.push(wi)}is.forEach(Bn=>hi.set(Bn,Sn))}const Un=this._buildAnimation(lt.namespaceId,Nt,di,B,vo,Zo);if(lt.setRealPlayer(Un),Sn===ol)Va.push(lt);else{const wi=this.playersByElement.get(Sn);wi&&wi.length&&(lt.parentPlayer=De(wi)),k.push(lt)}}else Et(He,Nt.fromStyles),lt.onDestroy(()=>lr(He,Nt.toStyles)),uh.push(lt),at.has(He)&&k.push(lt)}),uh.forEach(yt=>{const He=B.get(yt.element);if(He&&He.length){const lt=De(He);yt.setRealPlayer(lt)}}),k.forEach(yt=>{yt.parentPlayer?yt.syncPlayerEvents(yt.parentPlayer):yt.destroy()});for(let yt=0;yt<Hn.length;yt++){const He=Hn[yt],lt=He[Rr];if(Pi(He,Xn),lt&&lt.hasAnimation)continue;let Nt=[];if(K.size){let Un=K.get(He);Un&&Un.length&&Nt.push(...Un);let wi=this.driver.query(He,bn,!0);for(let is=0;is<wi.length;is++){let Bn=K.get(wi[is]);Bn&&Bn.length&&Nt.push(...Bn)}}const Sn=Nt.filter(Un=>!Un.destroyed);Sn.length?Oa(this,He,Sn):this.processLeaveNode(He)}return Hn.length=0,Va.forEach(yt=>{this.players.push(yt),yt.onDone(()=>{yt.destroy();const He=this.players.indexOf(yt);this.players.splice(He,1)}),yt.play()}),Va}afterFlush(T){this._flushFns.push(T)}afterFlushAnimationsDone(T){this._whenQuietFns.push(T)}_getPreviousPlayers(T,D,P,k,B){let z=[];if(D){const K=this.playersByQueriedElement.get(T);K&&(z=K)}else{const K=this.playersByElement.get(T);if(K){const he=!B||B==cr;K.forEach(Te=>{Te.queued||!he&&Te.triggerName!=k||z.push(Te)})}}return(P||k)&&(z=z.filter(K=>!(P&&P!=K.namespaceId||k&&k!=K.triggerName))),z}_beforeAnimationBuild(T,D,P){const B=D.element,z=D.isRemovalTransition?void 0:T,K=D.isRemovalTransition?void 0:D.triggerName;for(const he of D.timelines){const Te=he.element,at=Te!==B,ut=Ut(P,Te,[]);this._getPreviousPlayers(Te,at,z,K,D.toState).forEach(sn=>{const Mt=sn.getRealPlayer();Mt.beforeDestroy&&Mt.beforeDestroy(),sn.destroy(),ut.push(sn)})}Et(B,D.fromStyles)}_buildAnimation(T,D,P,k,B,z){const K=D.triggerName,he=D.element,Te=[],at=new Set,ut=new Set,gn=D.timelines.map(Mt=>{const Dt=Mt.element;at.add(Dt);const Hn=Dt[Rr];if(Hn&&Hn.removedBeforeQueried)return new d.sf(Mt.duration,Mt.delay);const pr=Dt!==he,dr=function pc(L){const T=[];return Ii(L,T),T}((P.get(Dt)||hu).map(di=>di.getRealPlayer())).filter(di=>!!di.element&&di.element===Dt),Jr=B.get(Dt),tn=z.get(Dt),Jo=nt(this._normalizer,Mt.keyframes,Jr,tn),ys=this._buildPlayer(Mt,Jo,dr);if(Mt.subTimeline&&k&&ut.add(Dt),pr){const di=new Na(T,K,Dt);di.setRealPlayer(ys),Te.push(di)}return ys});Te.forEach(Mt=>{Ut(this.playersByQueriedElement,Mt.element,[]).push(Mt),Mt.onDone(()=>function fu(L,T,D){let P=L.get(T);if(P){if(P.length){const k=P.indexOf(D);P.splice(k,1)}0==P.length&&L.delete(T)}return P}(this.playersByQueriedElement,Mt.element,Mt))}),at.forEach(Mt=>Ri(Mt,lo));const sn=De(gn);return sn.onDestroy(()=>{at.forEach(Mt=>Pi(Mt,lo)),lr(he,D.toStyles)}),ut.forEach(Mt=>{Ut(k,Mt,[]).push(sn)}),sn}_buildPlayer(T,D,P){return D.length>0?this.driver.animate(T.element,D,T.duration,T.delay,T.easing,P):new d.sf(T.duration,T.delay)}}class Na{constructor(T,D,P){this.namespaceId=T,this.triggerName=D,this.element=P,this._player=new d.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(T){this._containsRealPlayer||(this._player=T,this._queuedCallbacks.forEach((D,P)=>{D.forEach(k=>mn(T,P,void 0,k))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(T.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(T){this.totalTime=T}syncPlayerEvents(T){const D=this._player;D.triggerCallback&&T.onStart(()=>D.triggerCallback("start")),T.onDone(()=>this.finish()),T.onDestroy(()=>this.destroy())}_queueEvent(T,D){Ut(this._queuedCallbacks,T,[]).push(D)}onDone(T){this.queued&&this._queueEvent("done",T),this._player.onDone(T)}onStart(T){this.queued&&this._queueEvent("start",T),this._player.onStart(T)}onDestroy(T){this.queued&&this._queueEvent("destroy",T),this._player.onDestroy(T)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(T){this.queued||this._player.setPosition(T)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(T){const D=this._player;D.triggerCallback&&D.triggerCallback(T)}}function il(L){return L&&1===L.nodeType}function xa(L,T){const D=L.style.display;return L.style.display=T??"none",D}function Wi(L,T,D,P,k){const B=[];D.forEach(he=>B.push(xa(he)));const z=[];P.forEach((he,Te)=>{const at=new Map;he.forEach(ut=>{const gn=T.computeStyle(Te,ut,k);at.set(ut,gn),(!gn||0==gn.length)&&(Te[Rr]=oh,z.push(Te))}),L.set(Te,at)});let K=0;return D.forEach(he=>xa(he,B[K++])),z}function qo(L,T){const D=new Map;if(L.forEach(K=>D.set(K,[])),0==T.length)return D;const k=new Set(T),B=new Map;function z(K){if(!K)return 1;let he=B.get(K);if(he)return he;const Te=K.parentNode;return he=D.has(Te)?Te:k.has(Te)?1:z(Te),B.set(K,he),he}return T.forEach(K=>{const he=z(K);1!==he&&D.get(he).push(K)}),D}function Ri(L,T){L.classList?.add(T)}function Pi(L,T){L.classList?.remove(T)}function Oa(L,T,D){De(D).onDone(()=>L.processLeaveNode(T))}function Ii(L,T){for(let D=0;D<L.length;D++){const P=L[D];P instanceof d.ui?Ii(P.players,T):T.push(P)}}function gc(L,T,D){const P=D.get(L);if(!P)return!1;let k=T.get(L);return k?P.forEach(B=>k.add(B)):T.set(L,P),D.delete(L),!0}class _o{constructor(T,D,P,k){this._driver=D,this._normalizer=P,this._triggerCache={},this.onRemovalComplete=(B,z)=>{},this._transitionEngine=new hc(T.body,D,P,k),this._timelineEngine=new sh(T.body,D,P),this._transitionEngine.onRemovalComplete=(B,z)=>this.onRemovalComplete(B,z)}registerTrigger(T,D,P,k,B){const z=T+"-"+k;let K=this._triggerCache[z];if(!K){const he=[],at=$t(this._driver,B,he,[]);if(he.length)throw function Fe(L,T){return new Ce.wOt(3404,!1)}();K=function uc(L,T,D){return new zo(L,T,D)}(k,at,this._normalizer),this._triggerCache[z]=K}this._transitionEngine.registerTrigger(D,k,K)}register(T,D){this._transitionEngine.register(T,D)}destroy(T,D){this._transitionEngine.destroy(T,D)}onInsert(T,D,P,k){this._transitionEngine.insertNode(T,D,P,k)}onRemove(T,D,P){this._transitionEngine.removeNode(T,D,P)}disableAnimations(T,D){this._transitionEngine.markElementAsDisabled(T,D)}process(T,D,P,k){if("@"==P.charAt(0)){const[B,z]=sr(P);this._timelineEngine.command(B,D,z,k)}else this._transitionEngine.trigger(T,D,P,k)}listen(T,D,P,k,B){if("@"==P.charAt(0)){const[z,K]=sr(P);return this._timelineEngine.listen(z,D,K,B)}return this._transitionEngine.listen(T,D,P,k,B)}flush(T=-1){this._transitionEngine.flush(T)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(T){this._transitionEngine.afterFlushAnimationsDone(T)}}class ka{static#e=this.initialStylesByElement=new WeakMap;constructor(T,D,P){this._element=T,this._startStyles=D,this._endStyles=P,this._state=0;let k=ka.initialStylesByElement.get(T);k||ka.initialStylesByElement.set(T,k=new Map),this._initialStyles=k}start(){this._state<1&&(this._startStyles&&lr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(lr(this._element,this._initialStyles),this._endStyles&&(lr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ka.initialStylesByElement.delete(this._element),this._startStyles&&(Et(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Et(this._element,this._endStyles),this._endStyles=null),lr(this._element,this._initialStyles),this._state=3)}}function Ko(L){let T=null;return L.forEach((D,P)=>{(function Qo(L){return"display"===L||"position"===L})(P)&&(T=T||new Map,T.set(P,D))}),T}class mc{constructor(T,D,P,k){this.element=T,this.keyframes=D,this.options=P,this._specialStyles=k,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=P.duration,this._delay=P.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(T=>T()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const T=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,T,this.options),this._finalKeyframe=T.length?T[T.length-1]:new Map;const D=()=>this._onFinish();this.domPlayer.addEventListener("finish",D),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",D)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(T){const D=[];return T.forEach(P=>{D.push(Object.fromEntries(P))}),D}_triggerWebAnimation(T,D,P){return T.animate(this._convertKeyframesToObject(D),P)}onStart(T){this._originalOnStartFns.push(T),this._onStartFns.push(T)}onDone(T){this._originalOnDoneFns.push(T),this._onDoneFns.push(T)}onDestroy(T){this._onDestroyFns.push(T)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(T=>T()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(T=>T()),this._onDestroyFns=[])}setPosition(T){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=T*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const T=new Map;this.hasStarted()&&this._finalKeyframe.forEach((P,k)=>{"offset"!==k&&T.set(k,this._finished?P:Tn(this.element,k))}),this.currentSnapshot=T}triggerCallback(T){const D="start"===T?this._onStartFns:this._onDoneFns;D.forEach(P=>P()),D.length=0}}class Mi{validateStyleProperty(T){return!0}validateAnimatableStyleProperty(T){return!0}matchesElement(T,D){return!1}containsElement(T,D){return Gi(T,D)}getParentElement(T){return kr(T)}query(T,D,P){return ao(T,D,P)}computeStyle(T,D,P){return Tn(T,D)}animate(T,D,P,k,B,z=[]){const he={duration:P,delay:k,fill:0==k?"both":"forwards"};B&&(he.easing=B);const Te=new Map,at=z.filter(sn=>sn instanceof mc);dt(P,k)&&at.forEach(sn=>{sn.currentSnapshot.forEach((Mt,Dt)=>Te.set(Dt,Mt))});let ut=Ho(D).map(sn=>new Map(sn));ut=function Pt(L,T,D){if(D.size&&T.length){let P=T[0],k=[];if(D.forEach((B,z)=>{P.has(z)||k.push(z),P.set(z,B)}),k.length)for(let B=1;B<T.length;B++){let z=T[B];k.forEach(K=>z.set(K,Tn(L,K)))}}return T}(T,ut,Te);const gn=function Wo(L,T){let D=null,P=null;return Array.isArray(T)&&T.length?(D=Ko(T[0]),T.length>1&&(P=Ko(T[T.length-1]))):T instanceof Map&&(D=Ko(T)),D||P?new ka(L,D,P):null}(T,ut);return new mc(T,ut,he,gn)}}function Xo(L,T,D){return"noop"===L?new _o(T,new ba,new Bt,D):new _o(T,new Mi,new Fr,D)}class qs{constructor(T,D){this._driver=T;const P=[],B=$t(T,D,P,[]);if(P.length)throw function pt(L){return new Ce.wOt(3500,!1)}();this._animationAst=B}buildTimelines(T,D,P,k,B){const z=Array.isArray(D)?gs(D):D,K=Array.isArray(P)?gs(P):P,he=[];B=B||new po;const Te=au(this._driver,T,this._animationAst,zi,Xn,z,K,k,B,he);if(he.length)throw function Jt(L){return new Ce.wOt(3501,!1)}();return Te}}const bs="@.disabled";class Yr{constructor(T,D,P,k){this.namespaceId=T,this.delegate=D,this.engine=P,this._onDestroy=k,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(T){this.delegate.destroyNode?.(T)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(T,D){return this.delegate.createElement(T,D)}createComment(T){return this.delegate.createComment(T)}createText(T){return this.delegate.createText(T)}appendChild(T,D){this.delegate.appendChild(T,D),this.engine.onInsert(this.namespaceId,D,T,!1)}insertBefore(T,D,P,k=!0){this.delegate.insertBefore(T,D,P),this.engine.onInsert(this.namespaceId,D,T,k)}removeChild(T,D,P){this.engine.onRemove(this.namespaceId,D,this.delegate)}selectRootElement(T,D){return this.delegate.selectRootElement(T,D)}parentNode(T){return this.delegate.parentNode(T)}nextSibling(T){return this.delegate.nextSibling(T)}setAttribute(T,D,P,k){this.delegate.setAttribute(T,D,P,k)}removeAttribute(T,D,P){this.delegate.removeAttribute(T,D,P)}addClass(T,D){this.delegate.addClass(T,D)}removeClass(T,D){this.delegate.removeClass(T,D)}setStyle(T,D,P,k){this.delegate.setStyle(T,D,P,k)}removeStyle(T,D,P){this.delegate.removeStyle(T,D,P)}setProperty(T,D,P){"@"==D.charAt(0)&&D==bs?this.disableAnimations(T,!!P):this.delegate.setProperty(T,D,P)}setValue(T,D){this.delegate.setValue(T,D)}listen(T,D,P){return this.delegate.listen(T,D,P)}disableAnimations(T,D){this.engine.disableAnimations(T,D)}}class pn extends Yr{constructor(T,D,P,k,B){super(D,P,k,B),this.factory=T,this.namespaceId=D}setProperty(T,D,P){"@"==D.charAt(0)?"."==D.charAt(1)&&D==bs?this.disableAnimations(T,P=void 0===P||!!P):this.engine.process(this.namespaceId,T,D.slice(1),P):this.delegate.setProperty(T,D,P)}listen(T,D,P){if("@"==D.charAt(0)){const k=function Yo(L){switch(L){case"body":return document.body;case"document":return document;case"window":return window;default:return L}}(T);let B=D.slice(1),z="";return"@"!=B.charAt(0)&&([B,z]=function ah(L){const T=L.indexOf(".");return[L.substring(0,T),L.slice(T+1)]}(B)),this.engine.listen(this.namespaceId,k,B,z,K=>{this.factory.scheduleListenerCallback(K._data||-1,P,K)})}return this.delegate.listen(T,D,P)}}class sl{constructor(T,D,P){this.delegate=T,this.engine=D,this._zone=P,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,D.onRemovalComplete=(k,B)=>{const z=B?.parentNode(k);z&&B.removeChild(z,k)}}createRenderer(T,D){const k=this.delegate.createRenderer(T,D);if(!T||!D?.data?.animation){const Te=this._rendererCache;let at=Te.get(k);return at||(at=new Yr("",k,this.engine,()=>Te.delete(k)),Te.set(k,at)),at}const B=D.id,z=D.id+"-"+this._currentId;this._currentId++,this.engine.register(z,T);const K=Te=>{Array.isArray(Te)?Te.forEach(K):this.engine.registerTrigger(B,z,T,Te.name,Te)};return D.data.animation.forEach(K),new pn(this,z,k,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(T,D,P){if(T>=0&&T<this._microtaskId)return void this._zone.run(()=>D(P));const k=this._animationCallbacksBuffer;0==k.length&&queueMicrotask(()=>{this._zone.run(()=>{k.forEach(B=>{const[z,K]=B;z(K)}),this._animationCallbacksBuffer=[]})}),k.push([D,P])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}},438:(Ln,At,ye)=>{ye.d(At,{bc$:()=>SR,iLQ:()=>Yv,sZ2:()=>Xh,hnV:()=>sS,Hbi:()=>ek,o8S:()=>Jl,BIS:()=>RR,gRc:()=>sp,Ql9:()=>hS,OM3:()=>Mg,Ocv:()=>lA,Z63:()=>Yo,aKT:()=>Cu,uvJ:()=>vs,zcH:()=>Vr,bkB:()=>Li,$GK:()=>_n,nKC:()=>It,zZn:()=>ni,_q3:()=>up,MKu:()=>zd,xe9:()=>Fm,Co$:()=>Sf,Vns:()=>ad,SKi:()=>vr,Xx1:()=>Wi,Agw:()=>Kc,PLl:()=>lD,sFG:()=>AO,_9s:()=>vf,czy:()=>fg,WPN:()=>tf,kdw:()=>Ri,C4Q:()=>Rg,NYb:()=>nS,giA:()=>Xv,xvI:()=>vN,RxE:()=>qv,c1b:()=>My,gXe:()=>D,mal:()=>tM,L39:()=>nx,Ol2:()=>_w,w6W:()=>Nl,oH4:()=>dA,Rfq:()=>lr,WQX:()=>zt,naY:()=>VN,QuC:()=>Sn,EmA:()=>gr,fpN:()=>ZO,HJs:()=>Qm,N4e:()=>gu,O8t:()=>$S,An2:()=>wy,H3F:()=>Wv,H8p:()=>gp,KH2:()=>qf,TgB:()=>ud,wOt:()=>rt,WHO:()=>iA,e01:()=>$d,lNU:()=>Qr,h9k:()=>q_,$MX:()=>ug,ZF7:()=>Yc,Kcf:()=>HR,e5t:()=>qR,UyX:()=>G_,cWb:()=>GR,osQ:()=>zR,H5H:()=>Ww,Zy3:()=>ns,mq5:()=>Xu,JZv:()=>Lt,LfX:()=>ge,plB:()=>ku,jNT:()=>xm,zjR:()=>iS,ngT:()=>Ya,TL$:()=>CR,Tbb:()=>yn,rcV:()=>Pu,Vt3:()=>Vu,Mj6:()=>P,GFd:()=>gw,OA$:()=>Ba,Jv_:()=>Nb,aNF:()=>Dm,R7$:()=>Ig,BMQ:()=>pd,HbH:()=>Ir,AVh:()=>Td,wni:()=>uT,VBU:()=>Zo,FsC:()=>ol,jDH:()=>In,G2t:()=>ho,$C:()=>Va,EJ8:()=>yt,rXU:()=>wg,nrm:()=>Uo,bVm:()=>sm,qex:()=>im,k0s:()=>$l,j41:()=>rm,RV6:()=>U0,xGo:()=>So,KVO:()=>cr,kS0:()=>Wa,QTQ:()=>EP,bIt:()=>gm,lsd:()=>wb,XpG:()=>iT,nI1:()=>Vd,bMT:()=>Ld,Y8G:()=>jl,lJ4:()=>Ob,mGM:()=>lT,Njj:()=>xc,eBV:()=>xp,npT:()=>mI,B4B:()=>AD,n$t:()=>_I,xc7:()=>Jy,zvX:()=>zf,DNE:()=>Rf,EFF:()=>Jf,JRh:()=>yT,SpI:()=>Sv,Lme:()=>vT,DH7:()=>ET,mxI:()=>Tm,R50:()=>wm}),ye(467);let Pe=null,et=1;const Tt=Symbol("SIGNAL");function Be(r){const s=Pe;return Pe=r,s}function Ye(r){if((!Pn(r)||r.dirty)&&(r.dirty||r.lastCleanEpoch!==et)){if(!r.producerMustRecompute(r)&&!ir(r))return r.dirty=!1,void(r.lastCleanEpoch=et);r.producerRecomputeValue(r),r.dirty=!1,r.lastCleanEpoch=et}}function ir(r){pt(r);for(let s=0;s<r.producerNode.length;s++){const o=r.producerNode[s],u=r.producerLastReadVersion[s];if(u!==o.version||(Ye(o),u!==o.version))return!0}return!1}function Ot(r,s){if(function Jt(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}(r),pt(r),1===r.liveConsumerNode.length)for(let u=0;u<r.producerNode.length;u++)Ot(r.producerNode[u],r.producerIndexOfThis[u]);const o=r.liveConsumerNode.length-1;if(r.liveConsumerNode[s]=r.liveConsumerNode[o],r.liveConsumerIndexOfThis[s]=r.liveConsumerIndexOfThis[o],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,s<r.liveConsumerNode.length){const u=r.liveConsumerIndexOfThis[s],c=r.liveConsumerNode[s];pt(c),c.producerIndexOfThis[u]=s}}function Pn(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function pt(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}let Ar=null;var Vn=ye(413),kr=ye(359),Hi=ye(412),or=ye(354);const Qr="https://g.co/ng/security#xss";class rt extends Error{constructor(s,o){super(ns(s,o)),this.code=s}}function ns(r,s){return`NG0${Math.abs(r)}${s?": "+s:""}`}function en(r){return{toString:r}.toString()}const ui="__parameters__";function Xn(r,s,o){return en(()=>{const u=function zi(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(s);function c(...f){if(this instanceof c)return u.apply(this,f),this;const m=new c(...f);return E.annotation=m,E;function E(A,R,x){const V=A.hasOwnProperty(ui)?A[ui]:Object.defineProperty(A,ui,{value:[]})[ui];for(;V.length<=x;)V.push(null);return(V[x]=V[x]||[]).push(m),A}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}const Lt=globalThis;function Ht(r){for(let s in r)if(r[s]===Ht)return s;throw Error("Could not find renamed property on target object.")}function fs(r,s){for(const o in s)s.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=s[o])}function yn(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(yn).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function ps(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const gs=Ht({__forward_ref__:Ht});function lr(r){return r.__forward_ref__=lr,r.toString=function(){return yn(this())},r}function Et(r){return vi(r)?r():r}function vi(r){return"function"==typeof r&&r.hasOwnProperty(gs)&&r.__forward_ref__===lr}function In(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function ho(r){return{providers:r.providers||[],imports:r.imports||[]}}function Si(r){return oe(r,$t)||oe(r,rn)}function ge(r){return null!==Si(r)}function oe(r,s){return r.hasOwnProperty(s)?r[s]:null}function Ze(r){return r&&(r.hasOwnProperty(Gt)||r.hasOwnProperty(Yn))?r[Gt]:null}const $t=Ht({\u0275prov:Ht}),Gt=Ht({\u0275inj:Ht}),rn=Ht({ngInjectableDef:Ht}),Yn=Ht({ngInjectorDef:Ht});class It{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=In({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ou(r){return r&&!!r.\u0275providers}const go=Ht({\u0275cmp:Ht}),au=Ht({\u0275dir:Ht}),ac=Ht({\u0275pipe:Ht}),uu=Ht({\u0275mod:Ht}),ms=Ht({\u0275fac:Ht}),_s=Ht({__NG_ELEMENT_ID__:Ht}),lu=Ht({__NG_ENV_ID__:Ht});function qt(r){return"string"==typeof r?r:null==r?"":String(r)}function nl(r,s){throw new rt(-201,!1)}var _n=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(_n||{});let uc;function zo(){return uc}function ci(r){const s=uc;return uc=r,s}function cu(r,s,o){const u=Si(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&_n.Optional?null:void 0!==s?s:void nl()}const Ra={},du="__NG_DI_FLAG__",Pa="ngTempTokenPath",pp=/\n/gm,hu="__source";let zs;function Rr(r){const s=zs;return zs=r,s}function dc(r,s=_n.Default){if(void 0===zs)throw new rt(-203,!1);return null===zs?cu(r,void 0,s):zs.get(r,s&_n.Optional?null:void 0,s)}function cr(r,s=_n.Default){return(zo()||dc)(Et(r),s)}function zt(r,s=_n.Default){return cr(r,hc(s))}function hc(r){return typeof r>"u"||"number"==typeof r?r:(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function Na(r){const s=[];for(let o=0;o<r.length;o++){const u=Et(r[o]);if(Array.isArray(u)){if(0===u.length)throw new rt(900,!1);let c,f=_n.Default;for(let m=0;m<u.length;m++){const E=u[m],A=rl(E);"number"==typeof A?-1===A?c=E.token:f|=A:c=E}s.push(cr(c,f))}else s.push(cr(u))}return s}function fu(r,s){return r[du]=s,r.prototype[du]=s,r}function rl(r){return r[du]}const Wi=fu(Xn("Optional"),8),Ri=fu(Xn("SkipSelf"),4);function Oa(r,s){return r.hasOwnProperty(ms)?r[ms]:null}function mo(r,s){r.forEach(o=>Array.isArray(o)?mo(o,s):s(o))}function gc(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function _o(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function Mi(r,s,o){let u=qs(r,s);return u>=0?r[1|u]=o:(u=~u,function Qo(r,s,o,u){let c=r.length;if(c==s)r.push(o,u);else if(1===c)r.push(u,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>s;)r[c]=r[c-2],c--;r[s]=o,r[s+1]=u}}(r,u,s,o)),u}function Xo(r,s){const o=qs(r,s);if(o>=0)return r[1|o]}function qs(r,s){return function bs(r,s,o){let u=0,c=r.length>>o;for(;c!==u;){const f=u+(c-u>>1),m=r[f<<o];if(s===m)return f<<o;m>s?c=f:u=f+1}return~(c<<o)}(r,s,1)}const Yr={},pn=[],Yo=new It(""),ah=new It("",-1),sl=new It("");class L{get(s,o=Ra){if(o===Ra){const u=new Error(`NullInjectorError: No provider for ${yn(s)}!`);throw u.name="NullInjectorError",u}return o}}var T=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(T||{}),D=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(D||{}),P=function(r){return r[r.None=0]="None",r[r.SignalBased=1]="SignalBased",r[r.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",r}(P||{});function k(r,s,o){let u=r.length;for(;;){const c=r.indexOf(s,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const f=s.length;if(c+f===u||r.charCodeAt(c+f)<=32)return c}o=c+1}}function B(r,s,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const f=o[u++],m=o[u++],E=o[u++];r.setAttribute(s,m,E,f)}else{const f=c,m=o[++u];K(f)?r.setProperty(s,f,m):r.setAttribute(s,f,m),u++}}return u}function z(r){return 3===r||4===r||6===r}function K(r){return 64===r.charCodeAt(0)}function he(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?o=c:0===o||Te(r,o,c,null,-1===o||2===o?s[++u]:null)}}return r}function Te(r,s,o,u,c){let f=0,m=r.length;if(-1===s)m=-1;else for(;f<r.length;){const E=r[f++];if("number"==typeof E){if(E===s){m=-1;break}if(E>s){m=f-1;break}}}for(;f<r.length;){const E=r[f];if("number"==typeof E)break;if(E===o){if(null===u)return void(null!==c&&(r[f+1]=c));if(u===r[f+1])return void(r[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==m&&(r.splice(m,0,s),f=m+1),r.splice(f++,0,o),null!==u&&r.splice(f++,0,u),null!==c&&r.splice(f++,0,c)}const at="ng-template";function ut(r,s,o,u){let c=0;if(u){for(;c<s.length&&"string"==typeof s[c];c+=2)if("class"===s[c]&&-1!==k(s[c+1].toLowerCase(),o,0))return!0}else if(gn(r))return!1;if(c=s.indexOf(1,c),c>-1){let f;for(;++c<s.length&&"string"==typeof(f=s[c]);)if(f.toLowerCase()===o)return!0}return!1}function gn(r){return 4===r.type&&r.value!==at}function sn(r,s,o){return s===(4!==r.type||o?r.value:at)}function Mt(r,s,o){let u=4;const c=r.attrs,f=null!==c?function Jr(r){for(let s=0;s<r.length;s++)if(z(r[s]))return s;return r.length}(c):0;let m=!1;for(let E=0;E<s.length;E++){const A=s[E];if("number"!=typeof A){if(!m)if(4&u){if(u=2|1&u,""!==A&&!sn(r,A,o)||""===A&&1===s.length){if(Dt(u))return!1;m=!0}}else if(8&u){if(null===c||!ut(r,c,A,o)){if(Dt(u))return!1;m=!0}}else{const R=s[++E],x=Hn(A,c,gn(r),o);if(-1===x){if(Dt(u))return!1;m=!0;continue}if(""!==R){let V;if(V=x>f?"":c[x+1].toLowerCase(),2&u&&R!==V){if(Dt(u))return!1;m=!0}}}}else{if(!m&&!Dt(u)&&!Dt(A))return!1;if(m&&Dt(A))continue;m=!1,u=A|1&u}}return Dt(u)||m}function Dt(r){return!(1&r)}function Hn(r,s,o,u){if(null===s)return-1;let c=0;if(u||!o){let f=!1;for(;c<s.length;){const m=s[c];if(m===r)return c;if(3===m||6===m)f=!0;else{if(1===m||2===m){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=f?1:2}return-1}return function tn(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function pr(r,s,o=!1){for(let u=0;u<s.length;u++)if(Mt(r,s[u],o))return!0;return!1}function ys(r,s){return r?":not("+s.trim()+")":s}function di(r){let s=r[0],o=1,u=2,c="",f=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const E=r[++o];c+="["+m+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!Dt(m)&&(s+=ys(f,c),c=""),u=m,f=f||!Dt(u);o++}return""!==c&&(s+=ys(f,c)),s}function Zo(r){return en(()=>{const s=wi(r),o={...s,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===T.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||D.Emulated,styles:r.styles||pn,_:null,schemas:r.schemas||null,tView:null,id:""};is(o);const u=r.dependencies;return o.directiveDefs=Bn(u,!1),o.pipeDefs=Bn(u,!0),o.id=function r_(r){let s=0;const o=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(const c of o)s=Math.imul(31,s)+c.charCodeAt(0)|0;return s+=2147483648,"c"+s}(o),o})}function _c(r){return He(r)||lt(r)}function vo(r){return null!==r}function Va(r){return en(()=>({type:r.type,bootstrap:r.bootstrap||pn,declarations:r.declarations||pn,imports:r.imports||pn,exports:r.exports||pn,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function uh(r,s){if(null==r)return Yr;const o={};for(const u in r)if(r.hasOwnProperty(u)){const c=r[u];let f,m,E=P.None;Array.isArray(c)?(E=c[0],f=c[1],m=c[2]??f):(f=c,m=c),s?(o[f]=E!==P.None?[u,E]:u,s[f]=m):o[f]=u}return o}function ol(r){return en(()=>{const s=wi(r);return is(s),s})}function yt(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function He(r){return r[go]||null}function lt(r){return r[au]||null}function Nt(r){return r[ac]||null}function Sn(r){const s=He(r)||lt(r)||Nt(r);return null!==s&&s.standalone}function Un(r,s){const o=r[uu]||null;if(!o&&!0===s)throw new Error(`Type ${yn(r)} does not have '\u0275mod' property.`);return o}function wi(r){const s={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:r.inputs||Yr,exportAs:r.exportAs||null,standalone:!0===r.standalone,signals:!0===r.signals,selectors:r.selectors||pn,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uh(r.inputs,s),outputs:uh(r.outputs),debugInfo:null}}function is(r){r.features?.forEach(s=>s(r))}function Bn(r,s){if(!r)return null;const o=s?Nt:_c;return()=>("function"==typeof r?r():r).map(u=>o(u)).filter(vo)}function gr(r){return{\u0275providers:r}}function Eo(...r){return{\u0275providers:Zr(0,r),\u0275fromNgModule:!0}}function Zr(r,...s){const o=[],u=new Set;let c;const f=m=>{o.push(m)};return mo(s,m=>{const E=m;ea(E,f,[],u)&&(c||=[],c.push(E))}),void 0!==c&&La(c,f),o}function La(r,s){for(let o=0;o<r.length;o++){const{ngModule:u,providers:c}=r[o];lh(c,f=>{s(f,u)})}}function ea(r,s,o,u){if(!(r=Et(r)))return!1;let c=null,f=Ze(r);const m=!f&&He(r);if(f||m){if(m&&!m.standalone)return!1;c=r}else{const A=r.ngModule;if(f=Ze(A),!f)return!1;c=A}const E=u.has(c);if(m){if(E)return!1;if(u.add(c),m.dependencies){const A="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const R of A)ea(R,s,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let R;u.add(c);try{mo(f.imports,x=>{ea(x,s,o,u)&&(R||=[],R.push(x))})}finally{}void 0!==R&&La(R,s)}if(!E){const R=Oa(c)||(()=>new c);s({provide:c,useFactory:R,deps:pn},c),s({provide:sl,useValue:c,multi:!0},c),s({provide:Yo,useValue:()=>cr(c),multi:!0},c)}const A=f.providers;if(null!=A&&!E){const R=r;lh(A,x=>{s(x,R)})}}}return c!==r&&void 0!==r.providers}function lh(r,s){for(let o of r)ou(o)&&(o=o.\u0275providers),Array.isArray(o)?lh(o,s):s(o)}const YA=Ht({provide:String,useValue:Ht});function ch(r){return null!==r&&"object"==typeof r&&YA in r}function ta(r){return"function"==typeof r}const gp=new It(""),vc={},wE={};let dh;function hh(){return void 0===dh&&(dh=new L),dh}class vs{}class Ec extends vs{get destroyed(){return this._destroyed}constructor(s,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,o_(s,m=>this.processProvider(m)),this.records.set(ah,pu(void 0,this)),c.has("environment")&&this.records.set(vs,pu(void 0,this));const f=this.records.get(gp);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(sl,pn,_n.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const s=Be(null);try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Be(s)}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const o=Rr(this),u=ci(void 0);try{return s()}finally{Rr(o),ci(u)}}get(s,o=Ra,u=_n.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(lu))return s[lu](this);u=hc(u);const f=Rr(this),m=ci(void 0);try{if(!(u&_n.SkipSelf)){let A=this.records.get(s);if(void 0===A){const R=function eD(r){return"function"==typeof r||"object"==typeof r&&r instanceof It}(s)&&Si(s);A=R&&this.injectableDefInScope(R)?pu(fh(s),vc):null,this.records.set(s,A)}if(null!=A)return this.hydrate(s,A)}return(u&_n.Self?hh():this.parent).get(s,o=u&_n.Optional&&o===Ra?null:o)}catch(E){if("NullInjectorError"===E.name){if((E[Pa]=E[Pa]||[]).unshift(yn(s)),f)throw E;return function il(r,s,o,u){const c=r[Pa];throw s[hu]&&c.unshift(s[hu]),r.message=function fc(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let c=yn(s);if(Array.isArray(s))c=s.map(yn).join(" -> ");else if("object"==typeof s){let f=[];for(let m in s)if(s.hasOwnProperty(m)){let E=s[m];f.push(m+":"+("string"==typeof E?JSON.stringify(E):yn(E)))}c=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(pp,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[Pa]=null,r}(E,s,"R3InjectorError",this.source)}throw E}finally{ci(m),Rr(f)}}resolveInjectorInitializers(){const s=Be(null),o=Rr(this),u=ci(void 0);try{const f=this.get(Yo,pn,_n.Self);for(const m of f)m()}finally{Rr(o),ci(u),Be(s)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(yn(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new rt(205,!1)}processProvider(s){let o=ta(s=Et(s))?s:Et(s&&s.provide);const u=function i_(r){return ch(r)?pu(void 0,r.useValue):pu(TE(r),vc)}(s);if(!ta(s)&&!0===s.multi){let c=this.records.get(o);c||(c=pu(void 0,vc,!0),c.factory=()=>Na(c.multi),this.records.set(o,c)),o=s,c.multi.push(s)}this.records.set(o,u)}hydrate(s,o){const u=Be(null);try{return o.value===vc&&(o.value=wE,o.value=o.factory()),"object"==typeof o.value&&o.value&&function s_(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}finally{Be(u)}}injectableDefInScope(s){if(!s.providedIn)return!1;const o=Et(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(s){const o=this._onDestroyHooks.indexOf(s);-1!==o&&this._onDestroyHooks.splice(o,1)}}function fh(r){const s=Si(r),o=null!==s?s.factory:Oa(r);if(null!==o)return o;if(r instanceof It)throw new rt(204,!1);if(r instanceof Function)return function JA(r){if(r.length>0)throw new rt(204,!1);const o=function Oe(r){return r&&(r[$t]||r[rn])||null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new rt(204,!1)}function TE(r,s,o){let u;if(ta(r)){const c=Et(r);return Oa(c)||fh(c)}if(ch(r))u=()=>Et(r.useValue);else if(function EE(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Na(r.deps||[]));else if(function vE(r){return!(!r||!r.useExisting)}(r))u=()=>cr(Et(r.useExisting));else{const c=Et(r&&(r.useClass||r.provide));if(!function ZA(r){return!!r.deps}(r))return Oa(c)||fh(c);u=()=>new c(...Na(r.deps))}return u}function pu(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function o_(r,s){for(const o of r)Array.isArray(o)?o_(o,s):o&&ou(o)?o_(o.\u0275providers,s):s(o)}function gu(r,s){r instanceof Ec&&r.assertNotDestroyed();const u=Rr(r),c=ci(void 0);try{return s()}finally{Rr(u),ci(c)}}function mp(){return void 0!==zo()||null!=function oh(){return zs}()}const mr=0,We=1,xt=2,Ur=3,Es=4,Pr=5,Ni=6,na=7,Gn=8,Br=9,ra=10,Wt=11,Ac=12,al=13,ia=14,_r=15,sa=16,mu=17,oa=18,Dc=19,bE=20,ul=21,Ua=22,Cc=23,jt=25,vp=1,Ki=7,ar=9,Mr=10;var ll=function(r){return r[r.None=0]="None",r[r.HasTransplantedViews=2]="HasTransplantedViews",r}(ll||{});function Ti(r){return Array.isArray(r)&&"object"==typeof r[vp]}function Ai(r){return Array.isArray(r)&&!0===r[vp]}function c_(r){return!!(4&r.flags)}function _u(r){return r.componentOffset>-1}function cl(r){return!(1&~r.flags)}function Ks(r){return!!r.template}function dl(r){return!!(512&r[xt])}class xi{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function d_(r,s,o,u){null!==s?s.applyValueToInputSignal(s,u):r[o]=u}function Ba(){return Tp}function Tp(r){return r.type.prototype.ngOnChanges&&(r.setInput=h_),Ap}function Ap(){const r=Cp(this),s=r?.current;if(s){const o=r.previous;if(o===Yr)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function h_(r,s,o,u,c){const f=this.declaredInputs[u],m=Cp(r)||function Eh(r,s){return r[Dp]=s}(r,{previous:Yr,current:null}),E=m.current||(m.current={}),A=m.previous,R=A[f];E[f]=new xi(R&&R.currentValue,o,A===Yr),d_(r,s,c,o)}Ba.ngInherit=!0;const Dp="__ngSimpleChanges__";function Cp(r){return r[Dp]||null}const Qs=function(r,s,o){};let wh=!1;function zn(r){for(;Array.isArray(r);)r=r[mr];return r}function ua(r,s){return zn(s[r])}function Nr(r,s){return zn(s[r.index])}function Mc(r,s){return r.data[s]}function Nn(r,s){const o=s[r];return Ti(o)?o:o[mr]}function Io(r){return!(128&~r[xt])}function wo(r,s){return null==s?null:r[s]}function Th(r){r[mu]=0}function OE(r){1024&r[xt]||(r[xt]|=1024,Io(r)&&yu(r))}function Dh(r){return!!(9216&r[xt]||r[Cc]?.dirty)}function Nc(r){r[ra].changeDetectionScheduler?.notify(1),Dh(r)?yu(r):64&r[xt]&&(function Qi(){return wh}()?(r[xt]|=1024,yu(r)):r[ra].changeDetectionScheduler?.notify())}function yu(r){r[ra].changeDetectionScheduler?.notify();let s=la(r);for(;null!==s&&!(8192&s[xt])&&(s[xt]|=8192,Io(s));)s=la(s)}function qn(r,s){if(!(256&~r[xt]))throw new rt(911,!1);null===r[ul]&&(r[ul]=[]),r[ul].push(s)}function la(r){const s=r[Ur];return Ai(s)?s[Ur]:s}const Kt={lFrame:__(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Mp(){return Kt.bindingsEnabled}function Se(){return Kt.lFrame.lView}function En(){return Kt.lFrame.tView}function xp(r){return Kt.lFrame.contextLView=r,r[Gn]}function xc(r){return Kt.lFrame.contextLView=null,r}function kn(){let r=Ch();for(;null!==r&&64===r.type;)r=r.parent;return r}function Ch(){return Kt.lFrame.currentTNode}function Rs(r,s){const o=Kt.lFrame;o.currentTNode=r,o.isParent=s}function wu(){return Kt.lFrame.isParent}function Oc(){Kt.lFrame.isParent=!1}function fi(){const r=Kt.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function ki(){return Kt.lFrame.bindingIndex++}function ti(r){const s=Kt.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,o}function pl(r,s){const o=Kt.lFrame;o.bindingIndex=o.bindingRootIndex=r,bh(s)}function bh(r){Kt.lFrame.currentDirectiveIndex=r}function $r(r){const s=Kt.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}function Hr(){return Kt.lFrame.currentQueryIndex}function Ps(r){Kt.lFrame.currentQueryIndex=r}function Sh(r){const s=r[We];return 2===s.type?s.declTNode:1===s.type?r[Pr]:null}function Ms(r,s,o){if(o&_n.SkipSelf){let c=s,f=r;for(;!(c=c.parent,null!==c||o&_n.Host||(c=Sh(f),null===c||(f=f[ia],10&c.type))););if(null===c)return!1;s=c,r=f}const u=Kt.lFrame=Vp();return u.currentTNode=s,u.lView=r,!0}function gl(r){const s=Vp(),o=r[We];Kt.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Vp(){const r=Kt.lFrame,s=null===r?null:r.child;return null===s?__(r):s}function __(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function da(){const r=Kt.lFrame;return Kt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const ml=da;function pi(){const r=da();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Fi(){return Kt.lFrame.selectedIndex}function Ao(r){Kt.lFrame.selectedIndex=r}function Wn(){const r=Kt.lFrame;return Mc(r.tView,r.selectedIndex)}let dn=!0;function ha(){return dn}function Do(r){dn=r}function _l(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const f=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:E,ngAfterViewInit:A,ngAfterViewChecked:R,ngOnDestroy:x}=f;m&&(r.contentHooks??=[]).push(-o,m),E&&((r.contentHooks??=[]).push(o,E),(r.contentCheckHooks??=[]).push(o,E)),A&&(r.viewHooks??=[]).push(-o,A),R&&((r.viewHooks??=[]).push(o,R),(r.viewCheckHooks??=[]).push(o,R)),null!=x&&(r.destroyHooks??=[]).push(o,x)}}function Ph(r,s,o){Mh(r,s,3,o)}function Xi(r,s,o,u){(3&r[xt])===o&&Mh(r,s,o,u)}function kc(r,s){let o=r[xt];(3&o)===s&&(o&=16383,o+=1,r[xt]=o)}function Mh(r,s,o,u){const f=u??-1,m=s.length-1;let E=0;for(let A=void 0!==u?65535&r[mu]:0;A<m;A++)if("number"==typeof s[A+1]){if(E=s[A],null!=u&&E>=u)break}else s[A]<0&&(r[mu]+=65536),(E<f||-1==f)&&(Co(r,o,s,A),r[mu]=(4294901760&r[mu])+A+2),A++}function Nh(r,s){Qs(4,r,s);const o=Be(null);try{s.call(r)}finally{Be(o),Qs(5,r,s)}}function Co(r,s,o,u){const c=o[u]<0,f=o[u+1],E=r[c?-o[u]:o[u]];c?r[xt]>>14<r[mu]>>16&&(3&r[xt])===s&&(r[xt]+=16384,Nh(E,f)):Nh(E,f)}const yl=-1;class Fc{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Ga(r){return r!==yl}function xn(r){return 32767&r}function vl(r,s){let o=function Lc(r){return r>>16}(r),u=s;for(;o>0;)u=u[ia],o--;return u}let fa=!0;function Bp(r){const s=fa;return fa=r,s}const bo=255,E_=5;let kh=0;const Vi={};function pa(r,s){const o=Fh(r,s);if(-1!==o)return o;const u=s[We];u.firstCreatePass&&(r.injectorIndex=s.length,jp(u.data,r),jp(s,null),jp(u.blueprint,null));const c=ga(r,s),f=r.injectorIndex;if(Ga(c)){const m=xn(c),E=vl(c,s),A=E[We].data;for(let R=0;R<8;R++)s[f+R]=E[m+R]|A[m+R]}return s[f+8]=c,f}function jp(r,s){r.push(0,0,0,0,0,0,0,0,s)}function Fh(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function ga(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=s;for(;null!==c;){if(u=Gp(c),null===u)return yl;if(o++,c=c[ia],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return yl}function Vh(r,s,o){!function I_(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(_s)&&(u=o[_s]),null==u&&(u=o[_s]=kh++);const c=u&bo;s.data[r+(c>>E_)]|=1<<c}(r,s,o)}function Lh(r,s,o){if(o&_n.Optional||void 0!==r)return r;nl()}function T_(r,s,o,u){if(o&_n.Optional&&void 0===u&&(u=null),!(o&(_n.Self|_n.Host))){const c=r[Br],f=ci(void 0);try{return c?c.get(s,u,o&_n.Optional):cu(s,u,o&_n.Optional)}finally{ci(f)}}return Lh(u,0,o)}function A_(r,s,o,u=_n.Default,c){if(null!==r){if(2048&s[xt]&&!(u&_n.Self)){const m=function b_(r,s,o,u,c){let f=r,m=s;for(;null!==f&&null!==m&&2048&m[xt]&&!(512&m[xt]);){const E=Uh(f,m,o,u|_n.Self,Vi);if(E!==Vi)return E;let A=f.parent;if(!A){const R=m[bE];if(R){const x=R.get(o,Vi,u);if(x!==Vi)return x}A=Gp(m),m=m[ia]}f=A}return c}(r,s,o,u,Vi);if(m!==Vi)return m}const f=Uh(r,s,o,u,Vi);if(f!==Vi)return f}return T_(s,o,u,c)}function Uh(r,s,o,u,c){const f=function $p(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(_s)?r[_s]:void 0;return"number"==typeof s?s>=0?s&bo:jE:s}(o);if("function"==typeof f){if(!Ms(s,r,u))return u&_n.Host?Lh(c,0,u):T_(s,o,u,c);try{let m;if(m=f(u),null!=m||u&_n.Optional)return m;nl()}finally{ml()}}else if("number"==typeof f){let m=null,E=Fh(r,s),A=yl,R=u&_n.Host?s[_r][Pr]:null;for((-1===E||u&_n.SkipSelf)&&(A=-1===E?ga(r,s):s[E+8],A!==yl&&C_(u,!1)?(m=s[We],E=xn(A),s=vl(A,s)):E=-1);-1!==E;){const x=s[We];if(D_(f,E,x.data)){const V=BE(E,s,o,m,u,R);if(V!==Vi)return V}A=s[E+8],A!==yl&&C_(u,s[We].data[E+8]===R)&&D_(f,E,s)?(m=x,E=xn(A),s=vl(A,s)):E=-1}}return c}function BE(r,s,o,u,c,f){const m=s[We],E=m.data[r+8],x=Bh(E,m,o,null==u?_u(E)&&fa:u!=m&&!!(3&E.type),c&_n.Host&&f===E);return null!==x?za(s,m,x,E):Vi}function Bh(r,s,o,u,c){const f=r.providerIndexes,m=s.data,E=1048575&f,A=r.directiveStart,x=f>>20,W=c?E+x:r.directiveEnd;for(let Z=u?E:E+x;Z<W;Z++){const ue=m[Z];if(Z<A&&o===ue||Z>=A&&ue.type===o)return Z}if(c){const Z=m[A];if(Z&&Ks(Z)&&Z.type===o)return A}return null}function za(r,s,o,u){let c=r[o];const f=s.data;if(function xh(r){return r instanceof Fc}(c)){const m=c;m.resolving&&function rh(r,s){throw s&&s.join(" > "),new rt(-200,r)}(function Mn(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():qt(r)}(f[o]));const E=Bp(m.canSeeViewProviders);m.resolving=!0;const R=m.injectImpl?ci(m.injectImpl):null;Ms(r,u,_n.Default);try{c=r[o]=m.factory(void 0,f,r,u),s.firstCreatePass&&o>=u.directiveStart&&function Ha(r,s,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(u){const m=Tp(s);(o.preOrderHooks??=[]).push(r,m),(o.preOrderCheckHooks??=[]).push(r,m)}c&&(o.preOrderHooks??=[]).push(0-r,c),f&&((o.preOrderHooks??=[]).push(r,f),(o.preOrderCheckHooks??=[]).push(r,f))}(o,f[o],s)}finally{null!==R&&ci(R),Bp(E),m.resolving=!1,ml()}}return c}function D_(r,s,o){return!!(o[s+(r>>E_)]&1<<r)}function C_(r,s){return!(r&_n.Self||r&_n.Host&&s)}class Gr{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return A_(this._tNode,this._lView,s,hc(u),o)}}function jE(){return new Gr(kn(),Se())}function So(r){return en(()=>{const s=r.prototype.constructor,o=s[ms]||Hp(s),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const f=c[ms]||Hp(c);if(f&&f!==o)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Hp(r){return vi(r)?()=>{const s=Hp(Et(r));return s&&s()}:Oa(r)}function Gp(r){const s=r[We],o=s.type;return 2===o?s.declTNode:1===o?r[Pr]:null}function Wa(r){return function w_(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const f=o[c];if(z(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(f===s)return o[c+1];c+=2}}}return null}(kn(),r)}function Gh(r,s=null,o=null,u){const c=zp(r,s,o,u);return c.resolveInjectorInitializers(),c}function zp(r,s=null,o=null,u,c=new Set){const f=[o||pn,Eo(r)];return u=u||("object"==typeof r?void 0:yn(r)),new Ec(f,s||hh(),u||null,c)}let ni=(()=>{class r{static#e=this.THROW_IF_NOT_FOUND=Ra;static#t=this.NULL=new L;static create(o,u){if(Array.isArray(o))return Gh({name:""},u,o,"");{const c=o.name??"";return Gh({name:c},o.parent,o.providers,c)}}static#n=this.\u0275prov=In({token:r,providedIn:"any",factory:()=>cr(ah)});static#r=this.__NG_ELEMENT_ID__=-1}return r})();function Ns(r){return r.ngOriginalError}class Vr{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&Ns(s);for(;o&&Ns(o);)o=Ns(o);return o||null}}const Au=new It("",{providedIn:"root",factory:()=>zt(Vr).handleError.bind(void 0)});let Is=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=Hc;static#t=this.__NG_ENV_ID__=o=>o}return r})();class wl extends Is{constructor(s){super(),this._lView=s}onDestroy(s){return qn(this._lView,s),()=>function vu(r,s){if(null===r[ul])return;const o=r[ul].indexOf(s);-1!==o&&r[ul].splice(o,1)}(this._lView,s)}}function Hc(){return new wl(Se())}function x_(){return ri(kn(),Se())}function ri(r,s){return new Cu(Nr(r,s))}let Cu=(()=>{class r{constructor(o){this.nativeElement=o}static#e=this.__NG_ELEMENT_ID__=x_}return r})();function zh(r){return r instanceof Cu?r.nativeElement:r}function xs(r){return s=>{setTimeout(r,void 0,s)}}const Li=class GE extends Vn.B{constructor(s=!1){super(),this.destroyRef=void 0,this.__isAsync=s,mp()&&(this.destroyRef=zt(Is,{optional:!0})??void 0)}emit(s){const o=Be(null);try{super.next(s)}finally{Be(o)}}subscribe(s,o,u){let c=s,f=o||(()=>null),m=u;if(s&&"object"==typeof s){const A=s;c=A.next?.bind(A),f=A.error?.bind(A),m=A.complete?.bind(A)}this.__isAsync&&(f=xs(f),c&&(c=xs(c)),m&&(m=xs(m)));const E=super.subscribe({next:c,error:f,complete:m});return s instanceof kr.yU&&s.add(E),E}};function qh(){return this._results[Symbol.iterator]()}class Wp{static#e=Symbol.iterator;get changes(){return this._changes??=new Li}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const o=Wp.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=qh)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){this.dirty=!1;const u=function Ii(r){return r.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function pc(r,s,o){if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],f=s[u];if(o&&(c=o(c),f=o(f)),f!==c)return!1}return!0}(this._results,u,o))&&(this._results=u,this.length=u.length,this.last=u[this.length-1],this.first=u[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(s){this._onDirty=s}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Tl(r){return!(128&~r.flags)}const v=new Map;let p=0;const ct="__ngContext__";function Ke(r,s){Ti(s)?(r[ct]=s[Dc],function I(r){v.set(r[Dc],r)}(s)):r[ct]=s}function Wc(r){return oD(r[Ac])}function Zp(r){return oD(r[Es])}function oD(r){for(;null!==r&&!Ai(r);)r=r[Es];return r}let KE;function CR(r){KE=r}function Xs(){if(void 0!==KE)return KE;if(typeof document<"u")return document;throw new rt(210,!1)}const Xh=new It("",{providedIn:"root",factory:()=>bR}),bR="ng",lD=new It(""),Kc=new It("",{providedIn:"platform",factory:()=>"unknown"}),SR=new It(""),RR=new It("",{providedIn:"root",factory:()=>Xs().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let NR=()=>null;function eI(r,s,o=!1){return NR(r,s,o)}const UR=new It("",{providedIn:"root",factory:()=>!1});let $_,H_;function ef(r){return function aI(){if(void 0===$_&&($_=null,Lt.trustedTypes))try{$_=Lt.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return $_}()?.createHTML(r)||r}function og(){if(void 0===H_&&(H_=null,Lt.trustedTypes))try{H_=Lt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return H_}function uI(r){return og()?.createHTML(r)||r}function Xc(r){return og()?.createScriptURL(r)||r}class Ro{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qr})`}}class lI extends Ro{getTypeName(){return"HTML"}}class jR extends Ro{getTypeName(){return"Style"}}class $R extends Ro{getTypeName(){return"Script"}}class pD extends Ro{getTypeName(){return"URL"}}class cI extends Ro{getTypeName(){return"ResourceURL"}}function Pu(r){return r instanceof Ro?r.changingThisBreaksApplicationSecurity:r}function Yc(r,s){const o=function gD(r){return r instanceof Ro&&r.getTypeName()||null}(r);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see ${Qr})`)}return o===s}function HR(r){return new lI(r)}function GR(r){return new jR(r)}function G_(r){return new $R(r)}function zR(r){return new pD(r)}function qR(r){return new cI(r)}class WR{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const o=(new window.DOMParser).parseFromString(ef(s),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(s):(o.removeChild(o.firstChild),o)}catch{return null}}}class _D{constructor(s){this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(s){const o=this.inertDocument.createElement("template");return o.innerHTML=ef(s),o}}const ag=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ug(r){return(r=String(r)).match(ag)?r:"unsafe:"+r}function Mu(r){const s={};for(const o of r.split(","))s[o]=!0;return s}function lg(...r){const s={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(s[u]=!0);return s}const yD=Mu("area,br,col,hr,img,wbr"),Po=Mu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vD=Mu("rp,rt"),hI=lg(yD,lg(Po,Mu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lg(vD,Mu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lg(vD,Po)),z_=Mu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ED=lg(z_,Mu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Mu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fI=Mu("script,style,template");class ID{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let o=s.firstChild,u=!0,c=[];for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)c.push(o),o=Ka(o);else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let f=wD(o);if(f){o=f;break}o=c.pop()}return this.buf.join("")}startElement(s){const o=TD(s).toLowerCase();if(!hI.hasOwnProperty(o))return this.sanitizedSomething=!0,!fI.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=s.attributes;for(let c=0;c<u.length;c++){const f=u.item(c),m=f.name,E=m.toLowerCase();if(!ED.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let A=f.value;z_[E]&&(A=ug(A)),this.buf.push(" ",m,'="',pI(A),'"')}return this.buf.push(">"),!0}endElement(s){const o=TD(s).toLowerCase();hI.hasOwnProperty(o)&&!yD.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(s){this.buf.push(pI(s))}}function wD(r){const s=r.nextSibling;if(s&&r!==s.previousSibling)throw XR(s);return s}function Ka(r){const s=r.firstChild;if(s&&function Gx(r,s){return(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(r,s))throw XR(s);return s}function TD(r){const s=r.nodeName;return"string"==typeof s?s:"FORM"}function XR(r){return new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`)}const zx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qx=/([^\#-~ |!])/g;function pI(r){return r.replace(/&/g,"&amp;").replace(zx,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(qx,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cg;function q_(r,s){let o=null;try{cg=cg||function mD(r){const s=new _D(r);return function KR(){try{return!!(new window.DOMParser).parseFromString(ef(""),"text/html")}catch{return!1}}()?new WR(s):s}(r);let u=s?String(s):"";o=cg.getInertBodyElement(u);let c=5,f=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=f,f=o.innerHTML,o=cg.getInertBodyElement(u)}while(u!==f);return ef((new ID).sanitizeChildren(gI(o)||o))}finally{if(o){const u=gI(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function gI(r){return"content"in r&&function YR(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var tf=function(r){return r[r.NONE=0]="NONE",r[r.HTML=1]="HTML",r[r.STYLE=2]="STYLE",r[r.SCRIPT=3]="SCRIPT",r[r.URL=4]="URL",r[r.RESOURCE_URL=5]="RESOURCE_URL",r}(tf||{});function mI(r){const s=dg();return s?uI(s.sanitize(tf.HTML,r)||""):Yc(r,"HTML")?uI(Pu(r)):q_(Xs(),qt(r))}function AD(r){const s=dg();return s?s.sanitize(tf.URL,r)||"":Yc(r,"URL")?Pu(r):ug(qt(r))}function ZR(r){const s=dg();if(s)return Xc(s.sanitize(tf.RESOURCE_URL,r)||"");if(Yc(r,"ResourceURL"))return Xc(Pu(r));throw new rt(904,!1)}function _I(r,s,o){return function Kx(r,s){return"src"===s&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===s&&("base"===r||"link"===r)?ZR:AD}(s,o)(r)}function dg(){const r=Se();return r&&r[ra].sanitizer}const nP=/^>|^->|<!--|-->|--!>|<!-$/g,rP=/(<|>)/g,iP="\u200b$1\u200b";function Os(r){return r instanceof Function?r():r}var fg=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(fg||{});let Q_;function II(r,s){return Q_(r,s)}function Zc(r,s,o,u,c){if(null!=u){let f,m=!1;Ai(u)?f=u:Ti(u)&&(m=!0,u=u[mr]);const E=zn(u);0===r&&null!==o?null==c?yg(s,o,E):xu(s,o,E,c||null,!0):1===r&&null!==o?xu(s,o,E,c||null,!0):2===r?function ty(r,s,o){const u=DI(r,s);u&&function AI(r,s,o,u){r.removeChild(s,o,u)}(r,u,s,o)}(s,E,m):3===r&&s.destroyNode(E),null!=f&&function yP(r,s,o,u,c){const f=o[Ki];f!==zn(o)&&Zc(s,r,u,f,c);for(let E=Mr;E<o.length;E++){const A=o[E];Ou(A[We],A,r,s,u,f)}}(s,r,f,o,c)}}function gg(r,s){return r.createComment(function CD(r){return r.replace(nP,s=>s.replace(rP,iP))}(s))}function mg(r,s,o){return r.createElement(s,o)}function X_(r,s){s[ra].changeDetectionScheduler?.notify(1),Ou(r,s,s[Wt],2,null,null)}function TI(r,s){const o=r[ar],u=o.indexOf(s);o.splice(u,1)}function Di(r,s){if(r.length<=Mr)return;const o=Mr+s,u=r[o];if(u){const c=u[sa];null!==c&&c!==r&&TI(c,u),s>0&&(r[o-1][Es]=u[Es]);const f=_o(r,Mr+s);!function MD(r,s){X_(r,s),s[mr]=null,s[Pr]=null}(u[We],u);const m=f[oa];null!==m&&m.detachView(f[We]),u[Ur]=null,u[Es]=null,u[xt]&=-129}return u}function ya(r,s){if(!(256&s[xt])){const o=s[Wt];o.destroyNode&&Ou(r,s,o,3,null,null),function Y_(r){let s=r[Ac];if(!s)return J_(r[We],r);for(;s;){let o=null;if(Ti(s))o=s[Ac];else{const u=s[Mr];u&&(o=u)}if(!o){for(;s&&!s[Es]&&s!==r;)Ti(s)&&J_(s[We],s),s=s[Ur];null===s&&(s=r),Ti(s)&&J_(s[We],s),o=s&&s[Es]}s=o}}(s)}}function J_(r,s){if(256&s[xt])return;const o=Be(null);try{s[xt]&=-129,s[xt]|=256,s[Cc]&&function Yt(r){if(pt(r),Pn(r))for(let s=0;s<r.producerNode.length;s++)Ot(r.producerNode[s],r.producerIndexOfThis[s]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}(s[Cc]),function iO(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=s[o[u]];if(!(c instanceof Fc)){const f=o[u+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const E=c[f[m]],A=f[m+1];Qs(4,E,A);try{A.call(E)}finally{Qs(5,E,A)}}else{Qs(4,c,f);try{f.call(c)}finally{Qs(5,c,f)}}}}}(r,s),function rO(r,s){const o=r.cleanup,u=s[na];if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const m=o[f+3];m>=0?u[m]():u[-m].unsubscribe(),f+=2}else o[f].call(u[o[f+1]]);null!==u&&(s[na]=null);const c=s[ul];if(null!==c){s[ul]=null;for(let f=0;f<c.length;f++)(0,c[f])()}}(r,s),1===s[We].type&&s[Wt].destroy();const u=s[sa];if(null!==u&&Ai(s[Ur])){u!==s[Ur]&&TI(u,s);const c=s[oa];null!==c&&c.detachView(r)}!function F(r){v.delete(r[Dc])}(s)}finally{Be(o)}}function _g(r,s,o){return function Z_(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[mr];{const{componentOffset:c}=u;if(c>-1){const{encapsulation:f}=r.data[u.directiveStart+c];if(f===D.None||f===D.Emulated)return null}return Nr(u,o)}}(r,s.parent,o)}function xu(r,s,o,u,c){r.insertBefore(s,o,u,c)}function yg(r,s,o){r.appendChild(s,o)}function kD(r,s,o,u,c){null!==u?xu(r,s,o,u,c):yg(r,s,o)}function DI(r,s){return r.parentNode(s)}let FD,gP=function pP(r,s,o){return 40&r.type?Nr(r,o):null};function ey(r,s,o,u){const c=_g(r,u,s),f=s[Wt],E=function fP(r,s,o){return gP(r,s,o)}(u.parent||s[Pr],u,s);if(null!=c)if(Array.isArray(o))for(let A=0;A<o.length;A++)kD(f,c,o[A],E,!1);else kD(f,c,o,E,!1);void 0!==FD&&FD(f,u,s,o,c)}function rf(r,s){if(null!==s){const o=s.type;if(3&o)return Nr(s,r);if(4&o)return VD(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return rf(r,u);{const c=r[s.index];return Ai(c)?VD(-1,c):zn(c)}}if(32&o)return II(s,r)()||zn(r[s.index]);{const u=_P(r,s);return null!==u?Array.isArray(u)?u[0]:rf(la(r[_r]),u):rf(r,s.next)}}return null}function _P(r,s){return null!==s?r[_r][Pr].projection[s.projection]:null}function VD(r,s){const o=Mr+r+1;if(o<s.length){const u=s[o],c=u[We].firstChild;if(null!==c)return rf(u,c)}return s[Ki]}function af(r,s,o,u,c,f,m){for(;null!=o;){const E=u[o.index],A=o.type;if(m&&0===s&&(E&&Ke(zn(E),u),o.flags|=2),32&~o.flags)if(8&A)af(r,s,o.child,u,c,f,!1),Zc(s,r,c,E,f);else if(32&A){const R=II(o,u);let x;for(;x=R();)Zc(s,r,c,x,f);Zc(s,r,c,E,f)}else 16&A?ny(r,s,u,o,c,f):Zc(s,r,c,E,f);o=m?o.projectionNext:o.next}}function Ou(r,s,o,u,c,f){af(o,u,r.firstChild,s,c,f,!1)}function ny(r,s,o,u,c,f){const m=o[_r],A=m[Pr].projection[u.projection];if(Array.isArray(A))for(let R=0;R<A.length;R++)Zc(s,r,c,A[R],f);else{let R=A;const x=m[Ur];Tl(u)&&(R.flags|=128),af(r,s,R,x,c,f,!0)}}function Eg(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function bI(r,s,o){const{mergedAttrs:u,classes:c,styles:f}=o;null!==u&&B(r,s,u),null!==c&&Eg(r,s,c),null!==f&&function vP(r,s,o){r.setAttribute(s,"style",o)}(r,s,f)}const ln={};function Ig(r=1){uf(En(),Se(),Fi()+r,!1)}function uf(r,s,o,u){if(!u)if(3&~s[xt]){const f=r.preOrderHooks;null!==f&&Xi(s,f,0,o)}else{const f=r.preOrderCheckHooks;null!==f&&Ph(s,f,o)}Ao(o)}function wg(r,s=_n.Default){const o=Se();return null===o?cr(r,s):A_(kn(),o,Et(r),s)}function EP(){throw new Error("invalid")}function IP(r,s,o,u,c,f){const m=Be(null);try{let E=null;c&P.SignalBased&&(E=s[u][Tt]),null!==E&&void 0!==E.transformFn&&(f=E.transformFn(f)),c&P.HasDecoratorInputTransform&&(f=r.inputTransforms[u].call(s,f)),null!==r.setInput?r.setInput(s,E,f,o,u):d_(s,E,u,f)}finally{Be(m)}}function SI(r,s,o,u,c,f,m,E,A,R,x){const V=s.blueprint.slice();return V[mr]=c,V[xt]=204|u,(null!==R||r&&2048&r[xt])&&(V[xt]|=2048),Th(V),V[Ur]=V[ia]=r,V[Gn]=o,V[ra]=m||r&&r[ra],V[Wt]=E||r&&r[Wt],V[Br]=A||r&&r[Br]||null,V[Pr]=f,V[Dc]=function g(){return p++}(),V[Ni]=x,V[bE]=R,V[_r]=2==s.type?r[_r]:V,V}function No(r,s,o,u,c){let f=r.data[s];if(null===f)f=function ed(r,s,o,u,c){const f=Ch(),m=wu(),A=r.data[s]=function DP(r,s,o,u,c,f){let m=s?s.injectorIndex:-1,E=0;return function Eu(){return null!==Kt.skipHydrationRootTNode}()&&(E|=128),{type:o,index:u,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,o,s,u,c);return null===r.firstChild&&(r.firstChild=A),null!==f&&(m?null==f.child&&null!==A.parent&&(f.child=A):null===f.next&&(f.next=A,A.prev=f)),A}(r,s,o,u,c),function nD(){return Kt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=o,f.value=u,f.attrs=c;const m=function ca(){const r=Kt.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return Rs(f,!0),f}function Rl(r,s,o,u){if(0===o)return-1;const c=s.length;for(let f=0;f<o;f++)s.push(u),r.blueprint.push(u),r.data.push(null);return c}function lf(r,s,o,u,c){const f=Fi(),m=2&u;try{Ao(-1),m&&s.length>jt&&uf(r,s,jt,!1),Qs(m?2:0,c),o(u,c)}finally{Ao(f),Qs(m?3:1,c)}}function cf(r,s,o){if(c_(s)){const u=Be(null);try{const f=s.directiveEnd;for(let m=s.directiveStart;m<f;m++){const E=r.data[m];E.contentQueries&&E.contentQueries(1,o[m],m)}}finally{Be(u)}}}function df(r,s,o){Mp()&&(function zD(r,s,o,u){const c=o.directiveStart,f=o.directiveEnd;_u(o)&&function pO(r,s,o){const u=Nr(s,r),c=ry(o);let m=16;o.signals?m=4096:o.onPush&&(m=64);const E=ly(r,SI(r,c,null,m,u,s,null,r[ra].rendererFactory.createRenderer(u,o),null,null,null));r[s.index]=E}(s,o,r.data[c+o.componentOffset]),r.firstCreatePass||pa(o,s),Ke(u,s);const m=o.initialInputs;for(let E=c;E<f;E++){const A=r.data[E],R=za(s,r,E,o);Ke(R,s),null!==m&&bP(0,E-c,R,A,0,m),Ks(A)&&(Nn(o.index,s)[Gn]=za(s,r,E,o))}}(r,s,o,Nr(o,s)),!(64&~o.flags)&&NI(r,s,o))}function RI(r,s,o=Nr){const u=s.localNames;if(null!==u){let c=s.index+1;for(let f=0;f<u.length;f+=2){const m=u[f+1],E=-1===m?o(s,r):r[m];r[c++]=E}}}function ry(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=hf(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):s}function hf(r,s,o,u,c,f,m,E,A,R,x){const V=jt+u,W=V+c,Z=function wP(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:ln);return o}(V,W),ue="function"==typeof R?R():R;return Z[We]={type:r,blueprint:Z,template:o,queries:null,viewQuery:E,declTNode:s,data:Z.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:A,consts:ue,incompleteFirstPass:!1,ssrId:x}}let BD=()=>null;function iy(r,s,o,u,c){for(let f in s){if(!s.hasOwnProperty(f))continue;const m=s[f];if(void 0===m)continue;u??={};let E,A=P.None;Array.isArray(m)?(E=m[0],A=m[1]):E=m;let R=f;if(null!==c){if(!c.hasOwnProperty(f))continue;R=c[f]}0===r?CP(u,o,R,E,A):CP(u,o,R,E)}return u}function CP(r,s,o,u,c){let f;r.hasOwnProperty(o)?(f=r[o]).push(s,u):f=r[o]=[s,u],void 0!==c&&f.push(c)}function ks(r,s,o,u,c,f,m,E){const A=Nr(s,o);let x,R=s.inputs;!E&&null!=R&&(x=R[u])?(hy(r,o,x,u,c),_u(s)&&function $D(r,s){const o=Nn(s,r);16&o[xt]||(o[xt]|=64)}(o,s.index)):3&s.type&&(u=function PI(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=m?m(c,s.value||"",u):c,f.setProperty(A,u,c))}function HD(r,s,o,u){if(Mp()){const c=null===u?null:{"":-1},f=function cO(r,s){const o=r.directiveRegistry;let u=null,c=null;if(o)for(let f=0;f<o.length;f++){const m=o[f];if(pr(s,m.selectors,!1))if(u||(u=[]),Ks(m))if(null!==m.findHostDirectiveDefs){const E=[];c=c||new Map,m.findHostDirectiveDefs(m,E,c),u.unshift(...E,m),xI(r,s,E.length)}else u.unshift(m),xI(r,s,0);else c=c||new Map,m.findHostDirectiveDefs?.(m,u,c),u.push(m)}return null===u?null:[u,c]}(r,o);let m,E;null===f?m=E=null:[m,E]=f,null!==m&&GD(r,s,o,m,c,E),c&&function qD(r,s,o){if(s){const u=r.localNames=[];for(let c=0;c<s.length;c+=2){const f=o[s[c+1]];if(null==f)throw new rt(-301,!1);u.push(s[c],f)}}}(o,u,c)}o.mergedAttrs=he(o.mergedAttrs,o.attrs)}function GD(r,s,o,u,c,f){for(let R=0;R<u.length;R++)Vh(pa(o,s),r,u[R].type);!function hO(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}(o,r.data.length,u.length);for(let R=0;R<u.length;R++){const x=u[R];x.providersResolver&&x.providersResolver(x)}let m=!1,E=!1,A=Rl(r,s,u.length,null);for(let R=0;R<u.length;R++){const x=u[R];o.mergedAttrs=he(o.mergedAttrs,x.hostAttrs),fO(r,o,s,A,x),dO(A,x,c),null!==x.contentQueries&&(o.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(o.flags|=64);const V=x.type.prototype;!m&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((r.preOrderHooks??=[]).push(o.index),m=!0),!E&&(V.ngOnChanges||V.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(o.index),E=!0),A++}!function uO(r,s,o){const c=s.directiveEnd,f=r.data,m=s.attrs,E=[];let A=null,R=null;for(let x=s.directiveStart;x<c;x++){const V=f[x],W=o?o.get(V):null,ue=W?W.outputs:null;A=iy(0,V.inputs,x,A,W?W.inputs:null),R=iy(1,V.outputs,x,R,ue);const be=null===A||null===m||gn(s)?null:WD(A,x,m);E.push(be)}null!==A&&(A.hasOwnProperty("class")&&(s.flags|=8),A.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=E,s.inputs=A,s.outputs=R}(r,o,f)}function NI(r,s,o){const u=o.directiveStart,c=o.directiveEnd,f=o.index,m=function Fp(){return Kt.lFrame.currentDirectiveIndex}();try{Ao(f);for(let E=u;E<c;E++){const A=r.data[E],R=s[E];bh(E),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Ag(A,R)}}finally{Ao(-1),bh(m)}}function Ag(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function xI(r,s,o){s.componentOffset=o,(r.components??=[]).push(s.index)}function dO(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;Ks(s)&&(o[""]=r)}}function fO(r,s,o,u,c){r.data[u]=c;const f=c.factory||(c.factory=Oa(c.type)),m=new Fc(f,Ks(c),wg);r.blueprint[u]=m,o[u]=m,function Tg(r,s,o,u,c){const f=c.hostBindings;if(f){let m=r.hostBindingOpCodes;null===m&&(m=r.hostBindingOpCodes=[]);const E=~s.index;(function sy(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(m)!=E&&m.push(E),m.push(o,u,f)}}(r,s,u,Rl(r,o,c.hostVars,ln),c)}function Xa(r,s,o,u,c,f){const m=Nr(r,s);!function oy(r,s,o,u,c,f,m){if(null==f)r.removeAttribute(s,c,o);else{const E=null==m?qt(f):m(f,u||"",c);r.setAttribute(s,c,E,o)}}(s[Wt],m,f,r.value,o,u,c)}function bP(r,s,o,u,c,f){const m=f[s];if(null!==m)for(let E=0;E<m.length;)IP(u,o,m[E++],m[E++],m[E++],m[E++])}function WD(r,s,o){let u=null,c=0;for(;c<o.length;){const f=o[c];if(0!==f)if(5!==f){if("number"==typeof f)break;if(r.hasOwnProperty(f)){null===u&&(u=[]);const m=r[f];for(let E=0;E<m.length;E+=3)if(m[E]===s){u.push(f,m[E+1],m[E+2],o[c+1]);break}}c+=2}else c+=2;else c+=4}return u}function ay(r,s,o,u){return[r,!0,0,s,null,u,null,o,null,null]}function uy(r,s){const o=r.contentQueries;if(null!==o){const u=Be(null);try{for(let c=0;c<o.length;c+=2){const m=o[c+1];if(-1!==m){const E=r.data[m];Ps(o[c]),E.contentQueries(2,s[m],m)}}}finally{Be(u)}}}function ly(r,s){return r[Ac]?r[al][Es]=s:r[Ac]=s,r[al]=s,s}function cy(r,s,o){Ps(0);const u=Be(null);try{s(r,o)}finally{Be(u)}}function SP(r){return r[na]||(r[na]=[])}function KD(r){return r.cleanup||(r.cleanup=[])}function OI(r,s,o){return(null===r||Ks(r))&&(o=function Pc(r){for(;Array.isArray(r);){if("object"==typeof r[vp])return r;r=r[mr]}return null}(o[s.index])),o[Wt]}function dy(r,s){const o=r[Br],u=o?o.get(Vr,null):null;u&&u.handleError(s)}function hy(r,s,o,u,c){for(let f=0;f<o.length;){const m=o[f++],E=o[f++],A=o[f++];IP(r.data[m],s[m],u,E,A,c)}}function va(r,s,o){const u=ua(s,r);!function wI(r,s,o){r.setValue(s,o)}(r[Wt],u,o)}function RP(r,s){const o=Nn(s,r),u=o[We];!function QD(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])}(u,o);const c=o[mr];null!==c&&null===o[Ni]&&(o[Ni]=eI(c,o[Br])),kI(u,o,o[Gn])}function kI(r,s,o){gl(s);try{const u=r.viewQuery;null!==u&&cy(1,u,o);const c=r.template;null!==c&&lf(r,s,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),s[oa]?.finishViewCreation(r),r.staticContentQueries&&uy(r,s),r.staticViewQueries&&cy(2,r.viewQuery,o);const f=r.components;null!==f&&function fy(r,s){for(let o=0;o<s.length;o++)RP(r,s[o])}(s,f)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[xt]&=-5,pi()}}function ff(r,s){return!s||null===s.firstChild||Tl(r)}function td(r,s,o,u=!0){const c=s[We];if(function xD(r,s,o,u){const c=Mr+u,f=o.length;u>0&&(o[c-1][Es]=s),u<f-Mr?(s[Es]=o[c],gc(o,Mr+u,s)):(o.push(s),s[Es]=null),s[Ur]=o;const m=s[sa];null!==m&&o!==m&&function OD(r,s){const o=r[ar];s[_r]!==s[Ur][Ur][_r]&&(r[xt]|=ll.HasTransplantedViews),null===o?r[ar]=[s]:o.push(s)}(m,s);const E=s[oa];null!==E&&E.insertView(r),Nc(s),s[xt]|=128}(c,s,r,o),u){const m=VD(o,r),E=s[Wt],A=DI(E,r[Ki]);null!==A&&function ND(r,s,o,u,c,f){u[mr]=c,u[Pr]=s,Ou(r,u,o,1,c,f)}(c,r[Pr],E,s,A,m)}const f=s[Ni];null!==f&&null!==f.firstChild&&(f.firstChild=null)}function Cg(r,s,o,u,c=!1){for(;null!==o;){const f=s[o.index];null!==f&&u.push(zn(f)),Ai(f)&&my(f,u);const m=o.type;if(8&m)Cg(r,s,o.child,u);else if(32&m){const E=II(o,s);let A;for(;A=E();)u.push(A)}else if(16&m){const E=_P(s,o);if(Array.isArray(E))u.push(...E);else{const A=la(s[_r]);Cg(A[We],A,E,u,!0)}}o=c?o.projectionNext:o.next}return u}function my(r,s){for(let o=Mr;o<r.length;o++){const u=r[o],c=u[We].firstChild;null!==c&&Cg(u[We],u,c,s)}r[Ki]!==r[mr]&&s.push(r[Ki])}let XD=[];const MP={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{yu(r.lView)},consumerOnSignalRead(){this.lView[Cc]=this}},JD=100;function bg(r,s=!0,o=0){const u=r[ra],c=u.rendererFactory;c.begin?.();try{!function NP(r,s){_y(r,s);let o=0;for(;Dh(r);){if(o===JD)throw new rt(103,!1);o++,_y(r,1)}}(r,o)}catch(m){throw s&&dy(r,m),m}finally{c.end?.(),u.inlineEffectRunner?.flush()}}function VI(r,s,o,u){const c=s[xt];if(!(256&~c))return;s[ra].inlineEffectRunner?.flush(),gl(s);let m=null,E=null;(function xP(r){return 2!==r.type})(r)&&(E=function YD(r){return r[Cc]??function PP(r){const s=XD.pop()??Object.create(MP);return s.lView=r,s}(r)}(s),m=function Rt(r){return r&&(r.nextProducerIndex=0),Be(r)}(E));try{Th(s),function kp(r){return Kt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&lf(r,s,o,2,u);const A=!(3&~c);if(A){const V=r.preOrderCheckHooks;null!==V&&Ph(s,V,null)}else{const V=r.preOrderHooks;null!==V&&Xi(s,V,0,null),kc(s,0)}if(function ZD(r){for(let s=Wc(r);null!==s;s=Zp(s)){if(!(s[xt]&ll.HasTransplantedViews))continue;const o=s[ar];for(let u=0;u<o.length;u++){OE(o[u])}}}(s),LI(s,0),null!==r.contentQueries&&uy(r,s),A){const V=r.contentCheckHooks;null!==V&&Ph(s,V)}else{const V=r.contentHooks;null!==V&&Xi(s,V,1),kc(s,1)}!function LD(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)Ao(~c);else{const f=c,m=o[++u],E=o[++u];pl(m,f),E(2,s[f])}}}finally{Ao(-1)}}(r,s);const R=r.components;null!==R&&tC(s,R,0);const x=r.viewQuery;if(null!==x&&cy(2,x,u),A){const V=r.viewCheckHooks;null!==V&&Ph(s,V)}else{const V=r.viewHooks;null!==V&&Xi(s,V,2),kc(s,2)}if(!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[Ua]){for(const V of s[Ua])V();s[Ua]=null}s[xt]&=-73}catch(A){throw yu(s),A}finally{null!==E&&(function Fn(r,s){if(Be(s),r&&void 0!==r.producerNode&&void 0!==r.producerIndexOfThis&&void 0!==r.producerLastReadVersion){if(Pn(r))for(let o=r.nextProducerIndex;o<r.producerNode.length;o++)Ot(r.producerNode[o],r.producerIndexOfThis[o]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}(E,m),function FI(r){r.lView[Cc]!==r&&(r.lView=null,XD.push(r))}(E)),pi()}}function LI(r,s){for(let o=Wc(r);null!==o;o=Zp(o))for(let u=Mr;u<o.length;u++)eC(o[u],s)}function nd(r,s,o){eC(Nn(s,r),o)}function eC(r,s){Io(r)&&_y(r,s)}function _y(r,s){const u=r[We],c=r[xt],f=r[Cc];let m=!!(0===s&&16&c);if(m||=!!(64&c&&0===s),m||=!!(1024&c),m||=!(!f?.dirty||!ir(f)),f&&(f.dirty=!1),r[xt]&=-9217,m)VI(u,r,u.template,r[Gn]);else if(8192&c){LI(r,1);const E=u.components;null!==E&&tC(r,E,1)}}function tC(r,s,o){for(let u=0;u<s.length;u++)nd(r,s[u],o)}function pf(r){for(r[ra].changeDetectionScheduler?.notify();r;){r[xt]|=64;const s=la(r);if(dl(r)&&!s)return r;r=s}return null}class Sg{get rootNodes(){const s=this._lView,o=s[We];return Cg(o,s,o.firstChild,[])}constructor(s,o,u=!0){this._lView=s,this._cdRefInjectingView=o,this.notifyErrorHandler=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gn]}set context(s){this._lView[Gn]=s}get destroyed(){return!(256&~this._lView[xt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[Ur];if(Ai(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Di(s,u),_o(o,u))}this._attachedToViewContainer=!1}ya(this._lView[We],this._lView)}onDestroy(s){qn(this._lView,s)}markForCheck(){pf(this._cdRefInjectingView||this._lView)}detach(){this._lView[xt]&=-129}reattach(){Nc(this._lView),this._lView[xt]|=128}detectChanges(){this._lView[xt]|=1024,bg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,X_(this._lView[We],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new rt(902,!1);this._appRef=s,Nc(this._lView)}}let Rg=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=OP}return r})();const UI=Rg,nC=class extends UI{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,o){return this.createEmbeddedViewImpl(s,o)}createEmbeddedViewImpl(s,o,u){const c=function Dg(r,s,o,u){const c=Be(null);try{const f=s.tView,A=SI(r,f,o,4096&r[xt]?4096:16,null,s,null,null,u?.injector??null,u?.embeddedViewInjector??null,u?.dehydratedView??null);A[sa]=r[s.index];const x=r[oa];return null!==x&&(A[oa]=x.createEmbeddedView(f)),kI(f,A,o),A}finally{Be(c)}}(this._declarationLView,this._declarationTContainer,s,{embeddedViewInjector:o,dehydratedView:u});return new Sg(c)}};function OP(){return Pg(kn(),Se())}function Pg(r,s){return 4&r.type?new nC(s,r,ri(r,s)):null}class wy{}class Ty{}class HI{}class QP{resolveComponentFactory(s){throw function gC(r){const s=Error(`No component factory found for ${yn(r)}.`);return s.ngComponent=r,s}(s)}}let Mg=(()=>{class r{static#e=this.NULL=new QP}return r})();class vf{}let AO=(()=>{class r{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function XP(){const r=Se(),o=Nn(kn().index,r);return(Ti(o)?o:r)[Wt]}()}return r})(),_C=(()=>{class r{static#e=this.\u0275prov=In({token:r,providedIn:"root",factory:()=>null})}return r})();const GI={},YP=new Set;function Ya(r){YP.has(r)||(YP.add(r),performance?.mark?.("mark_feature_usage",{detail:{feature:r}}))}function JP(...r){}class vr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Li(!1),this.onMicrotaskEmpty=new Li(!1),this.onStable=new Li(!1),this.onError=new Li(!1),typeof Zone>"u")throw new rt(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function zI(){const r="function"==typeof Lt.requestAnimationFrame;let s=Lt[r?"requestAnimationFrame":"setTimeout"],o=Lt[r?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Ay(r){const s=()=>{!function eM(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Lt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,WI(r),r.isCheckStableRunning=!0,qI(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),WI(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,f,m,E)=>{if(function Ng(r){return!(!Array.isArray(r)||1!==r.length)&&!0===r[0].data?.__ignore_ng_zone__}(E))return o.invokeTask(c,f,m,E);try{return KI(r),o.invokeTask(c,f,m,E)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||r.shouldCoalesceRunChangeDetection)&&s(),vC(r)}},onInvoke:(o,u,c,f,m,E,A)=>{try{return KI(r),o.invoke(c,f,m,E,A)}finally{r.shouldCoalesceRunChangeDetection&&s(),vC(r)}},onHasTask:(o,u,c,f)=>{o.hasTask(c,f),u===c&&("microTask"==f.change?(r._hasPendingMicrotasks=f.microTask,WI(r),qI(r)):"macroTask"==f.change&&(r.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,c,f)=>(o.handleError(c,f),r.runOutsideAngular(()=>r.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vr.isInAngularZone())throw new rt(909,!1)}static assertNotInAngularZone(){if(vr.isInAngularZone())throw new rt(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,c){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+c,s,ZP,JP,JP);try{return f.runTask(m,o,u)}finally{f.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const ZP={};function qI(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function WI(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function KI(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function vC(r){r._nesting--,qI(r)}class Dy{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Li,this.onMicrotaskEmpty=new Li,this.onStable=new Li,this.onError=new Li}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,c){return s.apply(o,u)}}var rd=function(r){return r[r.EarlyRead=0]="EarlyRead",r[r.Write=1]="Write",r[r.MixedReadWrite=2]="MixedReadWrite",r[r.Read=3]="Read",r}(rd||{});const IC={destroy(){}};function tM(r,s){!s&&function _p(r){if(!mp())throw new rt(-203,!1)}();const o=s?.injector??zt(ni);if(!function Mo(r){return"browser"===(r??zt(ni)).get(Kc)}(o))return IC;Ya("NgAfterNextRender");const u=o.get(Cy),c=u.handler??=new nM,f=s?.phase??rd.MixedReadWrite,m=()=>{c.unregister(A),E()},E=o.get(Is).onDestroy(m),A=gu(o,()=>new xg(f,()=>{m(),r()}));return c.register(A),{destroy:m}}class xg{constructor(s,o){this.phase=s,this.callbackFn=o,this.zone=zt(vr),this.errorHandler=zt(Vr,{optional:!0}),zt(wy,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(s){this.errorHandler?.handleError(s)}}}class nM{constructor(){this.executingCallbacks=!1,this.buckets={[rd.EarlyRead]:new Set,[rd.Write]:new Set,[rd.MixedReadWrite]:new Set,[rd.Read]:new Set},this.deferredCallbacks=new Set}register(s){(this.executingCallbacks?this.deferredCallbacks:this.buckets[s.phase]).add(s)}unregister(s){this.buckets[s.phase].delete(s),this.deferredCallbacks.delete(s)}execute(){this.executingCallbacks=!0;for(const s of Object.values(this.buckets))for(const o of s)o.invoke();this.executingCallbacks=!1;for(const s of this.deferredCallbacks)this.buckets[s.phase].add(s);this.deferredCallbacks.clear()}destroy(){for(const s of Object.values(this.buckets))s.clear();this.deferredCallbacks.clear()}}let Cy=(()=>{class r{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const o=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const u of o)u()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=In({token:r,providedIn:"root",factory:()=>new r})}return r})();function ku(r){return!!Un(r)}function ls(r,s,o){let u=o?r.styles:null,c=o?r.classes:null,f=0;if(null!==s)for(let m=0;m<s.length;m++){const E=s[m];"number"==typeof E?f=E:1==f?c=ps(c,E):2==f&&(u=ps(u,E+": "+s[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}class CC extends Mg{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=He(s);return new Og(o,this.ngModule)}}function bC(r){const s=[];for(const o in r){if(!r.hasOwnProperty(o))continue;const u=r[o];void 0!==u&&s.push({propName:Array.isArray(u)?u[0]:u,templateName:o})}return s}class xo{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){u=hc(u);const c=this.injector.get(s,GI,u);return c!==GI||o===GI?c:this.parentInjector.get(s,o,u)}}class Og extends HI{get inputs(){const s=this.componentDef,o=s.inputTransforms,u=bC(s.inputs);if(null!==o)for(const c of u)o.hasOwnProperty(c.propName)&&(c.transform=o[c.propName]);return u}get outputs(){return bC(this.componentDef.outputs)}constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function hi(r){return r.map(di).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}create(s,o,u,c){const f=Be(null);try{let m=(c=c||this.ngModule)instanceof vs?c:c?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const E=m?new xo(s,m):s,A=E.get(vf,null);if(null===A)throw new rt(407,!1);const R=E.get(_C,null),W={rendererFactory:A,sanitizer:R,inlineEffectRunner:null,afterRenderEventManager:E.get(Cy,null),changeDetectionScheduler:E.get(wy,null)},Z=A.createRenderer(null,this.componentDef),ue=this.componentDef.selectors[0][0]||"div",be=u?function TP(r,s,o,u){const f=u.get(UR,!1)||o===D.ShadowDom,m=r.selectRootElement(s,f);return function UD(r){BD(r)}(m),m}(Z,u,this.componentDef.encapsulation,E):mg(Z,ue,function DO(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(ue));let $e=512;this.componentDef.signals?$e|=4096:this.componentDef.onPush||($e|=16);let Qe=null;null!==be&&(Qe=eI(be,E,!0));const Le=hf(0,null,null,1,0,null,null,null,null,null,null),Qt=SI(null,Le,null,$e,null,null,W,Z,E,null,Qe);let Rn,tr;gl(Qt);try{const bi=this.componentDef;let As,Xd=null;bi.findHostDirectiveDefs?(As=[],Xd=new Map,bi.findHostDirectiveDefs(bi,As,Xd),As.push(bi)):As=[bi];const zS=function sM(r,s){const o=r[We],u=jt;return r[u]=s,No(o,u,2,"#host",null)}(Qt,be),ax=function oM(r,s,o,u,c,f,m){const E=c[We];!function aM(r,s,o,u){for(const c of r)s.mergedAttrs=he(s.mergedAttrs,c.hostAttrs);null!==s.mergedAttrs&&(ls(s,s.mergedAttrs,!0),null!==o&&bI(u,o,s))}(u,r,s,m);let A=null;null!==s&&(A=eI(s,c[Br]));const R=f.rendererFactory.createRenderer(s,o);let x=16;o.signals?x=4096:o.onPush&&(x=64);const V=SI(c,ry(o),null,x,c[r.index],r,f,R,null,null,A);return E.firstCreatePass&&xI(E,r,u.length-1),ly(c,V),c[r.index]=V}(zS,be,bi,As,Qt,W,Z);tr=Mc(Le,jt),be&&function Ry(r,s,o,u){if(u)B(r,o,["ng-version","17.3.9"]);else{const{attrs:c,classes:f}=function yo(r){const s=[],o=[];let u=1,c=2;for(;u<r.length;){let f=r[u];if("string"==typeof f)2===c?""!==f&&s.push(f,r[++u]):8===c&&o.push(f);else{if(!Dt(c))break;c=f}u++}return{attrs:s,classes:o}}(s.selectors[0]);c&&B(r,o,c),f&&f.length>0&&Eg(r,o,f.join(" "))}}(Z,bi,be,u),void 0!==o&&function Py(r,s,o){const u=r.projection=[];for(let c=0;c<s.length;c++){const f=o[c];u.push(null!=f?Array.from(f):null)}}(tr,this.ngContentSelectors,o),Rn=function SC(r,s,o,u,c,f){const m=kn(),E=c[We],A=Nr(m,c);GD(E,c,m,o,null,u);for(let x=0;x<o.length;x++)Ke(za(c,E,m.directiveStart+x,m),c);NI(E,c,m),A&&Ke(A,c);const R=za(c,E,m.directiveStart+m.componentOffset,m);if(r[Gn]=c[Gn]=R,null!==f)for(const x of f)x(R,s);return cf(E,m,c),R}(ax,bi,As,Xd,Qt,[XI]),kI(Le,Qt,null)}finally{pi()}return new iM(this.componentType,Rn,ri(tr,Qt),Qt,tr)}finally{Be(f)}}}class iM extends Ty{constructor(s,o,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new Sg(c,void 0,!1),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),o))return;const f=this._rootLView;hy(f[We],f,c,s,o),this.previousInputValues.set(s,o),pf(Nn(this._tNode.index,f))}}get injector(){return new Gr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function XI(){const r=kn();_l(Se()[We],r)}let My=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=uM}return r})();function uM(){return ZI(kn(),Se())}const lM=My,YI=class extends lM{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return ri(this._hostTNode,this._hostLView)}get injector(){return new Gr(this._hostTNode,this._hostLView)}get parentInjector(){const s=ga(this._hostTNode,this._hostLView);if(Ga(s)){const o=vl(s,this._hostLView),u=xn(s);return new Gr(o[We].data[u+8],o)}return new Gr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=RC(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-Mr}createEmbeddedView(s,o,u){let c,f;"number"==typeof u?c=u:null!=u&&(c=u.index,f=u.injector);const E=s.createEmbeddedViewImpl(o||{},f,null);return this.insertImpl(E,c,ff(this._hostTNode,null)),E}createComponent(s,o,u,c,f){const m=s&&!function wc(r){return"function"==typeof r}(s);let E;if(m)E=o;else{const ue=o||{};E=ue.index,u=ue.injector,c=ue.projectableNodes,f=ue.environmentInjector||ue.ngModuleRef}const A=m?s:new Og(He(s)),R=u||this.parentInjector;if(!f&&null==A.ngModule){const be=(m?R:this.parentInjector).get(vs,null);be&&(f=be)}He(A.componentType??{});const Z=A.create(R,c,null,f);return this.insertImpl(Z.hostView,E,ff(this._hostTNode,null)),Z}insert(s,o){return this.insertImpl(s,o,!0)}insertImpl(s,o,u){const c=s._lView;if(function hl(r){return Ai(r[Ur])}(c)){const E=this.indexOf(s);if(-1!==E)this.detach(E);else{const A=c[Ur],R=new YI(A,A[Pr],A[Ur]);R.detach(R.indexOf(s))}}const f=this._adjustIndex(o),m=this._lContainer;return td(m,c,f,u),s.attachToViewContainerRef(),gc(JI(m),f,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=RC(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Di(this._lContainer,o);u&&(_o(JI(this._lContainer),o),ya(u[We],u))}detach(s){const o=this._adjustIndex(s,-1),u=Di(this._lContainer,o);return u&&null!=_o(JI(this._lContainer),o)?new Sg(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function RC(r){return r[8]}function JI(r){return r[8]||(r[8]=[])}function ZI(r,s){let o;const u=s[r.index];return Ai(u)?o=u:(o=ay(u,s,null,r),s[r.index]=o,ly(s,o)),PC(o,s,r,u),new YI(o,r,s)}let PC=function MC(r,s,o,u){if(r[Ki])return;let c;c=8&o.type?zn(u):function CO(r,s){const o=r[Wt],u=o.createComment(""),c=Nr(s,r);return xu(o,DI(o,c),u,function oO(r,s){return r.nextSibling(s)}(o,c),!1),u}(s,o),r[Ki]=c},ew=()=>!1;class rw{constructor(s){this.queryList=s,this.matches=null}clone(){return new rw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ny{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,c=[];for(let f=0;f<u;f++){const m=o.getByIndex(f);c.push(this.queries[m.indexInDeclarationView].clone())}return new Ny(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}finishViewCreation(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==Fu(s,o).matches&&this.queries[o].setDirty()}}class iw{constructor(s,o,u=null){this.flags=o,this.read=u,this.predicate="string"==typeof s?function jn(r){return r.split(",").map(s=>s.trim())}(s):s}}class xy{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(s,c);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new xy(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Oy{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new Oy(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1&~this.metadata.flags){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(s,o,OC(o,f)),this.matchTNodeWithReadOption(s,o,Bh(o,s,f,!1,!1))}else u===Rg?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,Bh(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Cu||c===My||c===Rg&&4&o.type)this.addMatch(o.index,-2);else{const f=Bh(o,s,c,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function OC(r,s){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function FC(r,s,o,u){return-1===o?function kC(r,s){return 11&r.type?ri(r,s):4&r.type?Pg(r,s):null}(s,r):-2===o?function If(r,s,o){return o===Cu?ri(s,r):o===Rg?Pg(s,r):o===My?ZI(s,r):void 0}(r,s,u):za(r,r[We],o,s)}function VC(r,s,o,u){const c=s[oa].queries[u];if(null===c.matches){const f=r.data,m=o.matches,E=[];for(let A=0;null!==m&&A<m.length;A+=2){const R=m[A];E.push(R<0?null:FC(s,f[R],m[A+1],o.metadata.read))}c.matches=E}return c.matches}function kg(r,s,o,u){const c=r.queries.getByIndex(o),f=c.matches;if(null!==f){const m=VC(r,s,c,o);for(let E=0;E<f.length;E+=2){const A=f[E];if(A>0)u.push(m[E/2]);else{const R=f[E+1],x=s[-A];for(let V=Mr;V<x.length;V++){const W=x[V];W[sa]===W[Ur]&&kg(W[We],W,R,u)}if(null!==x[ar]){const V=x[ar];for(let W=0;W<V.length;W++){const Z=V[W];kg(Z[We],Z,R,u)}}}}}return u}function Ea(r,s,o,u){const c=En();if(c.firstCreatePass){const f=kn();(function aw(r,s,o){null===r.queries&&(r.queries=new xy),r.queries.track(new Oy(s,o))})(c,new iw(s,o,u),f.index),function UC(r,s){const o=r.contentQueries||(r.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,s)}(c,r),!(2&~o)&&(c.staticContentQueries=!0)}return function LC(r,s,o){const u=new Wp(!(4&~o));return function aO(r,s,o,u){const c=SP(s);c.push(o),r.firstCreatePass&&KD(r).push(u,c.length-1)}(r,s,u,u.destroy),(s[oa]??=new Ny).queries.push(new rw(u))-1}(c,Se(),o)}function Fu(r,s){return r.queries.getByIndex(s)}function uw(r,s){const o=r[We],u=Fu(o,s);return u.crossesNgTemplate?kg(o,r,s,[]):VC(o,r,u,s)}function lw(r){return function Fg(r){return"function"==typeof r&&void 0!==r[Tt]}(r)&&"function"==typeof r.set}function Vu(r){let s=function Vy(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;s;){let c;if(Ks(r))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new rt(903,!1);c=s.\u0275dir}if(c){if(o){u.push(c);const m=r;m.inputs=Ly(r.inputs),m.inputTransforms=Ly(r.inputTransforms),m.declaredInputs=Ly(r.declaredInputs),m.outputs=Ly(r.outputs);const E=c.hostBindings;E&&zC(r,E);const A=c.viewQuery,R=c.contentQueries;if(A&&bf(r,A),R&&GC(r,R),mM(r,c),fs(r.outputs,c.outputs),Ks(c)&&c.data.animation){const x=r.data;x.animation=(x.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let m=0;m<f.length;m++){const E=f[m];E&&E.ngInherit&&E(r),E===Vu&&(o=!1)}}s=Object.getPrototypeOf(s)}!function od(r){let s=0,o=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=s+=c.hostVars,c.hostAttrs=he(c.hostAttrs,o=he(o,c.hostAttrs))}}(u)}function mM(r,s){for(const o in s.inputs){if(!s.inputs.hasOwnProperty(o)||r.inputs.hasOwnProperty(o))continue;const u=s.inputs[o];if(void 0!==u&&(r.inputs[o]=u,r.declaredInputs[o]=s.declaredInputs[o],null!==s.inputTransforms)){const c=Array.isArray(u)?u[0]:u;if(!s.inputTransforms.hasOwnProperty(c))continue;r.inputTransforms??={},r.inputTransforms[c]=s.inputTransforms[c]}}}function Ly(r){return r===Yr?{}:r===pn?[]:r}function bf(r,s){const o=r.viewQuery;r.viewQuery=o?(u,c)=>{s(u,c),o(u,c)}:s}function GC(r,s){const o=r.contentQueries;r.contentQueries=o?(u,c,f)=>{s(u,c,f),o(u,c,f)}:s}function zC(r,s){const o=r.hostBindings;r.hostBindings=o?(u,c)=>{s(u,c),o(u,c)}:s}function gw(r){const s=r.inputConfig,o={};for(const u in s)if(s.hasOwnProperty(u)){const c=s[u];Array.isArray(c)&&c[3]&&(o[u]=c[3])}r.inputTransforms=o}class ad{}class Sf{}function Nl(r,s){return new Uu(r,s??null,[])}class Uu extends ad{constructor(s,o,u){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new CC(this);const c=Un(s);this._bootstrapComponents=Os(c.bootstrap),this._r3Injector=zp(s,o,[{provide:ad,useValue:this},{provide:Mg,useValue:this.componentFactoryResolver},...u],yn(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class By extends Sf{constructor(s){super(),this.moduleType=s}create(s){return new Uu(this.moduleType,s,[])}}class KC extends ad{constructor(s){super(),this.componentFactoryResolver=new CC(this),this.instance=null;const o=new Ec([...s.providers,{provide:ad,useValue:this},{provide:Mg,useValue:this.componentFactoryResolver}],s.parent||hh(),s.debugName,new Set(["environment"]));this.injector=o,s.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function _w(r,s,o=null){return new KC({providers:r,parent:s,debugName:o,runEnvironmentInitializers:!0}).injector}let ud=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Hi.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const o=this.taskId++;return this.pendingTasks.add(o),o}remove(o){this.pendingTasks.delete(o),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function jg(r){return!!yw(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function yw(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Ja(r,s,o){return r[s]=o}function ii(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function Rf(r,s,o,u,c,f,m,E){const A=Se(),R=En(),x=r+jt,V=R.firstCreatePass?function vM(r,s,o,u,c,f,m,E,A){const R=s.consts,x=No(s,r,4,m||null,wo(R,E));HD(s,o,x,wo(R,A)),_l(s,x);const V=x.tView=hf(2,x,u,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,R,null);return null!==s.queries&&(s.queries.template(s,x),V.queries=s.queries.embeddedTView(x)),x}(x,R,A,s,o,u,c,f,m):R.data[x];Rs(V,!1);const W=XC(R,A,V,r);ha()&&ey(R,A,W,V),Ke(W,A);const Z=ay(W,A,W,V);return A[x]=Z,ly(A,Z),function tw(r,s,o){return ew(r,s,o)}(Z,V,A),cl(V)&&df(R,A,V),null!=m&&RI(A,V,E),Rf}let XC=function YC(r,s,o,u){return Do(!0),s[Wt].createComment("")};function pd(r,s,o,u){const c=Se();return ii(c,ki(),s)&&(En(),Xa(Wn(),c,r,s,o,u)),pd}function gd(r,s,o,u,c,f){const E=function ld(r,s,o,u){const c=ii(r,s,o);return ii(r,s+1,u)||c}(r,function To(){return Kt.lFrame.bindingIndex}(),o,c);return ti(2),E?s+qt(o)+u+qt(c)+f:ln}function Ll(r,s){return r<<17|s<<2}function Wu(r){return r>>17&32767}function Ta(r){return 2|r}function Id(r){return(131068&r)>>2}function ds(r,s){return-131069&r|s<<2}function wd(r){return 1|r}function _0(r,s,o,u){const c=r[o+1],f=null===s;let m=u?Wu(c):Id(c),E=!1;for(;0!==m&&(!1===E||f);){const R=r[m+1];RM(r[m],s)&&(E=!0,r[m+1]=u?wd(R):Ta(R)),m=u?Wu(R):Id(R)}E&&(r[o+1]=u?Ta(c):wd(c))}function RM(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&qs(r,s)>=0}const St={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function y0(r){return r.substring(St.key,St.keyEnd)}function kw(r,s){const o=St.textEnd;return o===s?-1:(s=St.keyEnd=function w0(r,s,o){for(;s<o&&r.charCodeAt(s)>32;)s++;return s}(r,St.key=s,o),Uf(r,s,o))}function Uf(r,s,o){for(;s<o&&r.charCodeAt(s)<=32;)s++;return s}function jl(r,s,o){const u=Se();return ii(u,ki(),s)&&ks(En(),Wn(),u,r,s,u[Wt],o,!1),jl}function Yy(r,s,o,u,c){const m=c?"class":"style";hy(r,o,s.inputs[m],m,u)}function Jy(r,s,o){return Ls(r,s,o,!1),Jy}function Td(r,s){return Ls(r,s,null,!0),Td}function Ir(r){!function Lo(r,s,o,u){const c=En(),f=ti(2);c.firstUpdatePass&&jf(c,null,f,u);const m=Se();if(o!==ln&&ii(m,f,o)){const E=c.data[Fi()];if(oi(E,u)&&!A0(c,f)){let A=u?E.classesWithoutHost:E.stylesWithoutHost;null!==A&&(o=ps(A,o||"")),Yy(c,E,m,o,u)}else!function Vw(r,s,o,u,c,f,m,E){c===ln&&(c=pn);let A=0,R=0,x=0<c.length?c[0]:null,V=0<f.length?f[0]:null;for(;null!==x||null!==V;){const W=A<c.length?c[A+1]:void 0,Z=R<f.length?f[R+1]:void 0;let be,ue=null;x===V?(A+=2,R+=2,W!==Z&&(ue=V,be=Z)):null===V||null!==x&&x<V?(A+=2,ue=x):(R+=2,ue=V,be=Z),null!==ue&&ev(r,s,o,u,ue,be,m,E),x=A<c.length?c[A]:null,V=R<f.length?f[R]:null}}(c,E,m,m[Wt],m[f+1],m[f+1]=function C0(r,s,o){if(null==o||""===o)return pn;const u=[],c=Pu(o);if(Array.isArray(c))for(let f=0;f<c.length;f++)r(u,c[f],!0);else if("object"==typeof c)for(const f in c)c.hasOwnProperty(f)&&r(u,f,c[f]);else"string"==typeof c&&s(u,c);return u}(r,s,o),u,f)}}(Fw,ro,r,!0)}function ro(r,s){for(let o=function v0(r){return function I0(r){St.key=0,St.keyEnd=0,St.value=0,St.valueEnd=0,St.textEnd=r.length}(r),kw(r,Uf(r,0,St.textEnd))}(s);o>=0;o=kw(s,o))Mi(r,y0(s),!0)}function Ls(r,s,o,u){const c=Se(),f=En(),m=ti(2);f.firstUpdatePass&&jf(f,r,m,u),s!==ln&&ii(c,m,s)&&ev(f,f.data[Fi()],c,c[Wt],r,c[m+1]=function xM(r,s){return null==r||""===r||("string"==typeof s?r+=s:"object"==typeof r&&(r=yn(Pu(r)))),r}(s,o),u,m)}function A0(r,s){return s>=r.expandoStartIndex}function jf(r,s,o,u){const c=r.data;if(null===c[o+1]){const f=c[Fi()],m=A0(r,o);oi(f,u)&&null===s&&!m&&(s=!1),s=function NM(r,s,o,u){const c=$r(r);let f=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(o=Hf(o=Zy(null,r,s,o,u),s.attrs,u),f=null);else{const m=s.directiveStylingLast;if(-1===m||r[m]!==c)if(o=Zy(c,r,s,o,u),null===f){let A=function D0(r,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==Id(u))return r[Wu(u)]}(r,s,u);void 0!==A&&Array.isArray(A)&&(A=Zy(null,r,s,A[1],u),A=Hf(A,s.attrs,u),function $f(r,s,o,u){r[Wu(o?s.classBindings:s.styleBindings)]=u}(r,s,u,A))}else f=function Qu(r,s,o){let u;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)u=Hf(u,r[f].hostAttrs,o);return Hf(u,s.attrs,o)}(r,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),o}(c,f,s,u),function m0(r,s,o,u,c,f){let m=f?s.classBindings:s.styleBindings,E=Wu(m),A=Id(m);r[u]=o;let x,R=!1;if(Array.isArray(o)?(x=o[1],(null===x||qs(o,x)>0)&&(R=!0)):x=o,c)if(0!==A){const W=Wu(r[E+1]);r[u+1]=Ll(W,E),0!==W&&(r[W+1]=ds(r[W+1],u)),r[E+1]=function bM(r,s){return 131071&r|s<<17}(r[E+1],u)}else r[u+1]=Ll(E,0),0!==E&&(r[E+1]=ds(r[E+1],u)),E=u;else r[u+1]=Ll(A,0),0===E?E=u:r[A+1]=ds(r[A+1],u),A=u;R&&(r[u+1]=Ta(r[u+1])),_0(r,x,u,!0),_0(r,x,u,!1),function Yg(r,s,o,u,c){const f=c?r.residualClasses:r.residualStyles;null!=f&&"string"==typeof s&&qs(f,s)>=0&&(o[u+1]=wd(o[u+1]))}(s,x,r,u,f),m=Ll(E,A),f?s.classBindings=m:s.styleBindings=m}(c,f,s,o,m,u)}}function Zy(r,s,o,u,c){let f=null;const m=o.directiveEnd;let E=o.directiveStylingLast;for(-1===E?E=o.directiveStart:E++;E<m&&(f=s[E],u=Hf(u,f.hostAttrs,c),f!==r);)E++;return null!==r&&(o.directiveStylingLast=E),u}function Hf(r,s,o){const u=o?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const m=s[f];"number"==typeof m?c=m:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Mi(r,m,!!o||s[++f]))}return void 0===r?null:r}function Fw(r,s,o){const u=String(s);""!==u&&!u.includes(" ")&&Mi(r,u,o)}function ev(r,s,o,u,c,f,m,E){if(!(3&s.type))return;const A=r.data,R=A[E+1],x=function g0(r){return!(1&~r)}(R)?tv(A,s,o,c,Id(R),m):void 0;Zg(x)||(Zg(f)||function p0(r){return!(2&~r)}(R)&&(f=tv(A,null,o,c,E,m)),function CI(r,s,o,u,c){if(s)c?r.addClass(o,u):r.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:fg.DashCase;null==c?r.removeStyle(o,u,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=fg.Important),r.setStyle(o,u,c,f))}}(u,m,ua(Fi(),o),c,f))}function tv(r,s,o,u,c,f){const m=null===s;let E;for(;c>0;){const A=r[c],R=Array.isArray(A),x=R?A[1]:A,V=null===x;let W=o[c+1];W===ln&&(W=V?pn:void 0);let Z=V?Xo(W,u):x===u?W:void 0;if(R&&!Zg(Z)&&(Z=Xo(A,u)),Zg(Z)&&(E=Z,m))return E;const ue=r[c+1];c=m?Wu(ue):Id(ue)}if(null!==s){let A=f?s.residualClasses:s.residualStyles;null!=A&&(E=Xo(A,u))}return E}function Zg(r){return void 0!==r}function oi(r,s){return!!(r.flags&(s?8:16))}function rm(r,s,o,u){const c=Se(),f=En(),m=jt+r,E=c[Wt],A=f.firstCreatePass?function $w(r,s,o,u,c,f){const m=s.consts,A=No(s,r,2,u,wo(m,c));return HD(s,o,A,wo(m,f)),null!==A.attrs&&ls(A,A.attrs,!1),null!==A.mergedAttrs&&ls(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(m,f,c,s,o,u):f.data[m],R=Hw(f,c,A,E,s,r);c[m]=R;const x=cl(A);return Rs(A,!0),bI(E,R,A),!function Hg(r){return!(32&~r.flags)}(A)&&ha()&&ey(f,c,R,A),0===function Ft(){return Kt.lFrame.elementDepthCount}()&&Ke(R,c),function Ss(){Kt.lFrame.elementDepthCount++}(),x&&(df(f,c,A),cf(f,A,c)),null!==u&&RI(c,A),rm}function $l(){let r=kn();wu()?Oc():(r=r.parent,Rs(r,!1));const s=r;(function kE(r){return Kt.skipHydrationRootTNode===r})(s)&&function cn(){Kt.skipHydrationRootTNode=null}(),function Pp(){Kt.lFrame.elementDepthCount--}();const o=En();return o.firstCreatePass&&(_l(o,r),c_(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function v_(r){return!!(8&r.flags)}(s)&&Yy(o,s,Se(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Lp(r){return!!(16&r.flags)}(s)&&Yy(o,s,Se(),s.stylesWithoutHost,!1),$l}function Uo(r,s,o,u){return rm(r,s,o,u),$l(),Uo}let Hw=(r,s,o,u,c,f)=>(Do(!0),mg(u,c,function y_(){return Kt.lFrame.currentNamespace}()));function im(r,s,o){const u=Se(),c=En(),f=r+jt,m=c.firstCreatePass?function F0(r,s,o,u,c){const f=s.consts,m=wo(f,u),E=No(s,r,8,"ng-container",m);return null!==m&&ls(E,m,!0),HD(s,o,E,wo(f,c)),null!==s.queries&&s.queries.elementStart(s,E),E}(f,c,u,s,o):c.data[f];Rs(m,!0);const E=L0(c,u,m,r);return u[f]=E,ha()&&ey(c,u,E,m),Ke(E,u),cl(m)&&(df(c,u,m),cf(c,m,u)),null!=o&&RI(u,m),im}function sm(){let r=kn();const s=En();return wu()?Oc():(r=r.parent,Rs(r,!1)),s.firstCreatePass&&(_l(s,r),c_(r)&&s.queries.elementEnd(r)),sm}let L0=(r,s,o,u)=>(Do(!0),gg(s[Wt],""));function U0(){return Se()}function zf(r,s,o){const u=Se();if(ii(u,ki(),s)){const f=En(),m=Wn();ks(f,m,u,r,s,OI($r(f.data),m,u),o,!0)}return zf}const Hl=void 0;var BM=["en",[["a","p"],["AM","PM"],Hl],[["AM","PM"],Hl,Hl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hl,"{1} 'at' {0}",Hl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function B0(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Cd={};function Ww(r){const s=function j0(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=bd(s);if(o)return o;const u=s.split("-")[0];if(o=bd(u),o)return o;if("en"===u)return BM;throw new rt(701,!1)}function Xu(r){return Ww(r)[qf.PluralCase]}function bd(r){return r in Cd||(Cd[r]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[r]),Cd[r]}var qf=function(r){return r[r.LocaleId=0]="LocaleId",r[r.DayPeriodsFormat=1]="DayPeriodsFormat",r[r.DayPeriodsStandalone=2]="DayPeriodsStandalone",r[r.DaysFormat=3]="DaysFormat",r[r.DaysStandalone=4]="DaysStandalone",r[r.MonthsFormat=5]="MonthsFormat",r[r.MonthsStandalone=6]="MonthsStandalone",r[r.Eras=7]="Eras",r[r.FirstDayOfWeek=8]="FirstDayOfWeek",r[r.WeekendRange=9]="WeekendRange",r[r.DateFormat=10]="DateFormat",r[r.TimeFormat=11]="TimeFormat",r[r.DateTimeFormat=12]="DateTimeFormat",r[r.NumberSymbols=13]="NumberSymbols",r[r.NumberFormats=14]="NumberFormats",r[r.CurrencyCode=15]="CurrencyCode",r[r.CurrencySymbol=16]="CurrencySymbol",r[r.CurrencyName=17]="CurrencyName",r[r.Currencies=18]="Currencies",r[r.Directionality=19]="Directionality",r[r.PluralCase=20]="PluralCase",r[r.ExtraData=21]="ExtraData",r}(qf||{});const Wf="en-US";let Gl=Wf;function gm(r,s,o,u){const c=Se(),f=En(),m=kn();return Yf(f,c,c[Wt],m,r,s,u),gm}function Yf(r,s,o,u,c,f,m){const E=cl(u),R=r.firstCreatePass&&KD(r),x=s[Gn],V=SP(s);let W=!0;if(3&u.type||m){const be=Nr(u,s),$e=m?m(be):be,Qe=V.length,Le=m?Rn=>m(zn(Rn[u.index])):u.index;let Qt=null;if(!m&&E&&(Qt=function mm(r,s,o,u){const c=r.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const m=c[f];if(m===o&&c[f+1]===u){const E=s[na],A=c[f+2];return E.length>A?E[A]:null}"string"==typeof m&&(f+=2)}return null}(r,s,c,u.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=f,Qt.__ngLastListenerFn__=f,W=!1;else{f=Iv(u,s,x,f,!1);const Rn=o.listen($e,c,f);V.push(f,Rn),R&&R.push(c,Le,Qe,Qe+1)}}else f=Iv(u,s,x,f,!1);const Z=u.outputs;let ue;if(W&&null!==Z&&(ue=Z[c])){const be=ue.length;if(be)for(let $e=0;$e<be;$e+=2){const tr=s[ue[$e]][ue[$e+1]].subscribe(f),bi=V.length;V.push(f,tr),R&&R.push(c,u.index,bi,-(bi+1))}}}function Ev(r,s,o,u){const c=Be(null);try{return Qs(6,s,o),!1!==o(u)}catch(f){return dy(r,f),!1}finally{Qs(7,s,o),Be(c)}}function Iv(r,s,o,u,c){return function f(m){if(m===Function)return u;pf(r.componentOffset>-1?Nn(r.index,s):s);let A=Ev(s,o,u,m),R=f.__ngNextListenerFn__;for(;R;)A=Ev(s,o,R,m)&&A,R=R.__ngNextListenerFn__;return c&&!1===A&&m.preventDefault(),A}}function iT(r=1){return function $a(r){return(Kt.lFrame.contextLView=function Ah(r,s){for(;r>0;)s=s[ia],r--;return s}(r,Kt.lFrame.contextLView))[Gn]}(r)}function uT(r,s,o,u){Ea(r,s,o,u)}function lT(r){const s=Se(),o=En(),u=Hr();Ps(u+1);const c=Fu(o,u);if(r.dirty&&function xr(r){return!(4&~r[xt])}(s)===!(2&~c.metadata.flags)){if(null===c.matches)r.reset([]);else{const f=uw(s,u);r.reset(f,zh),r.notifyOnChanges()}return!0}return!1}function wb(){return function sw(r,s){return r[oa].queries[s].queryList}(Se(),Hr())}function Jf(r,s=""){const o=Se(),u=En(),c=r+jt,f=u.firstCreatePass?No(u,c,1,s,null):u.data[c],m=bv(u,o,f,s,r);o[c]=m,ha()&&ey(u,o,m,f),Rs(f,!1)}let bv=(r,s,o,u,c)=>(Do(!0),function pg(r,s){return r.createText(s)}(s[Wt],u));function yT(r){return Sv("",r,""),yT}function Sv(r,s,o){const u=Se(),c=function qu(r,s,o,u){return ii(r,ki(),o)?s+qt(o)+u:ln}(u,r,s,o);return c!==ln&&va(u,Fi(),c),Sv}function vT(r,s,o,u,c){const f=Se(),m=gd(f,r,s,o,u,c);return m!==ln&&va(f,Fi(),m),vT}function wm(r,s,o){lw(s)&&(s=s());const u=Se();return ii(u,ki(),s)&&ks(En(),Wn(),u,r,s,u[Wt],o,!1),wm}function ET(r,s){const o=lw(r);return o&&r.set(s),o}function Tm(r,s){const o=Se(),u=En(),c=kn();return Yf(u,o,o[Wt],c,r,s),Tm}function nu(r,s,o,u,c){if(r=Et(r),Array.isArray(r))for(let f=0;f<r.length;f++)nu(r[f],s,o,u,c);else{const f=En(),m=Se(),E=kn();let A=ta(r)?r:Et(r.provide);const R=TE(r),x=1048575&E.providerIndexes,V=E.directiveStart,W=E.providerIndexes>>20;if(ta(r)||!r.multi){const Z=new Fc(R,c,wg),ue=Am(A,s,c?x:x+W,V);-1===ue?(Vh(pa(E,m),f,A),Mv(f,r,s.length),s.push(A),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),o.push(Z),m.push(Z)):(o[ue]=Z,m[ue]=Z)}else{const Z=Am(A,s,x+W,V),ue=Am(A,s,x,x+W),$e=ue>=0&&o[ue];if(c&&!$e||!c&&!(Z>=0&&o[Z])){Vh(pa(E,m),f,A);const Qe=function AT(r,s,o,u,c){const f=new Fc(r,o,wg);return f.multi=[],f.index=s,f.componentProviders=0,Mb(f,c,u&&!o),f}(c?wT:iN,o.length,c,u,R);!c&&$e&&(o[ue].providerFactory=Qe),Mv(f,r,s.length,0),s.push(A),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),o.push(Qe),m.push(Qe)}else Mv(f,r,Z>-1?Z:ue,Mb(o[c?ue:Z],R,!c&&u));!c&&u&&$e&&o[ue].componentProviders++}}}function Mv(r,s,o,u){const c=ta(s),f=function IE(r){return!!r.useClass}(s);if(c||f){const A=(f?Et(s.useClass):s).prototype.ngOnDestroy;if(A){const R=r.destroyHooks||(r.destroyHooks=[]);if(!c&&s.multi){const x=R.indexOf(o);-1===x?R.push(o,[u,A]):R[x+1].push(u,A)}else R.push(o,A)}}}function Mb(r,s,o){return o&&r.componentProviders++,r.multi.push(s)-1}function Am(r,s,o,u){for(let c=o;c<u;c++)if(s[c]===r)return c;return-1}function iN(r,s,o,u){return TT(this.multi,[])}function wT(r,s,o,u){const c=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,E=za(o,o[We],this.providerFactory.index,u);f=E.slice(0,m),TT(c,f);for(let A=m;A<E.length;A++)f.push(E[A])}else f=[],TT(c,f);return f}function TT(r,s){for(let o=0;o<r.length;o++)s.push((0,r[o])());return s}function Nb(r,s=[]){return o=>{o.providersResolver=(u,c)=>function IT(r,s,o){const u=En();if(u.firstCreatePass){const c=Ks(r);nu(o,u.data,u.blueprint,c,!0),nu(s,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,s)}}let DT=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o)){const u=Zr(0,o.type),c=u.length>0?_w([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o,c)}return this.cachedInjectors.get(o)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=In({token:r,providedIn:"environment",factory:()=>new r(cr(vs))})}return r})();function Dm(r){Ya("NgStandalone"),r.getStandaloneInjector=s=>s.get(DT).getOrCreateStandaloneInjector(r)}function Ob(r,s,o){const u=fi()+r,c=Se();return c[u]===ln?Ja(c,u,o?s.call(o):s()):function $g(r,s){return r[s]}(c,u)}function xv(r,s,o,u,c,f){const m=s+o;return ii(r,m,c)?Ja(r,m+1,f?u.call(f,c):u(c)):function Cm(r,s){const o=r[s];return o===ln?void 0:o}(r,m+1)}function Vd(r,s){const o=En();let u;const c=r+jt;o.firstCreatePass?(u=function Kl(r,s){if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(r===u.name)return u}}(s,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks??=[]).push(c,u.onDestroy)):u=o.data[c];const f=u.factory||(u.factory=Oa(u.type)),E=ci(wg);try{const A=Bp(!1),R=f();return Bp(A),function Tb(r,s,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),s[o]=u}(o,Se(),c,R),R}finally{ci(E)}}function Ld(r,s,o){const u=r+jt,c=Se(),f=function ss(r,s){return r[s]}(c,u);return function Ud(r,s){return r[We].data[s].pure}(c,u)?xv(c,fi(),s,f.transform,o,f):f.transform(o)}class qv{constructor(s){this.full=s;const o=s.split(".");this.major=o[0],this.minor=o[1],this.patch=o.slice(2).join(".")}}const vN=new qv("17.3.9");let Wv=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();const iA=new It(""),$d=new It("");let Yl,nS=(()=>{class r{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Yl||(function rS(r){Yl=r}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb()}});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),o()},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}static#e=this.\u0275fac=function(u){return new(u||r)(cr(vr),cr(Xv),cr($d))};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac})}return r})(),Xv=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Yl?.findTestabilityInTree(this,o,u)??null}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();function xm(r){return!!r&&"function"==typeof r.then}function iS(r){return!!r&&"function"==typeof r.subscribe}const sS=new It("");let sA=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,u)=>{this.resolve=o,this.reject=u}),this.appInits=zt(sS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const o=[];for(const c of this.appInits){const f=c();if(xm(f))o.push(f);else if(iS(f)){const m=new Promise((E,A)=>{f.subscribe({complete:E,error:A})});o.push(m)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const Yv=new It("");function aS(r,s){return Array.isArray(s)?s.reduce(aS,r):{...r,...s}}let Jl=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=zt(Au),this.afterRenderEffectManager=zt(Cy),this.externalTestViews=new Set,this.beforeRender=new Vn.B,this.afterTick=new Vn.B,this.componentTypes=[],this.components=[],this.isStable=zt(ud).hasPendingTasks.pipe((0,or.T)(o=>!o)),this._injector=zt(vs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const c=o instanceof HI;if(!this._injector.get(sA).done)throw!c&&Sn(o),new rt(405,!1);let m;m=c?o:this._injector.get(Mg).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const E=function PN(r){return r.isBoundToModule}(m)?void 0:this._injector.get(ad),R=m.create(ni.NULL,[],u||m.selector,E),x=R.location.nativeElement,V=R.injector.get(iA,null);return V?.registerApplication(x),R.onDestroy(()=>{this.detachView(R.hostView),Jv(this.components,R),V?.unregisterApplication(x)}),this._loadComponent(R),R}tick(){this._tick(!0)}_tick(o){if(this._runningTick)throw new rt(101,!1);const u=Be(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(o)}catch(c){this.internalErrorHandler(c)}finally{this.afterTick.next(),this._runningTick=!1,Be(u)}}detectChangesInAttachedViews(o){let u=0;const c=this.afterRenderEffectManager;for(;;){if(u===JD)throw new rt(103,!1);if(o){const f=0===u;this.beforeRender.next(f);for(let{_lView:m,notifyErrorHandler:E}of this._views)lS(m,f,E)}if(u++,c.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:f})=>Om(f))&&(c.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:f})=>Om(f))))break}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Jv(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(Yv,[]);[...this._bootstrapListeners,...u].forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Jv(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new rt(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Jv(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}function lS(r,s,o){!s&&!Om(r)||function cS(r,s,o){let u;o?(u=0,r[xt]|=1024):u=64&r[xt]?0:1,bg(r,s,u)}(r,o,s)}function Om(r){return Dh(r)}class dS{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}let hS=(()=>{class r{compileModuleSync(o){return new By(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),f=Os(Un(o).declarations).reduce((m,E)=>{const A=He(E);return A&&m.push(new Og(A)),m},[]);return new dS(u,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),km=(()=>{class r{constructor(){this.zone=zt(vr),this.applicationRef=zt(Jl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function wr(){const r=zt(vr),s=zt(Vr);return o=>r.runOutsideAngular(()=>s.handleError(o))}let NN=(()=>{class r{constructor(){this.subscription=new kr.yU,this.initialized=!1,this.zone=zt(vr),this.pendingTasks=zt(ud)}initialize(){if(this.initialized)return;this.initialized=!0;let o=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(o=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{vr.assertNotInAngularZone(),queueMicrotask(()=>{null!==o&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(o),o=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{vr.assertInAngularZone(),o??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const Fm=new It("",{providedIn:"root",factory:()=>zt(Fm,_n.Optional|_n.SkipSelf)||function tE(){return typeof $localize<"u"&&$localize.locale||Wf}()}),lA=new It("",{providedIn:"root",factory:()=>"USD"}),cA=new It("");let er=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function EC(r="zone.js",s){return"noop"===r?new Dy:"zone.js"===r?new vr(s):r}(u?.ngZone,function uA(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}({eventCoalescing:u?.ngZoneEventCoalescing,runCoalescing:u?.ngZoneRunCoalescing}));return c.run(()=>{const f=function mw(r,s,o){return new Uu(r,s,o)}(o.moduleType,this.injector,function $i(r){return[{provide:vr,useFactory:r},{provide:Yo,multi:!0,useFactory:()=>{const s=zt(km,{optional:!0});return()=>s.initialize()}},{provide:Yo,multi:!0,useFactory:()=>{const s=zt(NN);return()=>{s.initialize()}}},{provide:Au,useFactory:wr}]}(()=>c)),m=f.injector.get(Vr,null);return c.runOutsideAngular(()=>{const E=c.onError.subscribe({next:A=>{m.handleError(A)}});f.onDestroy(()=>{Jv(this._modules,f),E.unsubscribe()})}),function oS(r,s,o){try{const u=o();return xm(u)?u.catch(c=>{throw s.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(m,c,()=>{const E=f.injector.get(sA);return E.runInitializers(),E.donePromise.then(()=>(function Kf(r){"string"==typeof r&&(Gl=r.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Fm,Wf)||Wf),this._moduleDoBootstrap(f),f))})})}bootstrapModule(o,u=[]){const c=aS({},u);return function fS(r,s,o){const u=new By(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(o){const u=o.injector.get(Jl);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new rt(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new rt(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(cA,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(u){return new(u||r)(cr(ni))};static#t=this.\u0275prov=In({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Hd=null;const ON=new It("");function dA(r,s,o=[]){const u=`Platform: ${s}`,c=new It(u);return(f=[])=>{let m=nE();if(!m||m.injector.get(ON,!1)){const E=[...o,...f,{provide:c,useValue:!0}];r?r(E):function Or(r){if(Hd&&!Hd.get(ON,!1))throw new rt(400,!1);(function oA(){!function Ca(r){Ar=r}(()=>{throw new rt(600,!1)})})(),Hd=r;const s=r.get(er);(function mS(r){r.get(lD,null)?.forEach(o=>o())})(r)}(function gS(r=[],s){return ni.create({name:s,providers:[{provide:gp,useValue:"platform"},{provide:cA,useValue:new Set([()=>Hd=null])},...r]})}(E,u))}return function kN(r){const s=nE();if(!s)throw new rt(401,!1);return s}()}}function nE(){return Hd?.get(er)??null}function VN(){return!1}let sp=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=LN}return r})();function LN(r){return function iu(r,s,o){if(_u(r)&&!o){const u=Nn(r.index,s);return new Sg(u,u)}return 47&r.type?new Sg(s[_r],s):null}(kn(),Se(),!(16&~r))}class ec{constructor(){}supports(s){return jg(s)}create(s){return new TS(s)}}const wS=(r,s)=>s;class TS{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||wS}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,c=0,f=null;for(;o||u;){const m=!u||o&&o.currentIndex<$m(u,c,f)?o:u,E=$m(m,c,f),A=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)c++;else{f||(f=[]);const R=E-c,x=A-c;if(R!=x){for(let W=0;W<R;W++){const Z=W<f.length?f[W]:f[W]=0,ue=Z+W;x<=ue&&ue<R&&(f[W]=Z+1)}f[m.previousIndex]=x-R}}E!==A&&s(m,E,A)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!jg(s))throw new rt(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],m=this._trackByFn(E,f),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,f,m,E)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,m,E),u=!0),o=o._next}else c=0,function QC(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[Symbol.iterator]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,E=>{m=this._trackByFn(c,E),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,E,m,c)),Object.is(o.item,E)||this._addIdentityChange(o,E)):(o=this._mismatch(o,E,m,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,f,c)):s=this._addAfter(new gA(o,u),f,c),s}_verifyReinsertion(s,o,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const c=null===o?this._itHead:o._next;return s._next=c,s._prev=o,null===c?this._itTail=s:c._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new AS),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AS),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class gA{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jm{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class AS{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new jm,this.map.set(o,u)),u.add(s)}get(s,o){const c=this.map.get(s);return c?c.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $m(r,s,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+s+c}class Hm{constructor(){}supports(s){return s instanceof Map||yw(s)}create(){return new DS}}class DS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||yw(s)))throw new rt(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,o);const f=c._prev,m=c._next;return f&&(f._next=m),m&&(m._prev=f),c._next=null,c._prev=null,c}const u=new Gm(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class Gm{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function CS(){return new up([new ec])}let up=(()=>{class r{static#e=this.\u0275prov=In({token:r,providedIn:"root",factory:CS});constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||CS()),deps:[[r,new Ri,new Wi]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new rt(901,!1)}}return r})();function sE(){return new zd([new Hm])}let zd=(()=>{class r{static#e=this.\u0275prov=In({token:r,providedIn:"root",factory:sE});constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||sE()),deps:[[r,new Ri,new Wi]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new rt(901,!1)}}return r})();const ZO=dA(null,"core",[]);let ek=(()=>{class r{constructor(o){}static#e=this.\u0275fac=function(u){return new(u||r)(cr(Jl))};static#t=this.\u0275mod=Va({type:r});static#n=this.\u0275inj=ho({})}return r})();function nx(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}function $S(r){const s=Be(null);try{return r()}finally{Be(s)}}function Qm(r){const s=He(r);if(!s)return null;const o=new Og(s);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},345:(Ln,At,ye)=>{ye.d(At,{A:()=>Zt});var d=ye(76),Ce=ye(362),Pe=ye(852),ne=ye(41);class et{constructor(wt,Rt){this._delegate=wt,this.firebase=Rt,(0,Pe._addComponent)(wt,new Ce.uA("app-compat",()=>this,"PUBLIC")),this.container=wt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(wt){this._delegate.automaticDataCollectionEnabled=wt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(wt=>{this._delegate.checkDestroyed(),wt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Pe.deleteApp)(this._delegate)))}_getService(wt,Rt=Pe._DEFAULT_ENTRY_NAME){var Fn;this._delegate.checkDestroyed();const ir=this._delegate.container.getProvider(wt);return!ir.isInitialized()&&"EXPLICIT"===(null===(Fn=ir.getComponent())||void 0===Fn?void 0:Fn.instantiationMode)&&ir.initialize(),ir.getImmediate({identifier:Rt})}_removeServiceInstance(wt,Rt=Pe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(wt).clearInstance(Rt)}_addComponent(wt){(0,Pe._addComponent)(this._delegate,wt)}_addOrOverwriteComponent(wt){(0,Pe._addOrOverwriteComponent)(this._delegate,wt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Be=new d.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function mt(){const un=function an(un){const wt={},Rt={__esModule:!0,initializeApp:function Yt(pt,Jt={}){const Fe=Pe.initializeApp(pt,Jt);if((0,d.gR)(wt,Fe.name))return wt[Fe.name];const q=new un(Fe,Rt);return wt[Fe.name]=q,q},app:ir,registerVersion:Pe.registerVersion,setLogLevel:Pe.setLogLevel,onLog:Pe.onLog,apps:null,SDK_VERSION:Pe.SDK_VERSION,INTERNAL:{registerComponent:function Ot(pt){const Jt=pt.name,Fe=Jt.replace("-compat","");if(Pe._registerComponent(pt)&&"PUBLIC"===pt.type){const q=(tt=ir())=>{if("function"!=typeof tt[Fe])throw Be.create("invalid-app-argument",{appName:Jt});return tt[Fe]()};void 0!==pt.serviceProps&&(0,d.zw)(q,pt.serviceProps),Rt[Fe]=q,un.prototype[Fe]=function(...tt){return this._getService.bind(this,Jt).apply(this,pt.multipleInstances?tt:[])}}return"PUBLIC"===pt.type?Rt[Fe]:null},removeApp:function Fn(pt){delete wt[pt]},useAsService:function Pn(pt,Jt){return"serverAuth"===Jt?null:Jt},modularAPIs:Pe}};function ir(pt){if(!(0,d.gR)(wt,pt=pt||Pe._DEFAULT_ENTRY_NAME))throw Be.create("no-app",{appName:pt});return wt[pt]}return Rt.default=Rt,Object.defineProperty(Rt,"apps",{get:function Je(){return Object.keys(wt).map(pt=>wt[pt])}}),ir.App=un,Rt}(et);return un.INTERNAL=Object.assign(Object.assign({},un.INTERNAL),{createFirebaseNamespace:mt,extendNamespace:function wt(Rt){(0,d.zw)(un,Rt)},createSubscribe:d.tD,ErrorFactory:d.FA,deepExtend:d.zw}),un}(),re=new ne.Vy("@firebase/app-compat");if((0,d.Bd)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const un=self.firebase.SDK_VERSION;un&&un.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Zt=ae;!function Ye(un){(0,Pe.registerVersion)("@firebase/app-compat","0.2.33",un)}()},852:(Ln,At,ye)=>{ye.r(At),ye.d(At,{FirebaseError:()=>ne.g,SDK_VERSION:()=>gs,_DEFAULT_ENTRY_NAME:()=>Cr,_addComponent:()=>Sr,_addOrOverwriteComponent:()=>zi,_apps:()=>Bt,_clearComponents:()=>Ht,_components:()=>br,_getProvider:()=>rs,_isFirebaseApp:()=>lo,_isFirebaseServerApp:()=>bn,_registerComponent:()=>Xn,_removeServiceInstance:()=>Lt,_serverApps:()=>ui,deleteApp:()=>Gs,getApp:()=>vi,getApps:()=>Xr,initializeApp:()=>lr,initializeServerApp:()=>Et,onLog:()=>ee,registerVersion:()=>$,setLogLevel:()=>Ve});var d=ye(467),Ce=ye(362),Pe=ye(41),ne=ye(76);const et=(ge,oe)=>oe.some(Oe=>ge instanceof Oe);let Tt,Be;const ae=new WeakMap,re=new WeakMap,Ne=new WeakMap,_t=new WeakMap,Ye=new WeakMap;let wt={get(ge,oe,Oe){if(ge instanceof IDBTransaction){if("done"===oe)return re.get(ge);if("objectStoreNames"===oe)return ge.objectStoreNames||Ne.get(ge);if("store"===oe)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return Yt(ge[oe])},set:(ge,oe,Oe)=>(ge[oe]=Oe,!0),has:(ge,oe)=>ge instanceof IDBTransaction&&("done"===oe||"store"===oe)||oe in ge};function ir(ge){return"function"==typeof ge?function Fn(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function mt(){return Be||(Be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...oe){return ge.apply(Je(this),oe),Yt(ae.get(this))}:function(...oe){return Yt(ge.apply(Je(this),oe))}:function(oe,...Oe){const Ze=ge.call(Je(this),oe,...Oe);return Ne.set(Ze,oe.sort?oe.sort():[oe]),Yt(Ze)}}(ge):(ge instanceof IDBTransaction&&function un(ge){if(re.has(ge))return;const oe=new Promise((Oe,Ze)=>{const $t=()=>{ge.removeEventListener("complete",Gt),ge.removeEventListener("error",rn),ge.removeEventListener("abort",rn)},Gt=()=>{Oe(),$t()},rn=()=>{Ze(ge.error||new DOMException("AbortError","AbortError")),$t()};ge.addEventListener("complete",Gt),ge.addEventListener("error",rn),ge.addEventListener("abort",rn)});re.set(ge,oe)}(ge),et(ge,function an(){return Tt||(Tt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,wt):ge)}function Yt(ge){if(ge instanceof IDBRequest)return function Zt(ge){const oe=new Promise((Oe,Ze)=>{const $t=()=>{ge.removeEventListener("success",Gt),ge.removeEventListener("error",rn)},Gt=()=>{Oe(Yt(ge.result)),$t()},rn=()=>{Ze(ge.error),$t()};ge.addEventListener("success",Gt),ge.addEventListener("error",rn)});return oe.then(Oe=>{Oe instanceof IDBCursor&&ae.set(Oe,ge)}).catch(()=>{}),Ye.set(oe,ge),oe}(ge);if(_t.has(ge))return _t.get(ge);const oe=ir(ge);return oe!==ge&&(_t.set(ge,oe),Ye.set(oe,ge)),oe}const Je=ge=>Ye.get(ge),pt=["get","getKey","getAll","getAllKeys","count"],Jt=["put","add","delete","clear"],Fe=new Map;function q(ge,oe){if(!(ge instanceof IDBDatabase)||oe in ge||"string"!=typeof oe)return;if(Fe.get(oe))return Fe.get(oe);const Oe=oe.replace(/FromIndex$/,""),Ze=oe!==Oe,$t=Jt.includes(Oe);if(!(Oe in(Ze?IDBIndex:IDBObjectStore).prototype)||!$t&&!pt.includes(Oe))return;const Gt=function(){var rn=(0,d.A)(function*(Yn,...It){const Ei=this.transaction(Yn,$t?"readwrite":"readonly");let Cs=Ei.store;return Ze&&(Cs=Cs.index(It.shift())),(yield Promise.all([Cs[Oe](...It),$t&&Ei.done]))[0]});return function(It){return rn.apply(this,arguments)}}();return Fe.set(oe,Gt),Gt}!function Rt(ge){wt=ge(wt)}(ge=>({...ge,get:(oe,Oe,Ze)=>q(oe,Oe)||ge.get(oe,Oe,Ze),has:(oe,Oe)=>!!q(oe,Oe)||ge.has(oe,Oe)}));class tt{constructor(oe){this.container=oe}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function fn(ge){const oe=ge.getComponent();return"VERSION"===oe?.type}(Oe)){const Ze=Oe.getImmediate();return`${Ze.library}/${Ze.version}`}return null}).filter(Oe=>Oe).join(" ")}}const nr="@firebase/app",yi="0.10.3",Ar=new Pe.Vy("@firebase/app"),Cr="[DEFAULT]",en={[nr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,ui=new Map,br=new Map;function Sr(ge,oe){try{ge.container.addComponent(oe)}catch(Oe){Ar.debug(`Component ${oe.name} failed to register with FirebaseApp ${ge.name}`,Oe)}}function zi(ge,oe){ge.container.addOrOverwriteComponent(oe)}function Xn(ge){const oe=ge.name;if(br.has(oe))return Ar.debug(`There were multiple attempts to register component ${oe}.`),!1;br.set(oe,ge);for(const Oe of Bt.values())Sr(Oe,ge);for(const Oe of ui.values())Sr(Oe,ge);return!0}function rs(ge,oe){const Oe=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),ge.container.getProvider(oe)}function Lt(ge,oe,Oe=Cr){rs(ge,oe).clearInstance(Oe)}function lo(ge){return void 0!==ge.options}function bn(ge){return void 0!==ge.settings}function Ht(){br.clear()}const yn=new ne.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ps{constructor(oe,Oe,Ze){this._isDeleted=!1,this._options=Object.assign({},oe),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=Ze,this.container.addComponent(new Ce.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(oe){this._isDeleted=oe}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}class Ho extends ps{constructor(oe,Oe,Ze,$t){const Gt=void 0!==Oe.automaticDataCollectionEnabled&&Oe.automaticDataCollectionEnabled,rn={name:Ze,automaticDataCollectionEnabled:Gt};super(void 0!==oe.apiKey?oe:oe.options,rn,$t),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Gt},Oe),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Oe.releaseOnDeref=void 0,$(nr,yi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(oe){this.isDeleted||(this._refCount++,void 0!==oe&&this._finalizationRegistry.register(oe,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Gs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw yn.create("server-app-deleted")}}const gs="10.12.0";function lr(ge,oe={}){let Oe=ge;"object"!=typeof oe&&(oe={name:oe});const Ze=Object.assign({name:Cr,automaticDataCollectionEnabled:!1},oe),$t=Ze.name;if("string"!=typeof $t||!$t)throw yn.create("bad-app-name",{appName:String($t)});if(Oe||(Oe=(0,ne.T9)()),!Oe)throw yn.create("no-options");const Gt=Bt.get($t);if(Gt){if((0,ne.bD)(Oe,Gt.options)&&(0,ne.bD)(Ze,Gt.config))return Gt;throw yn.create("duplicate-app",{appName:$t})}const rn=new Ce.h1($t);for(const It of br.values())rn.addComponent(It);const Yn=new ps(Oe,Ze,rn);return Bt.set($t,Yn),Yn}function Et(ge,oe){if((0,ne.Bd)())throw yn.create("invalid-server-app-environment");let Oe;void 0===oe.automaticDataCollectionEnabled&&(oe.automaticDataCollectionEnabled=!1),Oe=lo(ge)?ge.options:ge;const Ze=Object.assign(Object.assign({},oe),Oe);if(void 0!==Ze.releaseOnDeref&&delete Ze.releaseOnDeref,void 0!==oe.releaseOnDeref&&typeof FinalizationRegistry>"u")throw yn.create("finalization-registry-not-supported",{});const Gt=""+(Ei=JSON.stringify(Ze),[...Ei].reduce((Cs,tl)=>Math.imul(31,Cs)+tl.charCodeAt(0)|0,0)),rn=ui.get(Gt);var Ei;if(rn)return rn.incRefCount(oe.releaseOnDeref),rn;const Yn=new Ce.h1(Gt);for(const Ei of br.values())Yn.addComponent(Ei);const It=new Ho(Oe,oe,Gt,Yn);return ui.set(Gt,It),It}function vi(ge=Cr){const oe=Bt.get(ge);if(!oe&&ge===Cr&&(0,ne.T9)())return lr();if(!oe)throw yn.create("no-app",{appName:ge});return oe}function Xr(){return Array.from(Bt.values())}function Gs(ge){return Q.apply(this,arguments)}function Q(){return(Q=(0,d.A)(function*(ge){let oe=!1;const Oe=ge.name;Bt.has(Oe)?(oe=!0,Bt.delete(Oe)):ui.has(Oe)&&ge.decRefCount()<=0&&(ui.delete(Oe),oe=!0),oe&&(yield Promise.all(ge.container.getProviders().map(Ze=>Ze.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function $(ge,oe,Oe){var Ze;let $t=null!==(Ze=en[ge])&&void 0!==Ze?Ze:ge;Oe&&($t+=`-${Oe}`);const Gt=$t.match(/\s|\//),rn=oe.match(/\s|\//);if(Gt||rn){const Yn=[`Unable to register library "${$t}" with version "${oe}":`];return Gt&&Yn.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),Gt&&rn&&Yn.push("and"),rn&&Yn.push(`version name "${oe}" contains illegal characters (whitespace or "/")`),void Ar.warn(Yn.join(" "))}Xn(new Ce.uA(`${$t}-version`,()=>({library:$t,version:oe}),"VERSION"))}function ee(ge,oe){if(null!==ge&&"function"!=typeof ge)throw yn.create("invalid-log-argument");(0,Pe.Ey)(ge,oe)}function Ve(ge){(0,Pe.He)(ge)}const fe="firebase-heartbeat-database",dt=1,Pt="firebase-heartbeat-store";let nn=null;function Tn(){return nn||(nn=function Ot(ge,oe,{blocked:Oe,upgrade:Ze,blocking:$t,terminated:Gt}={}){const rn=indexedDB.open(ge,oe),Yn=Yt(rn);return Ze&&rn.addEventListener("upgradeneeded",It=>{Ze(Yt(rn.result),It.oldVersion,It.newVersion,Yt(rn.transaction),It)}),Oe&&rn.addEventListener("blocked",It=>Oe(It.oldVersion,It.newVersion,It)),Yn.then(It=>{Gt&&It.addEventListener("close",()=>Gt()),$t&&It.addEventListener("versionchange",Ei=>$t(Ei.oldVersion,Ei.newVersion,Ei))}).catch(()=>{}),Yn}(fe,dt,{upgrade:(ge,oe)=>{if(0===oe)try{ge.createObjectStore(Pt)}catch(Oe){console.warn(Oe)}}}).catch(ge=>{throw yn.create("idb-open",{originalErrorMessage:ge.message})})),nn}function Fr(){return(Fr=(0,d.A)(function*(ge){try{const Oe=(yield Tn()).transaction(Pt),Ze=yield Oe.objectStore(Pt).get(co(ge));return yield Oe.done,Ze}catch(oe){if(oe instanceof ne.g)Ar.warn(oe.message);else{const Oe=yn.create("idb-get",{originalErrorMessage:oe?.message});Ar.warn(Oe.message)}}})).apply(this,arguments)}function kt(ge,oe){return ht.apply(this,arguments)}function ht(){return(ht=(0,d.A)(function*(ge,oe){try{const Ze=(yield Tn()).transaction(Pt,"readwrite");yield Ze.objectStore(Pt).put(oe,co(ge)),yield Ze.done}catch(Oe){if(Oe instanceof ne.g)Ar.warn(Oe.message);else{const Ze=yn.create("idb-set",{originalErrorMessage:Oe?.message});Ar.warn(Ze.message)}}})).apply(this,arguments)}function co(ge){return`${ge.name}!${ge.options.appId}`}class eh{constructor(oe){this.container=oe,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new oc(Oe),this._heartbeatsCachePromise=this._storage.read().then(Ze=>(this._heartbeatsCache=Ze,Ze))}triggerHeartbeat(){var oe=this;return(0,d.A)(function*(){var Oe,Ze;const Gt=oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rn=Go();if((null!=(null===(Oe=oe._heartbeatsCache)||void 0===Oe?void 0:Oe.heartbeats)||(oe._heartbeatsCache=yield oe._heartbeatsCachePromise,null!=(null===(Ze=oe._heartbeatsCache)||void 0===Ze?void 0:Ze.heartbeats)))&&oe._heartbeatsCache.lastSentHeartbeatDate!==rn&&!oe._heartbeatsCache.heartbeats.some(Yn=>Yn.date===rn))return oe._heartbeatsCache.heartbeats.push({date:rn,agent:Gt}),oe._heartbeatsCache.heartbeats=oe._heartbeatsCache.heartbeats.filter(Yn=>{const It=new Date(Yn.date).valueOf();return Date.now()-It<=2592e6}),oe._storage.overwrite(oe._heartbeatsCache)})()}getHeartbeatsHeader(){var oe=this;return(0,d.A)(function*(){var Oe;if(null===oe._heartbeatsCache&&(yield oe._heartbeatsCachePromise),null==(null===(Oe=oe._heartbeatsCache)||void 0===Oe?void 0:Oe.heartbeats)||0===oe._heartbeatsCache.heartbeats.length)return"";const Ze=Go(),{heartbeatsToSend:$t,unsentEntries:Gt}=function In(ge,oe=1024){const Oe=[];let Ze=ge.slice();for(const $t of ge){const Gt=Oe.find(rn=>rn.agent===$t.agent);if(Gt){if(Gt.dates.push($t.date),ho(Oe)>oe){Gt.dates.pop();break}}else if(Oe.push({agent:$t.agent,dates:[$t.date]}),ho(Oe)>oe){Oe.pop();break}Ze=Ze.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:Ze}}(oe._heartbeatsCache.heartbeats),rn=(0,ne.Uj)(JSON.stringify({version:2,heartbeats:$t}));return oe._heartbeatsCache.lastSentHeartbeatDate=Ze,Gt.length>0?(oe._heartbeatsCache.heartbeats=Gt,yield oe._storage.overwrite(oe._heartbeatsCache)):(oe._heartbeatsCache.heartbeats=[],oe._storage.overwrite(oe._heartbeatsCache)),rn})()}}function Go(){return(new Date).toISOString().substring(0,10)}class oc{constructor(oe){this.app=oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.A)(function*(){return!!(0,ne.zW)()&&(0,ne.eX)().then(()=>!0).catch(()=>!1)})()}read(){var oe=this;return(0,d.A)(function*(){if(yield oe._canUseIndexedDBPromise){const Ze=yield function li(ge){return Fr.apply(this,arguments)}(oe.app);return Ze?.heartbeats?Ze:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(oe){var Oe=this;return(0,d.A)(function*(){var Ze;if(yield Oe._canUseIndexedDBPromise){const Gt=yield Oe.read();return kt(Oe.app,{lastSentHeartbeatDate:null!==(Ze=oe.lastSentHeartbeatDate)&&void 0!==Ze?Ze:Gt.lastSentHeartbeatDate,heartbeats:oe.heartbeats})}})()}add(oe){var Oe=this;return(0,d.A)(function*(){var Ze;if(yield Oe._canUseIndexedDBPromise){const Gt=yield Oe.read();return kt(Oe.app,{lastSentHeartbeatDate:null!==(Ze=oe.lastSentHeartbeatDate)&&void 0!==Ze?Ze:Gt.lastSentHeartbeatDate,heartbeats:[...Gt.heartbeats,...oe.heartbeats]})}})()}}function ho(ge){return(0,ne.Uj)(JSON.stringify({version:2,heartbeats:ge})).length}!function Si(ge){Xn(new Ce.uA("platform-logger",oe=>new tt(oe),"PRIVATE")),Xn(new Ce.uA("heartbeat",oe=>new eh(oe),"PRIVATE")),$(nr,yi,ge),$(nr,yi,"esm2017"),$("fire-js","")}("")},362:(Ln,At,ye)=>{ye.d(At,{h1:()=>an,uA:()=>Pe});var d=ye(467),Ce=ye(76);class Pe{constructor(ae,re,Ne){this.name=ae,this.instanceFactory=re,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const ne="[DEFAULT]";class et{constructor(ae,re){this.name=ae,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const re=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(re)){const Ne=new Ce.cY;if(this.instancesDeferred.set(re,Ne),this.isInitialized(re)||this.shouldAutoInitialize())try{const _t=this.getOrInitializeService({instanceIdentifier:re});_t&&Ne.resolve(_t)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(ae){var re;const Ne=this.normalizeInstanceIdentifier(ae?.identifier),_t=null!==(re=ae?.optional)&&void 0!==re&&re;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(_t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(Ye){if(_t)return null;throw Ye}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function Be(mt){return"EAGER"===mt.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[re,Ne]of this.instancesDeferred.entries()){const _t=this.normalizeInstanceIdentifier(re);try{const Ye=this.getOrInitializeService({instanceIdentifier:_t});Ne.resolve(Ye)}catch{}}}}clearInstance(ae=ne){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,d.A)(function*(){const re=Array.from(ae.instances.values());yield Promise.all([...re.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...re.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=ne){return this.instances.has(ae)}getOptions(ae=ne){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:re={}}=ae,Ne=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _t=this.getOrInitializeService({instanceIdentifier:Ne,options:re});for(const[Ye,Zt]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(Ye)&&Zt.resolve(_t);return _t}onInit(ae,re){var Ne;const _t=this.normalizeInstanceIdentifier(re),Ye=null!==(Ne=this.onInitCallbacks.get(_t))&&void 0!==Ne?Ne:new Set;Ye.add(ae),this.onInitCallbacks.set(_t,Ye);const Zt=this.instances.get(_t);return Zt&&ae(Zt,_t),()=>{Ye.delete(ae)}}invokeOnInitCallbacks(ae,re){const Ne=this.onInitCallbacks.get(re);if(Ne)for(const _t of Ne)try{_t(ae,re)}catch{}}getOrInitializeService({instanceIdentifier:ae,options:re={}}){let Ne=this.instances.get(ae);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(mt=ae,mt===ne?void 0:mt),options:re}),this.instances.set(ae,Ne),this.instancesOptions.set(ae,re),this.invokeOnInitCallbacks(Ne,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,Ne)}catch{}var mt;return Ne||null}normalizeInstanceIdentifier(ae=ne){return this.component?this.component.multipleInstances?ae:ne:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class an{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const re=this.getProvider(ae.name);if(re.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);re.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const re=new et(ae,this);return this.providers.set(ae,re),re}getProviders(){return Array.from(this.providers.values())}}},41:(Ln,At,ye)=>{ye.d(At,{$b:()=>Ce,Ey:()=>mt,He:()=>an,Vy:()=>Be});const d=[];var Ce=function(ae){return ae[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",ae}(Ce||{});const Pe={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},ne=Ce.INFO,et={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},Tt=(ae,re,...Ne)=>{if(re<ae.logLevel)return;const _t=(new Date).toISOString(),Ye=et[re];if(!Ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[Ye](`[${_t}]  ${ae.name}:`,...Ne)};class Be{constructor(re){this.name=re,this._logLevel=ne,this._logHandler=Tt,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in Ce))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?Pe[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...re),this._logHandler(this,Ce.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...re),this._logHandler(this,Ce.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...re),this._logHandler(this,Ce.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...re),this._logHandler(this,Ce.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...re),this._logHandler(this,Ce.ERROR,...re)}}function an(ae){d.forEach(re=>{re.setLogLevel(ae)})}function mt(ae,re){for(const Ne of d){let _t=null;re&&re.level&&(_t=Pe[re.level]),Ne.userLogHandler=null===ae?null:(Ye,Zt,...un)=>{const wt=un.map(Rt=>{if(null==Rt)return null;if("string"==typeof Rt)return Rt;if("number"==typeof Rt||"boolean"==typeof Rt)return Rt.toString();if(Rt instanceof Error)return Rt.message;try{return JSON.stringify(Rt)}catch{return null}}).filter(Rt=>Rt).join(" ");Zt>=(_t??Ye.logLevel)&&ae({level:Ce[Zt].toLowerCase(),message:wt,args:un,type:Ye.name})}}}},780:(Ln,At,ye)=>{ye.r(At);var d=ye(467),Ce=ye(345),Pe=ye(852),ne=ye(76),et=ye(41),Tt=ye(635),Be=ye(362);const mt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Zt=function _t(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},un=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wt=new ne.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fn=new et.Vy("@firebase/auth");function Yt(v,...p){Fn.logLevel<=et.$b.ERROR&&Fn.error(`Auth (${Pe.SDK_VERSION}): ${v}`,...p)}function Je(v,...p){throw Fe(v,...p)}function Ot(v,...p){return Fe(v,...p)}function Pn(v,p,g){const I=Object.assign(Object.assign({},un()),{[p]:g});return new ne.FA("auth","Firebase",I).create(p,{appName:v.name})}function pt(v){return Pn(v,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jt(v,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Je(v,"argument-error"),Pn(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fe(v,...p){if("string"!=typeof v){const g=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(g,...I)}return wt.create(v,...p)}function q(v,p,...g){if(!v)throw Fe(p,...g)}function tt(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Yt(p),new Error(p)}function fn(v,p){v||tt(p)}function nr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function yi(){return"http:"===Ar()||"https:"===Ar()}function Ar(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class _e{constructor(p,g){this.shortDelay=p,this.longDelay=g,fn(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,ne.jZ)()||(0,ne.lV)()}get(){return function Hs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yi()||(0,ne.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function we(v,p){fn(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class ke{static initialize(p,g,I){this.fetchImpl=p,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ze=new _e(3e4,6e4);function De(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function nt(v,p,g,I){return mn.apply(this,arguments)}function mn(){return(mn=(0,d.A)(function*(v,p,g,I,S={}){return Dr(v,S,(0,d.A)(function*(){let F={},H={};I&&("GET"===p?H=I:F={body:JSON.stringify(I)});const te=(0,ne.Am)(Object.assign({key:v.config.apiKey},H)).slice(1),Re=yield v._getAdditionalHeaders();return Re["Content-Type"]="application/json",v.languageCode&&(Re["X-Firebase-Locale"]=v.languageCode),ke.fetch()(Vn(v,v.config.apiHost,g,te),Object.assign({method:p,headers:Re,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Dr(v,p,g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,d.A)(function*(v,p,g){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},xe),p);try{const S=new Hi(v),F=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const H=yield F.json();if("needConfirmation"in H)throw or(v,"account-exists-with-different-credential",H);if(F.ok&&!("errorMessage"in H))return H;{const te=F.ok?H.errorMessage:H.error.message,[Re,Xe]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw or(v,"credential-already-in-use",H);if("EMAIL_EXISTS"===Re)throw or(v,"email-already-in-use",H);if("USER_DISABLED"===Re)throw or(v,"user-disabled",H);const ct=I[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Pn(v,ct,Xe);Je(v,ct)}}catch(S){if(S instanceof ne.g)throw S;Je(v,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function Ut(v,p,g,I){return sr.apply(this,arguments)}function sr(){return(sr=(0,d.A)(function*(v,p,g,I,S={}){const F=yield nt(v,p,g,I,S);return"mfaPendingCredential"in F&&Je(v,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Vn(v,p,g,I){const S=`${p}${g}?${I}`;return v.config.emulator?we(v.config,S):`${v.config.apiScheme}://${S}`}function kr(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hi{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(Ot(this.auth,"network-request-failed")),ze.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function or(v,p,g){const I={appName:v.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const S=Ot(v,p,I);return S.customData._tokenResponse=g,S}function rr(v){return void 0!==v&&void 0!==v.getResponse}function Qr(v){return void 0!==v&&void 0!==v.enterprise}class rt{constructor(p){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=p.recaptchaEnforcementState}getProviderEnforcementState(p){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const g of this.recaptchaEnforcementState)if(g.provider&&g.provider===p)return kr(g.enforcementState);return null}isProviderEnabled(p){return"ENFORCE"===this.getProviderEnforcementState(p)||"AUDIT"===this.getProviderEnforcementState(p)}}function Gi(){return(Gi=(0,d.A)(function*(v){return(yield nt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ao(v,p){return uo.apply(this,arguments)}function uo(){return(uo=(0,d.A)(function*(v,p){return nt(v,"GET","/v2/recaptchaConfig",De(v,p))})).apply(this,arguments)}function Cr(){return(Cr=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Bt(){return(Bt=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ui(v,p){return br.apply(this,arguments)}function br(){return(br=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Sr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function rs(){return(rs=(0,d.A)(function*(v,p=!1){const g=(0,ne.Ku)(v),I=yield g.getIdToken(p),S=lo(I);q(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const F="object"==typeof S.firebase?S.firebase:void 0,H=F?.sign_in_provider;return{claims:S,token:I,authTime:Sr(Lt(S.auth_time)),issuedAtTime:Sr(Lt(S.iat)),expirationTime:Sr(Lt(S.exp)),signInProvider:H||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function Lt(v){return 1e3*Number(v)}function lo(v){const[p,g,I]=v.split(".");if(void 0===p||void 0===g||void 0===I)return Yt("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,ne.u)(g);return S?JSON.parse(S):(Yt("Failed to decode base64 JWT payload"),null)}catch(S){return Yt("Caught error parsing JWT payload as JSON",S?.toString()),null}}function bn(v){const p=lo(v);return q(p,"internal-error"),q(typeof p.exp<"u","internal-error"),q(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}function Ht(v,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,d.A)(function*(v,p,g=!1){if(g)return p;try{return yield p}catch(I){throw I instanceof ne.g&&function yn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class ps{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,d.A)(function*(){yield g.iteration()}),I)}iteration(){var p=this;return(0,d.A)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class Ho{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sr(this.lastLoginAt),this.creationTime=Sr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gs(v){return lr.apply(this,arguments)}function lr(){return(lr=(0,d.A)(function*(v){var p;const g=v.auth,I=yield v.getIdToken(),S=yield Ht(v,ui(g,{idToken:I}));q(S?.users.length,g,"internal-error");const F=S.users[0];v._notifyReloadListener(F);const H=null!==(p=F.providerUserInfo)&&void 0!==p&&p.length?Gs(F.providerUserInfo):[],te=function Xr(v,p){return[...v.filter(I=>!p.some(S=>S.providerId===I.providerId)),...p]}(v.providerData,H),ct=!!v.isAnonymous&&!(v.email&&F.passwordHash||te?.length),Ke={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:te,metadata:new Ho(F.createdAt,F.lastLoginAt),isAnonymous:ct};Object.assign(v,Ke)})).apply(this,arguments)}function vi(){return(vi=(0,d.A)(function*(v){const p=(0,ne.Ku)(v);yield gs(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Gs(v){return v.map(p=>{var{providerId:g}=p,I=(0,Tt.Tt)(p,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function $(){return($=(0,d.A)(function*(v,p){const g=yield Dr(v,{},(0,d.A)(function*(){const I=(0,ne.Am)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:F}=v.config,H=Vn(v,S,"/v1/token",`key=${F}`),te=yield v._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",ke.fetch()(H,{method:"POST",headers:te,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}function Ve(){return(Ve=(0,d.A)(function*(v,p){return nt(v,"POST","/v2/accounts:revokeToken",De(v,p))})).apply(this,arguments)}class fe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){q(p.idToken,"internal-error"),q(typeof p.idToken<"u","internal-error"),q(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):bn(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}updateFromIdToken(p){q(0!==p.length,"internal-error");const g=bn(p);this.updateTokensAndExpiration(p,null,g)}getToken(p,g=!1){var I=this;return(0,d.A)(function*(){return g||!I.accessToken||I.isExpired?(q(I.refreshToken,p,"user-token-expired"),I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null):I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var I=this;return(0,d.A)(function*(){const{accessToken:S,refreshToken:F,expiresIn:H}=yield function Q(v,p){return $.apply(this,arguments)}(p,g);I.updateTokensAndExpiration(S,F,Number(H))})()}updateTokensAndExpiration(p,g,I){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,g){const{refreshToken:I,accessToken:S,expirationTime:F}=g,H=new fe;return I&&(q("string"==typeof I,"internal-error",{appName:p}),H.refreshToken=I),S&&(q("string"==typeof S,"internal-error",{appName:p}),H.accessToken=S),F&&(q("number"==typeof F,"internal-error",{appName:p}),H.expirationTime=F),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new fe,this.toJSON())}_performRefresh(){return tt("not implemented")}}function dt(v,p){q("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Pt{constructor(p){var{uid:g,auth:I,stsTokenManager:S}=p,F=(0,Tt.Tt)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ps(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Ho(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,d.A)(function*(){const I=yield Ht(g,g.stsTokenManager.getToken(g.auth,p));return q(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(p){return function Xn(v){return rs.apply(this,arguments)}(this,p)}reload(){return function Et(v){return vi.apply(this,arguments)}(this)}_assign(p){this!==p&&(q(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new Pt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var I=this;return(0,d.A)(function*(){let S=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),S=!0),g&&(yield gs(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,d.A)(function*(){if((0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(pt(p.auth));const g=yield p.getIdToken();return yield Ht(p,function ba(v,p){return Cr.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var I,S,F,H,te,Re,Xe,ct;const Ke=null!==(I=g.displayName)&&void 0!==I?I:void 0,Kn=null!==(S=g.email)&&void 0!==S?S:void 0,as=null!==(F=g.phoneNumber)&&void 0!==F?F:void 0,Su=null!==(H=g.photoURL)&&void 0!==H?H:void 0,zc=null!==(te=g.tenantId)&&void 0!==te?te:void 0,qc=null!==(Re=g._redirectEventId)&&void 0!==Re?Re:void 0,O_=null!==(Xe=g.createdAt)&&void 0!==Xe?Xe:void 0,Ru=null!==(ct=g.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:Qp,emailVerified:Xp,isAnonymous:Yp,providerData:Kh,stsTokenManager:Jp}=g;q(Qp&&Jp,p,"internal-error");const zE=fe.fromJSON(this.name,Jp);q("string"==typeof Qp,p,"internal-error"),dt(Ke,p.name),dt(Kn,p.name),q("boolean"==typeof Xp,p,"internal-error"),q("boolean"==typeof Yp,p,"internal-error"),dt(as,p.name),dt(Su,p.name),dt(zc,p.name),dt(qc,p.name),dt(O_,p.name),dt(Ru,p.name);const Wc=new Pt({uid:Qp,auth:p,email:Kn,emailVerified:Xp,displayName:Ke,isAnonymous:Yp,photoURL:Su,phoneNumber:as,tenantId:zc,stsTokenManager:zE,createdAt:O_,lastLoginAt:Ru});return Kh&&Array.isArray(Kh)&&(Wc.providerData=Kh.map(Zp=>Object.assign({},Zp))),qc&&(Wc._redirectEventId=qc),Wc}static _fromIdTokenResponse(p,g,I=!1){return(0,d.A)(function*(){const S=new fe;S.updateFromServerResponse(g);const F=new Pt({uid:g.localId,auth:p,stsTokenManager:S,isAnonymous:I});return yield gs(F),F})()}static _fromGetAccountInfoResponse(p,g,I){return(0,d.A)(function*(){const S=g.users[0];q(void 0!==S.localId,"internal-error");const F=void 0!==S.providerUserInfo?Gs(S.providerUserInfo):[],H=!(S.email&&S.passwordHash||F?.length),te=new fe;te.updateFromIdToken(I);const Re=new Pt({uid:S.localId,auth:p,stsTokenManager:te,isAnonymous:H}),Xe={uid:S.localId,displayName:S.displayName||null,photoURL:S.photoUrl||null,email:S.email||null,emailVerified:S.emailVerified||!1,phoneNumber:S.phoneNumber||null,tenantId:S.tenantId||null,providerData:F,metadata:new Ho(S.createdAt,S.lastLoginAt),isAnonymous:!(S.email&&S.passwordHash||F?.length)};return Object.assign(Re,Xe),Re})()}}const nn=new Map;function Tn(v){fn(v instanceof Function,"Expected a class definition");let p=nn.get(v);return p?(fn(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,nn.set(v,p),p)}const Fr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.A)(function*(){return!0})()}_set(g,I){var S=this;return(0,d.A)(function*(){S.storage[g]=I})()}_get(g){var I=this;return(0,d.A)(function*(){const S=I.storage[g];return void 0===S?null:S})()}_remove(g){var I=this;return(0,d.A)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return v.type="NONE",v})();function kt(v,p,g){return`firebase:${v}:${p}:${g}`}class ht{constructor(p,g,I){this.persistence=p,this.auth=g,this.userKey=I;const{config:S,name:F}=this.auth;this.fullUserKey=kt(this.userKey,S.apiKey,F),this.fullPersistenceKey=kt("persistence",S.apiKey,F),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.A)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Pt._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,d.A)(function*(){if(g.persistence===p)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,I="authUser"){return(0,d.A)(function*(){if(!g.length)return new ht(Tn(Fr),p,I);const S=(yield Promise.all(g.map(function(){var Xe=(0,d.A)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let F=S[0]||Tn(Fr);const H=kt(I,p.config.apiKey,p.name);let te=null;for(const Xe of g)try{const ct=yield Xe._get(H);if(ct){const Ke=Pt._fromJSON(p,ct);Xe!==F&&(te=Ke),F=Xe;break}}catch{}const Re=S.filter(Xe=>Xe._shouldAllowMigration);return F._shouldAllowMigration&&Re.length?(F=Re[0],te&&(yield F._set(H,te.toJSON())),yield Promise.all(g.map(function(){var Xe=(0,d.A)(function*(ct){if(ct!==F)try{yield ct._remove(H)}catch{}});return function(ct){return Xe.apply(this,arguments)}}())),new ht(F,p,I)):new ht(F,p,I)})()}}function co(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Go(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Sa(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(oc(p))return"Blackberry";if(ho(p))return"Webos";if(sc(p))return"Safari";if((p.includes("chrome/")||eh(p))&&!p.includes("edge/"))return"Chrome";if(In(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Sa(v=(0,ne.ZQ)()){return/firefox\//i.test(v)}function sc(v=(0,ne.ZQ)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function eh(v=(0,ne.ZQ)()){return/crios\//i.test(v)}function Go(v=(0,ne.ZQ)()){return/iemobile/i.test(v)}function In(v=(0,ne.ZQ)()){return/android/i.test(v)}function oc(v=(0,ne.ZQ)()){return/blackberry/i.test(v)}function ho(v=(0,ne.ZQ)()){return/webos/i.test(v)}function Si(v=(0,ne.ZQ)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Ze(v=(0,ne.ZQ)()){return Si(v)||In(v)||ho(v)||oc(v)||/windows phone/i.test(v)||Go(v)}function Gt(v,p=[]){let g;switch(v){case"Browser":g=co((0,ne.ZQ)());break;case"Worker":g=`${co((0,ne.ZQ)())}-${v}`;break;default:g=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${Pe.SDK_VERSION}/${I}`}class rn{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const I=F=>new Promise((H,te)=>{try{H(p(F))}catch(Re){te(Re)}});I.onAbort=g,this.queue.push(I);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,d.A)(function*(){if(g.auth.currentUser===p)return;const I=[];try{for(const S of g.queue)yield S(p),S.onAbort&&I.push(S.onAbort)}catch(S){I.reverse();for(const F of I)try{F()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}function It(){return(It=(0,d.A)(function*(v,p={}){return nt(v,"GET","/v2/passwordPolicy",De(v,p))})).apply(this,arguments)}class Cs{constructor(p){var g,I,S,F;const H=p.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(g=H.minPasswordLength)&&void 0!==g?g:6,H.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=H.maxPasswordLength),void 0!==H.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=H.containsLowercaseCharacter),void 0!==H.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=H.containsUppercaseCharacter),void 0!==H.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=H.containsNumericCharacter),void 0!==H.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=H.containsNonAlphanumericCharacter),this.enforcementState=p.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(S=null===(I=p.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==S?S:"",this.forceUpgradeOnSignin=null!==(F=p.forceUpgradeOnSignin)&&void 0!==F&&F,this.schemaVersion=p.schemaVersion}validatePassword(p){var g,I,S,F,H,te;const Re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(p,Re),this.validatePasswordCharacterOptions(p,Re),Re.isValid&&(Re.isValid=null===(g=Re.meetsMinPasswordLength)||void 0===g||g),Re.isValid&&(Re.isValid=null===(I=Re.meetsMaxPasswordLength)||void 0===I||I),Re.isValid&&(Re.isValid=null===(S=Re.containsLowercaseLetter)||void 0===S||S),Re.isValid&&(Re.isValid=null===(F=Re.containsUppercaseLetter)||void 0===F||F),Re.isValid&&(Re.isValid=null===(H=Re.containsNumericCharacter)||void 0===H||H),Re.isValid&&(Re.isValid=null===(te=Re.containsNonAlphanumericCharacter)||void 0===te||te),Re}validatePasswordLengthOptions(p,g){const I=this.customStrengthOptions.minPasswordLength,S=this.customStrengthOptions.maxPasswordLength;I&&(g.meetsMinPasswordLength=p.length>=I),S&&(g.meetsMaxPasswordLength=p.length<=S)}validatePasswordCharacterOptions(p,g){let I;this.updatePasswordCharacterOptionsStatuses(g,!1,!1,!1,!1);for(let S=0;S<p.length;S++)I=p.charAt(S),this.updatePasswordCharacterOptionsStatuses(g,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(p,g,I,S,F){this.customStrengthOptions.containsLowercaseLetter&&(p.containsLowercaseLetter||(p.containsLowercaseLetter=g)),this.customStrengthOptions.containsUppercaseLetter&&(p.containsUppercaseLetter||(p.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(p.containsNumericCharacter||(p.containsNumericCharacter=S)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(p.containsNonAlphanumericCharacter||(p.containsNonAlphanumericCharacter=F))}}class tl{constructor(p,g,I,S){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=I,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new su(this),this.idTokenSubscription=new su(this),this.beforeStateQueue=new rn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(p,g){var I=this;return g&&(this._popupRedirectResolver=Tn(g)),this._initializationPromise=this.queue((0,d.A)(function*(){var S,F;if(!I._deleted&&(I.persistenceManager=yield ht.create(I,p),!I._deleted)){if(null!==(S=I._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(F=I.currentUser)||void 0===F?void 0:F.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.A)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUserFromIdToken(p){var g=this;return(0,d.A)(function*(){try{const I=yield ui(g,{idToken:p}),S=yield Pt._fromGetAccountInfoResponse(g,I,p);yield g.directlySetCurrentUser(S)}catch(I){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",I),yield g.directlySetCurrentUser(null)}})()}initializeCurrentUser(p){var g=this;return(0,d.A)(function*(){var I;if((0,Pe._isFirebaseServerApp)(g.app)){const te=g.app.settings.authIdToken;return te?new Promise(Re=>{setTimeout(()=>g.initializeCurrentUserFromIdToken(te).then(Re,Re))}):g.directlySetCurrentUser(null)}const S=yield g.assertedPersistence.getCurrentUser();let F=S,H=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const te=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,Re=F?._redirectEventId,Xe=yield g.tryRedirectSignIn(p);(!te||te===Re)&&Xe?.user&&(F=Xe.user,H=!0)}if(!F)return g.directlySetCurrentUser(null);if(!F._redirectEventId){if(H)try{yield g.beforeStateQueue.runMiddleware(F)}catch(te){F=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(te))}return F?g.reloadAndSetCurrentUserOrClear(F):g.directlySetCurrentUser(null)}return q(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===F._redirectEventId?g.directlySetCurrentUser(F):g.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(p){var g=this;return(0,d.A)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,d.A)(function*(){try{yield gs(p)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ca(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,d.A)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,d.A)(function*(){if((0,Pe._isFirebaseServerApp)(g.app))return Promise.reject(pt(g));const I=p?(0,ne.Ku)(p):null;return I&&q(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(p,g=!1){var I=this;return(0,d.A)(function*(){if(!I._deleted)return p&&q(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,d.A)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.A)(function*(){return(0,Pe._isFirebaseServerApp)(p.app)?Promise.reject(pt(p)):(yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0))})()}setPersistence(p){var g=this;return(0,Pe._isFirebaseServerApp)(this.app)?Promise.reject(pt(this)):this.queue((0,d.A)(function*(){yield g.assertedPersistence.setPersistence(Tn(p))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(p){var g=this;return(0,d.A)(function*(){g._getPasswordPolicyInternal()||(yield g._updatePasswordPolicy());const I=g._getPasswordPolicyInternal();return I.schemaVersion!==g.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(g._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(p)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var p=this;return(0,d.A)(function*(){const g=yield function Yn(v){return It.apply(this,arguments)}(p),I=new Cs(g);null===p.tenantId?p._projectPasswordPolicy=I:p._tenantPasswordPolicies[p.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new ne.FA("auth","Firebase",p())}onAuthStateChanged(p,g,I){return this.registerStateListener(this.authStateSubscription,p,g,I)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,I){return this.registerStateListener(this.idTokenSubscription,p,g,I)}authStateReady(){return new Promise((p,g)=>{if(this.currentUser)p();else{const I=this.onAuthStateChanged(()=>{I(),p()},g)}})}revokeAccessToken(p){var g=this;return(0,d.A)(function*(){if(g.currentUser){const I=yield g.currentUser.getIdToken(),S={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:p,idToken:I};null!=g.tenantId&&(S.tenantId=g.tenantId),yield function ee(v,p){return Ve.apply(this,arguments)}(g,S)}})()}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var I=this;return(0,d.A)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(g);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,d.A)(function*(){if(!g.redirectPersistenceManager){const I=p&&Tn(p)||g._popupRedirectResolver;q(I,g,"argument-error"),g.redirectPersistenceManager=yield ht.create(g,[Tn(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,d.A)(function*(){var I,S;return g._isInitialized&&(yield g.queue((0,d.A)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===p?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,d.A)(function*(){if(p===g.currentUser)return g.queue((0,d.A)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,I,S){if(this._deleted)return()=>{};const F="function"==typeof g?g:g.next.bind(g);let H=!1;const te=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(te,this,"internal-error"),te.then(()=>{H||F(this.currentUser)}),"function"==typeof g){const Re=p.addObserver(g,I,S);return()=>{H=!0,Re()}}{const Re=p.addObserver(g);return()=>{H=!0,Re()}}}directlySetCurrentUser(p){var g=this;return(0,d.A)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Gt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.A)(function*(){var g;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();S&&(I["X-Firebase-Client"]=S);const F=yield p._getAppCheckToken();return F&&(I["X-Firebase-AppCheck"]=F),I})()}_getAppCheckToken(){var p=this;return(0,d.A)(function*(){var g;const I=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return I?.error&&function ir(v,...p){Fn.logLevel<=et.$b.WARN&&Fn.warn(`Auth (${Pe.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function vn(v){return(0,ne.Ku)(v)}class su{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,ne.tD)(g=>this.observer=g)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fo={loadJS:()=>(0,d.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function th(v){return fo.loadJS(v)}function go(v){return`__${v}${Math.floor(1e6*Math.random())}`}class uu{constructor(p){this.type="recaptcha-enterprise",this.auth=vn(p)}verify(p="verify",g=!1){var I=this;return(0,d.A)(function*(){function F(){return F=(0,d.A)(function*(te){if(!g){if(null==te.tenantId&&null!=te._agentRecaptchaConfig)return te._agentRecaptchaConfig.siteKey;if(null!=te.tenantId&&void 0!==te._tenantRecaptchaConfigs[te.tenantId])return te._tenantRecaptchaConfigs[te.tenantId].siteKey}return new Promise(function(){var Re=(0,d.A)(function*(Xe,ct){ao(te,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ke=>{if(void 0!==Ke.recaptchaKey){const Kn=new rt(Ke);return null==te.tenantId?te._agentRecaptchaConfig=Kn:te._tenantRecaptchaConfigs[te.tenantId]=Kn,Xe(Kn.siteKey)}ct(new Error("recaptcha Enterprise site key undefined"))}).catch(Ke=>{ct(Ke)})});return function(Xe,ct){return Re.apply(this,arguments)}}())}),F.apply(this,arguments)}function H(te,Re,Xe){const ct=window.grecaptcha;Qr(ct)?ct.enterprise.ready(()=>{ct.enterprise.execute(te,{action:p}).then(Ke=>{Re(Ke)}).catch(()=>{Re("NO_RECAPTCHA")})}):Xe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((te,Re)=>{(function S(te){return F.apply(this,arguments)})(I.auth).then(Xe=>{if(!g&&Qr(window.grecaptcha))H(Xe,te,Re);else{if(typeof window>"u")return void Re(new Error("RecaptchaVerifier is only supported in browser"));let ct=function e_(){return fo.recaptchaEnterpriseScript}();0!==ct.length&&(ct+=Xe),th(ct).then(()=>{H(Xe,te,Re)}).catch(Ke=>{Re(Ke)})}}).catch(Xe=>{Re(Xe)})})})()}}function ms(v,p,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,d.A)(function*(v,p,g,I=!1){const S=new uu(v);let F;try{F=yield S.verify(g)}catch{F=yield S.verify(g,!0)}const H=Object.assign({},p);return Object.assign(H,I?{captchaResp:F}:{captchaResponse:F}),Object.assign(H,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(H,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),H})).apply(this,arguments)}function lu(v,p,g,I){return qt.apply(this,arguments)}function qt(){return qt=(0,d.A)(function*(v,p,g,I){var S;if(null!==(S=v._getRecaptchaConfig())&&void 0!==S&&S.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const F=yield ms(v,p,g,"getOobCode"===g);return I(v,F)}return I(v,p).catch(function(){var F=(0,d.A)(function*(H){if("auth/missing-recaptcha-token"===H.code){console.log(`${g} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const te=yield ms(v,p,g,"getOobCode"===g);return I(v,te)}return Promise.reject(H)});return function(H){return F.apply(this,arguments)}}())}),qt.apply(this,arguments)}function ih(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function _n(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class zo{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return tt("not implemented")}_getIdTokenResponse(p){return tt("not implemented")}_linkToIdToken(p,g){return tt("not implemented")}_getReauthenticationResolver(p){return tt("not implemented")}}function ci(v,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:resetPassword",De(v,p))})).apply(this,arguments)}function sh(){return(sh=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ra(v,p){return du.apply(this,arguments)}function du(){return(du=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:signUp",p)})).apply(this,arguments)}function lc(){return(lc=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:update",De(v,p))})).apply(this,arguments)}function pp(v,p){return cc.apply(this,arguments)}function cc(){return(cc=(0,d.A)(function*(v,p){return Ut(v,"POST","/v1/accounts:signInWithPassword",De(v,p))})).apply(this,arguments)}function hu(v,p){return zs.apply(this,arguments)}function zs(){return(zs=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:sendOobCode",De(v,p))})).apply(this,arguments)}function Rr(){return(Rr=(0,d.A)(function*(v,p){return hu(v,p)})).apply(this,arguments)}function dc(v,p){return cr.apply(this,arguments)}function cr(){return(cr=(0,d.A)(function*(v,p){return hu(v,p)})).apply(this,arguments)}function Ma(v,p){return zt.apply(this,arguments)}function zt(){return(zt=(0,d.A)(function*(v,p){return hu(v,p)})).apply(this,arguments)}function Na(){return(Na=(0,d.A)(function*(v,p){return hu(v,p)})).apply(this,arguments)}function rl(){return(rl=(0,d.A)(function*(v,p){return Ut(v,"POST","/v1/accounts:signInWithEmailLink",De(v,p))})).apply(this,arguments)}function fc(){return(fc=(0,d.A)(function*(v,p){return Ut(v,"POST","/v1/accounts:signInWithEmailLink",De(v,p))})).apply(this,arguments)}class xa extends zo{constructor(p,g,I,S=null){super("password",I),this._email=p,this._password=g,this._tenantId=S}static _fromEmailAndPassword(p,g){return new xa(p,g,"password")}static _fromEmailAndCode(p,g,I=null){return new xa(p,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,d.A)(function*(){switch(g.signInMethod){case"password":return lu(p,{returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",pp);case"emailLink":return function fu(v,p){return rl.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Je(p,"internal-error")}})()}_linkToIdToken(p,g){var I=this;return(0,d.A)(function*(){switch(I.signInMethod){case"password":return lu(p,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ra);case"emailLink":return function il(v,p){return fc.apply(this,arguments)}(p,{idToken:g,email:I._email,oobCode:I._password});default:Je(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Wi(v,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,d.A)(function*(v,p){return Ut(v,"POST","/v1/accounts:signInWithIdp",De(v,p))})).apply(this,arguments)}class Pi extends zo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Pi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Je("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:S}=g,F=(0,Tt.Tt)(g,["providerId","signInMethod"]);if(!I||!S)return null;const H=new Pi(I,S);return H.idToken=F.idToken||void 0,H.accessToken=F.accessToken||void 0,H.secret=F.secret,H.nonce=F.nonce,H.pendingToken=F.pendingToken||null,H}_getIdTokenResponse(p){return Wi(p,this.buildRequest())}_linkToIdToken(p,g){const I=this.buildRequest();return I.idToken=g,Wi(p,I)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Wi(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,ne.Am)(g)}return p}}function pc(){return(pc=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:sendVerificationCode",De(v,p))})).apply(this,arguments)}function mo(){return(mo=(0,d.A)(function*(v,p){return Ut(v,"POST","/v1/accounts:signInWithPhoneNumber",De(v,p))})).apply(this,arguments)}function _o(){return(_o=(0,d.A)(function*(v,p){const g=yield Ut(v,"POST","/v1/accounts:signInWithPhoneNumber",De(v,p));if(g.temporaryProof)throw or(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Wo={USER_NOT_FOUND:"user-not-found"};function Ko(){return(Ko=(0,d.A)(function*(v,p){return Ut(v,"POST","/v1/accounts:signInWithPhoneNumber",De(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Wo)})).apply(this,arguments)}class Qo extends zo{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Qo({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Qo({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function Ii(v,p){return mo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function gc(v,p){return _o.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ka(v,p){return Ko.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:I,verificationCode:S}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:I,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:I,phoneNumber:S,temporaryProof:F}=p;return I||g||S||F?new Qo({verificationId:g,verificationCode:I,phoneNumber:S,temporaryProof:F}):null}}class Xo{constructor(p){var g,I,S,F,H,te;const Re=(0,ne.I9)((0,ne.hp)(p)),Xe=null!==(g=Re.apiKey)&&void 0!==g?g:null,ct=null!==(I=Re.oobCode)&&void 0!==I?I:null,Ke=function mc(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Re.mode)&&void 0!==S?S:null);q(Xe&&ct&&Ke,"argument-error"),this.apiKey=Xe,this.operation=Ke,this.code=ct,this.continueUrl=null!==(F=Re.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(H=Re.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(te=Re.tenantId)&&void 0!==te?te:null}static parseLink(p){const g=function Mi(v){const p=(0,ne.I9)((0,ne.hp)(v)).link,g=p?(0,ne.I9)((0,ne.hp)(p)).deep_link_id:null,I=(0,ne.I9)((0,ne.hp)(v)).deep_link_id;return(I?(0,ne.I9)((0,ne.hp)(I)).link:null)||I||g||p||v}(p);try{return new Xo(g)}catch{return null}}}let Fa=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,I){return xa._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const S=Xo.parseLink(I);return q(S,"argument-error"),xa._fromEmailAndCode(g,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class bs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Yr extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class pn extends Yr{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return q("providerId"in g&&"signInMethod"in g,"argument-error"),Pi._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return q(p.idToken||p.accessToken,"argument-error"),Pi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return pn.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return pn.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:F,nonce:H,providerId:te}=p;if(!I&&!S&&!g&&!F||!te)return null;try{return new pn(te)._credential({idToken:g,accessToken:I,nonce:H,pendingToken:F})}catch{return null}}}let Yo=(()=>{class v extends Yr{constructor(){super("facebook.com")}static credential(g){return Pi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ah=(()=>{class v extends Yr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return Pi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:S}=g;if(!I&&!S)return null;try{return v.credential(I,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),sl=(()=>{class v extends Yr{constructor(){super("github.com")}static credential(g){return Pi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class T extends zo{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Wi(p,this.buildRequest())}_linkToIdToken(p,g){const I=this.buildRequest();return I.idToken=g,Wi(p,I)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Wi(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:S,pendingToken:F}=g;return I&&S&&F&&I===S?new T(I,F):null}static _create(p,g){return new T(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class P extends bs{constructor(p){q(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return P.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return P.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=T.fromJSON(p);return q(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:I}=p;if(!g||!I)return null;try{return T._create(I,g)}catch{return null}}}let k=(()=>{class v extends Yr{constructor(){super("twitter.com")}static credential(g,I){return Pi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=g;if(!I||!S)return null;try{return v.credential(I,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function B(v,p){return z.apply(this,arguments)}function z(){return(z=(0,d.A)(function*(v,p){return Ut(v,"POST","/v1/accounts:signUp",De(v,p))})).apply(this,arguments)}class K{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,I,S=!1){return(0,d.A)(function*(){const F=yield Pt._fromIdTokenResponse(p,I,S),H=he(I);return new K({user:F,providerId:H,_tokenResponse:I,operationType:g})})()}static _forOperation(p,g,I){return(0,d.A)(function*(){yield p._updateTokensIfNecessary(I,!0);const S=he(I);return new K({user:p,providerId:S,_tokenResponse:I,operationType:g})})()}}function he(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function at(){return(at=(0,d.A)(function*(v){var p;if((0,Pe._isFirebaseServerApp)(v.app))return Promise.reject(pt(v));const g=vn(v);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new K({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield B(g,{returnSecureToken:!0}),S=yield K._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class ut extends ne.g{constructor(p,g,I,S){var F;super(g.code,g.message),this.operationType=I,this.user=S,Object.setPrototypeOf(this,ut.prototype),this.customData={appName:p.name,tenantId:null!==(F=p.tenantId)&&void 0!==F?F:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,g,I,S){return new ut(p,g,I,S)}}function gn(v,p,g,I){return("reauthenticate"===p?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?ut._fromErrorAndOperation(v,F,p,I):F})}function sn(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Dt(){return Dt=(0,d.A)(function*(v,p){const g=(0,ne.Ku)(v);yield dr(!0,g,p);const{providerUserInfo:I}=yield function en(v,p){return Bt.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),S=sn(I||[]);return g.providerData=g.providerData.filter(F=>S.has(F.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Dt.apply(this,arguments)}function Hn(v,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,d.A)(function*(v,p,g=!1){const I=yield Ht(v,p._linkToIdToken(v.auth,yield v.getIdToken()),g);return K._forOperation(v,"link",I)})).apply(this,arguments)}function dr(v,p,g){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,d.A)(function*(v,p,g){yield gs(p);const S=!1===v?"provider-already-linked":"no-such-provider";q(sn(p.providerData).has(g)===v,p.auth,S)})).apply(this,arguments)}function tn(v,p){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,d.A)(function*(v,p,g=!1){const{auth:I}=v;if((0,Pe._isFirebaseServerApp)(I.app))return Promise.reject(pt(I));const S="reauthenticate";try{const F=yield Ht(v,gn(I,S,p,v),g);q(F.idToken,I,"internal-error");const H=lo(F.idToken);q(H,I,"internal-error");const{sub:te}=H;return q(v.uid===te,I,"user-mismatch"),K._forOperation(v,S,F)}catch(F){throw"auth/user-not-found"===F?.code&&Je(I,"user-mismatch"),F}})).apply(this,arguments)}function ys(v,p){return di.apply(this,arguments)}function di(){return(di=(0,d.A)(function*(v,p,g=!1){if((0,Pe._isFirebaseServerApp)(v.app))return Promise.reject(pt(v));const I="signIn",S=yield gn(v,I,p),F=yield K._fromIdTokenResponse(v,I,S);return g||(yield v._updateCurrentUser(F.user)),F})).apply(this,arguments)}function hi(v,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,d.A)(function*(v,p){return ys(vn(v),p)})).apply(this,arguments)}function Zo(v,p){return _c.apply(this,arguments)}function _c(){return(_c=(0,d.A)(function*(v,p){const g=(0,ne.Ku)(v);return yield dr(!1,g,p.providerId),Hn(g,p)})).apply(this,arguments)}function vo(v,p){return Va.apply(this,arguments)}function Va(){return(Va=(0,d.A)(function*(v,p){return tn((0,ne.Ku)(v),p)})).apply(this,arguments)}function ol(){return(ol=(0,d.A)(function*(v,p){return Ut(v,"POST","/v1/accounts:signInWithCustomToken",De(v,p))})).apply(this,arguments)}function He(){return He=(0,d.A)(function*(v,p){if((0,Pe._isFirebaseServerApp)(v.app))return Promise.reject(pt(v));const g=vn(v),I=yield function uh(v,p){return ol.apply(this,arguments)}(g,{token:p,returnSecureToken:!0}),S=yield K._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser(S.user),S}),He.apply(this,arguments)}class lt{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Nt._fromServerResponse(p,g):"totpInfo"in g?Sn._fromServerResponse(p,g):Je(p,"internal-error")}}class Nt extends lt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Nt(g)}}class Sn extends lt{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new Sn(g)}}function Un(v,p,g){var I;q((null===(I=g.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),q(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(q(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(q(g.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function wi(v){return is.apply(this,arguments)}function is(){return(is=(0,d.A)(function*(v){const p=vn(v);p._getPasswordPolicyInternal()&&(yield p._updatePasswordPolicy())})).apply(this,arguments)}function yc(){return(yc=(0,d.A)(function*(v,p,g){const I=vn(v),S={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};g&&Un(I,S,g),yield lu(I,S,"getOobCode",dc)})).apply(this,arguments)}function gr(){return gr=(0,d.A)(function*(v,p,g){yield ci((0,ne.Ku)(v),{oobCode:p,newPassword:g}).catch(function(){var I=(0,d.A)(function*(S){throw"auth/password-does-not-meet-requirements"===S.code&&wi(v),S});return function(S){return I.apply(this,arguments)}}())}),gr.apply(this,arguments)}function Zr(){return Zr=(0,d.A)(function*(v,p){yield function Pa(v,p){return lc.apply(this,arguments)}((0,ne.Ku)(v),{oobCode:p})}),Zr.apply(this,arguments)}function La(v,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,d.A)(function*(v,p){const g=(0,ne.Ku)(v),I=yield ci(g,{oobCode:p}),S=I.requestType;switch(q(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(I.mfaInfo,g,"internal-error");default:q(I.email,g,"internal-error")}let F=null;return I.mfaInfo&&(F=lt._fromServerResponse(vn(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:F},operation:S}})).apply(this,arguments)}function lh(){return(lh=(0,d.A)(function*(v,p){const{data:g}=yield La((0,ne.Ku)(v),p);return g.email})).apply(this,arguments)}function ch(){return(ch=(0,d.A)(function*(v,p,g){if((0,Pe._isFirebaseServerApp)(v.app))return Promise.reject(pt(v));const I=vn(v),H=yield lu(I,{returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B).catch(Re=>{throw"auth/password-does-not-meet-requirements"===Re.code&&wi(v),Re}),te=yield K._fromIdTokenResponse(I,"signIn",H);return yield I._updateCurrentUser(te.user),te})).apply(this,arguments)}function ta(){return(ta=(0,d.A)(function*(v,p,g){const I=vn(v),S={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};(function F(H,te){q(te.handleCodeInApp,I,"argument-error"),te&&Un(I,H,te)})(S,g),yield lu(I,S,"getOobCode",Ma)})).apply(this,arguments)}function vc(){return(vc=(0,d.A)(function*(v,p,g){if((0,Pe._isFirebaseServerApp)(v.app))return Promise.reject(pt(v));const I=(0,ne.Ku)(v),S=Fa.credentialWithLink(p,g||nr());return q(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),hi(I,S)})).apply(this,arguments)}function dh(){return(dh=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:createAuthUri",De(v,p))})).apply(this,arguments)}function vs(){return vs=(0,d.A)(function*(v,p){const I={identifier:p,continueUri:yi()?nr():"http://localhost"},{signinMethods:S}=yield function wE(v,p){return dh.apply(this,arguments)}((0,ne.Ku)(v),I);return S||[]}),vs.apply(this,arguments)}function fh(){return fh=(0,d.A)(function*(v,p){const g=(0,ne.Ku)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Un(g.auth,S,p);const{email:F}=yield function oh(v,p){return Rr.apply(this,arguments)}(g.auth,S);F!==v.email&&(yield v.reload())}),fh.apply(this,arguments)}function i_(){return i_=(0,d.A)(function*(v,p,g){const I=(0,ne.Ku)(v),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};g&&Un(I.auth,F,g);const{email:H}=yield function hc(v,p){return Na.apply(this,arguments)}(I.auth,F);H!==v.email&&(yield v.reload())}),i_.apply(this,arguments)}function pu(){return(pu=(0,d.A)(function*(v,p){return nt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function s_(){return s_=(0,d.A)(function*(v,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const I=(0,ne.Ku)(v),F={idToken:yield I.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},H=yield Ht(I,function TE(v,p){return pu.apply(this,arguments)}(I.auth,F));I.displayName=H.displayName||null,I.photoURL=H.photoUrl||null;const te=I.providerData.find(({providerId:Re})=>"password"===Re);te&&(te.displayName=I.displayName,te.photoURL=I.photoURL),yield I._updateTokensIfNecessary(H)}),s_.apply(this,arguments)}function gu(v,p,g){return mp.apply(this,arguments)}function mp(){return mp=(0,d.A)(function*(v,p,g){const{auth:I}=v,F={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(F.email=p),g&&(F.password=g);const H=yield Ht(v,function n_(v,p){return sh.apply(this,arguments)}(I,F));yield v._updateTokensIfNecessary(H,!0)}),mp.apply(this,arguments)}class Ws{constructor(p,g,I={}){this.isNewUser=p,this.providerId=g,this.profile=I}}class ph extends Ws{constructor(p,g,I,S){super(p,g,I),this.username=S}}class Ic extends Ws{constructor(p,g){super(p,"facebook.com",g)}}class ei extends ph{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class a_ extends Ws{constructor(p,g){super(p,"google.com",g)}}class AE extends ph{constructor(p,g,I){super(p,"twitter.com",g,I)}}function wc(v){const{user:p,_tokenResponse:g}=v;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function _p(v){var p,g;if(!v)return null;const{providerId:I}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},F=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const H=null===(g=null===(p=lo(v.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(H)return new Ws(F,"anonymous"!==H&&"custom"!==H?H:null)}if(!I)return null;switch(I){case"facebook.com":return new Ic(F,S);case"github.com":return new ei(F,S);case"google.com":return new a_(F,S);case"twitter.com":return new AE(F,S,v.screenName||null);case"custom":case"anonymous":return new Ws(F,null);default:return new Ws(F,I,S)}}(g)}class Pr{constructor(p,g,I){this.type=p,this.credential=g,this.user=I}static _fromIdtoken(p,g){return new Pr("enroll",p,g)}static _fromMfaPendingCredential(p){return new Pr("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,I;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Pr._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return Pr._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ni{constructor(p,g,I){this.session=p,this.hints=g,this.signInResolver=I}static _fromError(p,g){const I=vn(p),S=g.customData._serverResponse,F=(S.mfaInfo||[]).map(te=>lt._fromServerResponse(I,te));q(S.mfaPendingCredential,I,"internal-error");const H=Pr._fromMfaPendingCredential(S.mfaPendingCredential);return new Ni(H,F,function(){var te=(0,d.A)(function*(Re){const Xe=yield Re._process(I,H);delete S.mfaInfo,delete S.mfaPendingCredential;const ct=Object.assign(Object.assign({},S),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(g.operationType){case"signIn":const Ke=yield K._fromIdTokenResponse(I,g.operationType,ct);return yield I._updateCurrentUser(Ke.user),Ke;case"reauthenticate":return q(g.user,I,"internal-error"),K._forOperation(g.user,g.operationType,ct);default:Je(I,"internal-error")}});return function(Re){return te.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,d.A)(function*(){return g.signInResolver(p)})()}}class al{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>lt._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new al(p)}getSession(){var p=this;return(0,d.A)(function*(){return Pr._fromIdtoken(yield p.user.getIdToken(),p.user)})()}enroll(p,g){var I=this;return(0,d.A)(function*(){const S=p,F=yield I.getSession(),H=yield Ht(I.user,S._process(I.user.auth,F,g));return yield I.user._updateTokensIfNecessary(H),I.user.reload()})()}unenroll(p){var g=this;return(0,d.A)(function*(){const I="string"==typeof p?p:p.uid,S=yield g.user.getIdToken();try{const F=yield Ht(g.user,function Ac(v,p){return nt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",De(v,p))}(g.user.auth,{idToken:S,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:H})=>H!==I),yield g.user._updateTokensIfNecessary(F),yield g.user.reload()}catch(F){throw F}})()}}const ia=new WeakMap,sa="__sak";class mu{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(sa,"1"),this.storage.removeItem(sa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ua=(()=>{class v extends mu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oa(){const v=(0,ne.ZQ)();return sc(v)||Si(v)}()&&function $t(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ze(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),F=this.localCache[I];S!==F&&g(I,F,S)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((te,Re,Xe)=>{this.notifyListeners(te,Xe)});const S=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(S);if(g.newValue!==te)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!I)return}const F=()=>{const te=this.storage.getItem(S);!I&&this.localCache[S]===te||this.notifyListeners(S,te)},H=this.storage.getItem(S);!function Oe(){return(0,ne.lT)()&&10===document.documentMode}()||H===g.newValue||g.newValue===g.oldValue?F():setTimeout(F,10)}notifyListeners(g,I){this.localCache[g]=I;const S=this.listeners[g];if(S)for(const F of Array.from(S))F(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var S=()=>super._set,F=this;return(0,d.A)(function*(){yield S().call(F,g,I),F.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,S=this;return(0,d.A)(function*(){const F=yield I().call(S,g);return S.localCache[g]=JSON.stringify(F),F})()}_remove(g){var I=()=>super._remove,S=this;return(0,d.A)(function*(){yield I().call(S,g),delete S.localCache[g]})()}}return v.type="LOCAL",v})(),jt=(()=>{class v extends mu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return v.type="SESSION",v})();let bc=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(F=>F.isListeningto(g));if(I)return I;const S=new v(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,d.A)(function*(){const S=g,{eventId:F,eventType:H,data:te}=S.data,Re=I.handlersMap[H];if(!Re?.size)return;S.ports[0].postMessage({status:"ack",eventId:F,eventType:H});const Xe=Array.from(Re).map(function(){var Ke=(0,d.A)(function*(Kn){return Kn(S.origin,te)});return function(Kn){return Ke.apply(this,arguments)}}()),ct=yield function vp(v){return Promise.all(v.map(function(){var p=(0,d.A)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return p.apply(this,arguments)}}()))}(Xe);S.ports[0].postMessage({status:"done",eventId:F,eventType:H,response:ct})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ki(v="",p=10){let g="";for(let I=0;I<p;I++)g+=Math.floor(10*Math.random());return v+g}class _h{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,I=50){var S=this;return(0,d.A)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let H,te;return new Promise((Re,Xe)=>{const ct=Ki("",20);F.port1.start();const Ke=setTimeout(()=>{Xe(new Error("unsupported_event"))},I);te={messageChannel:F,onMessage(Kn){const as=Kn;if(as.data.eventId===ct)switch(as.data.status){case"ack":clearTimeout(Ke),H=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Re(as.data.response);break;default:clearTimeout(Ke),clearTimeout(H),Xe(new Error("invalid_response"))}}},S.handlers.add(te),F.port1.addEventListener("message",te.onMessage),S.target.postMessage({eventType:p,eventId:ct,data:g},[F.port2])}).finally(()=>{te&&S.removeMessageHandler(te)})})()}}function ar(){return window}function ll(){return typeof ar().WorkerGlobalScope<"u"&&"function"==typeof ar().importScripts}function Ai(){return(Ai=(0,d.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cl="firebaseLocalStorageDb",dl="firebaseLocalStorage",Ep="fbase_key";class yh{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Sc(v,p){return v.transaction([dl],p?"readwrite":"readonly").objectStore(dl)}function Ip(){const v=indexedDB.open(cl,1);return new Promise((p,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(dl,{keyPath:Ep})}catch(S){g(S)}}),v.addEventListener("success",(0,d.A)(function*(){const I=v.result;I.objectStoreNames.contains(dl)?p(I):(I.close(),yield function SE(){const v=indexedDB.deleteDatabase(cl);return new yh(v).toPromise()}(),p(yield Ip()))}))})}function wp(v,p,g){return RE.apply(this,arguments)}function RE(){return(RE=(0,d.A)(function*(v,p,g){const I=Sc(v,!0).put({[Ep]:p,value:g});return new yh(I).toPromise()})).apply(this,arguments)}function PE(){return(PE=(0,d.A)(function*(v,p){const g=Sc(v,!1).get(p),I=yield new yh(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function tD(v,p){const g=Sc(v,!0).delete(p);return new yh(g).toPromise()}const aa=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.A)(function*(){return g.db||(g.db=yield Ip()),g.db})()}_withRetries(g){var I=this;return(0,d.A)(function*(){let S=0;for(;;)try{const F=yield I._openDb();return yield g(F)}catch(F){if(S++>3)throw F;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.A)(function*(){return ll()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.A)(function*(){g.receiver=bc._getInstance(function _u(){return ll()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,d.A)(function*(S,F){return{keyProcessed:(yield g._poll()).includes(F.key)}});return function(S,F){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,d.A)(function*(S,F){return["keyChanged"]});return function(S,F){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.A)(function*(){var I,S;if(g.activeServiceWorker=yield function Ti(){return Ai.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new _h(g.activeServiceWorker);const F=yield g.sender._send("ping",{},800);F&&null!==(I=F[0])&&void 0!==I&&I.fulfilled&&null!==(S=F[0])&&void 0!==S&&S.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,d.A)(function*(){if(I.sender&&I.activeServiceWorker&&function c_(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.A)(function*(){try{if(!indexedDB)return!1;const g=yield Ip();return yield wp(g,sa,"1"),yield tD(g,sa),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,d.A)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var S=this;return(0,d.A)(function*(){return S._withPendingWrite((0,d.A)(function*(){return yield S._withRetries(F=>wp(F,g,I)),S.localCache[g]=I,S.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,d.A)(function*(){const S=yield I._withRetries(F=>function hR(v,p){return PE.apply(this,arguments)}(F,g));return I.localCache[g]=S,S})()}_remove(g){var I=this;return(0,d.A)(function*(){return I._withPendingWrite((0,d.A)(function*(){return yield I._withRetries(S=>tD(S,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.A)(function*(){const I=yield g._withRetries(H=>{const te=Sc(H,!1).getAll();return new yh(te).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const S=[],F=new Set;if(0!==I.length)for(const{fbase_key:H,value:te}of I)F.add(H),JSON.stringify(g.localCache[H])!==JSON.stringify(te)&&(g.notifyListeners(H,te),S.push(H));for(const H of Object.keys(g.localCache))g.localCache[H]&&!F.has(H)&&(g.notifyListeners(H,null),S.push(H));return S})()}notifyListeners(g,I){this.localCache[g]=I;const S=this.listeners[g];if(S)for(const F of Array.from(S))F(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.A)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),vh=1e12;class yR{constructor(p){this.auth=p,this.counter=vh,this._widgets=new Map}render(p,g){const I=this.counter;return this._widgets.set(I,new vR(p,this.auth.name,g||{})),this.counter++,I}reset(p){var g;const I=p||vh;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(p){var g;return(null===(g=this._widgets.get(p||vh))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,d.A)(function*(){var I;return null===(I=g._widgets.get(p||vh))||void 0===I||I.execute(),""})()}}class vR{constructor(p,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;q(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ve(v){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(g.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const jr=go("rcb"),xi=new _e(3e4,6e4);class d_{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=ar().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return q(function Ba(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&rr(ar().grecaptcha)?Promise.resolve(ar().grecaptcha):new Promise((I,S)=>{const F=ar().setTimeout(()=>{S(Ot(p,"network-request-failed"))},xi.get());ar()[jr]=()=>{ar().clearTimeout(F),delete ar()[jr];const te=ar().grecaptcha;if(!te||!rr(te))return void S(Ot(p,"internal-error"));const Re=te.render;te.render=(Xe,ct)=>{const Ke=Re(Xe,ct);return this.counter++,Ke},this.hostLanguage=g,I(te)},th(`${function fp(){return fo.recaptchaV2Script}()}?${(0,ne.Am)({onload:jr,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(F),S(Ot(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=ar().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Tp{load(p){return(0,d.A)(function*(){return new yR(p)})()}clearedOneInstance(){}}const Ap="recaptcha",h_={theme:"light",type:"image"};class Dp{constructor(p,g,I=Object.assign({},h_)){this.parameters=I,this.type=Ap,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(p),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof g?document.getElementById(g):g;q(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Tp:new d_,this.validateStartingState()}verify(){var p=this;return(0,d.A)(function*(){p.assertNotDestroyed();const g=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(g)||new Promise(F=>{const H=te=>{te&&(p.tokenChangeListeners.delete(H),F(te))};p.tokenChangeListeners.add(H),p.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof p)p(g);else if("string"==typeof p){const I=ar()[p];"function"==typeof I&&I(g)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.A)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.A)(function*(){q(yi()&&!ll(),p.auth,"internal-error"),yield function Cp(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function ns(v){return Gi.apply(this,arguments)}(p.auth);q(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Eh{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Qo._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function Ih(){return(Ih=(0,d.A)(function*(v,p,g){if((0,Pe._isFirebaseServerApp)(v.app))return Promise.reject(pt(v));const I=vn(v),S=yield Qi(I,p,(0,ne.Ku)(g));return new Eh(S,F=>hi(I,F))})).apply(this,arguments)}function Rc(){return(Rc=(0,d.A)(function*(v,p,g){const I=(0,ne.Ku)(v);yield dr(!1,I,"phone");const S=yield Qi(I.auth,p,(0,ne.Ku)(g));return new Eh(S,F=>Zo(I,F))})).apply(this,arguments)}function wh(){return(wh=(0,d.A)(function*(v,p,g){const I=(0,ne.Ku)(v);if((0,Pe._isFirebaseServerApp)(I.auth.app))return Promise.reject(pt(I.auth));const S=yield Qi(I.auth,p,(0,ne.Ku)(g));return new Eh(S,F=>vo(I,F))})).apply(this,arguments)}function Qi(v,p,g){return f_.apply(this,arguments)}function f_(){return f_=(0,d.A)(function*(v,p,g){var I;const S=yield g.verify();try{let F;if(q("string"==typeof S,v,"argument-error"),q(g.type===Ap,v,"argument-error"),F="string"==typeof p?{phoneNumber:p}:p,"session"in F){const H=F.session;if("phoneNumber"in F)return q("enroll"===H.type,v,"internal-error"),(yield function Gn(v,p){return nt(v,"POST","/v2/accounts/mfaEnrollment:start",De(v,p))}(v,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{q("signin"===H.type,v,"internal-error");const te=(null===(I=F.multiFactorHint)||void 0===I?void 0:I.uid)||F.multiFactorUid;return q(te,v,"missing-multi-factor-info"),(yield function NE(v,p){return nt(v,"POST","/v2/accounts/mfaSignIn:start",De(v,p))}(v,{mfaPendingCredential:H.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function Oa(v,p){return pc.apply(this,arguments)}(v,{phoneNumber:F.phoneNumber,recaptchaToken:S});return H}}finally{g._reset()}}),f_.apply(this,arguments)}function Pc(){return(Pc=(0,d.A)(function*(v,p){const g=(0,ne.Ku)(v);if((0,Pe._isFirebaseServerApp)(g.auth.app))return Promise.reject(pt(g.auth));yield Hn(g,p)})).apply(this,arguments)}let ua=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=vn(g)}verifyPhoneNumber(g,I){return Qi(this.auth,g,(0,ne.Ku)(I))}static credential(g,I){return Qo._fromVerification(g,I)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:S}=g;return I&&S?Qo._fromTokenResponse(I,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Nr(v,p){return p?Tn(p):(q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Rp extends zo{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Wi(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Wi(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Wi(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function Mc(v){return ys(v.auth,new Rp(v),v.bypassAuthState)}function ss(v){const{auth:p,user:g}=v;return q(g,p,"internal-error"),tn(g,new Rp(v),v.bypassAuthState)}function Nn(v){return xr.apply(this,arguments)}function xr(){return(xr=(0,d.A)(function*(v){const{auth:p,user:g}=v;return q(g,p,"internal-error"),Hn(g,new Rp(v),v.bypassAuthState)})).apply(this,arguments)}class Io{constructor(p,g,I,S,F=!1){this.auth=p,this.resolver=I,this.user=S,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,d.A)(function*(I,S){p.pendingPromise={resolve:I,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(F){p.reject(F)}});return function(I,S){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,d.A)(function*(){const{urlResponse:I,sessionId:S,postBody:F,tenantId:H,error:te,type:Re}=p;if(te)return void g.reject(te);const Xe={auth:g.auth,requestUri:I,sessionId:S,tenantId:H||void 0,postBody:F||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Re)(Xe))}catch(ct){g.reject(ct)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Mc;case"linkViaPopup":case"linkViaRedirect":return Nn;case"reauthViaPopup":case"reauthViaRedirect":return ss;default:Je(this.auth,"internal-error")}}resolve(p){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hl=new _e(2e3,1e4);function Th(){return(Th=(0,d.A)(function*(v,p,g){if((0,Pe._isFirebaseServerApp)(v.app))return Promise.reject(Ot(v,"operation-not-supported-in-this-environment"));const I=vn(v);Jt(v,p,bs);const S=Nr(I,g);return new yu(I,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function Ah(){return(Ah=(0,d.A)(function*(v,p,g){const I=(0,ne.Ku)(v);if((0,Pe._isFirebaseServerApp)(I.auth.app))return Promise.reject(Ot(I.auth,"operation-not-supported-in-this-environment"));Jt(I.auth,p,bs);const S=Nr(I.auth,g);return new yu(I.auth,"reauthViaPopup",p,S,I).executeNotNull()})).apply(this,arguments)}function Nc(){return(Nc=(0,d.A)(function*(v,p,g){const I=(0,ne.Ku)(v);Jt(I.auth,p,bs);const S=Nr(I.auth,g);return new yu(I.auth,"linkViaPopup",p,S,I).executeNotNull()})).apply(this,arguments)}let yu=(()=>{class v extends Io{constructor(g,I,S,F,H){super(g,I,F,H),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.A)(function*(){const I=yield g.execute();return q(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,d.A)(function*(){fn(1===g.filter.length,"Popup operations only handle one event");const I=Ki();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(Ot(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,S;this.pollId=null!==(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ot(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,hl.get())};g()}}return v.currentPopupAction=null,v})();const qn="pendingRedirect",vu=new Map;class la extends Io{constructor(p,g,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,d.A)(function*(){let I=vu.get(g.auth._key());if(!I){try{const F=(yield function Kt(v,p){return ja.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;I=()=>Promise.resolve(F)}catch(S){I=()=>Promise.reject(S)}vu.set(g.auth._key(),I)}return g.bypassAuthState||vu.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,I=this;return(0,d.A)(function*(){if("signInViaRedirect"===p.type)return g().call(I,p);if("unknown"!==p.type){if(p.eventId){const S=yield I.auth._redirectUserForId(p.eventId);if(S)return I.user=S,g().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.A)(function*(){})()}cleanUp(){}}function ja(){return(ja=(0,d.A)(function*(v,p){const g=Eu(p),I=Mp(v);if(!(yield I._isAvailable()))return!1;const S="true"===(yield I._get(g));return yield I._remove(g),S})).apply(this,arguments)}function p_(v,p){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.A)(function*(v,p){return Mp(v)._set(Eu(p),"true")})).apply(this,arguments)}function Pp(v,p){vu.set(v._key(),p)}function Mp(v){return Tn(v._redirectPersistence)}function Eu(v){return kt(qn,v.config.apiKey,v.name)}function kE(v,p,g){return function g_(v,p,g){return Np.apply(this,arguments)}(v,p,g)}function Np(){return(Np=(0,d.A)(function*(v,p,g){if((0,Pe._isFirebaseServerApp)(v.app))return Promise.reject(pt(v));const I=vn(v);Jt(v,p,bs),yield I._initializationPromise;const S=Nr(I,g);return yield p_(S,I),S._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function Iu(v,p,g){return function cn(v,p,g){return Se.apply(this,arguments)}(v,p,g)}function Se(){return(Se=(0,d.A)(function*(v,p,g){const I=(0,ne.Ku)(v);if(Jt(I.auth,p,bs),(0,Pe._isFirebaseServerApp)(I.auth.app))return Promise.reject(pt(I.auth));yield I.auth._initializationPromise;const S=Nr(I.auth,g);yield p_(S,I.auth);const F=yield wu(I);return S._openRedirect(I.auth,p,"reauthViaRedirect",F)})).apply(this,arguments)}function En(v,p,g){return function xp(v,p,g){return xc.apply(this,arguments)}(v,p,g)}function xc(){return(xc=(0,d.A)(function*(v,p,g){const I=(0,ne.Ku)(v);Jt(I.auth,p,bs),yield I.auth._initializationPromise;const S=Nr(I.auth,g);yield dr(!1,I,p.providerId),yield p_(S,I.auth);const F=yield wu(I);return S._openRedirect(I.auth,p,"linkViaRedirect",F)})).apply(this,arguments)}function Ch(){return(Ch=(0,d.A)(function*(v,p){return yield vn(v)._initializationPromise,ca(v,p,!1)})).apply(this,arguments)}function ca(v,p){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,d.A)(function*(v,p,g=!1){if((0,Pe._isFirebaseServerApp)(v.app))return Promise.reject(pt(v));const I=vn(v),S=Nr(I,p),H=yield new la(I,S,g).execute();return H&&!g&&(delete H.user._redirectEventId,yield I._persistUserIfCurrent(H.user),yield I._setRedirectUser(null,p)),H})).apply(this,arguments)}function wu(v){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,d.A)(function*(v){const p=Ki(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class fl{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(g=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function To(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fi(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var I;if(p.error&&!fi(p)){const S=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(Ot(this.auth,S))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const I=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Op(p))}saveEventToCache(p){this.cachedEventUids.add(Op(p)),this.lastProcessedEventTime=Date.now()}}function Op(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function fi({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function kp(v){return ki.apply(this,arguments)}function ki(){return(ki=(0,d.A)(function*(v,p={}){return nt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const ti=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nD=/^https?/;function pl(){return(pl=(0,d.A)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield kp(v);for(const g of p)try{if(Fp(g))return}catch{}Je(v,"unauthorized-domain")})).apply(this,arguments)}function Fp(v){const p=nr(),{protocol:g,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const H=new URL(v);return""===H.hostname&&""===I?"chrome-extension:"===g&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&H.hostname===I}if(!nD.test(g))return!1;if(ti.test(v))return I===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const bh=new _e(3e4,6e4);function $r(){const v=ar().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Ps=null;const Ms=new _e(5e3,15e3),gl="__/auth/iframe",Vp="emulator/auth/iframe",__={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},da=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ml(v){const p=v.config;q(p.authDomain,v,"auth-domain-config-required");const g=p.emulator?we(p,Vp):`https://${v.config.authDomain}/${gl}`,I={apiKey:p.apiKey,appName:v.name,v:Pe.SDK_VERSION},S=da.get(v.config.apiHost);S&&(I.eid=S);const F=v._getFrameworks();return F.length&&(I.fw=F.join(",")),`${g}?${(0,ne.Am)(I).slice(1)}`}function $a(){return $a=(0,d.A)(function*(v){const p=yield function Sh(v){return Ps=Ps||function Hr(v){return new Promise((p,g)=>{var I,S,F;function H(){$r(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{$r(),g(Ot(v,"network-request-failed"))},timeout:bh.get()})}if(null!==(S=null===(I=ar().gapi)||void 0===I?void 0:I.iframes)&&void 0!==S&&S.Iframe)p(gapi.iframes.getContext());else{if(null===(F=ar().gapi)||void 0===F||!F.load){const te=go("iframefcb");return ar()[te]=()=>{gapi.load?H():g(Ot(v,"network-request-failed"))},th(`${function ou(){return fo.gapiScript}()}?onload=${te}`).catch(Re=>g(Re))}H()}}).catch(p=>{throw Ps=null,p})}(v),Ps}(v),g=ar().gapi;return q(g,v,"internal-error"),p.open({where:document.body,url:ml(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:__,dontclear:!0},I=>new Promise(function(){var S=(0,d.A)(function*(F,H){yield I.restyle({setHideOnLeave:!1});const te=Ot(v,"network-request-failed"),Re=ar().setTimeout(()=>{H(te)},Ms.get());function Xe(){ar().clearTimeout(Re),F(I)}I.ping(Xe).then(Xe,()=>{H(te)})});return function(F,H){return S.apply(this,arguments)}}()))}),$a.apply(this,arguments)}const Fi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rh{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const dn="__/auth/handler",ha="emulator/auth/handler",Do=encodeURIComponent("fac");function Ha(v,p,g,I,S,F){return _l.apply(this,arguments)}function _l(){return(_l=(0,d.A)(function*(v,p,g,I,S,F){q(v.config.authDomain,v,"auth-domain-config-required"),q(v.config.apiKey,v,"invalid-api-key");const H={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:I,v:Pe.SDK_VERSION,eventId:S};if(p instanceof bs){p.setDefaultLanguage(v.languageCode),H.providerId=p.providerId||"",(0,ne.Im)(p.getCustomParameters())||(H.customParameters=JSON.stringify(p.getCustomParameters()));for(const[ct,Ke]of Object.entries(F||{}))H[ct]=Ke}if(p instanceof Yr){const ct=p.getScopes().filter(Ke=>""!==Ke);ct.length>0&&(H.scopes=ct.join(","))}v.tenantId&&(H.tid=v.tenantId);const te=H;for(const ct of Object.keys(te))void 0===te[ct]&&delete te[ct];const Re=yield v._getAppCheckToken(),Xe=Re?`#${Do}=${encodeURIComponent(Re)}`:"";return`${function Ph({config:v}){return v.emulator?we(v,ha):`https://${v.authDomain}/${dn}`}(v)}?${(0,ne.Am)(te).slice(1)}${Xe}`})).apply(this,arguments)}const Xi="webStorageSupport",Mh=class kc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jt,this._completeRedirectFn=ca,this._overrideRedirectResult=Pp}_openPopup(p,g,I,S){var F=this;return(0,d.A)(function*(){var H;fn(null===(H=F.eventManagers[p._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const te=yield Ha(p,g,I,nr(),S);return function LE(v,p,g,I=500,S=600){const F=Math.max((window.screen.availHeight-S)/2,0).toString(),H=Math.max((window.screen.availWidth-I)/2,0).toString();let te="";const Re=Object.assign(Object.assign({},Fi),{width:I.toString(),height:S.toString(),top:F,left:H}),Xe=(0,ne.ZQ)().toLowerCase();g&&(te=eh(Xe)?"_blank":g),Sa(Xe)&&(p=p||"http://localhost",Re.scrollbars="yes");const ct=Object.entries(Re).reduce((Kn,[as,Su])=>`${Kn}${as}=${Su},`,"");if(function oe(v=(0,ne.ZQ)()){var p;return Si(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Xe)&&"_self"!==te)return function y_(v,p){const g=document.createElement("a");g.href=v,g.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(p||"",te),new Rh(null);const Ke=window.open(p||"",te,ct);q(Ke,v,"popup-blocked");try{Ke.focus()}catch{}return new Rh(Ke)}(p,te,Ki())})()}_openRedirect(p,g,I,S){var F=this;return(0,d.A)(function*(){return yield F._originValidation(p),function Mr(v){ar().location.href=v}(yield Ha(p,g,I,nr(),S)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:S,promise:F}=this.eventManagers[g];return S?Promise.resolve(S):(fn(F,"If manager is not set, promise should be"),F)}const I=this.initAndGetManager(p);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(p){var g=this;return(0,d.A)(function*(){const I=yield function pi(v){return $a.apply(this,arguments)}(p),S=new fl(p);return I.register("authEvent",F=>(q(F?.authEvent,p,"invalid-auth-event"),{status:S.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:S},g.iframes[p._key()]=I,S})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(Xi,{type:Xi},S=>{var F;const H=null===(F=S?.[0])||void 0===F?void 0:F[Xi];void 0!==H&&g(!!H),Je(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function m_(v){return pl.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ze()||sc()||Si()}};class Nh{constructor(p){this.factorId=p}_process(p,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,I);case"signin":return this._finalizeSignIn(p,g.credential);default:return tt("unexpected MultiFactorSessionType")}}}class Co extends Nh{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Co(p)}_finalizeEnroll(p,g,I){return function Br(v,p){return nt(v,"POST","/v2/accounts/mfaEnrollment:finalize",De(v,p))}(p,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function gR(v,p){return nt(v,"POST","/v2/accounts/mfaSignIn:finalize",De(v,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yl=(()=>{class v{constructor(){}static assertion(g){return Co._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var v_="@firebase/auth";class UE{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,d.A)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(I=>{p(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);g&&(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bo(){return window}(0,ne.XA)("authIdTokenMaxAge"),function po(v){fo=v}({loadJS:v=>new Promise((p,g)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=S=>{const F=Ot("internal-error");F.customData=S,g(F)},I.type="text/javascript",I.charset="UTF-8",function Uc(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Ga(v){(0,Pe._registerComponent)(new Be.uA("auth",(p,{options:g})=>{const I=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),F=p.getProvider("app-check-internal"),{apiKey:H,authDomain:te}=I.options;q(H&&!H.includes(":"),"invalid-api-key",{appName:I.name});const Re={apiKey:H,authDomain:te,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gt(v)},Xe=new tl(I,S,F,Re);return function rh(v,p){const g=p?.persistence||[],I=(Array.isArray(g)?g:[g]).map(Tn);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,p?.popupRedirectResolver)}(Xe,g),Xe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,I)=>{p.getProvider("auth-internal").initialize()})),(0,Pe._registerComponent)(new Be.uA("auth-internal",p=>{const g=vn(p.getProvider("auth").getImmediate());return new UE(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Pe.registerVersion)(v_,"1.7.3",function Up(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(v)),(0,Pe.registerVersion)(v_,"1.7.3","esm2017")}("Browser");function Vi(){return Vi=(0,d.A)(function*(v,p,g){var I;const{BuildInfo:S}=bo();fn(p.sessionId,"AuthEvent did not contain a session ID");const F=yield function w_(v){return Lh.apply(this,arguments)}(p.sessionId),H={};return Si()?H.ibi=S.packageName:In()?H.apn=S.packageName:Je(v,"operation-not-supported-in-this-environment"),S.displayName&&(H.appDisplayName=S.displayName),H.sessionId=F,Ha(v,g,p.type,void 0,null!==(I=p.eventId)&&void 0!==I?I:void 0,H)}),Vi.apply(this,arguments)}function pa(){return(pa=(0,d.A)(function*(v){const{BuildInfo:p}=bo(),g={};Si()?g.iosBundleId=p.packageName:In()?g.androidPackageName=p.packageName:Je(v,"operation-not-supported-in-this-environment"),yield kp(v,g)})).apply(this,arguments)}function ga(){return(ga=(0,d.A)(function*(v,p,g){const{cordova:I}=bo();let S=()=>{};try{yield new Promise((F,H)=>{let te=null;function Re(){var Ke;F();const Kn=null===(Ke=I.plugins.browsertab)||void 0===Ke?void 0:Ke.close;"function"==typeof Kn&&Kn(),"function"==typeof g?.close&&g.close()}function Xe(){te||(te=window.setTimeout(()=>{H(Ot(v,"redirect-cancelled-by-user"))},2e3))}function ct(){"visible"===document?.visibilityState&&Xe()}p.addPassiveListener(Re),document.addEventListener("resume",Xe,!1),In()&&document.addEventListener("visibilitychange",ct,!1),S=()=>{p.removePassiveListener(Re),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",ct,!1),te&&window.clearTimeout(te)}})}finally{S()}})).apply(this,arguments)}function Lh(){return(Lh=(0,d.A)(function*(v){const p=function T_(v){if(fn(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),g=new Uint8Array(p);for(let I=0;I<v.length;I++)g[I]=v.charCodeAt(I);return g}(v),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Uh extends fl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.A)(function*(){yield p.initPromise})()}}function za(v){return $p.apply(this,arguments)}function $p(){return($p=(0,d.A)(function*(v){const p=yield qa()._get(ma(v));return p&&(yield qa()._remove(ma(v))),p})).apply(this,arguments)}function C_(){const v=[];for(let g=0;g<20;g++){const I=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return v.join("")}function qa(){return Tn(Ua)}function ma(v){return kt("authEvent",v.config.apiKey,v.name)}function So(v){if(!v?.includes("?"))return{};const[p,...g]=v.split("?");return(0,ne.I9)(g.join("?"))}const Gp=class b_{constructor(){this._redirectPersistence=jt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ca,this._overrideRedirectResult=Pp}_initialize(p){var g=this;return(0,d.A)(function*(){const I=p._key();let S=g.eventManagers.get(I);return S||(S=new Uh(p),g.eventManagers.set(I,S),g.attachCallbackListeners(p,S)),S})()}_openPopup(p){Je(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,I,S){var F=this;return(0,d.A)(function*(){!function Vh(v){var p,g,I,S,F,H,te,Re,Xe,ct;const Ke=bo();q("function"==typeof(null===(p=Ke?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(g=Ke?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(F=null===(S=null===(I=Ke?.cordova)||void 0===I?void 0:I.plugins)||void 0===S?void 0:S.browsertab)||void 0===F?void 0:F.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(Re=null===(te=null===(H=Ke?.cordova)||void 0===H?void 0:H.plugins)||void 0===te?void 0:te.browsertab)||void 0===Re?void 0:Re.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(ct=null===(Xe=Ke?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===ct?void 0:ct.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const H=yield F._initialize(p);yield H.initialized(),H.resetRedirect(),function Ss(){vu.clear()}(),yield F._originValidation(p);const te=function BE(v,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:C_(),postBody:null,tenantId:v.tenantId,error:Ot(v,"no-auth-event")}}(p,I,S);yield function Bh(v,p){return qa()._set(ma(v),p)}(p,te);const Re=yield function kh(v,p,g){return Vi.apply(this,arguments)}(p,te,g),Xe=yield function jp(v){const{cordova:p}=bo();return new Promise(g=>{p.plugins.browsertab.isAvailable(I=>{let S=null;I?p.plugins.browsertab.openUrl(v):S=p.InAppBrowser.open(v,function ge(v=(0,ne.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(S)})})}(Re);return function Fh(v,p,g){return ga.apply(this,arguments)}(p,H,Xe)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function I_(v){return pa.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:I,handleOpenURL:S,BuildInfo:F}=bo(),H=setTimeout((0,d.A)(function*(){yield za(p),g.onEvent(Wa())}),500),te=function(){var ct=(0,d.A)(function*(Ke){clearTimeout(H);const Kn=yield za(p);let as=null;Kn&&Ke?.url&&(as=function D_(v,p){var g,I;const S=function jE(v){const p=So(v),g=p.link?decodeURIComponent(p.link):void 0,I=So(g).link,S=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return So(S).link||S||I||g||v}(p);if(S.includes("/__/auth/callback")){const F=So(S),H=F.firebaseError?function Gr(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(F.firebaseError)):null,te=null===(I=null===(g=H?.code)||void 0===g?void 0:g.split("auth/"))||void 0===I?void 0:I[1],Re=te?Ot(te):null;return Re?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(Kn,Ke.url)),g.onEvent(as||Wa())});return function(Kn){return ct.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,te);const Re=S,Xe=`${F.packageName.toLowerCase()}://`;bo().handleOpenURL=function(){var ct=(0,d.A)(function*(Ke){if(Ke.toLowerCase().startsWith(Xe)&&te({url:Ke}),"function"==typeof Re)try{Re(Ke)}catch(Kn){console.error(Kn)}});return function(Ke){return ct.apply(this,arguments)}}()}};function Wa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ot("no-auth-event")}}function El(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function S_(v=(0,ne.ZQ)()){return!("file:"!==El()&&"ionic:"!==El()&&"capacitor:"!==El()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function M_(){try{const v=self.localStorage,p=Ki();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Il(v=(0,ne.ZQ)()){return function R_(){return(0,ne.lT)()&&11===document?.documentMode}()||function P_(v=(0,ne.ZQ)()){return/Edge\/\d+/.test(v)}(v)}()||(0,ne.zW)()}catch{return $c()&&(0,ne.zW)()}return!1}function $c(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function N_(){return(function Hh(){return"http:"===El()||"https:"===El()}()||(0,ne.sr)()||S_())&&!function $E(){return(0,ne.lV)()||(0,ne.Ll)()}()&&M_()&&!$c()}function Gh(){return S_()&&typeof document<"u"}function ni(){return(ni=(0,d.A)(function*(){return!!Gh()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const yr={LOCAL:"local",NONE:"none",SESSION:"session"},Tu=q,Ns="persistence";function Au(v){return Is.apply(this,arguments)}function Is(){return(Is=(0,d.A)(function*(v){yield v._initializationPromise;const p=Hc(),g=kt(Ns,v.config.apiKey,v.name);p&&p.setItem(g,v._getPersistence())})).apply(this,arguments)}function Hc(){var v;try{return(null===(v=function Dn(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const qp=q;class Du{constructor(){this.browserResolver=Tn(Mh),this.cordovaResolver=Tn(Gp),this.underlyingResolver=null,this._redirectPersistence=jt,this._completeRedirectFn=ca,this._overrideRedirectResult=Pp}_initialize(p){var g=this;return(0,d.A)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,I,S){var F=this;return(0,d.A)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(p,g,I,S)})()}_openRedirect(p,g,I,S){var F=this;return(0,d.A)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(p,g,I,S)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Gh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.A)(function*(){if(p.underlyingResolver)return;const g=yield function zp(){return ni.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function HE(v){return v.unwrap()}function iD(v){return x_(v)}function x_(v){const{_tokenResponse:p}=v instanceof ne.g?v.customData:v;if(!p)return null;if(!(v instanceof ne.g)&&"temporaryProof"in p&&"phoneNumber"in p)return ua.credentialFromResult(v);const g=p.providerId;if(!g||g===mt.PASSWORD)return null;let I;switch(g){case mt.GOOGLE:I=ah;break;case mt.FACEBOOK:I=Yo;break;case mt.GITHUB:I=sl;break;case mt.TWITTER:I=k;break;default:const{oauthIdToken:S,oauthAccessToken:F,oauthTokenSecret:H,pendingToken:te,nonce:Re}=p;return F||H||S||te?te?g.startsWith("saml.")?T._create(g,te):Pi._fromParams({providerId:g,signInMethod:g,pendingToken:te,idToken:S,accessToken:F}):new pn(g).credential({idToken:S,accessToken:F,rawNonce:Re}):null}return v instanceof ne.g?I.credentialFromError(v):I.credentialFromResult(v)}function ri(v,p){return p.catch(g=>{throw g instanceof ne.g&&function sD(v,p){var g;const I=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new GE(v,function na(v,p){var g;const I=(0,ne.Ku)(v),S=p;return q(p.customData.operationType,I,"argument-error"),q(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),Ni._fromError(I,S)}(v,p));else if(I){const S=x_(p),F=p;S&&(F.credential=S,F.tenantId=I.tenantId||void 0,F.email=I.email||void 0,F.phoneNumber=I.phoneNumber||void 0)}}(v,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:iD(g),additionalUserInfo:wc(g),user:xs.getOrCreate(S)}})}function Cu(v,p){return zh.apply(this,arguments)}function zh(){return(zh=(0,d.A)(function*(v,p){const g=yield p;return{verificationId:g.verificationId,confirm:I=>ri(v,g.confirm(I))}})).apply(this,arguments)}class GE{constructor(p,g){this.resolver=g,this.auth=function rD(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ri(HE(this.auth),this.resolver.resolveSignIn(p))}}class xs{constructor(p){this._delegate=p,this.multiFactor=function _r(v){const p=(0,ne.Ku)(v);return ia.has(p)||ia.set(p,al._fromUser(p)),ia.get(p)}(p)}static getOrCreate(p){return xs.USER_MAP.has(p)||xs.USER_MAP.set(p,new xs(p)),xs.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,d.A)(function*(){return ri(g.auth,Zo(g._delegate,p))})()}linkWithPhoneNumber(p,g){var I=this;return(0,d.A)(function*(){return Cu(I.auth,function Qs(v,p,g){return Rc.apply(this,arguments)}(I._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,d.A)(function*(){return ri(g.auth,function Dh(v,p,g){return Nc.apply(this,arguments)}(g._delegate,p,Du))})()}linkWithRedirect(p){var g=this;return(0,d.A)(function*(){return yield Au(vn(g.auth)),En(g._delegate,p,Du)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,d.A)(function*(){return ri(g.auth,vo(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return Cu(this.auth,function Sp(v,p,g){return wh.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return ri(this.auth,function OE(v,p,g){return Ah.apply(this,arguments)}(this._delegate,p,Du))}reauthenticateWithRedirect(p){var g=this;return(0,d.A)(function*(){return yield Au(vn(g.auth)),Iu(g._delegate,p,Du)})()}sendEmailVerification(p){return function Ec(v,p){return fh.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,d.A)(function*(){return yield function Mt(v,p){return Dt.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function eD(v,p){const g=(0,ne.Ku)(v);return(0,Pe._isFirebaseServerApp)(g.auth.app)?Promise.reject(pt(g.auth)):gu(g,p,null)}(this._delegate,p)}updatePassword(p){return function o_(v,p){return gu((0,ne.Ku)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function zn(v,p){return Pc.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function ZA(v,p){return s_.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function JA(v,p,g){return i_.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xs.USER_MAP=new WeakMap;const Li=q;let qh=(()=>{class v{constructor(g,I){if(this.app=g,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Li(S,"invalid-api-key",{appName:g.name}),Li(S,"invalid-api-key",{appName:g.name});const F=typeof window<"u"?Du:void 0;this._delegate=I.initialize({options:{persistence:Gc(S,g.name),popupRedirectResolver:F}}),this._delegate._updateErrorMap(Zt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,I){!function t_(v,p,g){const I=vn(v);q(I._canInitEmulator,I,"emulator-config-failed"),q(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const S=!!g?.disableWarnings,F=ih(p),{host:H,port:te}=function nl(v){const p=ih(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const F=S[1];return{host:F,port:_n(I.substr(F.length+1))}}{const[F,H]=I.split(":");return{host:F,port:_n(H)}}}(p);I.config.emulator={url:`${F}//${H}${null===te?"":`:${te}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:H,port:te,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function uc(){function v(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,I)}applyActionCode(g){return function Eo(v,p){return Zr.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return La(this._delegate,g)}confirmPasswordReset(g,I){return function r_(v,p,g){return gr.apply(this,arguments)}(this._delegate,g,I)}createUserWithEmailAndPassword(g,I){var S=this;return(0,d.A)(function*(){return ri(S._delegate,function YA(v,p,g){return ch.apply(this,arguments)}(S._delegate,g,I))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function hh(v,p){return vs.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function IE(v,p){const g=Xo.parseLink(p);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,d.A)(function*(){Li(N_(),g._delegate,"operation-not-supported-in-this-environment");const I=yield function kn(v,p){return Ch.apply(this,arguments)}(g._delegate,Du);return I?ri(g._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Bc(v,p){vn(v)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,I,S){const{next:F,error:H,complete:te}=Wp(g,I,S);return this._delegate.onAuthStateChanged(F,H,te)}onIdTokenChanged(g,I,S){const{next:F,error:H,complete:te}=Wp(g,I,S);return this._delegate.onIdTokenChanged(F,H,te)}sendSignInLinkToEmail(g,I){return function EE(v,p,g){return ta.apply(this,arguments)}(this._delegate,g,I)}sendPasswordResetEmail(g,I){return function Bn(v,p,g){return yc.apply(this,arguments)}(this._delegate,g,I||void 0)}setPersistence(g){var I=this;return(0,d.A)(function*(){let S;switch(function Vr(v,p){Tu(Object.values(yr).includes(p),v,"invalid-persistence-type"),(0,ne.lV)()?Tu(p!==yr.SESSION,v,"unsupported-persistence-type"):(0,ne.Ll)()?Tu(p===yr.NONE,v,"unsupported-persistence-type"):$c()?Tu(p===yr.NONE||p===yr.LOCAL&&(0,ne.zW)(),v,"unsupported-persistence-type"):Tu(p===yr.NONE||M_(),v,"unsupported-persistence-type")}(I._delegate,g),g){case yr.SESSION:S=jt;break;case yr.LOCAL:S=(yield Tn(aa)._isAvailable())?aa:Ua;break;case yr.NONE:S=Fr;break;default:return Je("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ri(this._delegate,function Te(v){return at.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ri(this._delegate,hi(this._delegate,g))}signInWithCustomToken(g){return ri(this._delegate,function yt(v,p){return He.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,I){return ri(this._delegate,function vE(v,p,g){return(0,Pe._isFirebaseServerApp)(v.app)?Promise.reject(pt(v)):hi((0,ne.Ku)(v),Fa.credential(p,g)).catch(function(){var I=(0,d.A)(function*(S){throw"auth/password-does-not-meet-requirements"===S.code&&wi(v),S});return function(S){return I.apply(this,arguments)}}())}(this._delegate,g,I))}signInWithEmailLink(g,I){return ri(this._delegate,function gp(v,p,g){return vc.apply(this,arguments)}(this._delegate,g,I))}signInWithPhoneNumber(g,I){return Cu(this._delegate,function bp(v,p,g){return Ih.apply(this,arguments)}(this._delegate,g,I))}signInWithPopup(g){var I=this;return(0,d.A)(function*(){return Li(N_(),I._delegate,"operation-not-supported-in-this-environment"),ri(I._delegate,function wo(v,p,g){return Th.apply(this,arguments)}(I._delegate,g,Du))})()}signInWithRedirect(g){var I=this;return(0,d.A)(function*(){return Li(N_(),I._delegate,"operation-not-supported-in-this-environment"),yield Au(I._delegate),kE(I._delegate,g,Du)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function dR(v,p){return lh.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=yr,v})();function Wp(v,p,g){let I=v;"function"!=typeof v&&({next:I,error:p,complete:g}=v);const S=I;return{next:H=>S(H&&xs.getOrCreate(H)),error:p,complete:g}}function Gc(v,p){const g=function wl(v,p){const g=Hc();if(!g)return[];const I=kt(Ns,v,p);switch(g.getItem(I)){case yr.NONE:return[Fr];case yr.LOCAL:return[aa,jt];case yr.SESSION:return[jt];default:return[]}}(v,p);if(typeof self<"u"&&!g.includes(aa)&&g.push(aa),typeof window<"u")for(const I of[Ua,jt])g.includes(I)||g.push(I);return g.includes(Fr)||g.push(Fr),g}class bu{constructor(){this.providerId="phone",this._delegate=new ua(HE(Ce.A.auth()))}static credential(p,g){return ua.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}bu.PHONE_SIGN_IN_METHOD=ua.PHONE_SIGN_IN_METHOD,bu.PROVIDER_ID=ua.PROVIDER_ID;const Kp=q;class Wh{constructor(p,g,I=Ce.A.app()){var S;Kp(null===(S=I.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new Dp(I.auth(),p,g),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function os(v){v.INTERNAL.registerComponent(new Be.uA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),I=p.getProvider("auth");return new qh(g,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fa,FacebookAuthProvider:Yo,GithubAuthProvider:sl,GoogleAuthProvider:ah,OAuthProvider:pn,SAMLAuthProvider:P,PhoneAuthProvider:bu,PhoneMultiFactorGenerator:yl,RecaptchaVerifier:Wh,TwitterAuthProvider:k,Auth:qh,AuthCredential:zo,Error:ne.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.5.8")}(Ce.A)},467:(Ln,At,ye)=>{function d(Pe,ne,et,Tt,Be,an,mt){try{var ae=Pe[an](mt),re=ae.value}catch(Ne){return void et(Ne)}ae.done?ne(re):Promise.resolve(re).then(Tt,Be)}function Ce(Pe){return function(){var ne=this,et=arguments;return new Promise(function(Tt,Be){var an=Pe.apply(ne,et);function mt(re){d(an,Tt,Be,mt,ae,"next",re)}function ae(re){d(an,Tt,Be,mt,ae,"throw",re)}mt(void 0)})}}ye.d(At,{A:()=>Ce})},635:(Ln,At,ye)=>{function ne(_e,we){var ke={};for(var xe in _e)Object.prototype.hasOwnProperty.call(_e,xe)&&we.indexOf(xe)<0&&(ke[xe]=_e[xe]);if(null!=_e&&"function"==typeof Object.getOwnPropertySymbols){var ze=0;for(xe=Object.getOwnPropertySymbols(_e);ze<xe.length;ze++)we.indexOf(xe[ze])<0&&Object.prototype.propertyIsEnumerable.call(_e,xe[ze])&&(ke[xe[ze]]=_e[xe[ze]])}return ke}function Ne(_e,we,ke,xe){return new(ke||(ke=Promise))(function(De,nt){function mn(Ut){try{Vt(xe.next(Ut))}catch(sr){nt(sr)}}function Dr(Ut){try{Vt(xe.throw(Ut))}catch(sr){nt(sr)}}function Vt(Ut){Ut.done?De(Ut.value):function ze(De){return De instanceof ke?De:new ke(function(nt){nt(De)})}(Ut.value).then(mn,Dr)}Vt((xe=xe.apply(_e,we||[])).next())})}function Yt(_e){return this instanceof Yt?(this.v=_e,this):new Yt(_e)}function Je(_e,we,ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,xe=ke.apply(_e,we||[]),De=[];return ze={},nt("next"),nt("throw"),nt("return"),ze[Symbol.asyncIterator]=function(){return this},ze;function nt(Vn){xe[Vn]&&(ze[Vn]=function(kr){return new Promise(function(Hi,or){De.push([Vn,kr,Hi,or])>1||mn(Vn,kr)})})}function mn(Vn,kr){try{!function Dr(Vn){Vn.value instanceof Yt?Promise.resolve(Vn.value.v).then(Vt,Ut):sr(De[0][2],Vn)}(xe[Vn](kr))}catch(Hi){sr(De[0][3],Hi)}}function Vt(Vn){mn("next",Vn)}function Ut(Vn){mn("throw",Vn)}function sr(Vn,kr){Vn(kr),De.shift(),De.length&&mn(De[0][0],De[0][1])}}function Pn(_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,we=_e[Symbol.asyncIterator];return we?we.call(_e):(_e=function un(_e){var we="function"==typeof Symbol&&Symbol.iterator,ke=we&&_e[we],xe=0;if(ke)return ke.call(_e);if(_e&&"number"==typeof _e.length)return{next:function(){return _e&&xe>=_e.length&&(_e=void 0),{value:_e&&_e[xe++],done:!_e}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(_e),ke={},xe("next"),xe("throw"),xe("return"),ke[Symbol.asyncIterator]=function(){return this},ke);function xe(De){ke[De]=_e[De]&&function(nt){return new Promise(function(mn,Dr){!function ze(De,nt,mn,Dr){Promise.resolve(Dr).then(function(Vt){De({value:Vt,done:mn})},nt)}(mn,Dr,(nt=_e[De](nt)).done,nt.value)})}}}ye.d(At,{AQ:()=>Je,N3:()=>Yt,Tt:()=>ne,sH:()=>Ne,xN:()=>Pn}),"function"==typeof SuppressedError&&SuppressedError}},Ln=>{Ln(Ln.s=453)}]);